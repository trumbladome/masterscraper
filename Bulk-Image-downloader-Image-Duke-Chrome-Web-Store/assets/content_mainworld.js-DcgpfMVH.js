const RULES={"[Google_Images]":{link:"^(?:(google\\.\\S+/imgres\\?\\S*imgurl=.+)|gi_redirect/\\?.+)",url:"data:,$&",res:function(e){var a;const t=this.node;return t.IMGS_fallback_zoom=null,e[1]=e[1]?"https://"+e[1]:(a=t.closest("a"))==null?void 0:a.href,new URL(e[1]).searchParams.get("imgurl")},img:"^(data:image|encrypted-tbn\\d\\.gstatic\\.com/images).+",loop:2,to:function(){var t,a,n,l,m,c,v;var e=arguments;if(/^(?:www\.)?google\./.test(new URL(document.URL).hostname)){if(/\/search\?\S*tbm=isch/.test(document.URL)||/\/imgres\?imgurl=/.test(document.URL)||/\/search\?\S*(?:imgrc|vhid)=/.test(document.URL)){const w=document.querySelector('a:hover[role="button"]');if(w)return w.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),w.href}if(/\/search\?\S*udm=2/.test(document.URL)&&document.querySelector('div:hover[role="button"]'))return"//gi_redirect/?"+e[0];if(/\/search\?/.test(document.URL)){let w=function(j,R){if(typeof(j==null?void 0:j[1])=="string"&&j[1]===R)return j;for(let M of Object.values(j))if(M&&typeof M=="object"&&(M=w(M,R),M))return M},b=function(){const j=document.createElement("script");j.textContent='sessionStorage.setItem("W_jd", JSON.stringify(window.W_jd)); document.currentScript.remove();',document.head.appendChild(j);const R=sessionStorage.getItem("W_jd");return sessionStorage.removeItem("W_jd"),JSON.parse(R)},k,S=(t=this.node.parentNode)==null?void 0:t.parentNode;if(k=(S==null?void 0:S.getAttribute("data-docid"))||((l=(n=(a=S==null?void 0:S.parentNode)==null?void 0:a.parentNode)==null?void 0:n.parentNode)==null?void 0:l.getAttribute("data-docid"))){const j=Object.values(JSON.parse(document.body.outerHTML.match(/var m=({.+?});/)[1]));return((c=(m=j.find(R=>{var M,P;return Array.isArray((M=R[1])==null?void 0:M[0])&&((P=R[1][0])==null?void 0:P.find(L=>L[1]===k))}))==null?void 0:m[1][0].find(R=>R[1]===k))==null?void 0:c[3][0])||((v=j.find(R=>{var M;return((M=R[1])==null?void 0:M[1])===k}))==null?void 0:v[1][3][0])||""}const G=document.querySelector("div:hover[data-docid]");if(G)return w(b(),G.dataset.docid)[3][0]}}return e[0]}},"[data:image]":{link:"(^data:image.+)",img:"(^data:image.+)",to:"$1"},"[HLS_Player]":{link:"^[^?]+\\.(m3u8|mpd)",loop:1,url:"data:,$0",res:function(e){return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${e[0]}"></imagus-extension>Video`],"imagus://extension"},to:`64h
http://forum.ru-board.com/topic.cgi?forum=5&topic=50874&start=1484&limit=1&m=3#1`},"[Audio Formats]":{link:"\\.(?:aac|ac3|amr|ape|flac|m4a|opus|ra|wav|wma)(?:[?&]|$)",to:"$&#mp3"},"[Extension]":{link:"^imagus:\\/\\/extension",loop:1,url:function(){return"data:,"+this.TRG.IMGS_c_resolved.URL},res:function(e){var l,m;debugger;function t(c,v,w,b){const k=document.createElement(c);return k.setAttribute("id",v),k.textContent=w,b?b.appendChild(k):document.head.appendChild(k)}function a(c){function v(){var k;c.EXTENSION.VIME&&(c.EXTENSION.VIME.remove(),delete c.EXTENSION.VIME),c.EXTENSION.VIDEOJS&&((k=c.EXTENSION.VIDEOJS.player)==null||k.dispose(),c.EXTENSION.VIDEOJS.remove(),delete c.EXTENSION.VIDEOJS),c.EXTENSION.IFRAME&&(c.EXTENSION.IFRAME.remove(),delete c.EXTENSION.IFRAME),c.EXTENSION.innerHTML=""}function w(k,S){clearInterval(c.timers.onReady),c.set(`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="${k}" height="${S}"></svg>`),cfg.hz.capWH&&(c.CAP.children[1].textContent=`${k}Ã—${S}`)}c.resetNode_original=c.resetNode,c.resetNode=(k,S)=>(k===c.TRG&&v(),c.resetNode_original(k,S)),c.reset_original=c.reset,c.reset=k=>(v(),c.reset_original(k));let b=typeof platform=="object"?platform:catchEvent;b.onkeydown_original=b.onkeydown,b.onkeydown=k=>{var G,j,R,M;const S=(M=(R=(j=(G=c.TRG)==null?void 0:G.IMGS_ext)==null?void 0:j.attributes)==null?void 0:R.url)==null?void 0:M.textContent;if(S&&[k.code.replace(/^Key/,""),k.key].includes(cfg.keys.hz_open))Port.send({cmd:"open",url:S,nf:k.shiftKey});else return b.onkeydown_original(k)},window.removeEventListener("wheel",c.wheeler,!0),c.wheeler_original=c.wheeler,c.wheeler=function(k){if(!(c.EXTENSION.scrollHeight>c.EXTENSION.clientHeight+10&&c.EXTENSION.contains(k.target)))return c.wheeler_original(k)},window.addEventListener("wheel",c.wheeler,{capture:!0,passive:!1}),c.fzClickAct_original=c.fzClickAct,c.fzClickAct=k=>c.EXTENSION.contains(k.target)?void 0:c.fzClickAct_original(k),c.prepareCaption_original=c.prepareCaption,c.prepareCaption=(k,S="")=>{const G=S.match(/(<imagus-extension.+<\/imagus-extension>)?(.*)/s),j=()=>{const R=document.createElement("template");return R.innerHTML=G[1],R.content.firstChild};return k.IMGS_ext=k.IMGS_ext_from_url||G[1]?j():void 0,c.CAP&&(c.CAP.style.zIndex=1),c.prepareCaption_original(k,G[2])},c.show_original=c.show,c.show=(k,S)=>{var R;if(k==="load")return c.EXTENSION.VIDEOJS||c.EXTENSION.IFRAME?void 0:c.show_original(k,S);if(k===void 0)return c.show_original(k,S);const G=c.TRG.IMGS_ext;c.EXTENSION.style.display=G?"block":"none",c.DIV.style.transform="";const j=c.show_original(k,S);if(G){const M=G.getAttribute("type").split("-"),P=G.getAttribute("url");c.EXTENSION.className="imagus-"+M[0],c.EXTENSION_custom_style.textContent=G.getAttribute("custom-style");const L=/^https?:\/\/(www\.)?(youtube\.com|youtu\.be)\//i.test(P);switch(L&&M[0]==="videojs"&&(M[0]="iframe"),M[0]){case"iframe":if(!P||c.EXTENSION.IFRAME)break;let C;if(L){const F=P.match(/(?:v=|embed\/|shorts\/)([a-zA-Z0-9_-]{11})/)[1],Z=((R=P.match(/t=([\d,]+)/))==null?void 0:R[1])||0;C=`<iframe type="text/html" frameborder="0" allowfullscreen="true" allow="autoplay" src="https://www.youtube.com/embed/${F}?&autoplay=1&fs=1&iv_load_policy=3&rel=1&version=3&enablejsapi=1&loop=1&playlist=${F}&start=${Z}"></iframe>`}else C=`<iframe src="${P}"></iframe>`;c.EXTENSION.innerHTML=`<div class="imagus-iframe-control">Click to enable/disable iframe control</div>${C}`,c.EXTENSION.IFRAME=c.EXTENSION.querySelector(":scope > iframe");const V=[1440,1080,720,360].find(F=>F<=window.innerHeight)||360;setTimeout(w,10,V/9*16,V),c.EXTENSION.querySelector(".imagus-iframe-control").addEventListener("click",function(F){c.EXTENSION.style.zIndex=c.EXTENSION.style.zIndex!="auto"?"auto":"-1"});break;case"sidebar":c.EXTENSION.innerHTML=G.innerHTML,c.EXTENSION.scrollTop=0;const J=c.EXTENSION.getBoundingClientRect(),N=J.left<0?-J.left:J.right>window.innerWidth?window.innerWidth-J.right:0,U=J.top<0?-J.top:J.bottom>window.innerHeight?window.innerHeight-J.bottom:0;(N||U)&&(c.DIV.style.transform=`translate(${N}px, ${U}px)`);break;case"banner":c.EXTENSION.innerHTML=`
            <a target="_blank" rel="noopener noreferrer" href="${P}">
              <svg viewBox="0 0 360 96">
                <foreignObject width="100%" height="100%">
                  <div>
                    <span>${G.getAttribute("text")}</span>
                  </div>
                </foreignObject>
              </svg>
            </a>
          `.replace(/\n\s*/g,"");break;case"videojs":let W=function(){c.EXTENSION.VIDEOJS=document.createElement("video"),c.EXTENSION.VIDEOJS.setAttribute("class","video-js"),c.EXTENSION.VIDEOJS.setAttribute("id","imagus-player"),c.EXTENSION.appendChild(c.EXTENSION.VIDEOJS);const F={autoplay:"any",controls:!0,loop:!0,preload:"auto",inactivityTimeout:0,plugins:{hotkeys:{}}};videojs(c.EXTENSION.VIDEOJS,F,()=>{const Z=c.EXTENSION.VIDEOJS.player=videojs.players["imagus-player"],te=Z.qualityLevels(),s={autoLabel:"Auto ",disableAuto:!0,displayMode:1,defaultQuality:2,maxHeight:window.innerHeight,maxWidth:window.innerWidth,filterDuplicateHeights:!1,filterDuplicates:!1,showBitrates:!0},d=Z.maxQualitySelector(s),p=(y,I)=>{Z.isFullscreen()||w(y,I)};te.on("change",y=>{p(te[te.selectedIndex].width,te[te.selectedIndex].height)}),Z.on("resize",()=>{const y=Z.videoWidth(),I=Z.videoHeight();Z.width(y),Z.height(I),p(y,I)}),Z.on("fullscreenchange",()=>{d.selectedIndexPrevious?(d.changeLevel(d.selectedIndexPrevious),delete d.selectedIndexPrevious):(d.selectedIndexPrevious=d.selectedIndex,d.options.disableAuto=!1,d.changeLevel(-1))}),Z.volume(cfg.hz.mediaVolume/100),Z.src(P)})};if(!P||c.EXTENSION.VIDEOJS)break;if(!c.EXTENSION.VIDEOJS_status){if(c.EXTENSION.VIDEOJS_status="loading",console.time("Load Video.js"),typeof loadVideoJS=="function"){loadVideoJS(),c.EXTENSION.VIDEOJS_status="loaded",console.timeEnd("Load Video.js"),W();break}const F=["https://cdn.jsdelivr.net/npm/video.js@7.20.3/dist/video-js.min.css","https://cdn.jsdelivr.net/npm/videojs-max-quality-selector@0.9.1/dist/videojs-max-quality-selector.css"],Z=["https://cdn.jsdelivr.net/npm/video.js@7.20.3/dist/video.min.js","https://cdn.jsdelivr.net/npm/videojs-hotkeys@0.2.28/videojs.hotkeys.min.js","https://cdn.jsdelivr.net/npm/videojs-contrib-quality-levels@2.2.0/dist/videojs-contrib-quality-levels.min.js","https://cdn.jsdelivr.net/npm/videojs-max-quality-selector@0.9.1/dist/videojs-max-quality-selector.min.js"],te=p=>new Promise((y,I)=>{const T=new XMLHttpRequest;T.onload=()=>{T.status===200?y(T.responseText.replace(/\n?\/\*.+?\*\/\n?/gs,"").trim()):(console.error(T.statusText,"|",p),I(T.statusText))},T.onerror=()=>{console.error(T.statusText,"|",p),I(T.statusText)},T.open("GET",p),T.send()}),s=Promise.all(F.map(te)).then(p=>{document.head.insertAdjacentHTML("beforeend",`<style>${p.map(y=>y.replace(/^@charset.+?;/,"")).join("")}</style>`)}),d=Promise.all(Z.map(te)).then(p=>{Function(p[0].replace("new Uint8Array(t.data.data,i.byteOffset||0,i.byteLength||t.data.data.byteLength)","/firefox/i.test(window.navigator.userAgent)?cloneInto(new Uint8Array(t.data.data,i.byteOffset||0,i.byteLength||t.data.data.byteLength),window):new Uint8Array(t.data.data,i.byteOffset||0,i.byteLength||t.data.data.byteLength)").replace("n[t].forEach","structuredClone(n[t]).forEach")+";window.videojs = videojs;"+p[1]+p.slice(2).join(""))()});Promise.all([s,d]).then(()=>{c.EXTENSION.VIDEOJS_status="loaded",console.timeEnd("Load Video.js"),W()})}c.EXTENSION.VIDEOJS_status==="loaded"&&W();break}}return j},c.switchToHiResInFZ_original=c.switchToHiResInFZ,c.switchToHiResInFZ=()=>{var k;if(c.fullZm===1){c.EXTENSION.style.pointerEvents="auto",(c.EXTENSION.VIME||c.EXTENSION.VIDEOJS||c.EXTENSION.IFRAME)&&(c.EXTENSION.style.zIndex="auto");const S=c.EXTENSION.querySelector(".imagus-iframe-control");S&&(S.style.display="block"),(k=c.EXTENSION.VIDEOJS)==null||k.focus()}return c.fullZm===!1&&(c.EXTENSION.style.pointerEvents="",c.EXTENSION.style.zIndex=""),c.switchToHiResInFZ_original()}}if(!this.EXTENSION){const c=`
    #imagus-extension {
      pointer-events: none;
    }

    #imagus-extension.imagus-sidebar {
      background: padding-box rgb(31, 31, 31);
      border: ${this.DIV.style.border};
      border-radius: ${this.DIV.style.borderRadius};
      box-shadow: ${this.DIV.style.boxShadow};
      box-sizing: border-box;
      color: white;
      font: 13px / 1.3 sans-serif;
      left: calc(-360px + ${this.DIV.style.borderWidth} - 1px);
      padding: 5px 8px 6px;
      position: absolute;
      top: -${this.DIV.style.borderWidth};
      white-space: pre-wrap;
      width: 360px;
      z-index: -1;
      max-height: calc(100% + ${this.DIV.style.borderWidth} * 2);
      overflow-y: auto;
      overflow-wrap: break-word;
      overscroll-behavior: contain;
      scrollbar-color: auto;
    }
    #imagus-extension.imagus-sidebar > b {
      font-weight: bold;
    }

    #imagus-extension.imagus-sidebar a {
      color: #bbccff
    }

    #imagus-extension.imagus-banner {
      position: relative;
      top: -20%;
    }
    #imagus-extension.imagus-banner div {
      display: table;
      height: 100%;
      width: 100%;
    }
    #imagus-extension.imagus-banner span {
      color: white;
      display: table-cell;
      font: 18px sans-serif;
      vertical-align: middle;
      text-align: center;
      white-space: pre-wrap;
    }
    #imagus-extension.imagus-banner:hover span {
      color: #cceeff;
      text-decoration: underline;
    }

    #imagus-extension.imagus-videojs {
      height: 100%;
      position: relative;
      top: -100%;
      z-index: -1;
    }
    #imagus-extension.imagus-videojs > #imagus-player {
      --bottom: 0;
      --left: 0;
      --margin: auto;
      --position: absolute;
      --right: 0;
      --top: 0;
      height: 100%;
      width: 100%;
    }
    #imagus-extension .vjs-max-quality-selector-button .vjs-menu {
      width: 12em;
    }
    #imagus-extension .vjs-max-quality-selector-button .vjs-menu .vjs-menu-content {
      padding: 5px;
    }

    .imagus-iframe-control {
      pointer-events: auto;
      cursor: pointer;
      position: fixed;
      inset: 0 auto auto 0;
      width: 100%;
      height: 5vh;
      border-left-top-radius: 1vh;
      background: yellow;
      opacity: .1;
      line-height: 5vh;
      text-align: center;
      z-index: 2;
      font-family: sans-serif;
      display: none;
    }
    .imagus-iframe-control:hover {
      opacity: .7;
    }
    #imagus-extension.imagus-iframe {
      /* pointer-events: none; */
      height: 100%;
      position: relative;
      top: -100%;
      /* z-index: -1; */
    }
    #imagus-extension > iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  `.replace(/\n\s*/g,"");this.EXTENSION=t("div","imagus-extension",null,this.DIV),t("style","imagus-extension-style",c),this.EXTENSION_custom_style=t("style","imagus-extension-custom-style"),a(this)}const n=new URL(e[0]);if(n.search){const c=document.createElement("imagus-extension");n.searchParams.forEach((v,w)=>c.setAttribute(w,v)),this.TRG.IMGS_ext_from_url=c}return(m=(l=this.TRG.IMGS_ext_data)==null?void 0:l.forEach)==null||m.call(l,c=>{c[0]===""&&(c[0]='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>')}),this.TRG.IMGS_ext_data}},"123rf-g":{useimg:1,link:"^123rf\\.com/photo_\\d+",res:`"fileFormat":"image/[^"]+","url":"([^"]+)"
<title>([^<]+)`,img:"^us(\\.123rf\\.com/)450wm(/.*)",to:"previews$1images$2"},"1688.com-g":{link:"^d(?:etail\\.1688\\.com/offer/\\d+\\.html|j\\.1688\\.com/ci_bb\\?.+)",res:function(e){var t,a;return e=JSON.parse(e._.match(/window\.__INIT_DATA=([^\n]+)/)[1]),e=((t=Object.values(e.data).find(n=>{var l,m;return((l=n.data)==null?void 0:l.offerImgList)||((m=n.data)==null?void 0:m.video)}))==null?void 0:t.data)||[],e=(e.offerImgList||[]).concat((a=e.video)==null?void 0:a.videoUrl),e.filter(Boolean).map(n=>[n])},img:"^(cbu\\d+\\.alicdn\\.com/img/[^.]+\\.)(?:\\d+x\\d+\\.)?",to:"$1"},"1x-g":{useimg:1,link:"^1x\\.com/photo/(\\d+)",res:`photos-feed-image-[^"]+" src="([^"]+)
<title>([^<]+)
`,img:"^(?:((?:[^.]+\\.)?1x\\.com/images/user/[\\da-f]{32}-)(?:s[dq]|ld)(?=\\.)|1x\\.com/[A-Za-z0-9]+$)",to:function(){var t,a;var e=arguments;return e[1]?`#${e[1]}#hd2 hd4 sd2 sd4#
${e[1]}`:(a=(t=this.node.closest("tr"))==null?void 0:t.querySelector("img"))==null?void 0:a.src}},"220-volt.ru-s":{link:"220-volt\\.ru/catalog-\\d+/",res:function(e){var t=e._.indexOf('<div style="display:none;">');if(t<0)return null;var a=e._.indexOf("</div>",t);if(a<0)return null;for(var n=[],l=/href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},"22pixx-x":{link:"^(22pixx\\.xyz/)[^-]+-(\\w/[^?]+)\\.html.*",img:"^(22pixx\\.xyz/[or])s(/[^?]+).*",to:"$1$2"},"23hq-g":{link:"^(23hq\\.com/(?:[^/]+/)?[^/]+/photo/\\d+)(\\?.*)?$",res:function(e){let t=(e._.match(/var originalURL\s*=\s*"([^"]+)/)||[,""])[1],a=(e._.match(/id="fn_img" src="([^"]+)/)||[,""])[1];return[[[t&&t.length?"#"+t:"",a]]]},img:"^(23hq\\.com/\\d+/\\d+_[\\da-f]{32}_)(?!large)[^\\.]+",to:"$1large"},"2GIS.ru":{img:"^(i\\d+\\.photo\\.2gis\\.\\w+/images/\\S+)(?:_\\d+x\\d+\\.)(jpe?g|gif|png)",to:"$1.$2"},"35photo-g":{link:"^(.+\\.)?35photo\\.pro\\/photo_\\d+\\/(\\?nude=ok)?$",res:'id="mainPhoto" src="([^"]+)"'},"3DHentaiX-x-p":{link:"^3dhentaix\\.com/.+/$",res:function(e){var t=e._.match(/id: \'([^'])+/gm)[0].substring(5),a=e._.match(/nonce: \'([^'])+/gm)[0].substring(8),n=this,l=new XMLHttpRequest;return l.open("POST","https://3dhentaix.com/wp-admin/admin-ajax.php"),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.timeout=3e3,l.send("action=msv-get-sources&id="+t+"&nonce="+a),l.onloadend=function(){const m=JSON.parse(this.responseText).sources["video-source-0"];n.prepareCaption(n.node,"Test"),n.set(m+"#mp4")},null}},"4chan-p":{img:"^(i\\.4cdn\\.org/[\\da-z]+/\\d+)s\\..*",to:"$1.#jpg png mp4 webm gif#"},"4PDA_video-p-b":{link:"^4pda\\.to/forum/dl/post/(\\d+)/.+\\.mp4",url:"https://4pda.to/forum/index.php?act=attach&id=$1",res:function(e){return e._.match(/<a id="\w+" href="([^"]+)" target="_blank">/)[1]+"#mp4"}},"4shared-h":{link:"4shared\\.com/(?:s|all-images|photo|video)/.*",res:function(e){return/4shared\.com\/all-images\//.test(e.base)?(this.array||(this.array=[]),this.array.push(...[...e._.matchAll(/<img class="jsImageThumbnailLink" src="([^"]+)/g)].map(t=>[t[1]])),/<a class="jsAllImagesNext submit-gray no-line" href="/.test(e._)?{loop:"https://www.4shared.com"+e._.match(/<a class="jsAllImagesNext submit-gray no-line" href="([^"]+)/)[1]}:(()=>{const t=this.array;return delete this.array,t})()):e._.match(/(?:<img id="zoom_image" src="|[^{]file: ')(https:\/\/[^.]+\.4shared\.com\/img\/[^'"]+)/)[1]},img:"((?:[^.]+\\.)?4shared\\.com/img/[^?]+/)s20(/.*)",to:"$1s23$2"},"500px-g":{img:"^(?:pp?|drs)cdn\\.500px\\.org/photo/.+",to:function(){var e=arguments;return e[0]}},"8muses-x-p":{link:"^(?:comics\\.)?8muses\\.(com/comics|io)/album/.+",res:function(e){var t=e._.indexOf('div class="gallery"');if(t<0)return null;var a=e._.indexOf("</div></a> </div></div>",t);if(a<0&&(a=e._.indexOf('<script src="',t)),a<0)return null;for(var n=[],l=/<img class="\s?lazyload(?:ed)?" data-src="([^"]+)"/gi,m=l.exec(e._.substring(t,a));m;)n.push(["https://"+(e[1][0]==="i"?"8muses.io"+m[1].replace("/th_","/full_"):"comics.8muses.com"+m[1].replace("/th/","/fl/"))]),m=l.exec(e._.substring(t,a));return n},img:"^((?:comics\\.)?8muses\\.(com|io)/(?:img/data|image)/)th",to:function(){var e=arguments;return e[1]+(e[2][0]==="i"?"full":"fl")}},"9GAG":{link:"9gag\\.com/gag/\\w+",res:function(e){var t=e._.indexOf("JSON.parse");if(t<0)return null;var a=e._.indexOf('");<\/script>',t);if(a<0)return null;var n=e._.substring(t+12,a).replace(/\\"/g,'"').replace(/\\\\/g,""),l=JSON.parse(n);return l.data.post.type=="Animated"?l.data.post.images.image460sv.vp9Url:l.data.post.images.image700.webpUrl}},"ADmagazine.ru-p":{img:"^(media\\.admagazine\\.ru/photos/\\w+/master/w_)\\d+(,c_limit/\\S+\\.\\w{3,4})",to:"$110000$2"},"Adultempire-x-p-b":{img:"^(.*adultempire\\.com/products/\\d+/\\d+)m.*",to:"$1h.#jpg jpeg#"},Aftershock:{useimg:1,img:"\\/files(\\/styles\\/(icon|teaser(large)?|avatar-mini)\\/public)",dc:2,to:"/files"},"AG.ru":{link:"^ag\\.ru/screenshots/(\\w+/\\d+)",url:"http://www.ag.ru/screenshots/$1",res:'<td[^<]*?\\sstyle="background:url\\(([^\\)]+)\\)',img:"^(cdn\\.ag\\.ru\\/media\\/resize)\\/\\d+\\/(-\\/(screenshot|movie)s\\/\\w+\\/\\w+\\.\\w+)",to:function(){var a,n,l,m,c,v,w;var e=arguments;let t;return e[3]==="movie"&&(t=(a=document.body.outerHTML.match(/window\.CLIENT_PARAMS\s*=\s*({.+?})<\//))==null?void 0:a[1],t=t&&((w=(v=(c=(m=(l=(n=JSON.parse(t).initialState)==null?void 0:n.game)==null?void 0:l.movies)==null?void 0:m.results)==null?void 0:c.find(b=>RegExp(`${e[2].slice(2)}`).test(b.preview)))==null?void 0:v.data)==null?void 0:w.max)),t||e[1]+"/1920/"+e[2]}},"AIBooru-x-q":{useimg:1,link:"^aibooru\\.online\\/posts\\/\\d+",res:function(e){let t;return t=(e._.match(/(?:secure_url" content|original-link" href)="([^"]+)/)||[])[1],[t]},img:"^(?:s?(?:img|thumb|cdn)\\d?\\.|assets\\.)?(aibooru\\.online/+)(?:sample|thumb(?:nail)?|\\d+x\\d+)?/(\\w\\w/\\w\\w)/(?:thumbnail|sample-)?([\\da-f]+).*",to:`#cdn.$1/original/$2/$3.#png mp4 webm webp jpg gif jpeg#
cdn.$1sample/$2/sample-$3.#png webp jpg gif jpeg#`},"AIRBNB-s":{link:"^airbnb\\.(com|de|it|es|fr|com.br|dk|co.uk|ru|pl|co.kr|cz|hu|at|pt|gr|com.tr|nl|se|com.tw|com.hk|com.sg|co.id|com.my|com.au|jp|is|no|ch|co.nz|ca|be|fi|ie|cat|co.in|cn|mx|cl|co.cr|co.ve|com.ar|com.bo|com.bz|com.co|com.ec|com.gt|com.hn|com.ni|com.pa|com.pe|com.py|com.sv|com.mt|gy|ae|co.il|co.th|com.ph|com.vn|co.za|lu|com.hr|com.kh|com.ua|la|kg|al|am|az|ba|com.ee|com.ro|lt|lv|me|rs|si|org)/(rooms|luxury).*/\\d+(\\?|$)",res:function(e){var t=/"mediaItems":(\[.+?\])/.exec(e._);return t=JSON.parse(t[1]),t.map(a=>[a.baseUrl.replace("/pictures/","/im/pictures/")+"?im_w=1920",a.accessibilityLabel])},img:"^(..\\.muscache\\.com/im/pictures/.+\\.jpe?g\\?im_w)=\\d+",to:"$1=1920"},"Airplane-Pictures-g":{img:"^(cdn\\.airplane-pictures\\.net\\/images\\/uploaded-images\\/\\d{4}\\/\\d+\\/\\d+\\/\\d+)\\w+(\\.jpg)$",to:"$1$2"},"Alamy-g-p":{link:"^alamy.com/[^.]+-(?:image)?\\d+\\.html",res:`="og:image" content="([^"]+)
<title>([^<]+)`},"ALIEXPRESS-s":{link:"^(?:\\w\\w\\.)?(aliexpress\\.(com|[a-z]{2})/(item/|(?:[^/?&]+[?&])*productIds=))(?:[\\w-]*?/)?(\\d+).*",url:function(){var t;var e=arguments;return e[3]==="item/"?`//${e[1]+e[4]}.html`:"https://aliexpress."+e[2]+"/aer-jsonapi/v1/bx/pdp/web/productData?productId="+((t=e[4])!=null&&t.length?e[4]:this.node.closest('[class^="product-snippet_ProductSnippet__container"]').getAttribute("exp_product"))},res:function(e){var a,n,l,m,c,v,w,b,k;const t=[];if(e._[0]==="{"){const S=JSON.parse(e._).data;t.push([(v=(c=(m=(l=(n=(a=S==null?void 0:S.skuInfo)==null?void 0:a.propertyList)==null?void 0:n[0])==null?void 0:l.values)==null?void 0:m[0])==null?void 0:c.imageMainUrl)==null?void 0:v.replace(/_\d+x\d+\..+/,"")]),(w=S.gallery)==null||w.forEach(G=>t.push([G.videoUrl||G.imageUrl,S.description]))}else{let S=(b=e._.match(/Data\s*=\s*([^;]+)/))==null?void 0:b[1];S=S?JSON.parse(S).imagePathList:[],S.forEach(G=>t.push([G,""]))}try{const S=new window.DOMParser().parseFromString(e._,"text/html");let G=Array.from(S.querySelectorAll('div[class^="gallery_Gallery__picture"] > picture > img, div[class^="gallery_Gallery__video"] > video'));G.length<1&&(G=Array.from(S.querySelectorAll('div[class^="Product_GalleryBarItem"] > img, div[class^="ProductDescription-module_wrapper"] img')));for(const M of G){if(M.parentElement.nodeName==="A")continue;let P=M.attributes.src.value.replace(/_\d+x\d+\.(jpe?g|png)$/,"");P=P.replace("`",""),t.push([P,""])}const j=e[4],R=JSON.parse(((k=e._.match(/"reviews":(\[.+?\]),"resolveParams"/))==null?void 0:k[1])||"{}");if(R!=null&&R[0])R.forEach(M=>{var P,L;return(L=(P=M.root)==null?void 0:P.images)==null?void 0:L.forEach(C=>{var V;return t.push([C.url,(V=M.root)==null?void 0:V.text])})});else{const M=new XMLHttpRequest;M.open("GET","https://feedback.aliexpress.com/pc/searchEvaluation.do?productId="+j+"&page=1&pageSize=50",!1),M.send(),JSON.parse(M.responseText).data.evaViewList.forEach(P=>{P.images.forEach(L=>t.push([L,P.buyerFeedback]))})}}catch{}return t},img:"^(?:([^/]+\\.ali(?:cdn|express-media)\\.com/)(?:kf/)?(.+)_\\d+x\\d+\\.(?:jpe?g|png|webp)|(aliexpress\\.(?:com|[a-z]{2})/one-price\\?)bucketId=&debug=true&releaseId=).*",loop:2,to:function(){var a;var e=arguments;if(e[1])return e[1]+"kf/"+e[2];const t=(a=this.node.closest('[class^="product-snippet_ProductSnippet__container"]'))==null?void 0:a.getAttribute("exp_product");return t?`https://${e[3]}productIds=${t}`:""}},"ALIEXPRESS+TAOBAO-s":{img:"^((?:img[^.]*|g(?:[^.]*\\.?){1,2}?|asearch|\\w\\w\\d\\d)\\.(?:taobao|tb|ali)cdn\\.c(?:om|n)/)(.+)_\\d+x\\d+.+",to:"$1$2"},"AlphaCoders-g-p":{img:"^(\\w*\\.alphacoders\\.com/.+)thumb(?:big)?-(?:\\d+-)?(.+\\.)(\\w{3,4})$",to:"$1$2#$3 gif png jpg jpeg mp4#"},"Allanal|Analonly|Nympho|Swallowed_trailers-x-p":{link:"(?:tour.)?(?:allanal|analonly|nympho|swallowed|trueanal).com/(?:view|scenes)/.*",res:`(?:src|href)="([^"]+)" (?:type|class)=(?:'video/mp4'|"download-trailer")`},"Allegroimg-h":{link:"(\\w\\.allegroimg\\.com/)(?:original|s\\d+)(/.*)",img:"(\\w\\.allegroimg\\.com/)(?:original|s\\d+)(/.*)",to:"$1original$2"},AlternativeTo:{link:"^alternativeto\\.net/software/[^/]+/about/",res:function(e){const t=JSON.parse(e._.match(/__NEXT_DATA__[^{]+([^<]+)/)[1]).props.pageProps.mainItem.images.filter(a=>a.type==="Screenshot").map(a=>[a.signedImages[0].signedURL]);return t.length>0?t:!1},img:"^d4\\.alternativeto\\.net.+\\/(\\w+)\\.\\w+$",to:function(){var e=arguments;const t=document.createElement("script");t.textContent=`{
  const s = JSON.stringify([
    window.__NEXT_DATA__.props.pageProps.mainItem?.images,
    window.__NEXT_DATA__.props.pageProps.items?.map((i) => i.images),
    window.next.router.components['/software/[urlName]']?.props.pageProps.mainItem?.images,
    window.next.router.components['/software/[urlName]']?.props.pageProps.items?.map((i) => i.images),
    window.next.router.components['/software/[urlName]/about']?.props.pageProps.mainItem?.images,
    window.next.router.components['/software/[urlName]/about']?.props.pageProps.items?.map((i) => i.images)
  ].filter(Boolean))
  const m = s.match(new RegExp('fileName":"([^"]+)","type":"(Screenshot|Icon)"[^}]+${e[1]}'))
  sessionStorage.setItem('imagus-file', m[1] + ';;' + m[2])
  document.currentScript.remove()
}`,document.head.appendChild(t);const[a,n]=sessionStorage.getItem("imagus-file").split(";;");return sessionStorage.removeItem("imagus-file"),`https://d2.alternativeto.net/dist/${n==="Icon"?"icons":"s"}/${a}?format=${/\.gif$/.test(a)?"gif":"png"}`}},"AmateurAlbum-x":{link:"amateuralbum\\.net\\/showphoto\\.php\\?cat=\\d{1,5}&photo=\\d{1,10}.*",res:function(e){let t=e._.match(/img  id="resizable".*?src="(.*?)"/)[1],a=e._.match(/class="boldfont">([^<]*)<\/div>/),n;return a!=null?n=a[1]:n=e._.match(/<title>([^<]*)<\/title>/)[1],[t,n]}},"AMAZON-s":{link:"^amazon\\.(?:com|de|fr|it|ca|co\\.uk|com\\.mx|co\\.jp|sg|ae|br|com\\.au|nl|in|sa|tr|se|pl)/(\\S+/dp|gp/slredirect|\\S+/product-reviews)/(\\S+?)(?:/|$)",res:function(e){var w,b,k,S,G,j;let t=/\._[^./]+(?=\.)/;if(!e[0].includes("/product-reviews")){let R=(((w=e._.match(/<title>([^<]+)<\/title>/))==null?void 0:w[1])||"").replace("Amazon.com: ",""),M=JSON.parse(((b=e._.match(/var obj = jQuery\.parseJSON\('(.+)'\)/))==null?void 0:b[1])||"{}"),P=(k=Object.entries(M.colorToAsin).find(([C,V])=>V.asin===M.mediaAsin))==null?void 0:k[0],L=P?M.colorImages[P]:Object.values(M.colorImages).flat(1);return L=L.map(C=>(C==null?void 0:C.hiRes)||C),L!=null&&L.length||(L=Array.from(e._.matchAll(/"hiRes":"([^"]+)"/g)).map(C=>C[1])),L=L.map(C=>[C==null?void 0:C.replace(t,""),R]),(S=M.videos)!=null&&S.length&&M.videos.forEach(C=>L.push(["",`<imagus-extension type="videojs" url="${C.url}"></imagus-extension>${C.title}`])),this.amazon_data=L,{loop:`https://amazon.com/item/product-reviews/${e[2]}/ref=cm_cr_arp_d_viewopt_srt?mediaType=media_reviews_only&sortBy=helpful`}}const a=new DOMParser().parseFromString(e._,"text/html");let n=this.amazon_data;const l=Array.from(a.querySelectorAll('.reviewNumericalSummary [role="progressbar"]')).reverse().map(R=>{var M;return Number((M=R.attributes["aria-valuenow"])==null?void 0:M.value)}),m=[5,4,3,2,1];return n[0][1]=`<imagus-extension type="sidebar"><div>
        ${v()}
        <div class="valuation">Rating: &#11088; ${(G=a.querySelector('[data-hook="rating-out-of-text"]'))==null?void 0:G.innerText} &bull; ${(j=a.querySelector('[data-hook="total-review-count"]'))==null?void 0:j.innerText}</div>
        <div class="valuation-distr">
            <span>${m.map(R=>`${R}&nbsp;&#11088;`).join("<br>")}</span>
            <span>${m.map(R=>`${l[R-1]}%`).join("<br>")}</span>
            <span>${m.map(R=>`<progress max="100"value="${l[R-1]}">${l[R-1]}%</progress>`).join("<br>")}</span>
        </div>
        <p></p>
        ${Array.from(a.querySelectorAll('.view-point-review, [data-hook="review"]')).map(c).join("")}
    </div></imagus-extension>${n[0][1]}`,Array.from(a.querySelectorAll("#cm_cr-review_list > .review")).forEach(R=>{var V;let M=(V=R.querySelector(".review-text-content"))==null?void 0:V.innerText.replace("The media could not be loaded.","").trim(),P=`<imagus-extension type="sidebar"><div>${v()}${c(R)}</div></imagus-extension>`,L=Array.from(R.querySelectorAll(".review-image-container img")).map(J=>[J.src.replace(t,""),P]),C=Array.from(R.querySelectorAll("[data-video-url]")).map(J=>["",`<imagus-extension type="videojs" url="${J.dataset.videoUrl}"></imagus-extension>${M}`]);this.amazon_data.push(...L,...C)}),this.TRG.IMGS_ext_data=n,{loop:"imagus://extension"};function c(R){var M,P,L,C,V,J;return`<p>
        <span><big>${((M=R.querySelector(".view-point-title"))==null?void 0:M.innerText)||""}</big></span>
        <span>${((P=R.querySelector("i.review-rating"))==null?void 0:P.outerHTML)||""}
            <b> ${((L=R.querySelector(".review-title > :last-child")||R.querySelector(".review-title"))==null?void 0:L.innerText)||""}</b>
        </span>
        <span>${((C=R.querySelector(".review-date"))==null?void 0:C.innerText)||""}</span>
        <span>${(V=R.querySelector('.a-row.a-spacing-top-mini, [data-hook="review-body"]'))==null?void 0:V.innerText.replace("The media could not be loaded.","").trim().replace(/\s*\n\s*(?=\n)/g,"")}</span>
        <small>${((J=R.querySelector('.review-votes, [data-hook="helpful-vote-statement"]'))==null?void 0:J.innerText.trim())||""}</small>
    </p>`}function v(){return`<style>
        #imagus-extension > div { display: flex; flex-direction: column; row-gap: 10px; padding-top: 6px; }
        #imagus-extension .valuation-distr { display: flex; }
        #imagus-extension .valuation-distr > * { padding: 4px 6px; border: 1px solid gray; margin: 0 -1px 0 0; text-align: right; }
        #imagus-extension p { border-bottom: 1px solid #80808080; padding: 0 0 10px; display: flex; flex-direction: column; row-gap: 6px; margin: 0; word-break: break-word; }
        #imagus-extension p span { display: flex; }
        #imagus-extension i { flex-shrink: 0; }
    </style>`}},img:"^((?:(?:images\\.|(?:images-[a-z]{2}\\.ssl-|(?![gz]-)[^.?]+\\.)images-)amazon|ia\\.media-imdb|m\\.media-amazon)\\.com/images/[^/]/[^.]+(?:(?!\\.[A-Za-z]{3,4}$)\\.[^A-Z_.]+)*)(?:$|(?!_(?:CB|V)\\d{4,}_\\.)[^?]*\\.([^?]*).*)",to:function(){var e=arguments,t=e[2]||"#jpg png#";return"#"+e[1]+"."+t+`
`+e[1]+"._SY1024_SX1024_."+t}},"Aminus3-g":{img:"^((?:aminus3(?:\\.s3\\.amazonaws)?|img\\.aminus2)\\.com/image/g\\d+/u\\d+/i\\d+/[\\da-f]{32}_)(?!large)[^\\.]+(.+)",to:"$1giant$2"},"AnalVids-x-q-p":{link:"^analvids\\.com/watch/\\d+/.+",res:function(e){max_resolution=1080;let t=[...e._.matchAll(/<source src="([^"]+)" size="(\d+)">/g)];return t=t.filter(a=>Number(a[2])<=max_resolution).sort((a,n)=>Number(a[2])-Number(n[2])).map(a=>a[1]),t.length?[[["#"+t.pop(),t==null?void 0:t[0]],""]]:""}},AnandTech:{img:"^(images\\.anandtech\\.com/[^/]+/\\d+/[^?]+)_(?:thumb|\\d+px|\\d+x\\d+|carousel)",to:"$1"},"Ancensored-x":{link:"^(ancensored\\.com/)clip/[^/]+/[^/]+/([\\da-f]+).*",url:function(){var e=arguments;return e[2]?"//"+e[1]+"clip/-/-/"+e[2]:this.node.closest("a").href},res:function(e){var t,a;return e[2]?[((t=e._.match(/<source type="video\/mp4"\s+src="([^"]+)/))==null?void 0:t[1])||"",((a=e._.match(/="description" content=([^"]+)/))==null?void 0:a[1])||""]:(e._=e._.match(RegExp(`href="/([^"]+)" title="[^"]*" itemprop="contentUrl" data-index="\\d+" data-size="\\d+x\\d+"><img src="/files/${e[3]}`)),e._[1]?"//"+e[1]+e._[1]:"")},img:"^(ancensored\\.com/)files/(?:new_video/preview_sprite/\\d+/sprite-([^.]+).*|(images/\\d+/thumb_[a-f0-9]+)\\.png$)"},"Anime-Pictures-g":{link:"^anime-pictures\\.net/(pictures/view_)?posts?/\\d+\\?lang=",res:'href="([^"]+/pictures/(?:download|get)_image/[^"]+)"'},"AOL-p":{img:"^([os]\\d?\\.aolcdn\\.com/(?:(?:images/)?dims|hss|photo)(?:[^/]*/|\\?(?:[^&]*&)*?image_uri=([^&]+)).*|r\\.search\\.aol\\.com/(?:[^/]+/)*?RU=(http[^/]+).*)",dc:2,loop:2,to:function(){var e=arguments;if(e[2]||e[3])return e[2]||e[3];var t=e[1].match(/(https?)(?::\/\/?|%3A(?:%2F){1,2})(?!.+https?:\/)(.+)/);return t?t[1]+"://"+t[2]:e[1]}},APKPure:{link:"^apkpure\\.com/[\\w-%]+/[\\w.]+",res:function(e){let t=e._.indexOf('<div class="screenbox">');if(t<0)return null;let a=e._.indexOf("</div>",t);if(a<0)return null;let n=[],l=/a href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)c[1].startsWith("http")&&n.push([c[1]]),c=l.exec(m);return n}},"APNews-q":{link:"^apnews\\.com/(article|video)/[\\w-]+",res:function(e){var t;if(e[1]==="video"){let n=new XMLHttpRequest;n.open("Get","https://cdn.jwplayer.com/v2/media/"+e._.match(/data-media-id="([^"]+)/)[1],!1),n.send(),n=JSON.parse(n.responseText).playlist[0];const l=[n.title,n.description].filter(Boolean).join(" | ");return n=n.sources,n=n.filter(m=>m.type==="video/mp4"&&m.height<=1080).sort((m,c)=>c.height-m.height),[[["#"+n.shift().file,(t=n.filter(m=>m.height<=540)[0])==null?void 0:t.file],l]]}else{let a=[...new Map([...e._.matchAll(/<img class="Image" alt="([^"]+)"\s*data-flickity-lazyload-srcset="[^?]+\?url=([^\s"]+)/g)].map(n=>[n[2].replace("https%3A%2F%2F","https://").replaceAll("%2F","/"),n[1]]))];return a&&a.length&&a.unshift(a.splice(a.findIndex(n=>n[0]===(e._.match(/"ImageObject","height":\d+,"url":"[^?]+\?url=([^"]+)/)||[,""])[1].replace("https%3A%2F%2F","https://").replaceAll("%2F","/")),1)[0]),a&&a.length||(a=/"og:image" content="[^?]+\?url=([^"]+).+?"og:image:alt" content="([^"]+)/gs.exec(e._),a=a?[a[1].replace("https%3A%2F%2F","https://").replaceAll("%2F","/"),a[2]]:""),a}},img:"^dims\\.apnews\\.com/dims[^?]+\\?url=https%3A%2F%2F([^%]+%[a-f0-9/%]+)",dc:2,loop:2,to:function(){var a;var e=arguments;const t=(a=this.node.offsetParent.parentNode.attributes.url)==null?void 0:a.textContent;return t&&/\/video\//.test(t)?t:"//"+e[1]}},"Apteka.ru-s":{link:"^apteka\\.ru/product/.*/",res:function(e){return e=JSON.parse(e._.match(/window\.__INITIAL_STATE__\s*=\s*({.+?})</)[1]).product.groupinfo.groupItems[0].itemInfos[0].fileInst,e.map(t=>{var a;return[(a=t.photos)==null?void 0:a.original]})},img:"^(images\\.apteka\\.ru\\/)medium(_.+\\.jpeg)",to:"$1original$2"},"Arca-p":{link:"^(arca\\.live/b/\\w+/\\d+).*",url:"$1",res:function(e){var t;return e=[...(t=new DOMParser().parseFromString(e._,"text/html").querySelector('div[class="article-body"]'))==null?void 0:t.querySelectorAll('video,iframe,img:not([class="twemoji"])')],e.some(a=>a.nodeName==="IFRAME")?(this.TRG.IMGS_ext_data=e.map(a=>a.nodeName==="IFRAME"?["",`<imagus-extension type="iframe" url="${a.src}"></imagus-extension>`]:[a.src,""]),{loop:"imagus://extension"}):e.map(a=>[a.src])}},"Artvee-g":{link:"^artvee\\.com/(dl|artist)/[\\w-]+/",url:function(){var e=arguments;return e[0]+(e[1][0]==="a"?"?per_page=70":"")},res:function(e){var t;if(e[1]==="artist"){const a=((t=e._.match(/description blrclass"><p>(.+?)<\/div>/s))==null?void 0:t[1].replace(/<\/?p>/,""))||"";return[...e._.matchAll(/class="lazy"\s+src="(https:\/\/[^\/]+\/)[a-z]+(\/\d+[a-z]{2})([^"]+)/g)].map(n=>[["#"+n[1]+"sdl"+n[2]+"sdl"+n[3],n[1]+"sftb"+n[2]+n[3]],a])}return e=[...e._.matchAll(/(?:rel="nofollow" href|"og:image" content)="([^"]+)"(?:>Download<\/a|\s*\/)>/g)],[[["#"+e[e.length-1][1],e[0][1]]]]},img:"^(mdl\\.artvee\\.com/)[a-z]+(/\\d+[a-z]{2})",to:`#$1sdl$2sdl
$1sftb$2`},Apple_music:{link:"music\\.apple\\.com/\\w\\w/album/[^/]+/\\d+",res:'<meta property="og:image:secure_url" content="([^"]+)">'},"Arazu-h":{link:"^arazu\\.io/\\w+/",res:'<source src="([^"]+)" id="clip-source"',img:"(r2\\.cdn\\.arazu\\.io\\/[^.]+)\\.webp",to:function(){var e=arguments;return e[1]+".mp4"}},"Archive.org-g":{link:"^archive\\.org/details/.+",res:function(e){var t=e._.match(/<meta property="og:video" content="([^"]+)">/);if(t)return t[1];var a=e._.indexOf('aria-label="Item image slideshow">');if(a<0)return null;var n=e._.slice(n).search(/<\/div>\s+<\/section>\s+<\/div>/gi);if(n<0)return null;n=n+a;for(var l=[],m=/<a class="carousel-image-wrapper" href="([^"]+)"[\s\S]+?<div class="carousel-caption">(?:\s+)?(.+)<\/div>/gi,c=e._.substring(a,n),v=m.exec(c);v;)l.push(["https://archive.org"+v[1],v[2].trim()]),v=m.exec(c);return l},img:"^archive\\.org/start/(\\d+/)end/(\\d+)",to:function(){var e=arguments;return JSON.parse(document.querySelector('input[class="js-tv3-init"]').value)["TV3.clipstream_clips"].find(t=>t.match(/t=\d+\/\d+/)[0]==="t="+e[1]+e[2]).replace(/(t=\d+\/)(\d+)/,function(t,a,n){return a+(parseInt(n)+300).toString()})}},"Archived.moe-p":{link:"^archived\\.moe/\\w{1,5}/redirect/",res:'; url=([^"]+)'},"ArtLimited-g":{img:"^(artlimited\\.net/+user/(?:\\d/){7}\\d+/.*-)medium(-open\\.webp)",to:"$1large$2"},"ArtStation-g":{link:"^(artstation\\.com/)artwork(/[^/]+).*",url:"$1projects$2.json",res:function(e){return e=JSON.parse(e._),e.user?(e.s=e.software_items.map(function(t){return t.name}).join(", "),e.c=[e.title,e.description.replace(/^<p>(.*)<\/p>$/,"$1")].filter(function(t){return!!t.trim()}).join(" - ")+" by "+e.user.username,e.assets.map(function(t,a){var n=[t.image_url],l=n[0].replace("/large/","/4k/");return l!=n[0]&&n.unshift(l),[n,[a?"":"["+e.c+(e.s?" in "+e.s:"")+"]",t.title||t.title_formatted||""].join(" ")]})):null}},"ArtUntamed-x":{link:"^artuntamed\\.com/index\\.php\\?media/[\\w-.]+/",res:function(e){let t=e._.indexOf('<div class="p-body-content">');if(t<0)return null;let a=e._.indexOf('<div class="block-outer block-outer--after">',t);if(a<0)return null;let n=[],l=/data-src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n}},"ArtUntamed_attach-x":{link:"^artuntamed\\.com/index\\.php\\?attachments/[\\w-.]+/"},"Aryion-x-p-b":{url:"$1view$2",res:`="og:image:secure_url" content="([^"]+)
="og:title" content="([^"]+)`,img:"^(?:static\\.)?(aryion\\.com/g4/)(?:data|derivative|thumb)(/\\d+).*"},"aShemale-x-p":{link:"^ashemale\\.one\\/vids\\/\\d+\\/",res:'<video src="([^"]+)'},"aShemaleTube-x-p":{link:"^(?:[a-z]*\\.)*ashemaletube\\.com\\/videos\\/\\d+\\/[\\w\\-\\/?=&]+",res:'<source src="([^"]+)'},"ASK.fm":{useimg:1,link:"^ask\\.fm/[^/]+/answers?/\\d+/photo",res:'" src="([^"]+)"',img:"^((?:(?:d2hhj3gz5jljkm|dok7xy59qfw9h)\\.cloudfront\\.net|(?:ak)?(?:photo|img)\\d\\.ask\\.fm)/[^.]+/)[^/]+(/\\w+\\.)",to:"$1#large original normal#$2"},"Astronomy.ru_forum":{link:"astronomy\\.ru/forum/index\\.php.+action=media;sa=media;in=\\d+"},"Auchan.ru-s":{link:"^auchan\\.ru/product/[\\w-]+/",res:function(e){var t,a,n,l;return e=JSON.parse(((t=e._.match(/"product":{"product":({.+?}),"loading"/))==null?void 0:t[1])||((a=e._.match(/window.__INITIAL_STATE__\s*=\s*([^\n]+)/))==null?void 0:a[1])||"{}"),e.mediaUrls||(e=(n=e.product)==null?void 0:n.product),(l=e.mediaUrls)==null?void 0:l.map((m,c)=>{var v;return[m,c?"":[e.title,(v=e.description)==null?void 0:v.content].join(" | ")]})},img:"^auchan\\.ru/f/c/insecure/w:\\d+/plain/(https://www\\.auchan\\.ru/files/original/\\d+).*",to:"$1"},"Auction.ru-s":{link:"auction\\.ru\\/offer\\/.+\\.html",res:function(e){var t=e._.indexOf('<div class="fotorama"');if(t<0)return null;var a=e._.indexOf('<div class="offer__block">',t);if(a<0)return null;for(var n=[],l=/href="(https:\/\/static\.auction\.ru\/offer_images\/(?:\w+\/)?\d{4}(?:\/\d\d){3}\/big\/\w\/\w+\/\w+\.\w+)"/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1]]),m=l.exec(e._.substring(t,a));return n},img:"(static\\.auction\\.ru\\/offer_images\\/(?:\\w+\\/)?\\d{4}(?:\\/\\d\\d){3}\\/)small(\\/\\w\\/\\w+\\/\\w+\\.\\w+)",to:"$1big$2"},AusCelebs_forums:{useimg:1,link:"^(forums\\.auscelebs\\.net/acnet-)files/(image)\\.php\\?id=(\\d+).*",res:'(//$1$2s/[^"]+$3[^"]+)',img:"^(forums\\.auscelebs\\.net/acnet-images/\\d+/)thumbs/",to:"$1"},"Auto.ru-s":{link:"^auto\\.ru/(?:\\w+/)+[\\da-f-]+/",url:"data:,$&",res:function(e){const t=new XMLHttpRequest;return t.open("Get",e[0],!1),t.send(),[...t.responseText.matchAll(/"1200x900n":"([^"]+)/g)].map(a=>[[["#"+a[1].replace("1200x900n","orig"),a[1]]]])}},"Auto.RIA-s-p":{link:"auto\\.ria\\.com\\/.+\\.html",res:function(e){var t=e._.indexOf('div class="carousel-inner"');if(t<0)return null;var a=e._.indexOf('<div class="preview-gallery mhide">',t);if(a<0)return null;for(var n=[],l=/<img class="outline m-auto" src="([^"]+)"/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1].replace("s.jpg","f.jpg")]),m=l.exec(e._.substring(t,a));return n}},"Auto.RIA_2-s-p":{link:"auto\\.ria\\.com\\/newauto\\/.+\\.html",res:function(e){var t=e._.indexOf("window.initialState=");if(t<0)return null;var a=e._.indexOf("};<\/script>",t);if(a<0)return null;var n=JSON.parse(e._.substring(t+20,a+1)),l=[];for(var m in n.photos){var c="https://auto.ria.com/photos/"+n.photos[m].src;l.push([c])}return l}},"AutoTrader.co.uk-s-p-b":{img:"^((?:m|ec)\\.atcdn\\.co\\.uk/(?:a/)?media/)(?:[^/]+/)?([^?]+).*",to:"$1$2"},"AVITO.ru-s":{link:"^avito\\.ru/(?:[^/]+/[^/]+/.+_\\d{10,}|(web/5/user/[a-f0-9]+/ratings\\?limit=100(?:&offset=\\d+&sortRating=.+)?))",res:function(e){var c,v;if(e[1])return e=JSON.parse(e._),this.avito_images=this.avito_images||[],this.avito_next_page=e.nextPage,this.avito_images.push(...e.entries.flatMap(w=>{var b,k;return w.type==="rating"&&((b=w.value)!=null&&b.images)?(k=w.value)==null?void 0:k.images:[]})),e=this.avito_img_src,delete this.avito_img_src,{loop:e};let t=[],a=[];const n=((c=e._.match(/__initialData__">(.+?)<\/script/))==null?void 0:c[1])||decodeURIComponent((v=e._.match(/__initialData__\s*=\s*"(.+?)"/))==null?void 0:v[1]);n||console.dir(e);const l=JSON.parse(n);for(const w in l)w.includes("@avito/bx-item-view")&&(a=l[w].buyerItem.galleryInfo.media);let m=!1;for(imgs of a){if(imgs.isVideo){m=!0,imgs.embededUrl.startsWith("//")&&(imgs.embededUrl="https:"+imgs.embededUrl),t.push(["",`<imagus-extension type="videojs" url="${imgs.embededUrl}"></imagus-extension>`]);continue}let w=0,b="";for(imgSize in imgs.urls){let k=imgSize.split("x"),S=parseInt(k[0])*parseInt(k[1]);S>w&&(w=S,b=imgs.urls[imgSize])}w!=0&&t.push([b,""])}return m?(this.TRG.IMGS_ext_data=t,{loop:"imagus://extension"}):t},img:"^\\d+\\.img\\.avito\\.st/image/1/1\\.[\\w-]+\\.[\\w-]+$",loop:2,to:function(){var c,v,w,b;var e=arguments;let t,a,n=[],l=this.node,m="https://"+e[0];return(c=l.className)!=null&&c.startsWith("style-imageWrapper-")?(t=!this.avito_images&&((w=(v=new URL(location.href))==null?void 0:v.searchParams)==null?void 0:w.get("sellerId")))?(this.avito_img_src=m,"https://www.avito.ru/web/5/user/"+t+"/ratings?limit=100"):(n=this.avito_images,a=n.find(k=>Object.values(k).some(S=>S===m))||"",!a&&((b=this.avito_next_page)!=null&&b.length)?(this.avito_img_src=m,"https://www.avito.ru"+this.avito_next_page):a["1280x960"]||""):e[0]}},"AwesomeScreenshot-h":{link:"^awesomescreenshot\\.com/image/\\d+/",res:`<meta property="og\\:image" content="([^"]+)"
<meta name="twitter\\:image" content="([^"]+)"`},"AwesomeScreenshot_sharekey-h":{useimg:1,link:"^awesomescreenshot\\.com/(image|video)/(\\d+)\\?(key=\\w+)",url:function(){var e=arguments;return"awesomescreenshot.com/api/v1/"+e[1]+"/load"+(e[1]=="video"?"_video":"")+"?id="+e[2]+"&"+e[3]},res:function(e){let t=JSON.parse(e._),a=e[1]=="video"?"fileMP4URI":"imageFileURI";return t.data[e[1]][a]||t.data[e[1]].fileWebMURI}},BAIDU:{img:"^((?:imgs\\w+|[a-z].hiphotos)\\.baidu\\.com/(?:forum|image)/)[^=]+=[^/]+/([\\da-f]{40}.+)",to:"$1pic/item/$2"},BAIDU_image:{link:"^image\\.baidu\\.com/(?:i|search/detail)/?\\?(?:[^&]*&)*objurl=([^&]+).*",dc:1,loop:1,to:"$1"},"BakaSHOTS-h":{img:"^(bakashots\\.me/[\\w-]{10,}=?=?)[./].+",to:"$1"},"Bayimg-h":{link:"^(.*)bayimg\\.com/\\w{9}",res:'img src=\\"/(.+(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?)))\\" id',to:"https://bayimg.com/$1"},"BBC-p":{link:"^(?:open\\.live\\.)?bbc\\.[a-z.]{3,5}/(?:news/av|mediaselector/6/select/version/2.0/mediaset/pc/vpid)/.+",res:function(e){return e._[0]!=="{"?(this.desc=(e._.match(/name="description" content="[^"]+/)||[,""])[1],/"items\\":\[\{\\"id\\":\\"/.test(e._)?{loop:"https://open.live.bbc.co.uk/mediaselector/6/select/version/2.0/mediaset/pc/vpid/"+e._.match(/"items\\":\[\{\\"id\\":\\"(\w+)/)[1]}:""):(this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="960" height="540"></svg>',`<imagus-extension type="videojs" url="${JSON.parse(e._).media[1].connection[0].href}"></imagus-extension>${this.desc}`],{loop:"imagus://extension"})},img:"^(ichef(?:-\\d+)?\\.bbci\\.co\\.uk/news/)\\d+",to:"$12048"},bdnews24:{img:"^(cdn\\.bdnews24\\.com/bdnews24/media/.+/)SM/",to:"$1"},"Bdsmlr-x-p":{link:"\\w+\\.bdsmlr\\.com/post/\\d+$",res:function(e){var t=e._.indexOf('<div class="postholder">');if(t<0)return null;var a=e._.indexOf('<div class="tags">',t);if(a<0)return null;for(var n=[],l=/class="sidepostimage"\s+src="([^"]+)">/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1]]),m=l.exec(e._.substring(t,a));return n}},"Behance-g":{link:"^behance\\.net/gallery/\\d+/.*",res:function(e){var t=[];const a=new window.DOMParser().parseFromString(e._,"text/html"),n=Array.from(a.querySelectorAll("#project-modules img"));for(const l of n)t.push([l.dataset.src||l.src]);return t},img:"^(behance\\.vo\\.llnwd\\.net)(/profiles\\d+/\\d+/projects/\\d+/)([^/]+)(\\.(?:jpe?g|png|gif))$",to:"$1$2hd_$3$4"},"BestBlades.ru-s":{link:"^(bestblades\\.ru)/[\\w-]+/[\\w-]+/[\\w-]+/([\\w-]+)?",res:function(e){return[...e._.matchAll(/<a href="([^"]+)" class="p-images__slider-item"/g)].map(t=>["//"+e[1]+t[1]])}},"BidBaits.ru-s":{link:"^bidbaits\\.ru/bids/\\d+/?",res:function(e){var t=e._.indexOf('<div class="item-gallery__preview">');if(t<0)return null;var a=e._.indexOf('<i class="item-gallery__zoom-in jsGalleryZoomInBtn">',t);if(a<0)return null;for(var n=[],l=/src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},"Bigl.ua-s-p":{link:"^bigl\\.ua/p\\d+-.+$",res:function(e){return JSON.parse((e._.match(/"image":(\[[^\]]+\])/)||[,"[]"])[1]).map(t=>[t])},img:"^(images\\.prom\\.ua/\\d+)_w[12]00_h[12]00_(.+\\.jpg)$",to:"$1_w640_h640_$2"},"Bild.de-p":{img:"^(bilder\\.bild\\.de/fotos)-skaliert(/[^/]+/)(\\d+),(?!h=2000)[^.]+",to:"$1$2Bild/$3"},BING:{useimg:1,link:"^(bing\\.com/images/search\\?)(?:q|view)=(?:[^&]*&)+id=([\\dA-F]{40}).*",loop:3,url:function(){var e=arguments;return e[0].indexOf("mediaurl=h")>0?"":e[1]+"view=detailV2&id="+e[2]},res:function(e){var t=e[0].match(/mediaurl=(http[^&]+)/);return t?decodeURIComponent(t[1]):(t=e._.match(/class="mainImage"[^>]+?src2="([^"]+)/),t?t[1]:(t=document.evaluate('./ancestor-or-self::a[contains(@m, "imgurl") or contains(@m, "murl")]/@m',this.node,null,2,null).stringValue,t&&JSON.parse(t).imgurl||null))},img:"^(tse[\\d-]+\\.mm\\.bing\\.net/th\\?id=[^&]+).*",to:function(){var e=arguments,t=document.evaluate('./ancestor-or-self::a[contains(@m, "imgurl") or contains(@m, "murl")]/@m',this.node,null,2,null).stringValue;return t=t&&JSON.parse(t),t=t&&(t.imgurl||t.murl),(t?t+`
`:"")+e[1]}},"BitChute-h":{link:"^bitchute\\.com/video/(\\w+)",url:"data:,$&",res:function(e){const t=new XMLHttpRequest;return t.open("POST","https://api.bitchute.com/api/beta/video/media",!1),t.setRequestHeader("Content-Type","application/json"),t.send(`{"video_id":"${e[1]}"}`),JSON.parse(t.responseText).media_url}},"Bluesky|Bsky":{img:"^(cdn\\.bsky\\.app/img/feed_)thumbnail",to:`#$1fullsize
$&`},BoardGameGeek:{useimg:1,link:"^boardgamegeek\\.com/(image|video|geeklist|boardgame(?=/\\d+/[^/]+(?:/(images|videos)|$)))/(\\d+)[^?]*(?:\\?pageid=(\\d+))?.*",url:function(){var e=arguments;return e[1]==="video"?e[0]:e[1]==="boardgame"?`//api.geekdo.com/api/${e[2]||"images"}?ajax=1&gallery=all&nosession=1&objectid=${e[3]}&objecttype=thing&pageid=${e[4]||1}&showcount=60&size=original&sort=hot`:e[1]==="geeklist"?`https://api.geekdo.com/api/listitems?page=${e[4]||1}&listid=${e[3]}`:`//api.geekdo.com/api/images/${Number(e[1][0])?e[1]:e[3]}`},res:function(e){var t,a,n,l,m,c,v;if(e[1]==="video")return{loop:((t=e._.match(/="og:video" content="([^"]+)/))==null?void 0:t[1])||""};if(e._=JSON.parse(e._),e[1]==="boardgame"||e[1]==="geeklist"){if(this.bgg_media=this.bgg_media||[],e[2]==="videos"){if((a=e._.videos)==null||a.forEach(w=>this.bgg_media.push(["",`<imagus-extension type="iframe" url="https://youtube.com/embed/${w.extvideoid}"></imagus-extension>`])),((n=e._.videos)==null?void 0:n.length)===50&&(e[4]||0)<6)return{loop:e[0].match(/^[^?]+/)[0]+"?pageid="+(++e[4]||2)};this.TRG.IMGS_ext_data=this.bgg_media}else if(e[1]==="geeklist"){const w=new XMLHttpRequest;if((l=e._.data)==null||l.forEach(b=>{var S,G,j,R,M,P,L;w.open("GET",`https://api.geekdo.com/api/images/${(S=b.item)==null?void 0:S.imageid}`,!1),w.send();const k=(G=JSON.parse(w.responseText))==null?void 0:G.images;this.bgg_media.push([["#"+((j=k.original)==null?void 0:j.url),(R=k.large)==null?void 0:R.url],`<imagus-extension type="sidebar">${["<b>"+((M=b.linkedImage)==null?void 0:M.alt)+"</b>",b.body,(L=(P=b.item)==null?void 0:P.descriptors)==null?void 0:L.map(C=>{var V;return(C.name[0]==="y"?"Year Published":C.name[0]==="r"?"Rank":b.name)+": "+((V=C.displayValue)==null?void 0:V.replace("Rank ",""))}).join(`
`)].join(`

`)}</imagus-extension>`])}),((m=e._.data)==null?void 0:m.length)===25&&(e[4]||0)<4)return{loop:e[0].match(/^[^?]+/)[0]+"?pageid="+(++e[4]||2)};this.TRG.IMGS_ext_data=this.bgg_media}else{if((c=e._.images)==null||c.forEach(w=>this.bgg_media.push([["#"+w.imageurl,w.imageurl_lg],w.caption||""])),((v=e._.images)==null?void 0:v.length)===60&&(e[4]||0)<5)return{loop:e[0].match(/^[^?]+/)[0]+"?pageid="+(++e[4]||2)};e=this.bgg_media}return delete this.bgg_media,e._?{loop:"imagus://extension"}:e}return[[["#"+e._.images.original.url,e._.images.large.url],"["+e._.href.substr(e._.href.lastIndexOf("/")+1).replace(/-/g," ").toUpperCase()+"] "+e._.caption]]},img:"^cf\\.geekdo-images\\.com/(?:[^/?]+/)+?pic(\\d+).*"},"Bon.ua-s-p":{link:"^bon\\.ua\\/\\w\\w/obyavlenie\\/.+",res:function(e){var t=e._.indexOf('<div class="message-image swiper-container">');if(t<0)return null;var a=e._.indexOf('<div class="swiper-pagination"></div>',t);if(a<0)return null;let n=e._.substring(t,a);for(var l=[],m=/src="([^"]+)"/gi,c=m.exec(n);c;)l.push([c[1]]),c=m.exec(n);return l}},"BOOKING.COM-s":{link:"^(?:(booking.com/hotel/.*\\.html)\\?.+$|booking_album/[^!]+!(.+))",url:function(){var e=arguments;return e[1]||"data:,"+e[0]},res:function(e){return e[2]?e[2].split("!").map(t=>[t]):[...e._.matchAll(/highres_url:\s*'(.+?)'/g)].map(t=>[t[1],""])},img:"^([^/]*bstatic\\.com/.*images/hotel)/(?:square\\d+|max\\d+(?:x\\d+)?)/(.*\\.jpg.*)",loop:2,to:function(){var a,n,l;var e=arguments;const t=this.node;if(/^(?:js-hotel-thumb|bh-photo-)/.test(((a=t.parentNode)==null?void 0:a.className)||t.className||"")){let m=(((n=t.parentNode)==null?void 0:n.className)||t.className||"").startsWith("js-hotel-thumb")?[...((l=t.parentNode.parentNode)==null?void 0:l.querySelectorAll("img"))||[]].map(c=>{var v;return(v=c.src)==null?void 0:v.replace(/(?:square\d+|max\d+(?:x\d+)?)/,"max2048x2048")}):[...document.documentElement.outerHTML.matchAll(/highres_url:\s*'([^']+)/g)].map(c=>c[1]);return m=m.slice(m.findIndex(c=>RegExp(e[2].match(/^[^?]+/)[0]).test(c))),m!=null&&m.length?"//booking_album/"+e[1]+"!"+m.join("!"):`${e[1]}/max2048x2048/${e[2]}`}return`${e[1]}/max2048x2048/${e[2]}`}},"Booru.org|MSPAbooru-x":{useimg:1,link:"^(?:mspabooru\\.com|[\\da-z-]{1,30}\\.booru\\.org)/index\\.php\\?page=post&s=view&id=\\d+",res:'="(https?://(?:mspa|img\\.)booru\\.[^"]+)" id="image"',img:"^thumbs\\d*\\.((?:booru\\.org|mspabooru\\.com)/)(?:([^/]+/)(?:thumbnails/+)?)?(\\d+/)thumbnail_([^?]+).*",to:function(){var e=arguments;return(e[1][0]=="b"?"img.":"")+e[1]+(e[2]||"")+"images/"+e[3]+e[4]}},"BoundHub-x-p":{link:"^boundhub\\.com/(album|video)s/\\d+/.+",url:function(){var e=arguments;return/boundhub\.com$/.test(location.hostname)?"data:,"+e[0]:e[0]},res:function(e){var t;if(e.base[0]==="d"){const a=new XMLHttpRequest;a.open("Get",e[0],!1),a.send(),e._=a.responseText}return e[1]==="album"?[...e._.matchAll(/<a href="([^"]+)" class="item"/g)].map(a=>[a[1]]):(e=((t=e._.match(/video_url: '([^']+)/))==null?void 0:t[1])||"",e!=null&&e.length?e+"#mp4":"")}},"Brazzers|Mofos|Realitykings|Twistys-x-q-p":{link:"(?:brazzers|rk|realitykings|mofos|digitalplayground|twistys)\\.com\\/(?:video|scene|series)\\/(\\d+)\\/.+",res:function(e){var w,b,k,S,G,j;const a=/jwt":"([^"]+)/g.exec(e._),n=a?a[1]:null;if(!n)return;const l=new XMLHttpRequest;if(l.open("GET",`https://site-api.project1service.com/v2/releases/${e[1]}`,!1),l.setRequestHeader("instance",n),l.send(),l.status!==200)return;let m={};try{m=JSON.parse(l.responseText)}catch{return}let c=(k=(b=(w=m.result.children.find(R=>R.type.toLowerCase()==="trailer"))==null?void 0:w.videos)==null?void 0:b.full)==null?void 0:k.files;if(c||(c=(j=(G=(S=m==null?void 0:m.result)==null?void 0:S.videos)==null?void 0:G.mediabook)==null?void 0:j.files),!c)return;const v=Object.keys(c).map(R=>c[R]).map(R=>({res:Number(R.format.replace(/\D/g,"")),url:R.urls.download})).filter(R=>R.res<=1080).sort((R,M)=>M.res-R.res);if(v.length)return v[0].url}},"Brutalica.ru-s":{link:"^brutalica\\.ru/[\\w-]+/[\\w-]+(/[\\w-]+)?",res:function(e){var t=e._.indexOf('<ul class="more-image">');if(t<0)return null;var a=e._.indexOf("</ul>",t);if(a<0)return null;for(var n=[],l=/href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},Bugzilla:{link:"^bug(?:s|zilla)\\.[^/]{5,20}/attachment\\.cgi\\?id=\\d+$",to:function(){var m;var e=arguments,t=this.node,a=t.parentNode,n=a&&a.parentNode;n=n&&n.querySelector(".bz_attach_extra_info,.attach-info");let l=(m=/[.\/](jpe?g|png|gif|bmp|web[mp]|svg|mp4|ogv)(?:[\n\s]|$)/i.exec(t.title||t.textContent))==null?void 0:m[1];return n&&~n.textContent.indexOf("image/")||l||t.classList.contains("lightbox")?e[0]+(l?"#"+l:""):""}},"Bunkr-h-x-p":{link:"^(?:[^.]+\\.)?bunkr+\\.[a-z]+/[vi]/.+",res:function(e){var t;return e=((t=e._.match(/(?:source\s+src|text-xl"\s+href)="([^"]+)/))==null?void 0:t[1])||"",e+"?__bunkr__"+(/\.m[ok]v$/i.test(e)?"#mp4":"")}},"Casimages-h":{link:"^casimages\\.com/(?:i/[^.]+\\.jpg\\.html|f/([A-Za-z0-9]+))",res:function(e){return e[1]?"https://www.casimages.com/f_get.php?f="+e[1]+"#mp4":(e._.match(/<a href="([^"]+)"><img border/)||[])[1]??""},img:"(nsm(?:\\d+)\\.casimages\\.com/img/\\d{4}/\\d{2}/\\d{2}//)mini_(\\d+\\.(?:jpe?g|a?png|gif))",to:"$1$2"},"Catalog.Onliner.by-s":{link:"^catalog\\.onliner\\.by/\\w+/\\w+/\\w+",res:function(e){var t=e._.indexOf('<div id="product-gallery"');if(t<0)return null;var a=e._.indexOf('<div id="product-gallery-fotorama"',t);if(a<0)return null;var n=[],l=/data-original="([^"]+)"/gi;data=e._.substring(t,a);for(var m=l.exec(data);m;)n.push([m[1]]),m=l.exec(data);return n},img:"^(content2\\.onliner\\.by/catalog/device/)\\w+(/[0-9a-f]+\\.jpe?g)$",to:"$1main$2"},"Celeb.gate-x-b":{img:"^(celeb\\.gate\\.cc/media/cache/)[^/]+",to:"$1original"},"Ceneo.pl-s":{link:"^(?:redirect\\.)?ceneo\\.pl/(?:products/)?\\d+",res:function(e){var a;let t=JSON.parse((a=e._.match(/<script type="application\/ld\+json">\n(\{.+?})\n<\//s)||"{}")==null?void 0:a[1]);return t.image?t.image.map((n,l)=>[n,l?"":t.description]):null},img:"^(image\\.ceneostatic\\.pl/data/products/\\d+/)[^i]",to:"$1i"},"ChipDip.ru-s":{link:"(?:www\\.)?chipdip\\.ru\\/product\\d?\\/.+",res:function(e){var t=e._.indexOf('<div class="product__image-previews" id="productphotobox">');if(t<0)return null;var a=e._.indexOf('<div class="product_main-controls">',t);if(a<0)return null;for(var n=[],l=/span data-fancybox-href="([^"]+)" title="([^"]+)"/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1],m[2]]),m=l.exec(e._.substring(t,a));return n}},Chromium:{img:"^(bugs\\.chromium\\.org/p/chromium/issues/attachment\\?aid=\\d+(?:&[^&]+)*?&inline=[^&]+).*",to:"$1"},"CIAN.ru-s":{link:"(\\w+\\.)?cian\\.ru/.*\\d+/",res:function(e){var t=e._.indexOf('"photos":');if(t<0&&(t=e._.indexOf('"gallery":{"imageList":')),t<0)return null;var a=e._.indexOf("}]",t);if(a<0)return null;for(var n=[],l=/"fullUrl":"([^"]+)"/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1].replace(/\\u002F/g,"/")]),m=l.exec(e._.substring(t,a));return n},img:"(cdn-p\\.cian\\.site/images/.+-)\\d(\\.jpe?g?)",to:"$11$2"},"CITILINK.ru-s":{link:"^citilink\\.ru/product/[\\w-]+/",res:function(e){var t,a,n,l,m,c,v;return(((v=(c=(m=(l=(n=(a=JSON.parse(((t=e._.match(/"__NEXT_DATA__" type="application\/json">({.+?})<\/script/))==null?void 0:t[1])||"{}").props)==null?void 0:a.initialState)==null?void 0:n.productPage)==null?void 0:l.productHeader)==null?void 0:m.payload)==null?void 0:c.productBase)==null?void 0:v.images)||[]).map(w=>[w.sources.pop().url])},img:"^cdn\\.citilink\\.ru/[^/]+/resizing_type:fit/gravity:sm/width:\\d{2,3}/height:\\d{2,3}/plain/product-images/[^.]+\\.jpg",to:function(){var t;var e=arguments;return this.cl_imgs=this.cl_imgs||JSON.parse(((t=document.body.outerHTML.match(/"__NEXT_DATA__" type="application\/json">({.+?})<\/script/))==null?void 0:t[1])||"{}").props.initialState.productPage.productHeader.payload.productBase.images,e=this.cl_imgs.find(a=>a.sources.find(n=>n.url==="https://"+e[0])).sources,e[e.length-1].url}},"Civitai-g":{link:"^(civitai\\.com/)(?:(models|images)(/\\d+)|\\w+/\\d+/.+).*",url:function(){var t;var e=arguments;return((t=e[2])==null?void 0:t[0])==="m"?`https://${e[1]}api/v1/${e[2]}${e[3]}`:e[0]},res:function(e){var n,l,m,c;if(((n=e[2])==null?void 0:n[0])==="m"){e=((m=(l=JSON.parse(e._).modelVersions)==null?void 0:l[0])==null?void 0:m.images)||[];const v=e.some(w=>w.nsfwLevel>1)?"[WARNING! To show restricted content in albums, open the Civitai-g sieve and and set include_nsfw_in_model_album to true. To hide this message, set hide_content_message to true.]":"";return e.filter(w=>w.nsfwLevel==1).map(w=>[w.url.replace(/width=\d+\//,""),v])}let t=((c=e._.match(/https:\/\/image\.civitai\.com\/[^\/]+\//))==null?void 0:c[0])||"https://image."+e[1]+"xG1nkqKTMzGDvpLrqFT7WA/",a=JSON.parse(e._.match(/"application\/json">({.*?})</)[1]).props.pageProps.trpcState.json.queries[0].state.data;return a.pages?a.pages[0].items.map(v=>[t+v.url+"/"+v.name]):t+a.url+"/"+a.name},img:"^(image\\.civitai\\.com/[^/]+/[^/]+/)[^/]*width=\\d+",to:"$1original=true"},"clip2net|c2n.me-h":{link:"(?:^clip2net\\.com/s/|^c2n\\.me/)\\w+$",res:'<meta property="og:image" content="([^"]+)">'},"clips4sale-x-p":{link:"^clips4sale\\.com/(?:[a-z]{2}/)?studio/\\d+/\\d+",res:function(e){var t,a;return e=(a=JSON.parse(((t=e._.match(/window\.__remixContext = ({.+?});/))==null?void 0:t[1])||"{}").state)==null?void 0:a.loaderData["routes/($lang).studio.$id_.$clipId.$clipSlug"].clip,e.customPreviewUrl||e.cdn_preview_link||e.previewUrl?[e.customPreviewUrl||e.cdn_preview_link||e.previewUrl,(e==null?void 0:e.description)||""]:[...e.description.matchAll(/"(http[^"]+\.gif[^"]*)/g)].map(n=>[n[1]])},img:"^imagecdn\\.clips4sale\\.com/.*(?:jpe?g|png|gif)",to:function(){var e=arguments;return document.querySelector(`img[src*="${e[0]}"]`).getAttribute("data-src")||img.elem.src}},"ComixZilla-x-p":{link:"^comixzilla\\.com/en/comic-g/.*/$",res:function(e){let n=new DOMParser().parseFromString(e._,"text/html").querySelectorAll(".dgwt-jg-item a"),l=[];for(image of n)l.push([image.href]);return l}},Communities:{img:"^media\\.communities\\.win/preview/\\w+\\.\\w+",to:function(){return this.node.parentNode.parentNode.nextElementSibling.children[1].firstChild.getAttribute("href")}},"ComputerUniverse-s":{link:"^computeruniverse\\.net/\\w\\w/p/\\d+",res:function(e){var t,a,n,l,m;return e=((m=(l=(n=(a=(t=JSON.parse(e._.match(/<script id="__NEXT_DATA__" type="application\/json" nonce="[a-f0-9-]+">(.+?)<\/script>/)[1]).props)==null?void 0:t.pageProps)==null?void 0:a.fullPageProps)==null?void 0:n.staticProps)==null?void 0:l.product)==null?void 0:m.ProductPictures)||[],e.map(c=>["https://img.computerunivers.net/cp/images/1000x1000/"+c.ImageUrlBig])},img:"^(img\\.computerunivers\\.net/(?:cp/)?images/)\\d+x\\d+",to:"$11000x1000"},"Coomer|Kemono|Nekohouse-x-q-p":{link:"^((?:beta\\.)?((?:kemono|coomer|nekohouse)\\.(?:party|su))/)([^/]+/user/[^/]+/post/\\w+).*",url:function(){var e=arguments;return e[2]!=="n"?`//${e[1]}api/v1/${e[3]}`:e[0]},res:function(e){var n,l,m;if(e[2][0]==="n"){const c=((n=e._.match(/"post__content">\n<pre>(.+?)<\/pre>/s))==null?void 0:n[1])||"";return[...e._.matchAll(/(?:class="fileThumb"[^\w]+href|src(?=="[^>]+type="video\/[^"]{3,4}"))="([^"]+)"(?:[^>]+>[^>]+src="([^"]+))?/g)].map((v,w)=>{var b,k;return[["#"+((b=v[1])==null?void 0:b.replace(/^\/[^\/]/,"//"+e[1]+"$&")),""+((k=v[2])==null?void 0:k.replace(/^\/[^\/]/,"//"+e[1]+"$&"))],w?"":c]})}let t=[];const a=c=>{const v=Math.ceil(Math.random()*4),w="//n"+v+"."+e[2]+"/data"+c;return/\.mp4/.test(c)?w:["#"+w,"//img."+e[2]+"/thumbnail/data"+c]};return e._=JSON.parse(e._).post,e._.file.path&&t.push([a(e._.file.path)]),(l=e._.attachments)==null||l.forEach(c=>t.push([a(c.path)])),t[0]&&(t[0][1]=[new Date(e._.added).toLocaleString(),e._.content||"",e._.tags&&"Tags:["+((m=e._.tags)==null?void 0:m.join(", "))+"]"].filter(Boolean).join(" | ")),t},img:"^(img\\.)?((?:coomer|kemono|nekohouse)\\.(?:party|su))/thumbnail",to:function(){var e=arguments;return e[1]?"//n"+Math.ceil(Math.random()*4)+"."+e[2]:e[2]}},"Coub-h":{link:"^coub\\.com\\/view\\/\\w{4,6}",res:function(e){var v,w,b,k,S,G,j;var t=e._.indexOf("<script id='coubPageCoubJson' type='text/json'>");if(t<0)return null;var a=e._.indexOf("script>",t);if(a<0)return null;var n=/{.*}/gi,l=n.exec(e._.substring(t,a)),m=JSON.parse(l),c=(v=m.file_versions.share)==null?void 0:v.default;return c==null&&(c=(k=(b=(w=m.file_versions.html5)==null?void 0:w.video)==null?void 0:b.higher)==null?void 0:k.url),c==null&&(c=(j=(G=(S=m.file_versions.html5)==null?void 0:S.video)==null?void 0:G.high)==null?void 0:j.url),c||""}},Couchsurfing:{img:"(blog\\.couchsurfing\\.com/wp-content/uploads/[^.]+\\.(?:jpe?g|png))",to:"$1"},craigslist:{link:"^[^.]+\\.(craigslist\\.[a-z]{2,3}/[^.]+/\\d+)\\.html",res:function(e){e=e._&&e._.match(/data-imgid="[^"]+" href="([^"]+)/g);var t=this.find,a=this.node.matches('img[src*="images.craigslist.org"]')&&this.node.src;return e&&e.map(function(n){return n=n.slice(n.lastIndexOf('"')+1),[t({src:n})]})||a&&this.find({src:a})||!1},img:"^(images\\.craigslist\\.org/\\w+_\\w+_)(?!1200x900)[^.]+",to:"$1#1200x900 600x450#"},"CSFD.cz|CSFD.sk":{img:"^(image\\.pmgstatic\\.com/).+?(files/images.+)",to:"$1$2"},"CyberDrop-h-x":{link:"^(?:(cyberdrop\\.me/)f/(\\w+)|api\\.cyberdrop\\.me/api/file/auth/\\w+)",url:function(){var e=arguments;return e[2]?`https://api.${e[1]}api/file/info/${e[2]}`:e[0]},res:function(e){return e[2]?(this.cd_type=JSON.parse(e._).type,{loop:"https://api.cyberdrop.me/api/file/auth/"+e[2]}):(e=JSON.parse(e._).url+(this.cd_type.startsWith("video")?"#mp4":""),delete this.cd_type,e)}},"CyberDrop_album-h-x":{link:"^(cyberdrop\\.me)/([af])(/\\w+).*",url:function(){var e=arguments;return e[2]==="f"?`https://api.${e[1]}/api/file/auth${e[3]}`:e[0]},res:function(e){var n;if(e[2]==="a")return this.cd_album={links:[...e._.matchAll(/<a id="file" href="([^"]+)/g)].map(l=>"//"+e[1]+l[1]),num:0},{loop:this.cd_album.links[0]};let a=((n=this.cd_album)==null?void 0:n.vids)||[];if(e=JSON.parse(e._).url,a.push([[e,e+"#mp4"]]),this.cd_album){this.cd_album.num++;const l=this.cd_album.num,m=this.cd_album.links;if(l<m.length&&l<100)return this.cd_album.vids=a,{loop:m[l]};delete this.cd_album}return a}},"CyberFile-h":{link:"^cyberfile\\.me/\\w+",res:function(e){let t=new XMLHttpRequest;return t.open("POST","https://cyberfile.me/account/ajax/file_details",!1),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send("u="+e._.match(/showFileInformation\((\d+)/)[1]),(t.responseText.match(/source src=\\"([^"]+)/)||[,""])[1].replaceAll("\\","")}},DailyMail:{link:"^dailymail\\.co\\.uk/(?:[^/]+/)*article-\\d+",res:function(e){return e=[...e._.matchAll(/<(?:source src="([^"]+)|img id="[^"]*"[^>]+src="([^"]+)" height[^>]+alt="([^"]*)"[^>]+style=")/g)],e.map(t=>[t[1]||t[2],t[3]||""])}},"DailyMotion-h-p":{link:"dailymotion\\.com/(?:embed/)?video/(\\w+)",url:"https://www.dailymotion.com/player/metadata/video/$1",res:function(e){var n;const t=JSON.parse(e._),a=(n=t.qualities)!=null&&n.auto.length?[t.qualities.auto[0].url,t.title]:"";return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1280" height="720"></svg>',`<imagus-extension type="videojs" url="${a}"></imagus-extension>${t.title} | ${t.owner.screenname}`],a.length?{loop:"imagus://extension"}:""}},"Danbooru.Donmai.us-x-p":{link:"^(?:(?:safe|dan)booru\\.|hijiribe\\.|sonohara\\.)?(donmai\\.us)/post(?:s|/show)/(\\d+).*",url:"//danbooru.$1/posts/$2.json",res:function(e){var t=JSON.parse(e._);return t&&t.file_url?[t.file_url,(t.tag_string_general+(t.tag_string_artist?" by "+t.tag_string_artist:"")).replace(/_/g," ")]:null},img:"^((?:(?:safe|dan)booru\\.|hijiribe\\.|sonohara\\.)?donmai\\.us/data/)[^/]+/(?:sample-)?([\\da-f]{32}\\.).+",to:`#$1$2#jpg png gif webm#
$1sample/sample-$2#jpg png gif#`},"Darudar-s":{link:"^darudar\\.org/\\w+/\\d+",res:function(e){return[...e._.matchAll(/href="([^"]+)"\s+data-fancybox-group/g)].map(t=>[t[1]])},img:"^(static\\.daru-dar\\.org/s)\\d+(/[0-9a-f]{2}\\.[0-9a-f]{2}/[0-9a-f]{2}/[0-9a-f]{2}/[0-9a-f]{2}/[0-9a-f]+\\.jpe?g)$",ci:2,to:"$11024$2"},"Daz3D-g-p":{link:"^daz3d\\.com/[\\da-z-]+$",res:function(e){var t=e._.match(/data-fancybox-href="([^"]+)/g)||!1,a=e._.match(/<h1>([^<]+)</);return t&&t.map(function(n,l){return[n.slice(20).replace(/-thumb(-daz3d)/,"-main$1"),!l&&a&&a[1]]})},img:"^daz3d\\.com/cdn-cgi/image/[^/]+/(https:.+)",to:function(){var e=arguments;return e[1].replace(/-thumb(-daz3d)/,"-main$1")}},dcinside:{link:"^gall\\.dcinside\\.com/(?:(?:(?:[^/]+/)?board/view/|list\\.php)\\?id=[^&]+&no=|\\w+/)\\d+",res:function(e){return[...new DOMParser().parseFromString(e._,"text/html").querySelectorAll('img[src*="viewimage.php?"][style][alt],img[src*="viewimage.php?"][onError][alt]')].filter(t=>{var a;return(a=t.alt)==null?void 0:a.length}).map(t=>[t.src])}},"DeepSkyHosting-h":{img:"(deepskyhosting\\.com/img/\\w/)\\d+(/\\d+\\.\\w+)",to:"$1full$2"},Deezer:{img:"((?:e-)?cdns?-images\\.dzcdn\\.net\\/images\\/(?:cover|playlist|artist|talk)\\/\\w+\\/)[^\\.]+\\.jpg",to:"$11200x1200-000000-95-0-0.jpg"},"Defense.gov_photo":{link:"defense\\.gov\\/Multimedia\\/Photos\\/igphoto\\/\\d{10}\\/",res:'<a class="details-url" href="(https?:\\/\\/media\\.defense\\.gov\\/\\d{4}\\/\\w+\\/\\d{2}\\/\\d{10}\\/-1\\/-1\\/0\\/.+\\.\\w+)">',img:"^(media\\.defense\\.gov/\\d+/\\w+/\\d+/\\d+)/\\d+/\\d+(/\\d+/[\\w-]+\\.(?:jpe?g|png|gif))$",ci:2,to:"$1/2000/2000$2"},"dePIC-h":{link:"^depic\\.me/\\w+/.+",res:'<img src="([^"]+)"[^>]+id="pic"'},"Derpibooru|Furbooru|Trixiebooru-x":{link:"^(derpiboo(?:ru\\.org|\\.ru)|(?:trixiebooru|furbooru)\\.org)/(?:images/)?(\\d+)[^.]*",url:"https://$1/api/v1/json/images/$2",res:function(e){e=JSON.parse(e._).image;var t=e.representations;return[[e.format=="gif"?["#"+t.webm,"#"+t.mp4,t.full]:e.width<1200&&e.height<1200?[t.full]:["#"+t.full,t.large],["["+e.created_at+"]",e.name,e.description,e.tags,e.source_url].filter(Boolean).join(" | ")]]},img:"^((?:derpicdn\\.net|furrycdn\\.org)/img/)(?:view/)?(20\\d\\d/1?\\d/[123]?\\d/\\d+)[^?]*\\.([^?]+)",to:function(){var e=arguments;return e[1]+"view/"+e[2]+"."+(e[3]=="gif"?"#webm mp4 gif#":e[3])}},"DeviantArt-x-q-p":{link:"^(?:(?:[^.]+\\.)?deviantart\\.com/(?:(?:[^/]+/)?art/[^#]+$|#/\\w+)|fav\\.me/(\\w+))",url:function(){var e=arguments;return e[1]?"http://fav.me/"+e[1]:e[0]},res:function($){let pagedefinitionsJSON=$._.match(/\.__INITIAL_STATE__\s*=\s*JSON\.parse\(("[^\n]+")/);if(!pagedefinitionsJSON)return pagedefinitionsJSON=$._.match(/collect_rid="[^"]+" src="([^"]+)"[^>]+alt="([^"]+)"[^>]+="dev-content-full/),pagedefinitionsJSON&&[pagedefinitionsJSON[1],pagedefinitionsJSON[2]];let deviationdefinition_all=JSON.parse(eval(pagedefinitionsJSON[1]))["@@entities"],deviationkey=Object.keys(deviationdefinition_all.deviationExtended)[0],deviationdefinition_extended=deviationdefinition_all.deviationExtended[deviationkey],deviationdefinition_specific=deviationdefinition_all.deviation[deviationkey],toptext;{deviationdefinition_extended.originalFile.width+""+deviationdefinition_extended.originalFile.height;const e=new Date;e.setTime(Date.parse(deviationdefinition_specific.publishedTime));let a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec "][e.getMonth()],n=e.getDate(),l=e.getFullYear(),m=a+" "+n+" "+l,c="";if(deviationdefinition_extended.tags){for(let v=0;v<deviationdefinition_extended.tags.length;v++)if(v>0&&(c+=", "),c+=deviationdefinition_extended.tags[v].name,v>4){c+=" ...";break}}else c=c==""?"No Tags":c;toptext=m+" | "+deviationdefinition_specific.title+" | "+deviationdefinition_all.user[deviationdefinition_specific.author].username}let mediadefinition=deviationdefinition_specific.media,baseuri=mediadefinition.baseUri;mediadefinition.types.filter(function(e){return!!e.c||!!e.b}).pop();let mediatokens=mediadefinition.token;if(!baseuri)return;let mediatokenstring0=mediatokens?"?token="+mediatokens[0]:"";mediatokens&&mediatokens[1]&&""+mediatokens[1];let medialinkobject;{if(deviationdefinition_all.deviationExtended[deviationkey].download){let n=deviationdefinition_all.deviationExtended[deviationkey].download.url;if(n.match(/\.(?:7z|rar|zip|pdf)\?/)==null)return medialinkobject=[n],[[medialinkobject,toptext]]}let e,t,a;mediadefinition.types;for(let n=0;n<mediadefinition.types.length;n++){let l=mediadefinition.types[n];if(l.t!="preview"){if(l.t=="fullview"){e=l;continue}if(l.t=="video"){t?t=t.w<l.w?l:t:t=l;continue}if(l.t=="gif"){a=l;continue}}}t?medialinkobject=[t.b]:a?medialinkobject=[a.b+mediatokenstring0]:e?e.b||e.c?medialinkobject=[baseuri+(e.b||e.c).replace("<prettyName>",deviationdefinition_specific.media.prettyName)+mediatokenstring0]:medialinkobject=[baseuri+mediatokenstring0]:medialinkobject=[baseuri+mediatokenstring0]}let returnval=[[medialinkobject,toptext]];return returnval},img:"^images-wixmp-ed30a86b8c4ca887773594c2\\.wixmp\\.com/[a-z]/[\\da-f-]{36}/([\\da-z]+)-.*"},"DeviantArt_sta.sh-x-p-b":{link:"sta\\.sh/\\w+",res:function(e){let t=e._.match(/src="([^"]+)"[^>]+class="dev-content-full">/);if(t!=null)return t[1];let a=e._.indexOf('script><div class="stash-thumb-container');if(a<0)return null;let n=e._.indexOf('<div id="empty-item" class="invisible">',a);if(n<0)return null;let l=[],m=/data-super-full-img="([^"]+)"/gi,c=e._.substring(a,n),v=m.exec(c);for(;v;)l.push([v[1]]),v=m.exec(c);return l}},"Diberie_Rehost-h":{img:"^(rehost.diberie.com/Picture/Get)/\\w/(\\d+)",to:"$1/f/$2"},"DimonVideo.ru":{link:"^dimonvideo\\.ru/go\\?.+(png|bmp|jpe?g)$"},"DirectUpload-h":{useimg:1,link:"^(?:s\\d+\\.)?directupload\\.net/file/[a-z]/\\d+/",res:`"og:image" content="([^"]+)
"og:description" content="([^"]+)`,img:"^((?:f?s\\d+b?\\.)?directupload\\.net/images/(?:user/)?\\d+/)temp/",to:"$1"},Discogs:{link:"^discogs\\.com/(?:\\w\\w/)?artist/[^\\/]+",res:function(e){var t=[];return(e._.match(/"full": "[^"]+/g)||t).forEach(function(a){t.push([a.replace('"full": "',"")])}),t.length==0&&(e._.match(/<\/span><img src="[^"]+/g)||t).forEach(function(a){t.push([a.replace('</span><img src="',"")])}),t}},Discogs_2:{link:"^discogs\\.com/(?:[\\w-]+/)?(release|master)/(\\d+)[^\\/?]*(?:(?:/|\\?)image(?:=(\\d+))?(?:.+))?",url:function(){var e=arguments;return location.hostname.slice(-11)==="discogs.com"?"data:,"+e[0]:"https://www.discogs.com/service/catalog/api/graphql?operationName="+(e[3]||e[1]=="release"?"ReleaseAllImages":"MasterReleaseAllImages")+'&variables={"discogsId":'+(e[3]?e[3]:e[2])+',"count":500}&extensions={"persistedQuery":{"version":1,"sha256Hash":"'+(e[3]||e[1]=="release"?"c7033a9fd1facb3e69fa50074b47e8aa0076857a968e6ed086153840e02b988a":"d4f46242851858eeae5e60edf0bc5d2e4e9124e8a2991f7168f41a3ac1e80489")+'"}}'},res:function(e){if(e.base[0]==="d"){const n=new XMLHttpRequest;n.open("GET","https://www.discogs.com/service/catalog/api/graphql?operationName="+(e[3]||e[1]=="release"?"ReleaseAllImages":"MasterReleaseAllImages")+'&variables={"discogsId":'+(e[3]?e[3]:e[2])+',"count":500}&extensions={"persistedQuery":{"version":1,"sha256Hash":"'+(e[3]||e[1]=="release"?"c7033a9fd1facb3e69fa50074b47e8aa0076857a968e6ed086153840e02b988a":"d4f46242851858eeae5e60edf0bc5d2e4e9124e8a2991f7168f41a3ac1e80489")+'"}}',!1),n.send(),e._=n.responseText}let t=[];const a=JSON.parse(e._);return a.data.masterRelease?(a.data.masterRelease.keyRelease.images.edges.forEach(function(n){t.push([n.node.fullsize.sourceUrl])}),t):(a.data.release&&a.data.release.images.edges.forEach(function(n){t.push([n.node.fullsize.sourceUrl])}),t)}},Discogs_3:{link:"^discogs\\.com/.+/release/[\\d-\\w]+(?:#([\\da-zA-z=]+))*$",url:function(){var e=arguments;return e[1]?atob(e[1]):e[0]},res:function(e){if(e[1]){var t=e._,a=t.indexOf('<ul class="thumbnails_');if(a<0)return null;var n=t.indexOf("</ul>",a);if(n<0)return null;for(var l=[],m=/<img src="([^"]+)"/gi,c=m.exec(t.substring(a,n));c;)l.push([c[1]]),c=m.exec(t.substring(a,n));return l}else{var m=/class=".+" href="([^"]+)"><div class=".+"><picture>/gi,c=m.exec(e._);if(c==null)return null;const b=e[0].split("/").slice(3).join("/"),k=document.querySelector(`a[href*="${b}"]`);k.href+=`#${btoa("https://www.discogs.com"+c[1])}`,k.style.cssText="border-bottom: 3px solid #ebff00; !important";return}}},Discord_profile:{img:"^(cdn\\.discordapp\\.com/(?:icons|avatars)/\\d+/[^?]+).*",to:"$1?size=4096"},"DMM.co.jp-x-p":{link:"dmm.co.jp/digital/videoa/-/detail/=/cid=.+",res:function(e){var t=e._,a=/href="(.+?pl\.jpg)"/i,n=t.match(a),l=e._.indexOf('id="sample-image-block"');if(l<0)return null;var m=e._.indexOf("ç”»åƒã¯ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™",l);if(m<0)return null;var c=[],v=/href="([^"]+)"/gi,w=e._.substring(l,m),b=v.exec(w);for(c.push([n[1]]);b;)c.push([b[1]]),b=v.exec(w);return c},img:"(dmm\\.(co\\.jp|com)\\/.+)(ps|pt|-\\d+)\\.jpg",ci:2,to:function(){var e=arguments;return e[3]=="pt"||e[3]=="ps"?e[1]+"pl.jpg":e[1]+e[3]+".jpg"}},"DNS-shop.ru-s":{link:"^(?:www\\.)?dns-shop\\.ru\\/product\\/[a-f0-9]{16}\\/.+\\/$",res:function(e){var t=/data-product-card="([^"]+)"/gi,a=e._,n=t.exec(a)[1];if(n==null)return null;if(x=new XMLHttpRequest,x.open("GET","https://www.dns-shop.ru/catalog/product/get-media-content/?id="+n,!1),x.send(),x.readyState==4&&x.status==200){for(var l=x.responseText,m=[],c=/"origSrc":{"orig":"([^"]+)"/gi,v=c.exec(l);v;)m.push([v[1]]),v=c.exec(l);return m}}},"DNS-shop.ru-s_club":{link:"^club\\.dns-shop\\.ru/(?:review|digest)/(?:t-)?\\d+",url:function(){var e=arguments;return e[1]&&/dns-shop\.ru/.test(location.hostname)?"data:,"+e[1]:e[0]},res:function(e){var m,c,v,w,b;if(e[1]){if(!this.dns_shop_json){const k=(m=document.body.innerHTML.match(/data-product-card="([^"]+)/))==null?void 0:m[1],S=new XMLHttpRequest;if(!k)return null;S.open("GET","https://www.dns-shop.ru/catalog/product/get-media-content/?id="+k,!1),S.send(),this.dns_shop_json=S.responseText}return((v=(c=JSON.parse(this.dns_shop_json).data.tabs[0].objects.find(k=>RegExp(`${e[1]}`).test(k.thumbSrc.orig)))==null?void 0:c.origSrc)==null?void 0:v.orig)||""}const t=k=>k.replace(/thumb\/st1\/fit\/\d+\/d+\/[^\/]+/,"api/v1/image/getOriginal");e=JSON.parse(((w=e._.match(/type="application\/ld\+json">({.+?})<\//))==null?void 0:w[1])||"{}")["@graph"][0];const a=[e.about,e.description].filter(Boolean).join(" | "),n=e.image.map((k,S)=>[t(k),S?"":a]),l=(b=e.video)==null?void 0:b.map(k=>["",`<imagus-extension type="iframe" url="${k.embedUrl}"></imagus-extension>`]);return e=n.concat(l),l!=null&&l.length?(this.TRG.IMGS_ext_data=e,{loop:"imagus://extension"}):e},img:"^\\w\\.dns-shop\\.ru/thumb/st\\d/(?:fit|crop)/\\d+/\\d+/\\w+/(\\w+\\.\\w+)(?:\\.\\w+)?$"},"DogDrip-p":{link:"^dogdrip\\.net.*/\\d+",res:function(e){return[...e._.matchAll(/<(?:video|img)[^>]+src="(\/dvs\/[^"]+)/g)].map(t=>[t[1]])}},"DogfartNetwork-x-p-b":{link:".*dogfartnetwork\\.com/tour/scenes/.+/.+/pics/\\d+\\.jpg\\?p=\\d+",res:'img src="(.*)" alt=""'},"Domclick.ru-s":{link:"^domclick\\.ru/card/\\w+__\\w+__\\d+",url:function(){var e=arguments;return(()=>{if(!this.node.closest('[data-test="product-snippet-property-offer"]'))throw"";return e[0]})()},res:function(e){var l,m,c,v,w,b,k,S,G,j,R,M,P,L,C,V,J;var t=[];const a=JSON.parse(((m=(l=e._.match(/window\.(?:__SSR_STATE__|__PRELOADED_STATE__)\s*=\s*({.+})/))==null?void 0:l[1])==null?void 0:m.replace(/:undefined/g,':""'))||'""');let n=((w=(v=(c=a.productCard)==null?void 0:c.originalProduct)==null?void 0:v.object_info)==null?void 0:w.description)||((G=(S=(k=(b=a.shell)==null?void 0:b.data)==null?void 0:k.newFlat)==null?void 0:S.objectInfoList)==null?void 0:G.description);return[...((R=(j=a.productCard)==null?void 0:j.originalProduct)==null?void 0:R.photos)||[],...((L=(P=(M=a.shell)==null?void 0:M.data)==null?void 0:P.newFlat)==null?void 0:L.photo)||[],...((J=(V=(C=a.shell)==null?void 0:C.data)==null?void 0:V.newFlat)==null?void 0:J.complexPhotos)||[]].forEach(function(N,U){t.push(["https://img.dmclk.ru/s2000x2000q100"+(typeof N=="string"?N:N.url),U===0?n:""])}),t},img:"^img\\.dmclk\\.ru/s\\d+x\\d+q\\d+/(vitrina/.+.webp)",to:"img.dmclk.ru/$1"},"Douban-g":{img:"^(img\\d+\\.douban(?:io)?\\.com/)(?:(view/|img/)(?:photo|movie_poster_cover|(thing_review|commodity_story|celebrity))/(?!large)[^/]+|(icon/u(?=\\d))|[sm](?=pic/))",to:function(){var e=arguments;return e[1]+(e[2]?e[2]+(e[3]||"photo")+"/#large photo#":(e[4]||"")+"l")}},Douyin:{link:"^douyin.com/video/(\\d+)",url:"https://www.douyin.com/?modal_id=$1",res:function(e){var a;debugger;return((a=/playAddr\\":.+?\\"src\\":\\"(.+?)\\"/.exec(e._))==null?void 0:a[1])+"#mp4"}},"Doujins-x-p":{link:"doujins\\.com\\/.+\\/.+-\\d+.*",res:function(e){var t=e._.indexOf('class="swiper-zoom-container"');if(a<0)return null;var a=e._.indexOf('class="swiper-button-next"',t);if(a<0)return null;for(var n=[],l=/data-src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1].replace("amp;","")]),c=l.exec(m);return n},img:"static.doujins\\.com\\/t2?-(\\w+)\\..+",to:function(){var e=arguments;return document.querySelector('.swiper-slide[data-hash="'+e[1]+'"] img').getAttribute("data-src")}},"Download.ru":{link:"^(download\\.ru/files/\\w+)/?$",url:"https://$1.json",res:function(e){var n,l,m;let t;try{t=(m=(l=(n=JSON.parse(e._))==null?void 0:n.object)==null?void 0:l.preview)==null?void 0:m.urls}catch{console.error("Could not fetch data"),console.error("Post on /r/imagus")}const a=(t==null?void 0:t.mp4)||(t==null?void 0:t.large)||(t==null?void 0:t.poster)||(t==null?void 0:t.medium)||(t==null?void 0:t.min)||(t==null?void 0:t.small)||(t==null?void 0:t.thumb)||(t==null?void 0:t.tiny);return a&&`https://download.ru${a}`}},"DPChallenge-g":{img:"^(images\\.dpchallenge\\.com/images_[^/]+/\\d+-\\d+/\\d+/)120/",to:"$1800/"},DPreview:{link:"^dpreview\\.com/sample-galleries/(\\d+)/(\\d+)?.*",url:function(){var e=arguments;return!this.json||e[1]!==this.pageId?"https://www.dpreview.com/sample-galleries/data/get-gallery?galleryId="+e[1]:"data:"+e[0]},res:function(e){var t,a;if(this.pageId=e[1],e._[0]==="{"&&(this.json=JSON.parse(e._).images),!this.json)return"";if(/one!$/.test(e[0])){let n=this.json.find(l=>RegExp(`${e[2]}`).test(l.directUrl));return[[["#"+n.thumbnails[n.thumbnails.length-1].url,""+((t=n.thumbnails.toReversed().filter(l=>l.height<=1e3)[0])==null?void 0:t.url)]]]}return((a=this.json)==null?void 0:a.map(n=>{var l;return[["#"+n.thumbnails[n.thumbnails.length-1].url,""+((l=n.thumbnails.toReversed().filter(m=>m.height<=1e3)[0])==null?void 0:l.url)]]}))??""},img:"^\\d\\.img-dpreview\\.com/files/p/(?!TS\\d{4,})[^/]+~sample_galleries/(\\d+/\\d+).*",loop:2,to:function(){var e=arguments;return"//www.dpreview.com/sample-galleries/"+e[1]+"/one!"}},"Dribbble-h":{link:"dribbble\\.com/shots/[\\w-]+",res:function(e){var t=e._.indexOf('<ol class="'),a=[];if(t<0)if(t=e._.indexOf("<video"),t<0){var n=/data-photoswipe-image.+?href=\"(http[^?]+)\?/gi,l=n.exec(e._);if(l)a.push([l[1]]);else{var m=/div class=\"media-content\".+data-animated-url=\"(http[^\"]+)/gis,c=m.exec(e._);if(c)a.push([c[1]]);else return null}}else{var v=e._.indexOf("</video",t);if(v<0)return null;var w=e._.substring(t,v),n=/data-video-large=\"(http[^\"]+)/gi,l=n.exec(w);if(l)a.push([l[1]]);else{var m=/ src=\"(http[^\"]+)/gi,c=m.exec(w);a.push([c[1]])}}else{var v=e._.indexOf("</ol>",t);if(v<0)return null;var w=e._.substring(t,v),n=/data-srcset=\"(http[^\?]+)/gi,l=n.exec(w);if(l){var b=new DOMParser().parseFromString(w+"</ol>","text/html"),k=Array.from(b.querySelectorAll("img"));for(const P of k){var S=P.attributes["data-animated-url"];if(S)a.push([S.value]);else{S=P.attributes["data-src"],S==null&&(S=P.attributes.src);var m=/(http(?=.*cdn\.)[^\?]+)/gi,c=m.exec(S.value);c&&P.classList.length&&P.classList[0].toLowerCase()==="lazyload"&&a.push([c[1]])}}}else if(n=/div class=\"video-wrap\"/gi,n.exec(w)){var m=/data-video-large=\"(http[^\"]+)/gi,c=m.exec(w);a.push([c[1]])}}return a}},"Drive2.ru-s":{link:"^drive2\\.ru/\\w/\\d+/",res:function(e){var a;const t=(a=e._.match(/([^\/.]+)-\d+\./))==null?void 0:a[1];return e=[...e._.matchAll(/ImageObject"><a href="([^"]+)/g)].map(n=>[n[1]]),t&&(e=e.concat(e.splice(0,e.findIndex(n=>RegExp(t).test(n[0]))))),e}},"Drom.ru-s":{link:"^(\\w+)\\.drom\\.ru/.+/.+/(?:[^-]+-)*\\d+\\.html",res:function(e){var t;return e[1]==="moto"?(e=JSON.parse(((t=e._.match(/<script type="application\/ld\+json">([^<]+"image"[^<]+)<\//s))==null?void 0:t[1])||"{}"),e.image.map((a,n)=>[a.replace("bulletin","default"),n?"":[e.name,e.description].filter(Boolean).join(" | ")])):[...new DOMParser().parseFromString(e._,"text/html").querySelectorAll('[data-ftid="bull-page_bull-gallery_thumbnails"] a')].map(a=>[a.href])},img:"^(static\\.baza\\.drom\\.ru/drom/\\d+_)bulletin",to:"$1default"},"Drom.ru_pdd":{link:"^drom\\.ru/pdd/pdd/(sign|mark)[_\\d]+/?(/s#[_\\d]+)?",res:function(e){let t=e._.indexOf("pub__img");if(t<0)return null;let a=e._.indexOf('id="comments_block"',t);if(a<0)return null;let n=[],l=/src="([^"]+\.svg)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n}},"Drom.ru_reviews":{link:"drom\\.ru/reviews/.+/.+/\\d+/",res:function(e){let t=e._.indexOf("data-thumb-images");if(t<0)return null;let a=e._.indexOf("<div data-preview-images",t);if(a<0)return null;let n=[],l=/href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n}},"Dropbox-h":{link:"^dropbox\\.com/.*\\.(?:(aac|flac|m(?:p3|4a)|w(?:av|ma))|(3g[2p]|a(?:mv|sf|vi)|drc|f(?:lv|4[vpab])|m[42ko]v|mng|mp[g42ev]|mpeg|m2?ts|ts|mxf|nsv|og[vg]|r(?:m(?:vb)?|oq)|svi|v(?:iv|ob)|w(?:ebm|mv)|yuv)|bmp|gif|heic|j(?:pe?g|f?if)|png|svgz?|tiff?|webp)\\b.*",ci:1,to:function(){var e=arguments;return e[0].replace("&dl=0","")+"&raw=1"+(e[1]?"#mp3":e[2]?"#mp4":"")}},"DTF.ru":{img:"^(leonardo\\.osnova\\.io/[\\da-f-]+/)-/.+",to:"$1"},"Dubz-h":{link:"^(?:clip\\.)?dubz\\.[a-z]{2,4}/[a-z]{1,}/([a-z0-9]{6,})$",res:'(?:video|source) src="([^#"]+)'},DuckDuckGo:{img:"^(external-content\\.duckduckgo\\.com/iu/\\?u=.+)",loop:2,to:function(){var e=arguments;function t(c){const v=document.createElement("script");v.textContent=c,v.onload=function(){this.remove()},(document.head||document.documentElement).appendChild(v)}const a=new URL("https://"+e[0]).searchParams.get("u"),n=new URL(a).searchParams.get("id"),l=this.TRG.className;if(!(l.includes("tile--img__img")||l.includes("module--images__thumbnails__image")))return a;t('sessionStorage.setItem("DDGData", JSON.stringify(window.DDG.Data.answers._definitions[1].model.items));');const m=JSON.parse(sessionStorage.getItem("DDGData"));for(const c of m)if(c.thumbnail.includes(n))return c.image}},"Dumpert.nl":{link:"^(dumpert\\.nl/)(?:mediabase/|item/|[^?]*\\?selectedId=)(\\d+)[/_]([\\da-f]+).*",url:"https://api-live.$1mobile_api/json/info/$2_$3",res:function(e){var t=JSON.parse(e._),a=t&&t.items&&t.items[0];return this.TRG.IMGS_ext_data=a.media.map(function(n,l){var m={};return n.variants.forEach(function(c){return m[c.version]=c.uri}),n=[m["720p"]||m.tablet||m.mobile||m.photo,!l&&[a.date,a.title,a.description].filter(Boolean).join(" | ")],/\.m(?:3u8|pd)?\b/.test(n[0])?["",`<imagus-extension type="videojs" url="${n[0]}"></imagus-extension>${n[1]||""}`]:n}),{loop:"imagus://extension"}},img:"^media\\.(dumpert\\.nl/)(?:sq_thumb|still)s/medium/(\\d+)_([\\da-f]+).+"},"DZEN.ru-h":{link:"^dzen\\.ru/(a|shorts|video/watch|news/story)/\\w+",res:function(e){var n,l,m,c,v,w,b,k,S,G,j,R,M,P,L,C;let t,a=[];if(e[1]==="news/story"){const V=new XMLHttpRequest;let J=!1;t=((v=(c=(m=(l=JSON.parse(((n=e._.match(/=({.+?})<\//))==null?void 0:n[1])||"{}").dataSource)==null?void 0:l.news)==null?void 0:m.story)==null?void 0:c.mediaBlock)==null?void 0:v.items)||[],t.forEach(N=>{var U,W,F,Z,te;N.type==="jingle"&&(J=!0),J||(N.type==="photo"&&a.push([(W=(U=N.original)==null?void 0:U.src)==null?void 0:W.replace(/\d+x\d+$/,"orig")]),N.type==="video"&&(V.open("GET","https://dzen.ru/embed/"+N.id+".json",!1),V.send(),N=(te=(Z=(F=JSON.parse(V.responseText||"{}").content)==null?void 0:F.streams)==null?void 0:Z[0])==null?void 0:te.url,N&&a.push(["",`<imagus-extension type="videojs" url="${N}"></imagus-extension>`])))}),this.TRG.IMGS_ext_data=a}else if(e[1]==="a"){t=JSON.parse(((w=e._.match(/w\._data\s*=\s*({.+?});/))==null?void 0:w[1])||"{}");const V="//avatars.dzeninfra.ru/get-",J=(k=(b=t.publication)==null?void 0:b.content)==null?void 0:k.preview;if((S=J==null?void 0:J.image)!=null&&S.imageName){let N=J==null?void 0:J.image;N=V+[N.namespace,N.groupId,N.imageName].join("/"),a.push([["#"+N+"/orig",N+"/scale_1200"],J.snippet||""])}Object.values(t.images||[]).forEach(N=>{const U=V+[N.namespace,N.groupId,N.imageName].join("/");N.imageName!==J.imageName&&a.push([["#"+U+"/orig",U+"/scale_1200"],N.title||""])}),this.TRG.IMGS_ext_data=a}else t=JSON.parse(((G=e._.match(RegExp('_params=\\(({"ssrData":{.+?})\\)')))==null?void 0:G[1])||"{}").ssrData,a=(L=(P=(M=(R=(j=t==null?void 0:t.streamsResponse)==null?void 0:j.SingleStream)==null?void 0:R[0])==null?void 0:M.StreamInfo)==null?void 0:P.pop())==null?void 0:L.OutputStream,this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${a}"></imagus-extension>${((C=t==null?void 0:t.videoMetaResponse)==null?void 0:C.description)||""}`];return a?{loop:"imagus://extension"}:null},img:"^(avatars\\.dzeninfra\\.ru/get-ynews/\\d+/[a-f0-9]+/)\\d+x\\d+$",loop:2,to:function(){var e=arguments;const t=this.node;return location.hostname==="dzen.ru"&&t.closest(".news-media-block-redesign__previews-item-inner")?t.baseURI+"?loop":e[1]+"orig"}},"e621|e926|e6ai-x-p":{link:"^e(621|926)\\.net/pools/\\d+",res:function(e){let t=e._.indexOf('="posts-container">');if(t<0)return null;let a=e._.indexOf('<div class="paginator">',t);if(a<0)return null;let n=[],l=/data-file-url="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n},img:"^(static\\d\\.e(?:621|926|6ai)\\.net/data/)preview/(\\w+/\\w+/\\w+\\.)\\w+",to:"$1$2#png jpg webm gif#"},"eApteka.ru-s":{link:"eapteka\\.ru/([^/]+/)?goods/id\\d+/",res:function(e){var t=e._.indexOf('<div class="gallery__main-slick s-carousel"');if(t<0)return null;var a=e._.indexOf('<div class="',t+20);if(a<0)return null;var n=[],l=/<a href="([^"]+)"/gi;let m=e._.substring(t,a);for(var c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},"EBAY-s":{link:"^(?:(?:(?:be\\w\\w|viewitem\\.eim|cgi)\\.)?ebay\\.(?:a[pt]|[bd]e|c[ahnz]|co(?:m(?:\\.(?:au|hk|my|sg|tw))?|\\.(?:th|uk))|es|f[ir]|gr|[hr]u|i[ent]|n[lo]|p[hl]|vn)/(?:itm/)?[^/?]*[?/](?:item=)?|chodientu\\.vn/ebay-item-)(\\d{8,19}).*",res:function(e){var c;const t=/img src="([^"]+)" style="max\-width:64px;max\-height:64px"\s+index="\d+"/g,a=[...e._.matchAll(t)];if(a.length)return a.map(v=>[v[1].replace(/s\-l\d+\./,"s-l9999."),""]);const n=(c=e._.match(/mediaList":(\[.*?)<\/script>/))==null?void 0:c[1];if(!n)return;let l=0,m;for(let v=0;v<n.length;v++)if(n[v]==="["&&l++,n[v]==="]"&&l--,l===0){m=v+1;break}try{return JSON.parse(n.slice(0,m)).map(v=>{var w,b,k,S;return[(b=(w=v==null?void 0:v.image)==null?void 0:w.originalImg)==null?void 0:b.URL.replace(/s\-l\d+\./,"s-l9999."),(S=(k=v==null?void 0:v.image)==null?void 0:k.originalImg)==null?void 0:S.title.trim()]})}catch{return}},img:"^((?:ssl)?i\\d*\\.ebayimg\\.com/)(?:(?:thumbs/)?(images/[a-z]/[^/]+/s-l)[^.]+|((?:t/[^/]+/)?\\d+/[^_]+(?:~~\\d*)?)_(?!32)\\d+\\.)",to:function(){var e=arguments;return e[1]+(e[2]?e[2]+"1600":e[3]+"_32.")}},"E-Hentai|Exhentai-x-q-p":{link:"^((?:g\\.e-|e[x-])hentai\\.org\\/(lofi\\/)?(g|s)\\/\\w+\\/(\\w+(-\\d+)?))(\\/\\?p=(\\d+))?",res:function(e){var v,w;if(e[3]==="s"){var t=!0;return[[[t&&((v=e._.match(/<a href="([^"]+)">Download original/))==null?void 0:v[1].replace(/.+/,"#$&")),e._.match(/<img id="img" src="([^"]+)/)[1]],e._.match(/<title>([^<]+)/)[1]]]}var a=50;e._.match(/Showing (\d+) - (\d+) of (\d+) images/);var n=this.res||[];function l(b){const k=new XMLHttpRequest;k.open("GET",b,!1),k.send();const S=k.responseText.match(/src="(https:\/\/[\w.]+\.hath\.network.+?)"/);S&&n.push([S[1]])}var m=(w=e._.match(/https:\/\/(?:g\.e-|e[x-])hentai\.org\/(?:lofi\/)?s\/\w+\/\d+-\d+/g))==null?void 0:w.slice(0,a);m==null||m.forEach(l);var c=e._.match(/<a href="([^"]+)" onclick="return false">&gt;</);return c&&n.length<=80?(this.res=n,{loop:c[1]}):(delete this.res,n)}},"ehentai.to|nhentai.to-x-p":{link:"^[en]hentai\\.to/g/\\d+/?$",res:function(e){var t=e._.indexOf('id="thumbnail-container"');if(t<0)return null;var a=e._.indexOf('<script src="',t);if(a<0)return null;for(var n=[],l=/data-src="([^"]+)"/gi,m=l.exec(e._.substring(t,a)),c=e._.substring(t,a);m;)n.push([m[1].replace("t.",".")]),m=l.exec(c);let v=document.querySelector('head > meta[name="referrer"]');return v?v.attributes.content.value!=="same-origin"&&(v.attributes.content.value="same-origin"):(v=document.createElement("meta"),v.name="referrer",v.content="same-origin",document.getElementsByTagName("head")[0].appendChild(v)),n},img:"^((?:cdn\\.nload|zorocdn)\\.xyz/galleries/\\d+/\\d+)t(\\.\\w+)",to:"$1#.png .jpg .gif#"},"eKnives.ru-s":{link:"^eknives\\.ru/[\\w-]+/\\d+\\.html",res:function(e){var t=e._.indexOf('<div class="pps_hide"');if(t<0)return null;var a=e._.indexOf("</div>",t);if(a<0)return null;for(var n=[],l=/<a href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},"Eksisozluk|Soz.lk":{link:"^(?:(eksisozluk\\d*\\.com)/img|soz\\.lk/i)/\\w+",url:function(){var e=arguments;return/firefox/i.test(navigator.userAgent)||location.hostname===e[1]?"data:,"+e[0]:e[0]},res:function(e){var t;if(e.base[0]==="d"){const a=new XMLHttpRequest;a.open("GET",e[0],!1),a.send(),e._=a.responseText}return((t=e._.match(/id="image-zoom" href="([^"]+)/))==null?void 0:t[1])||""}},EksiUp:{link:"^(eksiup\\.com/)(?:p/)?([\\da-z]{9,12}).*",url:"$1p/$2",res:`="og:image" content="([^"]+)
="og:title" content="([^"]+) - `},"Eldorado.ru-s":{link:"^eldorado\\.ru/cat/detail/.+",url:"data:,$&",res:function(e){const t=new XMLHttpRequest;t.open("Get",e[0],!1),t.send(),e=JSON.parse(t.responseText.match(/"__NEXT_DATA__" type="application\/json">(.+?)<\/script/)[1]).props.initialState;const a=e["product-module"].id;return e["products-store-module"].products[a].images.map(n=>["https://static.eldorado.ru"+n.url])},img:"^(static\\.eldorado\\.ru/img\\d+/[^.]+\\.jpg)/resize/.+",to:"$1"},eMoviePoster:{img:"^(emovieposter\\.com/images/[^/]+/(?:AA\\d{6}/)?)\\d+",to:`#$1
$1550/`},"ENF-CMNF-x":{link:"^enf-cmnf\\.com/(?:tube/videos|\\d{4}/\\d{2})/.+",res:function(e){var t;return e=((t=e._.match(/(?:type="video\/mp4" src="|video_url: ')([^"']+)/))==null?void 0:t[1])||"",e!=null&&e.length?e+"#mp4":""}},EntameClip:{img:"^(cdn\\.entameclip\\.com/\\d+/\\d+/[^-]+)-\\d+x\\d+",to:"$1"},"EnterDesk-g":{img:"^(up\\.enterdesk\\.com\\/edpic).+((?:\\/\\w\\w){3}\\/\\w{32}\\.jpg)$",to:"$1$2"},"Epicentrk.ua-s-p":{link:"^epicentrk\\.ua/(?:ua/)?shop/.+\\.html",url:"data:,$&",res:function(e){const t=new XMLHttpRequest;return t.open("Get",e[0],!1),t.send(),e=[...t.responseText.matchAll(/data-zoom="([^"]+)/g)].map(a=>[a[1]]),[...new Map(e)]}},EpicGames:{link:"^store\\.epicgames\\.com/[^/]+/(?:p|blog)/.+",res:function(e){return[...new Map([...e._.matchAll(/img[^>]+(?:content|data-image|src)="(https:\/\/[^/]+\/[^."]+\.[^?"]+)/g)].map(t=>[t[1]]))]},img:"^(cdn\\d\\.unrealengine\\.com/[^.]+\\.[^?]+).*",to:"$1"},"Eporner-x-q-p":{link:"^eporner\\.com/(?:hd-porn|video).*",res:function(e){const a=new RegExp('<a href="(?<url>/dload.*?)" >Download.*?\\((?<res>\\d+)',"g"),n=[...e._.matchAll(a)].map(l=>({res:l.groups.res,url:`https://www.eporner.com${l.groups.url}`})).sort((l,m)=>m.res-l.res).filter(l=>l.res<=1080);if(n.length)return n[0].url}},"EroMe-x-p":{link:"^erome\\.com/[ai]/\\w+",res:function(e){var v;const t=((v=e._.match(/<h1>(.+)<\/h1>/))==null?void 0:v[1])||"",a=`(?:<source src="([^"]+)" type='video/mp4)`,n='(?:lasyload" data-src="([^"]+))" src="data:image',l=new RegExp(`${a}|${n}`,"g"),m=[...e._.matchAll(l)].map(w=>(w==null?void 0:w[1])||(w==null?void 0:w[2]));if(!m.length)return;let c=Array.from(new Set(m));return c=c.map((w,b)=>[w,`${t} - ${b+1} of ${c.length}`]),c}},"EroProfile-x-p":{link:"eroprofile\\.com\\/[mp]\\/(videos|photos)\\/view\\/.*",res:function(e){let t=e._.match(/<h1 class="capMultiLine">([^<]*)<\/h1>/)[1],a="";return e[1]=="photos"?a=e._.match(/<img class="photoPlayer" src="([^"]*)" alt/)[1]:a=e._.match(/<source src="([^"]*)" type/)[1],[a,t]}},"EtoRetro.ru-g":{useimg:1,link:"((www\\.)?etoretro\\.ru\\/pic\\d+\\.htm\\?sort_field=\\w+&sort=(DESC|ASC)(&time_range=\\w+)?&position=\\d+)",ci:1,res:function(e){const t=/src="(data\/media\/.*?\.jpe?g)"/g,a=[...e._.matchAll(t)].map(n=>[n[1],""]);if(a.length)return a},img:"^(etoretro.ru/data/)thumbnails",to:"$1media"},"Etsy-s-p":{link:"^etsy\\.com/listing/\\d+",res:function(e){var l,m;const t=JSON.parse(e._.match(/<script type="application\/ld\+json">({.+?})</)[1]),a=JSON.parse(((l=e._.match(/<script type="application\/ld\+json">({"@type":"Video.+?})</))==null?void 0:l[1])||"{}"),n=t.description;return e=((m=t.image)==null?void 0:m.map((c,v)=>[c.contentURL,v?"":n]))||[],a!=null&&a.contentURL&&e.push([a==null?void 0:a.contentURL]),e[0][1]=`<imagus-extension type="sidebar">${n.replace(/\n{3,}/g,`

`)}</imagus-extension>`,this.TRG.IMGS_ext_data=e,{loop:"imagus://extension"}},img:"^(i(?:mg\\d*)?\\.etsystatic\\.com/[^_]*/i[^_]+_)\\d+x[\\dN]+",to:"$1fullxfull"},Explosm:{link:"^explosm\\.net/comics/(?:.+)",res:function(e){let t;return t=e._.match(/<img src="(https:\/\/(?:files|static)\.explosm\.net\/(?:\d{4}\/\d{2}\/\d+|comics\/[^\/]+)\/[^\.]+\.(?:png|gif|jpg))/),t?t=t[1]:t=e._.match(/\\"mediaItemUrl\\":\\"(https:\/\/(?:files|static)\.explosm\.net\/(?:\d{4}\/\d{2}\/\d+|comics\/[^\/]+)\/[^\.]+\.(?:png|gif|jpg))\\",/)[1],t}},"ExpornToons|Mat6tube|Noodle|Ukdevilz-x-q-p":{link:"^(?:[^.]+\\.)?((?:mat6tube|noodlemagazine|ukdevilz)\\.com|exporntoons\\.net)/(v/video|watch)/.+",res:function(e){var t,a;return e[2]==="v/video"?{loop:((t=e._.match(/id="player_box" src="([^"]+)/))==null?void 0:t[1])||""}:(e=JSON.parse(e._.match(/window\.playlist = ([^;]+)/)[1]).sources,[[["#"+e[0].file+"#mp4",((a=e[1])==null?void 0:a.file)+"#mp4"]]])}},"EyeÐ¡andy-g-x":{link:"^(eyecandy\\.net)/(album|video)s/\\w+",url:function(){var e=arguments;return location.hostname.slice(-12)===e[1]?"data:,"+e[0]:e[0]},res:function(e){var a,n;if(e.base[0]==="d"){const l=new XMLHttpRequest;l.open("GET",e[0],!1),l.send(),e._=l.responseText}if(e[2]==="video")return{loop:((a=e._.match(/<iframe src="([^"]+)/))==null?void 0:a[1].replace(/\/iframe.*/,"/manifest/video.mpd?"))||""};const t=e._.match(/srcset/g);return e=JSON.parse(((n=e._.match(/id="__NUXT_DATA__" data-ssr="true">(.+?)<\//))==null?void 0:n[1])||"[]"),e=e.filter(l=>/^https:\/\/static\.eyecandy\.net\/media\/\d+\/\w+\./.test(l)).map(l=>[l]),e.length=(t==null?void 0:t.length)||0,e},img:"^(static\\.eyecandy\\.net/media/\\d+/)conversions/([^/.]+)+-[wx]\\d+\\..+",to:"$1$2.#jpg png jpeg#"},"F1CD.ru":{img:"^(f1cd\\.ru/d/\\d+/\\d+/\\d+/\\d+/)(?:m|logo)_(\\d+\\.(?:jpe?g|png|gif|bmp))$",to:`$1$2
$1m2_$2`},"F95zone-x-p":{link:"^f95zone\\.to/threads/([\\w\\d-]+\\.)?\\d+/(unread)?$",res:function(e){let a=new DOMParser().parseFromString(e._,"text/html"),n=a.querySelectorAll("div[style='text-align: center'] a.js-lbImage"),l=a.querySelectorAll("div[style='text-align: center'] div[class*=lbImage-attachment]"),m=[...e._.matchAll(/Genre<\/b>:.+\n\n\n.+\n.+\n\n.+\n.+\n.+\n.+\n\n.*?>([^<]+)/gm)];m=m.length>0?m[0][1]:"nope";let c=a.querySelector("meta[property]").content,v=[];return n.length>0?([...n].map(w=>v.push([w.href,`Tags: ${m} | ${c.replaceAll(`
`," | ")}`])),v):l.length>0?([...l].map(w=>v.push([w.getAttribute("data-src"),`Tags: ${m} | ${c.replaceAll(`
`," | ")}`])),v):null}},"FACEBOOK-h-p":{link:"^(?:(?:m(?:basic)?\\.)?facebook\\.com/(?:photo(?:/download/|\\.php|s/\\w+/|\\/)\\?(?:fb|photo_)id=|([^/]+/photos/)(?:[a-z]+\\.[^/]+/)?)|lookaside\\.fbsbx\\.com/lookaside/crawler/media/\\?media_id=)(\\d+)",url:"data:,$&",res:function(e){if(!((this.node.dataset||{}).ploi||((this.node.parentNode||{}).dataset||{}).ploi)){const a=new XMLHttpRequest;a.open("Get","https://www.facebook.com/"+(e[1]?e[1]+e[2]:"photo/?fbid="+e[2]),!1),a.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8"),a.send(),e._=a.responseText}if(e._===void 0)return this.node.dataset.ploi||this.node.parentNode.dataset.ploi;var t=e._.match(RegExp("="+(e[2]||e[1])+'(?:[^">]+"\\s+)+?data-ploi="([^"]+)'))||e._.match(RegExp(',"image":{"uri":"(https:[^"]+)'))||e._.match(/="og:image" content="([^"]+)/);return t&&t[1].replace(/\\/g,"")||!1},img:"^(?:fbcdn-s?photos[\\da-z-]+\\.akamaihd|s?(?:content|photos|origincache)[^/]+\\.fbcdn)\\.net/(?!h?vthumb-)[^_?]+/\\d+_(\\d+).*",loop:2,to:function(){var a,n;var e=arguments;if(e[0].indexOf(".mp4?")>0)return"";var t=this.node;return window.location.hostname.slice(-13)==".facebook.com"&&(document.evaluate('./ancestor::div[contains(@class, "stageWrapper")]',t,null,9,null).singleNodeValue||t.matches(".UFICommentContent>div[data-testid], a>abbr>span.timestampContent, #fbProfileCover>a:first-child"))?"":(t=t.pathname||(t=t.parentNode)&&t.pathname||(t=t.parentNode)&&t.pathname||((a=t.closest("a"))==null?void 0:a.href),t=t&&t.match(/^\/([\w.-]+)\/?$/)||t,"https://facebook.com/"+((t==null?void 0:t[1].length)>1?t[1].replace(/^\w+-(\d{8,})$/,"$1")+"/photos/":"photo.php?fbid=")+((n=t==null?void 0:t.match(/\/photo\D+(\d+)/))==null?void 0:n[1])||e[1])}},"FACEBOOK_fb-g+-ddg-proxy-p":{img:"^(?:(?:(?:fbexternal-[a-z]\\.akamaihd|(?:s-|fb)?external[^.]*(?:\\.[-\\da-z]+)+?\\.fbcdn|platform\\.ak\\.fbcdn)\\.net|(?:l\\.)?facebook\\.com)/(?:safe_image|www/app_full_proxy|(l))\\.php|images\\d-focus-opensocial\\.googleusercontent\\.com/gadgets/proxy|^(?:images|external-content|proxy)\\.duckduckgo\\.com/iu/)\\?(?:[^&]+&)*?(?:u(?:rl)?|src)=(http[^&]+).*",to:function(){var e=arguments,t=decodeURIComponent(e[2].replace(/\+/g," ")),a;return this.node.IMGS_fallback_zoom=t,a=this.find({href:t,IMGS_TRG:this.node}),a&&typeof a!="number"||a===null?Array.isArray(a)?a.join(`
`):a:e[1]?"":t}},"FACEBOOK_vid-h-p":{link:"^(?:facebook\\.com/.*(?:/videos/|\\?v=|reel/|watch/live/\\?ref=|profile\\.php\\?id=(\\d+)&sk=reels_tab&).+|fb\\.watch/[\\w-]+)",url:"data:,$&",res:function(e){var n,l,m,c,v,w;if(e[1]&&location.pathname==="/reel/")return e=JSON.parse(((n=document.body.outerHTML.match(/"(?:media|playback_video)":({.+?"browser_native_sd_url".+?})(?:}\]|,"video_owner")/))==null?void 0:n[1])||"{}"),e.browser_native_hd_url||e.browser_native_sd_url?[[[(l=e.browser_native_hd_url)==null?void 0:l.replace(/.+/,"#$&"),e.browser_native_sd_url]]]:"";const t=new XMLHttpRequest;t.open("Get",e[1]&&/\/reel\/\d+/.test(location.pathname)?"https://www.facebook.com/reel/"+location.pathname.match(/\/reel\/(\d+)/)[1]:e[0],!1),t.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8"),t.send();const a=((m=t.responseText.match(/"og:description" content="([^"]+)/))==null?void 0:m[1])||"";return!e[1]&&/"dash_manifest_url":"/.test(t.responseText)?(e=((c=t.responseText.match(/"dash_manifest_url":"([^"&]+)/))==null?void 0:c[1].replace(/\\/g,""))||"",this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${e}"></imagus-extension>${a}`],e!=null&&e.length?{loop:"imagus://extension"}:""):(e=JSON.parse(((v=t.responseText.match(/"(?:media|playback_video)":({.+?"browser_native_sd_url".+?})(?:}\]|,"video_owner")/))==null?void 0:v[1])||"{}"),e.browser_native_hd_url||e.browser_native_sd_url?[[[(w=e.browser_native_hd_url)==null?void 0:w.replace(/.+/,"#$&"),e.browser_native_sd_url],a]]:"")}},"Fandom-p":{link:"^fandom\\.com/video/\\w+/[\\w-]+",res:function(e){var a,n,l;if(e=((n=JSON.parse(((a=e._.match(/"__NEXT_DATA__"\s+type="application\/json">({.*?})<\//))==null?void 0:a[1])||"{}").props)==null?void 0:n.pageProps.ssrCurrentVideo)||null,!e)return"";const t=[e.title,e.description].filter(Boolean).join(" | ");return e=e.sources.filter(m=>m.type==="video/mp4"&&m.height).sort((m,c)=>m.height-c.height),[[["#"+e.pop().file,((l=e==null?void 0:e[Math.floor(e.length/2)])==null?void 0:l.file)||""],t]]},img:"^(static\\.wikia\\.nocookie\\.net/.+latest)(?:/scale-to-width-down/\\d{1,4})?(\\?cb=\\d{14})",to:"$1$2"},"FantLab.ru":{img:"^(fantlab\\.ru\\/images\\/editions\\/)(?:\\w+)(\\/.*)",to:`$1orig$2
$1big$2`},"Fapello-x-p":{useimg:1,link:"^fapello\\.(?:com|su)/[\\w-]+/\\d+",res:`class="flex justify-between items-center">[^\\\\]+?<(?:source[^>]+|img\\s+)src="([^"]+)
`,img:"^(fapello\\.(?:com|su)/content/.+)_\\d+px\\..+",to:function(){var a;var e=arguments;const t=this.node;return e[1]+"."+((a=t.firstElementChild)!=null&&a.src||t.height<150?"#mp4 jpg#":"jpg")}},"Farpost.ru-s":{link:"^farpost\\.ru/\\w+/\\w+/.+-\\d+\\.html",res:function(e){let t=e._.indexOf('<div class="image-gallery__big');if(t<0)return null;let a=e._.indexOf('<div class="image-gallery__small',t);if(a<0)return null;let n=[],l=/src="([^"]+)_bulletin"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]+"_default"]),c=l.exec(m);return n},img:"^(static\\.baza\\.farpost\\.ru/v/\\d+)_(block|hugeBlock|bulletin|thumbnail\\d+)$",to:"$1_default"},fashionsnap:{img:"(fashionsnap-assets\\.com/asset/format=auto),[^/]+(/article/images/[^.]+\\.jpg)",to:"$1$2"},Fastly:{img:"^([^.]{2,20}\\.global\\.ssl\\.fastly\\.com|fastly\\.net/[^?]+\\.(jpe?g|gif|a?png))\\?.+",to:"$1"},"FASTPIC-h":{link:"^fastpic\\.(ru|org)/(?:full)?view/(\\d+)/(\\d{4}/\\d+)(/.?[\\da-f]{30}([\\da-f]{2})[^?#]+).*",url:"fastpic.$1/fullview/$2/$3$4",res:"loading_img = '([^']+)'"},"FASTPIC_2-h":{url:"fastpic.$2/fullview/$1/$3$4",res:"loading_img = '([^']+)'",img:"^i(\\d+)\\.fastpic\\.(ru|org)/(?:thumb|big)/(\\d{4}/\\d+)/[\\da-f]{2}(/.?[\\da-f]{30}([\\da-f]{2})[^?]+).*"},"FASTPIC_fpic.in-h":{link:"^fpic\\.in/\\w+",res:'<img src="([^"]+)" class="image img-fluid"'},"FASTPIC_go.php2-h":{link:"fastpic\\.(ru|org)%2F(?:full)?view%2F(\\d+)%2F(\\d{4}%2F\\d+)(%2F.?[\\da-f]{30}([\\da-f]{2})\\.\\w+\\.html)",url:"fastpic.$1/fullview/$2/$3$4",res:"loading_img = '([^']+)"},"Favim-g":{link:"^favim2?\\.com/image/\\d+/$",res:'<link rel="preload" href="([^"]+)"'},"Ferra.ru":{img:"^(ferra\\.ru/)thumb/\\d+x\\d+/filters:quality\\(\\d+\\):[^/]+/(imgs/(?:\\d+/){5}[a-f0-9]+\\.[a-z]{3,4})",to:"$1$2"},"FetLife-x":{link:"^fetlife\\.com/users/\\d+/pictures/\\d+",res:function(e){var t;return e=JSON.parse(e._.match(/"story-data" type="application\/json">({.+?})<\//)[1]).attributes.pictures[0],[[[((t=e.src2x)==null?void 0:t.replace(/.+/,"#$&"))||"",e.src1x]]]}},"FilePicker-CDN":{link:"^((?:cdn\\.|www\\.)?filepicker\\.io/api/file/[^/]+).*",img:"^((?:cdn\\.|www\\.)?filepicker\\.io/api/file/[^/]+).*",to:"$1"},"Files.fm-h":{link:"^(?:[a-z]{2}\\.)?files\\.fm/([uf])/(\\w+)",res:function(e){var n,l,m,c;if(e[1]==="u"){const v=(n=e._.match(/arrFileHost = \["([^\]]+)"\]/))==null?void 0:n[1].split('","');return[...new DOMParser().parseFromString(e._,"text/html").querySelectorAll('div[class^="item file video-item"],div[class^="item file audio-item"],div[class^="item file image-item"]')].map(w=>{const b=w.attributes.file_hash.value;return["//"+v[Math.floor(Math.random()*v.length)]+(w.classList[2]==="video-item"?"/thumb_video/"+b+".mp4":w.classList[2]==="audio-item"?"/down.php?i="+b+"#mp3":"/thumb_show.php?i="+b)]})}const t=((l=e._.match(/arrFileHost = \["([^"]+)/))==null?void 0:l[1])||"",a=((m=e._.match(/arrFileTypes = \["([^"]+)/))==null?void 0:m[1])||"";return t?a==="video"?"//"+t+"/thumb_video/"+e[2]+".mp4":a==="audio"?"//"+t+"/down.php?i="+e[2]+"#mp3":((c=e._.match(/"og:image" content="([^"]+)/))==null?void 0:c[1])||"":""},img:"^([^.]+\\.failiem\\.lv/thumb)(\\.php\\?i=)",to:"$1_show$2"},"Filestack-CDN":{link:"(cdn\\.filestackcontent\\.com/)(?:resize[^/]+/)?(.*)",img:"(cdn\\.filestackcontent\\.com/)(?:resize[^/]+/)?(.*)",to:"$1$2"},"Finn.no":{link:"^(?:finn\\.no/(?:[^.]+\\.html\\?finnkode=)?\\d+|(finn/album\\?gallery(.*))$)",url:function(){var e=arguments;return e[1]||/gallery/.test(e[0])?"data:,"+Date.now():e[0]},res:function(e){var m,c,v,w,b,k,S,G,j,R;let a,n,l=!0;return(e[1]||/gallery/.test(e[0]))&&(e._=document.body.outerHTML),a=JSON.parse(((m=e._.match(/(?:__remixContext = |"__NEXT_DATA__"[^{]+?)({.+?});?</))==null?void 0:m[1])||"{}"),a=((j=(G=((w=(v=(c=a.state)==null?void 0:c.loaderData)==null?void 0:v.root)==null?void 0:w.objectData)||((S=(k=(b=a.props)==null?void 0:b.pageProps)==null?void 0:k.swrFallback)==null?void 0:S.objectDataKey))==null?void 0:G.images)==null?void 0:j.map(M=>[(M.uri||M.src).replace(/\d{3,4}w|default/,"1600w"),M.description]))||[...new Map([...e._.matchAll(/(?:background-image:url\(|data-srcset=")([^\s")]+)/g)].map(M=>[M[1].replace(/\d{3,4}w|default/,"1600w")]))],n=((R=this.node.currentSrc)==null?void 0:R.match(/[^/]+$/))||e[2],l&&n&&a?a.concat(a.splice(0,a.findIndex(M=>RegExp(`${n}`).test(M[0])))):a},img:"^([^.]*images\\.finncdn\\.no/dynamic/)[^/]+(/[^.]+\\.(?:jpe?g|png))(?!#)",loop:2,to:function(){var e=arguments;return/(?=.*object-contain)(?=.*object-center)/.test(this.node.attributes.class.value)?"finn/album?gallery"+e[2]:e[1]+"1600w"+e[2]+"#"}},FireFox_screenshot:{link:"^screenshots\\.firefox\\.com/.+",res:function(e){return e=JSON.parse(e._.match(/">({"[^\n]+)</)[1]),[e.downloadUrl.replace(/\?.*/,""),[e.buildTime,e.title,e.urlIfDeleted].join(" | ")]}},"FishingSib.ru-s":{link:"(?:www\\.)?fishingsib\\.ru/forum/attachments/\\d+/"},"Fix-Price-s":{link:"fix-price\\.com/catalog/[\\w-]+/[\\w-]+",res:function(e){var t=e._.indexOf('<div class="slider gallery"');if(t<0)return null;var a=e._.indexOf('<div itemscope="itemscope"',t);if(a<0)return null;for(var n=[],l=/<link href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},"F-List":{img:"^(static\\.f-list\\.net/images/char)thumb/",to:"$1image/"},"FlashTranny-x-p":{link:"^flashtranny.com/(view|gallery)/(\\w|-)+",res:'<source src="([^"]+)'},"FLIC.KR-g":{link:"^flic\\.kr/p/\\w",res:`(?:="og:image" content|id="target" src)="([^"]+)
<title>([^|]+)`},"FLICKR-g":{link:"^(?:secure\\.)?flickr\\.com/photos/[^/]+/(\\d+)/?(?:in/.+|lightbox/?|sizes.+|\\?.+|#/photos/.+)?$",url:"https://api.flickr.com/services/rest/?photo_id=$1&method=flickr.photos.getSizes&format=json&nojsoncallback=1&api_key=9bb671af308f509d0c82146cbc936b3c",res:function(e){var t,a;try{let n=[],l=JSON.parse(e._).sizes.size,m=l.pop();if(m.media=="video"){let c=0,v="";do parseInt(m.height)>c&&(c=parseInt(m.height),v=m.source),m=l.pop();while(m.media=="video");n.push([v+"#mp4"])}else n.push([m.source]);return n}catch{const l=new XMLHttpRequest;return l.open("Get",e[0],!1),l.send(),e._=l.responseText,e=(t=e._.match(/params:\s*({"photoModel"[^\n]+})\n/))==null?void 0:t[1],e=e&&((a=JSON.parse(e).photoModel)==null?void 0:a.sizes)||[],Object.values(e).sort((m,c)=>c.height-m.height)[0].src}},img:"^(?:(?:farm|c)\\d+\\.|live\\.)?static\\.?flickr\\.com/(?:\\d+/){1,2}(\\d+)_[\\da-f]+(?:_[sqtmn])?\\.jpg$"},"FLICKR_albums-g":{link:"^flickr\\.com/photos/(?:[^/]+/albums/(\\d+)$|(\\d+)/([a-f0-9]+)/(\\d+)(?:/([\\w@]+)/([\\w:]+))?/$)",url:function(){var e=arguments;return e[2]?"https://api.flickr.com/services/rest?extras=url_h%2Curl_k%2Curl_o%2Curl_3k%2Curl_4k%2Curl_5k%2Curl_6k%2Cpage=0&photoset_id="+e[2]+"&format=json&method=flickr.photosets.getPhotos&api_key="+e[3]+"&per_page="+e[4]+(e[5]?"&viewerNSID="+e[5]+"&csrf="+e[6]:"")+"&nojsoncallback=1":e[0]},res:function(e){if(e[2]){let v=[],w=JSON.parse(e._);for(img of w.photoset.photo)v.push([img.url_6k||img.url_5k||img.url_4k||img.url_3k||img.url_o||img.url_k||img.url_h,img.title]);return v}let t=e._.match(/root.YUI_config.flickr.api.site_key = "([^"]+)";/)[1],a=e._.match(/<span class=\"photo-counts\">(\d+) photos?<\/span>/)[1],n=e._.match(/class="gn-title you"\s+href="\/photos\/([^\/]+)\/"\s/),l=n?n[1]:null,m=e._.match(/root.auth = {"signedIn":true,"csrf":"([^"]+)/),c=m?m[1]:null;return t&&{loop:"https://www.flickr.com/photos/"+e[1]+"/"+t+"/"+a+"/"+(c?l+"/"+c+"/":"")}}},"Flipkart-s-p":{link:"^flipkart\\.com/.+?pid.+",res:function(e){const t=(a,n)=>{var l,m;return"https"+((m=(l=a.value.url)==null?void 0:l.match(/:[^?]+/)[0])==null?void 0:m.replace("rukmini1","rukminim2").replace("{@width}/{@height}",`${n}/${n}`))};return e=JSON.parse(e._.match(/window\.__INITIAL_STATE__\s*=\s*({.+?});<\//)[1]),this.TRG.IMGS_ext_data=e.pageDataV4.page.data[10001][0].widget.data.multimediaComponents.map(a=>a.value.contentType==="VIDEO"?["",`<imagus-extension type="iframe" url="${a.value.url}"></imagus-extension>`]:[["#"+t(a,2e3),t(a,1024)]]),{loop:"imagus://extension"}},img:"^(rukminim\\d\\.flixcart\\.com/[^/]+/)\\d+/\\d+([^?]+).*",to:`#$12000/2000$2
$11024/1024$2`},FMkorea:{link:"^fmkorea\\.com/(?:index.php\\?.+|(?:[^/]+/)?\\d+)",res:function(e){return[...e._.matchAll(/<(?:source|img)[^>]+="([^"]+fmkorea\.com\/(?:files\/|getfile\.php\?code=)[^"]+)/g)].map(t=>[t[1]])}},"FocalPrice-s":{link:"focalprice\\.com/\\S+\\.html",res:function(e){var t=e._.indexOf('<ul id="thumbs_list_frame">');if(t<0)return null;var a=e._.indexOf("</ul>",t);if(a<0)return null;for(var n=[],l=/a href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n},img:"^(img\\.focalprice\\.com/+)(?!860x666)\\d+x\\d+/",to:"$1860x666/"},"Foobar2000.ru":{link:"^foobar2000\\.ru/forum/(?:download/)?file\\.php\\?id=\\d+&filename=[^?]+\\.(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|ico|xbm|pict|j(?:if|fif?))&mode=view",ci:1},"Forest-Home.ru-s":{link:"^forest-home\\.ru/product/[\\w-]+/",res:function(e){var t=e._.indexOf('<figure class="product');if(t<0)return null;var a=e._.indexOf("</figure>",t);if(a<0)return null;for(var n=[],l=/<a class="product-image-\d+" href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);if(t=e._.indexOf('<ul class="comments-branch reviews-branch">'),t<0||(a=e._.indexOf("</ul>",t),a<0))return n;for(m=e._.substring(t,a),l=/src="([^"]+)"/gi,c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},"FotoKto.ru-g":{img:"^(s\\d+\\.fotokto\\.ru/(?:concurs/)?photo/)(?:large|preview)(/\\d+/\\d+\\.(?:jpe?g|png|gif))$",to:"$1full$2"},"Fotosklad.ru-s":{link:"^fotosklad\\.ru/catalog/[\\w-]+\\.html",res:function(e){let t=e._.indexOf('<ul class="product-card__big">');if(t<0)return null;let a=e._.indexOf("</ul>",t);if(a<0)return null;let n=[],l=/data-src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n},img:"^((?:cdn\\.)?fotosklad\\.ru\\/upload\\/iblock\\/\\w+\\/\\w+)_thumb_\\w+(\\.(?:jpe?g|png))$",ci:2,to:"$1$2"},"Fotozavr.ru-h":{link:"fotozavr\\.ru/image/\\d+.html",res:'<li class="zoom"><a href="([^"]+)'},"forum.IXBT":{link:"^(forum\\.ixbt\\.com/post\\.cgi\\?id=attach[0-9:]+\\.(?:jpe?g|gif|png))$"},"forumimage.ru-h":{link:"^(forumimage\\.ru/show/)\\d+$",res:'<img src="(http://forumimage\\.ru/uploads/\\d+/\\d+.jpg)"',img:"^(forumimage\\.ru/)thumbs(/\\d+/\\d+\\.jpg)$",to:"$1uploads$2"},"Fotoload.ru-g":{link:"^(fotoload.ru/foto(set)?/(\\d+)/)(\\?fotosets)?",url:function(){var e=arguments;return e[2]&&!e[4]?"https://fotoload.ru/?action=ajaxfunc&sa=get_fotoset_fotos&fotoset_id="+e[3]+"&offset=0&fid=0":e[1]},res:function(e){var t,a;if(e[4])return[...e._.matchAll(/src="([^"]+)" class="img-responsive center-block"/g)].map(n=>[["#"+n[1].replace(/\d+x\d+/,"1920x1080"),n[1].replace(/\d+x\d+/,"1024x768")],"Gallery Cover Image"]);if(e[2]){let n=((t=e._.match(/"bb_link_\d+x\d{3}">[^<]+/))==null?void 0:t[0])||[];return n.length?(e=((a=e._.match(/bb_link_">[^<]+/g))==null?void 0:a.reverse()[0])||[],e=[...e.matchAll(/\[img\]([^\[]+)/g)].reverse(),n=n.length?[...n.matchAll(/\[img\]([^\[]+)/g)].reverse():[],e.map((l,m)=>{var c;return[["#"+l[1],((c=n[m])==null?void 0:c[1])||""]]})):{loop:"https://"+e[1]+"?fotosets"}}return e=[...e._.matchAll(/<a\s+download\s+href="([^"]+)">\d+x(\d+)/g)],[[["#"+e.pop()[1],e.filter(n=>n[2]<1080).reverse()[0]]]]},img:"^(fs3\\.fotoload\\.ru/f/\\d+/\\d+/)\\d+x\\d+/(\\w+\\.jpg)",to:`#$1# 1920x1080/#$2
$11024x768/$2`},Foursquare:{img:"^(i(?:gx|r?s\\d)\\.4sqi\\.net|playfoursquare\\.s3\\.amazonaws\\.com)(?:(/img/(?:general|user)/)(?!original/)[^/]+|(/userpix)_thumbs?/)",to:function(){var e=arguments;return e[1]+(e[2]?e[2]+"original":e[3]+"/")}},"frgimages-CDN":{link:"((?=.*\\.jpg)frgimages\\.com/.*)",img:"((?=.*\\.jpg)frgimages\\.com/.*)",to:"$1"},"fs|brb|cxz":{img:"^((?:s\\d+|img)\\.dotua\\.org/fsua_items/[^/]+/(?:\\d\\d/){3})(?!1/)\\d(/\\d+)",to:"$11$2"},"FunnyJunk-g-p":{link:"^funnyjunk\\.com/(?:(?:channel/[^/]+/)?[A-za-z0-9+]+/[A-Za-z-]+/(?:\\d+/?)?|\\w+/\\d+/[\\w+]+)",res:function(e){var a;const t=((a=e._.match(/"description" content="([^"]+)/))==null?void 0:a[1].replace(/&#(\d+);/g,(n,l)=>String.fromCharCode(l)))||"";return[...e._.matchAll(/href="([^"]+)"[\n\s]*rel="lightbox"|data-(?:original|cachedvideosrc)="([^"]+\.(?:mp4|webm)[^"]*)/gs)].map((n,l)=>[n[1]||n[2],l?"":t])}},"Furaffinity-g-p":{link:"^furaffinity\\.net/view/(\\d+)/$",url:"//www.furaffinity.net/full/$1/",res:`data-fullview-src="([^"]+)
<title>([^<]+?) --`,img:"^t\\.facdn\\.net/(\\d+)@.+"},"FurryNetwork-g":{link:"^((?:beta\\.)?furrynetwork\\.com/)((?:artwork|photo|multimedia)/\\d+).*",url:"$1api/$2",res:function(e){return e._=JSON.parse(e._),[[e._.record_type[0]=="m"?e._.url:["#"+e._.images.original,e._.images.large],e._.title+" by "+e._.character.display_name]]},img:"^((?:d3gz42uwgl1r1y\\.cloudfront\\.net|furrynetwork(?:-beta)?\\.s3\\.amazonaws\\.com)/(\\w\\w)/\\2\\w+/submission/20\\d\\d/[01]\\d/[\\da-f]{32})/\\d+x\\d+.*",to:"$1#/2500x1500.jpg .gif .webm .mp4 .mp3#"},"Gab-p":{img:"^(ipr\\.gab.ai/[\\da-f]{40}/[\\da-f]+|gab\\.com/media/image/bz-[\\da-f]{13})",to:"$&"},GameSpot_GameFAQs:{img:"^gamefaqs\\.gamespot\\.com/a/(?:screen/thumb/\\d/\\d/\\d/\\d+|box/\\d/\\d/\\d/\\d+_thumb)",to:function(){var e=arguments;if(e[0].match(/\/box\//))return e[0].replace("thumb","front");if(e[0].match(/\/screen\/thumb\//))return e[0].replace("thumb","full")}},GameSpot_video:{link:"^(?:(?:gamefaqs\\.)?gamespot\\.com/(?:[^/]+/)*videos/.+|cdn\\.jwplayer\\.com/v2/media/\\w+\\?gamespot)",res:function(e){var a,n,l;let t;return(t=(a=e._.match(/"contentUrl":\s*"([^"]+)/))==null?void 0:a[1])?t:(t=(n=e._.match(/<iframe class="vid"[^>]+src="([^"]+)/))==null?void 0:n[1])?{loop:t}:(t=(l=e._.match(/mediaId:\s*'([^']+)/))==null?void 0:l[1])?{loop:"//cdn.jwplayer.com/v2/media/"+t+"?gamespot"}:(t=JSON.parse(e._).playlist[0],this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${t.mrss_video_url}"></imagus-extension>${t.description}`],{loop:"imagus://extension"})}},"Gamma_Entertainment-x-q-p":{link:"^([^/]+)/en/video/[^/]+/(?:[^/]+/)?(\\d+)",res:function(e){var k,S,G,j,R;const a=/applicationID":"([^"]+)","apiKey":"([^"]+)/g.exec(e._);if(!a)return;const[n,l]=[a[1],a[2]],m=e[2],c=new XMLHttpRequest,v=`https://tsmkfa364q-dsn.algolia.net/1/indexes/*/queries?x-algolia-agent=Algolia%20for%20vanilla%20JavaScript%203.27.1%3BJS%20Helper%202.26.0&x-algolia-application-id=${n}&x-algolia-api-key=${l}`;if(c.open("POST",v,!1),c.send(`{"requests": [{"indexName": "all_scenes", "params": "facetFilters=[[\\"clip_id:${m}\\"]]"}]}`),c.status!==200)return;let w={};try{w=(R=(j=(G=(S=(k=JSON.parse(c.responseText))==null?void 0:k.results)==null?void 0:S[0])==null?void 0:G.hits)==null?void 0:j[0])==null?void 0:R.trailers}catch{return}const b=Object.keys(w).map(M=>({res:parseInt(M.replace("4k","2160"),10),url:w[M]})).filter(M=>M.res<=2160).sort((M,P)=>M.res-P.res);if(b.length)return b[b.length-1].url},img:".*gammacdn\\.com.+"},"Gallery.ru-g":{link:"^(gallery\\.ru/watch\\?a=\\S+)$",res:function(e){var t=e._.indexOf('<div id="mygallery"');if(t<0)return null;var a=e._.indexOf("</div>",t);if(a<0)return null;for(var n=[],l=/<img src="(https?:\/\/data\d+\.gallery\.ru\/albums\/gallery\/\w+-\w+-\w+-)\d+(?:-\w+)?\.jpg"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]+".jpg"]),c=l.exec(m);return n},img:"^(data\\d+\\.(?:i\\.)?gallery\\.ru/albums/gallery/\\d+-[\\da-f]+-\\d+-)[^.-]+",to:`#$1
$11024`},Gamekult:{img:"^(cdn\\.gamekult\\.com/optim/images/.+?)__[^.]+",to:"$1"},"Gazeta.pl":{img:"^(bis?\\.(?:gazeta|im-g)\\.pl/im/(\\w{1,5}/){2,}?z\\d{4,})[^.]*(?=\\.)",to:`#$1O
$1IH`},"Geekpic|Pic4Net-h":{link:"pic4net\\.com|geekpic\\.net/pm-\\w+\\.html",res:'<a href="([^"]+)" class="download-img"'},"Gelbooru|Hypnohub-x-p":{link:"^(?:gelbooru\\.com|hypnohub\\.net)/index\\.php\\?page=post&s=view&id=\\d+",res:`(?:="og:|itemprop=")image" content="([^"]+)
="keywords" content="([^"]+)`,img:"^(?:s?(?:img|thumb)\\d?\\.|assets\\.)?(gelbooru\\.com/+)(?:sample|thumb(?:nail)?)s/(\\w\\w/\\w\\w)/(?:thumbnail|sample)_([\\da-f]+).*",to:`#img2.$1/images/$2/$3.#webm jpg png gif jpeg#
img2.$1/samples/$2/sample_$3.#jpg png gif jpeg#`},"Geograph.org.uk":{img:"^(?:(s\\d\\.geograph\\.org\\.uk/[/\\w]+)_\\d{2,4}x\\d{2,4}|s\\d\\.geograph\\.org\\.uk/.+)",to:function(){var e=arguments;return e[1]?e[1]+"#_original #":e[0].replace(/(\.[a-z]+)$/,"#_original #$1")}},"GetaPic-h":{link:"getapic\\.me/\\w+/\\w+",res:'<li><span>Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° ÐºÐ°Ñ€Ñ‚Ð¸ÐºÑƒ:</span><br>\\s+<input onclick="select_field\\(this\\);" value="([^"]+)"'},"GetCloudApp|cl.ly-h":{link:"^(?:cl\\.ly/image/[^/]+.*|share\\.getcloudapp\\.com/\\w+$)",res:function(e){var t,a,n,l,m,c;return e=((c=(m=(l=(n=(a=JSON.parse(((t=e._.match(/Copernicus\(({.+?})\)/s))==null?void 0:t[1].replace(/\n\s+/g,"").replace(/([{,])(\w+):\s+/g,'$1"$2":'))||"{}"))==null?void 0:a.store)==null?void 0:n.viewer)==null?void 0:l.item)==null?void 0:m.links)==null?void 0:c.content_url)||"",e+(/\.m[o4]v/.test(e)?"#mp4":"")},img:"^thumbs\\.(?:cl\\.ly|getcloudapp\\.com)/(?:image/)?(\\w+)",to:"http://cl.ly/image/$1/$1.jpg"},"GettyImages-g":{link:"^gettyimages\\.[a-z.]{2,6}/detail/(?:[^/]+/[^/]+/)?\\d+.*",res:function(e){return e=JSON.parse(e._.match(/data-component='AssetDetail'>[^{]+([^\n]+)/)[1]).asset,e.filmCompUrl||[[["#"+e.highResCompUrl,e.defaultMainImageURL]]]},img:"^(media\\.gettyimages\\.com/id(/\\d+)/photo/[^.]+\\.)\\w+(.*)",loop:2,to:function(){var e=arguments;return RegExp(e[2]).test(location.pathname)&&/=[234]\d{3}x/.test(e[3])?e[1]+"jpg"+(e[3]||""):"https://www.gettyimages.com/detail"+e[2]}},"Gifbin-g":{link:"^(gifbin\\.com/)(?:[ft]/|(reverse/))?(\\d+)$",url:"$1$2$3",res:function(e){var t,a=e._.match(/src="https?:\/\/(www\.)?gifbin\.com\/bin\/[^"]+/g);return a?(t=e._.match(/="og:title"\s+content="([^"]+)/),[[a.slice(0,3).map(function(n){return n.slice(5)}),t&&t[1]]]):0},img:"^(gifbin\\.com/bin/(?:\\d+/)?)tn_([^?]+\\.).*",to:"http://www.$1$2#webm mp4 gif#"},"Gifer-g-p":{img:"(im-\\d\\d\\.forfun\\.com/|i\\.gifer\\.com/)(?:fetch/w\\d+-ch\\d+-preview|origin)(/\\w+/[^_]+?)(_w\\d+)?(\\.\\w+)",to:"$1origin$2$4"},"Gifs-g-p":{link:"^(gif(?:s|y(?:t|outube))\\.com/)(?:gif|embed|player)/(?:[^-]*-)*(\\w+)",img:"^(?:share|j)\\.(gif(?:s|y(?:t|outube))\\.com/)(\\w+).*",to:"//j.gifs.com/$2.#webm mp4 gif#"},"Gifyu-g":{link:"gifyu\\.com/image/\\w{4}",res:'<meta property="og:image" content="([^"]+)"'},"Giphy-g":{useimg:1,link:"^(g(?:iphy\\.com/(?:gifs|embed)|ph\\.is(?:/g)?)/)([\\w-]+).*",url:"$1$2",res:'property="og:video:secure_url" content="([^"]+)',img:"^media\\d?\\.((giphy)\\.com/)media/(\\w+)/.*",to:"media.$1media/$3/$2.#mp4 gif#"},GITHUB:{link:"^(git(?:hu|la)b\\.com/[^/]+/[^/]+/)blob(/.+\\.(?:jpe?g|a?png|gif|svgz?|web[pm]|bmp|og[gv]))$",ci:1,img:"^(?:(avatars\\d?\\.githubusercontent\\.com/u/\\d+).*|camo\\.githubusercontent\\.com/[a-f0-9]{64}/[a-f0-9]+)",to:function(){var e=arguments;if(e[0][0]==="c")return e[0];var t=e[2]?"":e[0].slice(e[1].length);return t=t&&t.match(/[?&](v=\d+)/)||"",e[1]+(e[2]?"raw"+e[2]:t&&"?"+t[1])}},"GloryholeSwallow-x":{link:"gloryholeswallow\\.com/tour/trailers/.*",res:function(e){const t=/video playsinline src="([^"]+)/.exec(e._);return t?t[1]:"//i.imgur.com/ejZcAGv.png"}},Gmail:{link:"^(mail\\.google\\.com/.*\\?)ui=2&ik=(.*)&view=att&th=(.*)&attid=0\\.1&disp=inline&zw",to:"$1attid=0.1&disp=emb&view=att&th=$3"},"Gofile.io-h-p":{img:"^javascript:void\\(0\\)$",loop:2,to:function(){var l,m,c;var e=arguments;const t=this.node;if(!/^(?:gofile\.io|(?:[a-z]{2}\.)?files\.fm)$/.test(location.hostname))return"";if(/^(?:[a-z]{2}\.)?files\.fm$/.test(location.hostname))return((m=(l=this.node.parentNode.parentNode.querySelector("div[data-clipboard-text]"))==null?void 0:l.dataset)==null?void 0:m.clipboardText)||"";const a=document.createElement("script");a.textContent='sessionStorage.setItem("gofile__data", JSON.stringify(Object.values(mainFolderObject.children))); document.currentScript.remove();',document.head.appendChild(a);const n=JSON.parse(sessionStorage.getItem("gofile__data"));return sessionStorage.removeItem("gofile__data"),e=((c=n.find(v=>v.name===t.textContent))==null?void 0:c.link)||"",e+(/\.m[ok]v$/.test(e)?"#mp4":"")}},"GOG-s":{link:"^gog\\.com/\\w\\w/game/\\w+$",res:function(e){let t=e._.indexOf('<div class="js-items-wrapper mobile-slider__items-wrapper">');if(t<0)return null;let a=e._.indexOf("</picture></div></div></div>",t);if(a<0)return null;let n=[],l=/src="([^_]+)_[^.]+(\.\w+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]+c[2]]),c=l.exec(m);return n},img:"(images\\.gog-statics\\.com\\/\\w+)_product_card_v\\d_thumbnail_\\d+(\\.jpg)",to:"$1$2"},"Goodfon.ru-g":{link:"^(?:avto\\.)?(?:bad|good)fon\\.ru/(?:[^/]+/)?(?:wallpaper/?.+\\.html|download\\.php\\?id=\\d+&rash=\\d+x\\d+|download/[^/]+/\\d+x\\d+/?)$",res:"(//img\\.goodfon\\.ru/original/[\\w./?&-]+)"},"Goodreads-p":{img:"^(i(?:mages)?\\.gr-assets\\.com/(?:images/(?:[^/]+/){1,3})?(?:author|book|user)s/\\d+)[^/]+(/\\d+)[^?]*\\.",to:"$1i$2."},"GOOGLE_Drive-h":{link:"^(?:docs|drive)\\.google\\.com/(?:(?:file|presentation|document|spreadsheets|drawings)/(?:u/\\d/)?d/|uc\\?.*id=)([\\w-]{33}|[\\w-]{44})(/|&|$).*",ci:1,url:"https://drive.google.com/file/d/$1/view",res:function(e){var n,l;let[t,a]=JSON.parse(e._.match(/_docs_flag_initialData=({.+?});/)[1])["docs-dm"].split("/");if(t==="video")return{loop:`https://drive.google.com/get_video_info?docid=${e[1]}`};if(t==="image"||t==="audio")return`https://drive.google.com/uc?id=${e[1]}&export=download#`+(t=="audio"?"mp3":a);{const m=((n=e._.match(/<title>(.+)<\/title>/))==null?void 0:n[1])||"";let c=(l=e._.match(/<meta itemprop="embedURL" content="(.+?)"/))==null?void 0:l[1];return c||(a=="x-zip-compressed"||a=="octet-stream"||a!=null&&a.startsWith("vnd.google-apps.")?c=`https://drive.google.com/file/d/${e[1]}/preview`:c=`https://drive.google.com/uc?id=${e[1]}`),this.TRG.IMGS_ext_data=[["",`<imagus-extension type="iframe" url="${c}"></imagus-extension>${m}`]],{loop:"imagus://extension"}}}},"GOOGLE_Drive_video-h":{link:"^drive\\.google\\.com/get_video_info\\?docid=[\\w-]+",res:function(e){const t=e._.split("&").map(n=>n.split("="));decodeURIComponent(t.find(n=>n[0]==="title")[1]);let a=decodeURIComponent(t.find(n=>n[0]==="fmt_stream_map")[1]);return a=a.split(",").pop().split("|")[1],a+"#mp4"}},"GOOGLE_goo.gl":{link:"^(image|photo)s\\.app\\.goo\\.gl/\\w+",res:function(e){var n,l;const t=((n=e._.match(/<img.+?alt="(.*?)"/))==null?void 0:n[1])||((l=e._.match(/<title>(.+?)<\/title>/))==null?void 0:l[1])||"";if(/"og:video" content="[^"]/.test(e._))return e._.match(/https:\/\/video-downloads\.googleusercontent\.com\/[^"]+/)[0]+"#mp4";const a=[...e._.matchAll(/<img class=.+?(http?[^=]+)[^<]+?<div/g)];return a.length>0?a.map(m=>[m[1]+"=s0",t]):[e._.match(/AF_dataServiceRequests.=.+?http.+?,"(http.+?)"/)[1],t]}},GOOGLE_Images_legacy:{img:"^images-partners-tbn\\.google\\.com/images\\?q=tbn:[^:]+:+(.+)",dc:2,to:"$1"},GOOGLE_noglogo:{img:"^google\\.[\\.a-z]+/images/nav_logo\\d+(_hr)?\\.png$",to:function(){var e=arguments;return window.location.host.indexOf(".google.")>0?"":e[0]}},GOOGLE_URL:{link:"^google\\.(?:com|(?:com?\\.)?[a-z]{2})/url\\?(?:[^&]+&)*?q=(http[^&]+\\.(?:jpe?g|gifv?|a?png|bmp|web[pm]|mp[34]]))(?:$|&).*",dc:1,to:"$1"},"GoogleContent|YouTube_Gallery":{link:"^(?:(youtube\\.com/(?:post/[\\w-]+|channel/UC[\\w-]{22}/community\\?lb=.+))|ytgallery/album.*)$",url:function(){var e=arguments;return e[1]?e[1]:"data:,"+e[0]},res:function(e){e._.length||(e._=document.body.outerHTML);try{return e=JSON.parse(e._.match(/":({"images?":.+?})},"/)[1]),e.images?e.images.map(t=>[t.backstageImageRenderer.image.thumbnails[0].url.match(/^[^=]+=/)+"s0"]):e.image.thumbnails[0].url.match(/^[^=]+=/)+"s0"}catch{return this.node.src?this.node.src.match(/^[^=]+/)+"=s0":""}},img:"^((?:(?:(?:(?:lh|gp|yt)\\d+|blogger)\\.g(?:oogleuserconten|gph)|\\d\\.bp\\.blogspo)t|drive\\.(?:fife\\.)?usercontent\\.google)\\.com/)(?:([_-](?:[\\w\\-]{11}/){3}[\\w\\-]{11,}/)([^/]+)(/[^?#=]+)?|(download\\?id=.+)|([^=]+)).*",loop:2,to:function(){var n,l,m,c,v,w;var e=arguments;const t=this.node;if((n=location.pathname)!=null&&n.startsWith("/maps/")&&/\d:\d{2}$/.test(((c=(m=(l=t.offsetParent)==null?void 0:l.offsetParent)==null?void 0:m.querySelector('div[class^="fontLabelMedium "]'))==null?void 0:c.innerText)||""))return"#"+e[0].replace(/=.+/,"=m37")+`#mp4
#`+e[0].replace(/=.+/,"=m22")+`#mp4
`+e[0].replace(/=.+/,"=m18")+`#mp4
`+e[0].replace(/=.+/,"=s0");var a=e[3]&&e[3].match(/-?(?:Ic\d\d|mo)/);return a=a&&"-"+a[0]||"",/youtube\.com$/.test(location.hostname)&&t.closest("ytd-post-multi-image-renderer")?((w=(v=t.closest("ytd-post-multi-image-renderer"))==null?void 0:v.querySelector('a[href^="/post/"]'))==null?void 0:w.href)||"ytgallery/album"+e[1]:e[5]?e[1]+e[5]:"#"+e[1]+(e[6]?e[6]+"=":e[2])+(a?"s1600"+a:"s0")+(e[4]||(e[6]?"":"/"))+`
`+e[1]+(e[6]?e[6]+"=":e[2])+"s1024"+a+(e[4]||(e[6]?"":"/"))}},"GooglePlay-p":{link:"^playstorealbum/[^!]+!(.+)",url:"data:,$&",res:function(e){return e[1].split("!").map(t=>[["#"+t+"s0",t+"s1024"]])},img:"^(play-lh\\.googleusercontent\\.com/[^=]+=).*",loop:2,to:function(){var a,n,l;var e=arguments;const t=this.node;if(t.className==="T75of B5GQxf"){const m=(n=(a=t.attributes)==null?void 0:a["data-screenshot-index"])==null?void 0:n.value;return"//playstorealbum/"+e[1]+"!"+[...(l=t.offsetParent)==null?void 0:l.querySelectorAll("img")].filter((c,v)=>v>=(Number(m)||0)).map(c=>c.src.match(/^[^=]+=/)[0]).join("!")}return e[1]+`s0
`+e[1]+"s1024"}},"Grailed-s":{link:"^grailed\\.com/listings/",res:function(e){var a;let t=(a=JSON.parse((e._.match(/application\/json">({.+?})<\//)||[,"{}"])[1]).props)==null?void 0:a.pageProps.listing.photos.map(n=>[n.url]);return t||(t=[...e._.matchAll(/PhotoGallery_thumbnails__[^"]+" src="([^"]+)/g)].map(n=>[n[1].replace(/(process\.fs\.grailed\.com\/).+?\/compress/,"$1")])),t},img:"^(process\\.fs\\.grailed\\.com/).+?/compress/",to:"$1"},Gravatar:{img:"^(?:(?:\\d|s(?:ecure)?)\\.)?(gravatar\\.com/)(?:(avatar)(?:\\.php\\?gravatar_id=|/?)|(userimage/\\d+)/)([^?&]*(?:\\.jpg)?)(?:[?&]?(?:[^&]+&)*?s(?:ize)?=(\\d+).*)?.*",to:function(){var e=arguments,t=/[&?](d(?:efault)?=[^&]+)/.exec(e[0]),a=/[&?](r(?:ating)?=[^&]+)/.exec(e[0]);return e[1]+(e[2]||e[3])+"/"+e[4]+"?s="+(e[3]?1e3:512)+(t?"&"+t[1]:"")+(a?"&"+a[1]:"")}},GSMarena:{link:"^(gsmarena.com/)(newsdetail|([\\w+)(]+)(-review|-pictures|-news)?(-\\d+(?:p\\d+)?))(\\.php3?.*)",ci:1,url:function(){var e=arguments;return e[4]||!e[5]?e[0]:e[1]+e[3]+"-pictures"+e[5]+e[6]},res:function(e){var l;var t=[];const a=new window.DOMParser().parseFromString(e._,"text/html"),n=Array.from(a.querySelectorAll("#pictures-list img, #review-body img"));for(const m of n){const c=(l=m.dataset.src||m.src)==null?void 0:l.replace(/\/-\w+\//,"/");/jpe?g$/.test(c)&&t.push([c])}return t},img:"^((?:[cf]dn|st\\d*)(\\.gsmarena\\.com/))(?:(?:pics?|(?:pics?/)?vv)/blogpics/[^/]+/i?cs-(\\d\\d)-(\\d\\d)-([^_]+)-|((?:vv|pics?)/+(?:[^/]+/)+?)thumb/|(imgroot/(?:[^/]+/+)+)-\\d*x?\\d+\\w*/(?=[^/]+))",to:function(){var e=arguments;return e[3]?"st"+e[2]+"pics/"+e[3]+"/"+e[4]+"/"+e[5]+"/":e[1]+(e[6]||e[7])+"# -1024x768m/#"}},Gyazo:{link:"^(gyazo\\.com/)([\\da-f]{32}).*",img:"^(i\\.)?(gyazo\\.com/)thumb/([\\da-f]{32}).*",to:"i.$1$2.#png jpg gif#"},"Happy-Team_himagem-h":{link:"happy-team\\.org/himagem/\\?pm=(\\w+)",img:"happy-team\\.org/himagem/\\?pm=(\\w+)",to:"happy-team.org/himagem/image.php?di=$1"},"Hardwareluxx.ru-s-b":{link:"^hardwareluxx\\.[a-z]+/index\\.php/artikel/.+",res:function(e){var a;let t=JSON.parse(((a=e._.match(/console.log\((.+?)\)</))==null?void 0:a[1])||"{}");return t!=null&&t.length?t.map(n=>[n.local_url_org]):[...e._.matchAll(/<a href="([^"]+)" data-caption=/g)].map(n=>[n[1]])},img:"^(hardwareluxx\\.[a-z]{2}/images/.+_)100px",to:"$11920px"},"Hearst(Cosmo|Delish|DigitalSpy|Elle|Esquire|Harper":{img:"^hips\\.hearstapps\\.com/([^\\.]+\\.h-cdn\\.co|hmg-prod|digitalspyuk|vader-prod|vidthumb)[^/]*(/[^\\?]+).*",to:function(){var e=arguments;return e[1].includes("h-cdn.co")&&(e[1]="//"+e[1]),e[1]=="hmg-prod"&&(e[1]="//hmg-prod.s3.amazonaws.com"),e[1]=="digitalspyuk"&&(e[1]="//digitalspyuk.cdnds.net"),e[1]=="vader-prod"&&(e[1]="//vader-prod.s3.amazonaws.com"),e[1]=="vidthumb"&&(e[1]="http://hearst-gopher.thumbs.s3.amazonaws.com"),e[1]+e[2].replace(/\/\d+x\d+\//,"/")}},"Hemmings-s-p":{link:"^hemmings\\.com/(:?auction|listing)/[^/]+\\d+",res:function(e){var l;const t=[];var a=JSON.parse(e._.match(/{.+"vehicle_id".+}/)),n="";return t.push([a.hero]),a.content.forEach(m=>{var c,v,w;(c=m.attributes)!=null&&c.content&&(n+=m.attributes.content+`
`),(w=(v=m.attributes)==null?void 0:v.images)!=null&&w.startsWith("[{")&&(m.attributes.images=JSON.parse(m.attributes.images),m.attributes.images.forEach(b=>{t.push([b.image])}))}),(l=a.media)!=null&&l.length&&a.media.forEach(m=>{t.includes(m.original_url)||t.push([m.original_url])}),t[0][1]=`<imagus-extension type="sidebar">${n}</imagus-extension>${a.title}`,this.TRG.IMGS_ext_data=t,{loop:"imagus://extension"}},img:"^thumbor\\d+-production-auction\\.hemmings\\.com/[^/]+/\\d+x\\d+/(\\d+/[^/]+.jpg)",ci:2,to:"thumbor-production-auction.hemmings.com/$1"},"Hentai0-x-q":{link:"^hentai0\\.com/movie/.+-\\d+$",res:function(e){let t=/:video_source="([^"]+)/gm.exec(e._)[1];function a(m){var c=new DOMParser().parseFromString(m,"text/html");return c.documentElement.textContent}let n=[],l=JSON.parse(a(t));for(let m of l)n.push([m,/(\d+p\.mp4)/gm.exec(m)[1]]);return n.reverse()}},"Hentai-Foundry-x-p":{link:"^(hentai-foundry\\.com/)pic(?:tures/user/[^/]+/|-)(\\d+)[./](?:html|[^#/]+.*)",url:"$1pic-$2.html?enterAgree=1",res:'(//pictures\\.$1(?:[^/]+/)+?$2[^"]+)\\S+(?: (?:\\S+ ){0,3}?alt="([^"]+))?',img:"^thumbs\\.(hentai-foundry\\.com/)thumb\\.php\\?pid=(\\d+).*"},"Hentai-Moon-x-q-p":{link:"^hentai-moon\\.com/videos/[0-9]+/.*?/",res:function($){let title=/<title>([^<]+)/gm.exec($._)[1];function deobfuscate(e,t){let a=(e=e.split("/").splice(2))[5],n="",l="";l=n=a.substring(0,32);let m="";for(f="",g=1;g<t.length;g++)f+=parseInt(t[g])?parseInt(t[g]):1;for(c=parseInt(f.length/2),v=parseInt(f.substring(0,c+1)),(g=(w=parseInt(f.substring(c)))-v)<0&&(g=-g),f=g,(g=v-w)<0&&(g=-g),f+=g,f*=2,f=""+f,i=10,b="",g=0;g<c+1;g++)for(h=1;h<=4;h++)(k=parseInt(t[g+h])+parseInt(f[g]))>=i&&(k-=i),b+=k;m=b;for(var c=l,v=l.length-1;v>=0;v--){for(var w=v,b=v;b<m.length;b++)w+=parseInt(m[b]);for(;w>=l.length;)w-=l.length;for(var k="",S=0;S<l.length;S++)k+=S==v?l[w]:S==w?l[v]:l[S];l=k}return e[5]=a.replace(n,l),e.join("/")}let videovars=/var flashvars = ({[\n].+});/gm.exec($._);eval("videovars = "+videovars[1]);let urls=[];for(el in videovars)el.match(/^video.*?url\d?$/)&&urls.push([deobfuscate(videovars[el],videovars.license_code)+"#mp4",videovars[el+"_text"]?videovars[el+"_text"]:title]);return urls}},"Hentai-Moon_scr-x-p":{link:"^hentai-moon\\.com/get_file/0/[a-f\\d]+/\\d+/\\d+/screenshots/\\d+\\.jpg/"},"HentaiFox-x-p":{link:"^(?:hentaifox\\.(?:(com/gallery/\\d+/)|tv/video/([\\w-]+).*)|nhplayer.com/(?:(v/\\w+)|player.php\\?.+))",url:function(){var e=arguments;return e[2]?"https://hentaifox.tv/embed_new.php?name="+e[2]:e[0]},res:function(e){if(e[1]){let t=[],a=e._.match(/data-src="(https:\/\/[^\/]+\/(?:\d+\/){2})\d+t(\.[^"]+)/),n=e._.match(/id="load_pages" value="([^"]+)/)[1];for(let l=1;l<=n;l++)t.push([a[1]+l+a[2]]);return t}return e[2]?{loop:e._.match(/src="([^"]+)/)[1]}:e[3]?{loop:"https://nhplayer.com"+e._.match(/<li data-id="([^"]+)/)[1]}:e._.match(/file:\s+"([^"]+)/)[1]},img:"^(i\\d*\\.hentaifox\\.com\\/\\d+\\/\\d+\\/)(?:(\\d+)t|(thumb))\\.(...)",to:function(){var e=arguments;return e[1]+(e[3]?"1":e[2])+".#"+e[4]+" png#"}},"HentaiSea_video-x-p":{url:"https://hentaisea.com/jwplayer/?source=https%3A%2F%2Fhentaisea.com%2Fmp4%2Ftube%2F$1.mp4&type=mp4",res:'file":"([^"]+)',img:"^hentaisea\\.com/wp-content/uploads/tube-thumbs/(.*?)\\.jpg"},"HentaiSea_watch-x-p":{link:"^hentaisea\\.com/watch/.*?/$",res:function(e){let t=new DOMParser().parseFromString(e._,"text/html"),a=t.querySelectorAll(".imagen a");if(!a)return null;let n=t.querySelector(".data h1").textContent;function l(w,b,k){let S=new XMLHttpRequest;return w=="get"?(S.open("GET",b,!1),S.send()):w=="post"&&(S.open("POST",b,!1),S.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),S.send(k)),S.responseText}function m(w){let b="https://hentaisea.com/wp-admin/admin-ajax.php",k=l("get",w),S=new DOMParser().parseFromString(k,"text/html"),j=`action=doo_player_ajax&post=${/(\d+)/.exec(S.querySelector("link[rel=shortlink]").href)[1]}&nume=1&type=tv`;return k=l("post",b,j),b=/src='([^']+)/.exec(k)[1],k=l("get",b),/file":"([^"]+)/.exec(k)[1]}function c(){let w=[],b=1,k="";for(episode of a){let S=episode.href,G=m(S);k=a.length>1?`${n} - episode ${b}`:n,w.push([G+"#mp4",k]),b++}return w}return c()}},"HizliResim-h":{link:"^hizliresim\\.com/(a/)?\\w{6,}\\W*$",res:function(e){return[...e._.matchAll(/data-fancybox="gallery" href="([^"]+)/g)].map(t=>[t[1]])},img:"^([gt])(\\.hizliresim\\.com/[^.]+)-(?:\\d+x\\d+|s)",to:function(){var e=arguments;return(e[1]=="t"?"i":"g")+e[2]}},"Hoff.ru-s":{link:"^hoff\\.ru/catalog/[\\w-/]+_id(\\d+)/(?:\\?articul=(\\d+))?",url:function(){var e=arguments;return"https://hoff.ru/vue/catalog/product/?id="+e[1]+(e[2]?"&articul="+e[2]:"")},res:function(e){let t=JSON.parse(e._),a=[];for(picture of t.data.slider.pictures)a.push([picture.src]);return a}},"Holodilnik.ru-s":{link:"^holodilnik\\.ru/(.+/){4}$",res:function(e){var t=e._.indexOf('<div class="card-product-img__labels">');if(t<0)return null;var a=e._.indexOf('<div class="swiper-initialized card-product-img__preview"',t);if(a<0)return null;var n=[],l=/data-src="([^"]+)"/gi;let m=e._.substring(t,a);for(var c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},"HomeMoviesTube-x-p":{link:"^(\\w+\\.)?homemoviestube\\.com/videos/(.*?)(/|$|\\?).*",url:"https://www.homemoviestube.com/embed/$2",res:function(e){var t;return((t=e._.match(/<source src="([^"]+)/))==null?void 0:t[1].replace(/[a-z]+\.videos\.cdn\.homemoviestube\.com/,"www.homemoviestube.com/media/videos"))||""}},"HostingKartinok|hkar.ru-h":{useimg:1,link:"^(?:hostingkartinok\\.com/show-image\\.php\\?id=[\\da-f]{32}|(?:hkar\\.ru|smotr\\.im)/\\w+)",res:'<div class="image">\\s*<a href="([^"]+)"',img:"^(s\\d+\\.hostingkartinok\\.com/uploads)/thumbs/([^.]+\\.)png",to:"$1/images/$2#jpg jpeg png gif bmp#"},"HostPic-h":{link:"(hostpic.org/)view\\.php\\?filename=([^.]+\\.jpg)",img:"(hostpic.org/)view\\.php\\?filename=([^.]+\\.jpg)",to:"$1images/$2"},"Hotline.ua-s-p":{link:"^hotline\\.ua/[\\w-]+/",res:function(e){let t=e._.match(/type="application\/ld\+json">({"@context":"https:\/\/schema\.org\/","@type":"Product"[^<]+)<\/script>/i),a=[];for(image of JSON.parse(t[1]).image)a.push([image]);return a},img:"^(hotline\\.ua/{1,2}img/tx/\\d+/\\d+)_s\\d+(\\.jpg)$",to:"$15$2"},"Huaban-g":{link:"^huaban\\.com/boards/(\\d+)",url:"https://api.huaban.com/boards/$1/pins?limit=100",res:function(e){let t=JSON.parse(e._),a=[];for(pin of t.pins){let n="https://"+pin.file.bucket+".huaban.com/"+pin.file.key,l=pin.raw_text;a.push([n,l])}return a},img:"^(gd-hbimg\\.huaban\\.com/[^_]+)_.*",to:"$1"},"Hubblesite-g":{link:"^hubblesite\\.org/contents/media/(?:video|image)s/\\d{4}/\\d+/\\S+",res:'<a href="([^"]+\\.(?:png|jpe?g|mp4))">',img:"^stsci-opo\\.org/STScI-[^.]+\\.(?:pn|jpe?)g$",loop:2,to:function(){var t,a,n,l,m;var e=arguments;return location.hostname==="hubblesite.org"&&((m=(l=(n=(a=(t=this.node.parentNode)==null?void 0:t.parentNode)==null?void 0:a.parentNode)==null?void 0:n.firstElementChild)==null?void 0:l.firstElementChild)==null?void 0:m.href)||e[0]}},HuffingtonPost:{img:"^(img\\.huffingtonpost\\.com/+asset/)(?:[^/]+/)?([^?]+).*",to:"$1$2"},"Icedrive-h":{link:"^(icedrive\\.net/)(?:s/\\w+|API/Internal/V\\d/\\?.*)",res:function(e){var a,n;if(e._[0]!=="{"){const l=((a=e._.match(/data-id="([^"]+)/))==null?void 0:a[1])||((n=e._.match(/previewItem\('([^']+)/))==null?void 0:n[1]);return l?{loop:/data-id="/.test(e._)?"https://"+e[1]+"API/Internal/V2/?request=collection&type=public&folderId="+l+"&sess=1":"https://"+e[1]+"API/Internal/V2/?request=file-preview&id="+l+"&sess=1"}:""}const t=JSON.parse(e._);return t.download_url?t.download_url+"#"+t.extension:t.data?[...t.data.map(l=>[l.thumbnail.replace(/&w=[^&]+&h=[^&]+&m=.*/,"&w=1024&h=1024")])]:""}},Idlebrain:{img:"^(idlebrain\\.com/movie/photogallery/[^/]+/images/)th_",to:"$1"},iFixit:{img:"(guide-images\\.cdn\\.ifixit\\.com\\/igi/[^/]+)\\.(medium|thumbnail|standard)",to:`#$1
$1.huge`},"Igromania.ru":{link:"javascript:view\\(\\d+,\\d+,'(\\/\\/cdn\\.igromania\\.ru\\/mnt\\/articles(?:\\/\\w){6}\\/\\w+\\/html\\/img\\/\\w+_zoom\\.\\w+)'\\)",to:"$1"},"Igromania.ru_2":{img:"(cdn\\.igromania\\.ru\\/mnt\\/articles(?:\\/\\w){6}\\/\\w+\\/html\\/more\\/\\w+_)\\d+\\w+(\\.\\w+)",to:`$11920xH$2
$11200xH$2`},"IImg.su-h":{link:"^iimg\\.su/i/[\\w\\d]+",res:'img src="([^"]+)" alt=".*" class="img-fluid"'},"ImageBam-h":{link:"^(imagebam\\.com/)(image|view)/(\\w+).*",url:"data:,$&",res:function(e){var a;const t=new XMLHttpRequest;try{t.open("Get","https://www."+e[1]+(e[3]&&e[2][0]==="v"?"%76%69%65%77/":"%69%6d%61%67%65/")+(e[3]||e[2]),!1),t.send()}catch{alert("Rules for the 'Simple-Modify-Headers' extension are needed for the Imagebam sieve to work on external links. These are included in the rule-set zip file.")}return((a=t.responseText.match(/img src="([^"]+)" alt="[^"]+" class="main-image/))==null?void 0:a[1])||""},img:"^thumbnails\\d*\\.(imagebam\\.com/)\\d+/([\\da-f]+).*"},"ImageBan.ru|ibn.im-h":{link:"(^imageban\\.ru/show/\\d{4}/|ibn\\.im\\/\\w{7})",res:'src="(https?://i\\d+\\.imageban\\.ru/out/[^"]+)',img:"^(i\\d+\\.imageban\\.ru)/thumbs/(\\d{4})\\.(\\d\\d)\\.(\\d\\d)/",to:"$1/out/$2/$3/$4/"},"ImageEvent-h":{img:"^(photos\\.imageevent\\.com/(?:[^/]+/)+?)(?:icons|small|websize)/(.+)",to:"$1/$2"},"ImageFap-x-p":{link:"^imagefap\\.com/(?:photo/|/image\\.php\\?id=)(\\d+).*",url:"https://www.imagefap.com/photo/$1/",res:'original="([^?]+$1[^"]+)',img:"^(?:(cdn|cdnc|cdnh)\\d*\\.imagefap\\.com|(?:x\\d*\\.)?fap\\.to)/images/[^?]+/(\\d+).*"},"ImageFap_video-x-p":{link:"^imagefap\\.com/video\\.php\\?vid=\\d+",res:function(e){let t=e._.match(/var VideoPlayer = \{[\s\S]+?url: ?'([^']+)'/)[1];const a=new XMLHttpRequest;a.open("GET",t,!1),a.send();let n=a.responseXML,l=[],m=n.getElementsByTagName("quality")[0];return m&&(m=m.getElementsByTagName("item"),l.push(m[m.length-1].getElementsByTagName("videoLink")[0].childNodes[0].nodeValue)),l}},"ImageNetz.de-h":{link:"imagenetz\\.de/\\w+",res:function(e){const t=e._.match(/<div class=["']thumbnail thumbnail-downloadimage["']>[^<]+<img src=["']([^"']+)/);return t&&t.length?t[1]:""}},"ImageShack_1-h":{link:"^(imageshack\\.com/\\w/\\w+)"},"ImageShack_2-h":{img:"^imagizer\\.imageshack\\.com/(?:img(\\d+)/\\d+|v2/\\w+/(?:\\w/)?(\\d+))(/\\w+\\.jpg)",to:"imagizer.imageshack.us/v2/download/$1$2$3"},"ImageSharing-h":{link:"imagesharing\\.com//?photo\\.php\\?s=.*",res:function(e){const t=e._.match(/"p_photo_container">[^<]+<img src="([^"]+)/);return t&&t[1].length?t[1]:""}},"ImageTitan-h":{link:"^(.*\\.imagetitan\\.com/)img\\.php\\?image=.+\\.(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?))",res:'img id=\\"image\\".+src=\\"(.+\\.(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?)))\\"'},"ImageTwist|imagenpic|imageshimage|imgtraffic|picshick|pixroute-h-x":{link:"^((?:imagetwist|imageshimage|imagenpic|picshick|pixroute|imgtraffic)\\.com/)([\\da-z]{12}|\\w-1(?:/\\d+){3})(/[\\w.-]+\\.(?:[Jj][Pp][Ee]?[Gg]|png|PNG|gif|GIF|bmp|BMP)(?:\\.html)?)$",url:"$1$2$3",res:`src=["'](https?://[^"']+)["'] (?:(?:\\w+="[^"]+"\\s+)*?(?:class="pic|id="[^"]+"\\s*>)|alt='[^']+'\\s+title='Click to view full size')`,img:"^(?:i\\D{0,3}\\d*\\.)?((?:imagetwist|imageshimage|picshick|pixroute)\\.com)/(?:i/\\d{5}/([\\da-z]{12})_[^.]+|th/\\d{5}/([\\da-z]{12}))\\.jpg$"},"imageup.ru-h-b":{link:"^(imageup\\.ru/img(?:.+))\\.html$",to:"$1"},"imageup.ru_2-h-b":{link:"^imageup\\.ru/\\d+",res:'<tr><td align=center><img src="([^"]+)"'},"ImageUpper-h-p":{link:"^imageupper\\.com/[gi]+/\\?(?:galID=)?\\w+",res:function(e){var t;return((t=e._.match(/;" SRC="([^"]+)/))==null?void 0:t[1])||[...e._.matchAll(/<IMG SRC="([^"]+)" BORDER/g)].map(a=>[a[1].replace("_t","")])},img:"^(s\\d\\d\\.imageupper\\.com/\\d)_t(/\\d/\\w+\\.jpg)",to:"$1$2"},"ImageVenue-h":{link:"^((img\\d+\\.)?imagevenue\\.com/)(\\w{6,8}|img\\.php\\?(?:[^&]+&)*?image=([^&]+).*)",res:function(e){const t=new DOMParser().parseFromString(e._,"text/html");var a=t.querySelector("#main-image");return a?a.src:(a=t.querySelector(".thumb > a"),a?{loop:a.href}:"")}},IMDb:{link:"^(?:m\\.)?imdb\\.com/title/tt\\d+(?:/\\?\\S*|/)?$",loop:1,res:function(e){var te,s,d,p,y,I;function t(){const T=A=>R.titleType.text.startsWith(A),O=T("TV")?"tv":T("Video Game")?"game":T("Podcast")?"podcast":T("Music Video")?"music":"movie";return G.make("-3 0 30 24",O)}function a(T){const O=`https://www.imdb.com/title/${M.id}/mediaindex/`,A=`The other ${T>1?`${T}images are`:`${T}image is`} available<br>in the IMDb gallery`;return[G.make("-3 2 30 24","gallery"),`<imagus-extension type="banner" text="${A}" url="${O}"></imagus-extension>`]}function n(){const T=E=>E?[E.url,E.caption.plainText]:[t(),""],O=E=>E.edges.map(D=>{var X;return D.node.id!==((X=R.primaryImage)==null?void 0:X.id)?[D.node.url,D.node.caption.plainText]:void 0}).filter(Boolean),A=[T(R.primaryImage),...O(M.titleMainImages)];return M.titleMainImages.total>A.length&&A.push(a(M.titleMainImages.total-A.length+A[0][0].startsWith("data:"))),A.length===1&&A[0][0].startsWith("data:")&&(A[0][0]="//"+A[0][0]),A}function l(){const T=R.releaseYear,O=R.titleType;let A=O.isSeries&&(T!=null&&T.year)&&(T==null?void 0:T.year)!==(T==null?void 0:T.endYear)?`${T.year}&ndash;${T.endYear||" "}`:T==null?void 0:T.year;return O.id!=="movie"&&(A=[O.text,A].filter(Boolean).join(" ")),A?`${P} (${A})`:P}function m(){var O;const T=((O=R.runtime)==null?void 0:O.seconds)/60;return T?T>60?`${Math.floor(T/60)} hr ${T%60} min (${T} min)`:`${T} min`:""}function c(){const T=M.releaseDate;if(T&&T.year&&T.month&&T.day)return new Date(T.year,T.month-1,T.day).toLocaleDateString(navigator.language,{year:"numeric",month:"short",day:"2-digit"})+(T.country?` (${T.country.id})`:"")}function v(T){var D;const O=R.ratingsSummary,A=M.ratingsSummary.topRanking,E=(A==null?void 0:A.rank)<=T?`Top Rated ${R.titleType.text.replace(/^Movie$/,"Movies")}: #${A.rank.toLocaleString()}`:"";return O.aggregateRating?[`<b>&#x2B50;</b> ${Number(O.aggregateRating).toFixed(1)} (${(D=O.voteCount)==null?void 0:D.toLocaleString()})`,E].filter(Boolean).join(" &middot; "):""}function w(){var E;const T=D=>D?` <span style="color: silver;">(${D.map(X=>X.text).join(", ")})</span>`:"",O=D=>D.name.nameText.text+T(D.attributes),A=D=>`<b>${D.category.text}:</b> ${D.credits.map(O).join(", ")}`;return(E=R.principalCredits)==null?void 0:E.filter(D=>D.credits.length).map(A).filter(D=>!D.startsWith("<b>Star")).join(`
`)}function b(T){var D;const O=X=>X?` <span style="color: silver;">(${X.map(B=>B.text).join(", ")})</span>`:"",A=X=>X?` (${X.map(B=>B.name).join(", ")})`:"",E=X=>X.node.name.nameText.text+A(X.node.characters)+O(X.node.attributes);return(D=M.cast)==null?void 0:D.edges.slice(0,T).map(E).join(`
`)}function k(){const T=M.wins,O=M.nominationsExcludeWins,A=M.prestigiousAwardSummary;let E="",D="";return(A==null?void 0:A.wins)>0&&(D+=`Won ${A.wins} ${A.award.text}${A.wins>1?"s":""}`),(A==null?void 0:A.nominations)>0&&!(A!=null&&A.wins)&&(D+=`Nominated for ${A.nominations} ${A.award.text}${A.nominations>1?"s":""}`),T.total>0&&(E+=`${T.total}&nbsp;win${T.total>1?"s":""}${O.total?" & ":""}`),O.total>0&&(E+=`${O.total}&nbsp;nomination${O.total>1?"s":""}`),D?`${D} (${E} total)`:E}function S(){var D,X,B;const T=(D=M.productionBudget)==null?void 0:D.budget,O=(X=M.lifetimeGross)==null?void 0:X.total,A=(B=M.worldwideGross)==null?void 0:B.total,E=Q=>Q!=null&&Q.amount?Q.amount.toLocaleString("en-US",{style:"currency",currency:Q.currency,minimumFractionDigits:0}):"";return[["Budget",T?E(T)+" (estimated)":""],["US & Canada Box Office",E(O)],["International Box Office",E({amount:(A==null?void 0:A.amount)-(O==null?void 0:O.amount),currency:"USD"})],["Worldwide Box Office",(O==null?void 0:O.amount)!==(A==null?void 0:A.amount)?E(A):""]].flatMap(Q=>Q[1]?Q.join(": "):[]).join(`
`)}if(this.TRG===null)return;const G={make:(T,O)=>"data:image/svg+xml,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="360" height="480" viewBox="${T}" style="background-color: #2a2a2a;" fill="#404040">${G[O]}</svg>`),gallery:'<path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-10.6-3.47l1.63 2.18 2.58-3.22a.5.5 0 0 1 .78 0l2.96 3.7c.26.33.03.81-.39.81H9a.5.5 0 0 1-.4-.8l2-2.67c.2-.26.6-.26.8 0zM2 7v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"/>',game:'<path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-11 7H8v2c0 .55-.45 1-1 1s-1-.45-1-1v-2H4c-.55 0-1-.45-1-1s.45-1 1-1h2V9c0-.55.45-1 1-1s1 .45 1 1v2h2c.55 0 1 .45 1 1s-.45 1-1 1zm5.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>',movie:'<path d="M18 4v1h-2V4c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v1H6V4c0-.55-.45-1-1-1s-1 .45-1 1v16c0 .55.45 1 1 1s1-.45 1-1v-1h2v1c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-1h2v1c0 .55.45 1 1 1s1-.45 1-1V4c0-.55-.45-1-1-1s-1 .45-1 1zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"/>',music:'<path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h16c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zM8.05 15.54A2.995 2.995 0 0 1 11 12c.35 0 .69.07 1 .18V8c0-1.1.9-2 2-2h2c.55 0 1 .45 1 1s-.45 1-1 1h-2v7.03a3.001 3.001 0 0 1-3.55 2.92c-1.21-.21-2.2-1.2-2.4-2.41z"/>',podcast:'<path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15a.998.998 0 0 0-.98-.85c-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08a6.993 6.993 0 0 0 5.91-5.78c.1-.6-.39-1.14-1-1.14z"/>',tv:'<path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v1c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-1h5c1.1 0 1.99-.9 1.99-2L23 5a2 2 0 0 0-2-2zm-1 14H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h16c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1z"/>'},j=JSON.parse(e._.match(/NEXT_DATA[^{]+([^<]+)/)[1]).props.pageProps,R=j.aboveTheFoldData,M=j.mainColumnData,P=R.titleText.text,L=R.originalTitleText.text,C=(te=M.countriesOfOrigin)==null?void 0:te.countries.map(T=>T.text).join(", "),V=(s=R.certificate)==null?void 0:s.rating,J=(d=M.episodes)==null?void 0:d.totalEpisodes.total,N=(p=R.genres)==null?void 0:p.genres.map(T=>T.text).join(", "),U=(I=(y=R.plot)==null?void 0:y.plotText)==null?void 0:I.plainText,W=M.production.edges.map(T=>T.node.company.companyText.text).join(", "),F=[`<span style="font-size: 120%; font-weight: bold;">${l()}</span>`,P!==L?"Original title: "+L:"",C,[m(),J?`${J} eps`:"",c()].filter(Boolean).join(" &middot; "),[N,V].filter(Boolean).join(" &middot; "),v(1e3),[`
<b>Plot</b>`,U],["",w()],[`
<b>Top cast</b>`,b(12)],[`
<b>Awards</b>`,k()],[`
<b>Production companies</b>`,W],[`
<b>Financials</b>`,S()]].filter(T=>T==null?void 0:T[1]).flat().join(`
`),Z=n();return Z[0][1]=`<imagus-extension type="sidebar">${F}</imagus-extension>${Z[0][1]}`,this.TRG.IMGS_ext_data=Z,"imagus://extension"},img:"^((?:(?:images\\.|(?:images-[a-z]{2}\\.ssl-|(?![gz]-)[^.?]+\\.)images-)amazon|ia\\.media-imdb|m\\.media-amazon)\\.com/images/[^/]/[^.]+(?:(?!\\.[A-Za-z]{3,4}$)\\.[^A-Z_.]+)*)(?:$|(?!_(?:CB|V)\\d{4,}_\\.)[^?]*\\.([^?]*).*)",to:function(){var e=arguments,t=e[2]||"#jpg png#";return"#"+e[1]+"."+t+`
`+e[1]+"._SY1024_SX1024_."+t}},IMDb_mediaindex:{useimg:1,link:"^(?:m\\.)?imdb\\.com/(name|title)/(\\w+)/media(?:index|viewer).*",url:"data:,$&",res:function(e){var m,c,v;const a=new XMLHttpRequest,n=e[1][0].toUpperCase()+e[1].slice(1),l=e[1][0]==="t"?"990fff77afa2cc2ecb8a245e9c124f994eb21a4cbab130ae0a280b9f3117b7c7":"457690e6ddeba1d01d3f62eca1f5d9fe59f4aba207807c5703836d0dea714460";return a.open("GET",`https://api.graphql.imdb.com/?operationName=${n}Images&variables=%7B%22first%22%3A300%2C%22firstYes%22%3Atrue%2C%22id%22%3A%22${e[2]}%22%2C%22lastYes%22%3Afalse%7D&extensions=%7B%22persistedQuery%22%3A%7B%22sha256Hash%22%3A%22${l}%22%2C%22version%22%3A1%7D%7D`,!1),a.setRequestHeader("Content-type","application/json"),a.send(),e=((v=(c=(m=JSON.parse(a.responseText).data)==null?void 0:m[e[1]])==null?void 0:c.images)==null?void 0:v.edges)||[],e.map(w=>{var b,k,S,G;return[(k=(b=w.node)==null?void 0:b.url)==null?void 0:k.replace(/\._.*/,""),((G=(S=w.node)==null?void 0:S.caption)==null?void 0:G.plainText)||""]})},img:"^((?:(?:images\\.|(?:images-[a-z]{2}\\.ssl-|(?![gz]-)[^.?]+\\.)images-)amazon|ia\\.media-imdb|m\\.media-amazon)\\.com/images/[^/]/[^.]+(?:(?!\\.[A-Za-z]{3,4}$)\\.[^A-Z_.]+)*)(?:$|(?!_(?:CB|V)\\d{4,}_\\.)[^?]*\\.([^?]*).*)",to:function(){var e=arguments,t=e[2]||"#jpg png#";return"#"+e[1]+"."+t+`
`+e[1]+"._SY1024_SX1024_."+t}},IMDb_Video:{link:"^imdb\\.com/(?:video/vi\\d+|(title/tt|name/nm)\\d+/videogallery[?/])",res:function(e){var l,m,c,v,w,b,k,S,G;if(e[1])return this.imdbVid={links:[...e._.matchAll(/data-testid="videos-slate-card-title-\d+" href="([^"]+)/g)].map(j=>"https://www.imdb.com"+j[1]),num:0},{loop:this.imdbVid.links[0]};let t=((l=this.imdbVid)==null?void 0:l.vids)||[];const a=j=>{var R,M,P;return Number(((P=(M=(R=j==null?void 0:j.displayName)==null?void 0:R.value)==null?void 0:M.match(/\d+/))==null?void 0:P[0])||0)};e=(w=(v=(c=JSON.parse(((m=e._.match(/"__NEXT_DATA__" type="application\/json">({.+?})<\/script/))==null?void 0:m[1])||"{}").props)==null?void 0:c.pageProps)==null?void 0:v.videoPlaybackData)==null?void 0:w.video;const n=((b=e==null?void 0:e.description)==null?void 0:b.value)||"";if(e=((k=e==null?void 0:e.playbackURLs)==null?void 0:k.filter(j=>j.videoMimeType==="MP4").sort((j,R)=>a(R)-a(j)))||"",e!=null&&e.length&&t.push([["#"+((S=e[0])==null?void 0:S.url),(G=e[Math.floor(e.length/2)])==null?void 0:G.url],n]),this.imdbVid){this.imdbVid.num++;const j=this.imdbVid.num,R=this.imdbVid.links;if(j<R.length)return this.imdbVid.vids=t,{loop:R[j]};delete this.imdbVid}return t}},"img.onl-h":{link:"img\\.onl/\\w+",res:'<img id="img" src="([^"]+)'},"imgBB|ibb.co-h-p":{link:"^(i(?:bb\\.co|mgbb\\.com)/\\w{6,7}).*",url:"$1",res:`="og:image" content="([^"]+)
="og:title" content="([^"]+)`,img:"^i(?:mage)?\\.(i(?:bb\\.co|mgbb\\.com)/\\w+).*"},"imgbox-h":{link:"^(imgbox\\.com/(?!privacy|register)(g/)?[^/.]{6,10})$",res:function(e){if(!e[2])return e._.match(/href="([^"?]+)\?download/)[1];var t=e._.match(/<h1>([^<]+)/),a=e._.match(/ b" src="https:\/\/thumbs[^"]+/g).map(function(n){return[n.slice(9).replace(/thumb(s\d\.)/,"image$1").replace(/_\w\./,"_o.")]});return a[0][1]=t&&t[1],a},img:"^(?:(?:hcd-\\d|t\\d*|(?:\\d[.-])?[ist]|thumb(s\\d*))\\.)(imgbox\\.com/[^._]+)[^.]*",to:function(){var e=arguments;return e[1]?"image"+e[1]+"."+e[2]+"_o":"i."+e[2]}},"ImgChest-h":{link:"^imgchest\\.com/p/[a-z0-9]+",res:function(e){var t,a,n,l;return e=(a=(t=new DOMParser().parseFromString(e._,"text/html"))==null?void 0:t.getElementById("app"))==null?void 0:a.getAttribute("data-page"),e=e&&((l=(n=JSON.parse(e).props)==null?void 0:n.post)==null?void 0:l.files),e?e.map(m=>[m.link,m.description||""]):""}},"Imgflip-h":{link:"^(imgflip\\.com/)(?:i|gif)/([^?#]+)",img:"^i\\.(imgflip\\.com/)2/([^.]+).+",to:"//i.$1$2.#jpg gif#"},"ImgHost.pl-h":{useimg:1,link:"imghost\\.pl/(?:index.php)?\\?id=([a-z0-9]+)",img:"imghost\\.pl/thumbs/([^.]+)\\.([a-z]+)",to:function(){var e=arguments;return"https://www.imghost.pl/images/"+e[1]+".#"+(e[2]?e[2]:"jpg gif png jpeg")+"#"}},"Imginn|Imgsed-p":{link:"^imginn\\.com|imgsed\\.com/p/[\\w-]+/",res:function(e){let a=new DOMParser().parseFromString(e._,"text/html"),n=[];return a.getElementsByClassName("swiper-slide").length>0?[...a.getElementsByClassName("swiper-slide")].forEach(l=>{n.push([l.getAttribute("data-src")])}):n.push([a.querySelector(".downloads a").href]),n}},"Imgisto-h-p":{link:"imgisto\\.site/[a-z0-9]{4,5}$",res:'"og:image" content="([^"]+)',img:"(imgisto\\.site/_i/[^?]+)\\?dl",to:"$1"},"Imglink.ru-h":{link:"^imglink\\.ru/show-image.php\\?id=(\\w+)$",res:"<img src='(https?://imglink\\.ru/pictures/[^']+)' alt='",img:"^imglink\\.ru/thumbnails/(.+)$",to:"imglink.ru/pictures/$1"},"imgsh-h":{img:"(imgsh\\.net/)\\w+(/\\w+\\.\\w+)",to:"$1i$2"},"ImgSpice-x":{link:"^imgspice\\.com/[a-z0-9]+/[\\w-]+\\.[a-z]{3,4}\\.html$",res:function(e){let t=document.querySelector('head > meta[name="referrer"]');return t?t.attributes.content.value!=="same-origin"&&(t.attributes.content.value="same-origin"):(t=document.createElement("meta"),t.name="referrer",t.content="same-origin",document.getElementsByTagName("head")[0].appendChild(t)),[(e._.match(/<img id="imgpreview" src="([^"]+)"/)||[])[1]]}},"iMGSRC.ru-h":{useimg:1,link:"^imgsrc\\.ru/([^/]+)/(\\d+)\\.html.*",url:"//imgsrc.ru/$1/$2.html",res:function(e){var t;return((t=e._.match(/<img src='([^']+)[^>]+class='big'/))==null?void 0:t[1])||""},img:"^\\w+\\.\\w+\\.icdn\\.ru/\\w/(\\w+)/\\w+/(?:imgsrc\\.ru_)?(\\d+).*"},"imgth-h":{link:"^imgth\\.com/(?:gallery|view)/\\d+/.+",res:function(e){const t=/(?:class="thumbnail"\n<)?img(?:class="thumbnail")?src="(?<img>[^"]+)/g;return[...e._.matchAll(t)].map(a=>[a.groups.img.replace("thumbs","images"),""])}},"IMGUR-h":{link:"^(?:[im]\\.())?(imgur\\.com|filmot\\.(?:com|org))/+(?!gallery|s(?:tats|ignin|earch)|tools|topic|random|logout|account|inbox|about|contact|privacy|memegen|collab)(?:g/[^/]+/)?([^\\W_]{5}(?:[^\\W_]{2})?)[sbtmlh]?(?![,&])(?:[?/#].*)?$",img:"^(?:[im]\\.([^.]+\\.)?)?(imgur\\.com|filmot\\.(?:com|org))/+([^\\W_]{5}(?:[^\\W_]{2})?)(?:[sbtmlh]|_[^.]+)?\\.(jpe?g|png|gifv?|mp4|webm).*",to:function(){var e=arguments,t=(e[2][0]=="i"?"//":"")+"i."+(e[1]||"")+e[2]+"/"+e[3],a="";e[4]?a=t+"."+e[4].replace("gifv","mp4"):a=t+`.mp4
`+t+`.gif
`+t+"h.jpg";let n=document.querySelector('head > meta[name="referrer"]');return n?n.attributes.content.value!=="same-origin"&&(n.attributes.content.value="same-origin"):(n=document.createElement("meta"),n.name="referrer",n.content="same-origin",document.getElementsByTagName("head")[0].appendChild(n)),a}},"IMGUR-set":{link:"^(?:(?:[im]\\.)?(?:imgur\\.(?:com|io)|filmot\\.(?:com|org))/+(?:(?:(a|gallery(?!/random|/custom)|t(?:opic)?/[^/]+)|r/[^/]+)/(?:[^-/]+-)*([^\\W_]{5}(?:[^_\\W]{2})?)|(?:[^\\W_]{5}(?:[^\\W_]{2})?[,&])+[^_\\W]{5}(?:[^\\W_]{2})?)).*",url:function(){var e=arguments;return e[1]?"https://imgur.com/"+(e[1]=="a"?"a/"+e[2]+"/embed":e[1]+"/"+e[2]+"/hit.json"):e[0]},res:function(e){var t=[],a,n,l,m,c,v,w,b="//i.imgur.com/",k="404 page</title>";try{if(typeof e._=="string"&&e._[0]!="{"){if(e._.lastIndexOf(k,300)>-1)throw!0;m=e._.match(/(?:album|image)\s*[:=] +([^\n\r]+),/),m=JSON.parse(m[1]),v=this.t,delete this.t,!v&&"title"in m&&(v=m),m.album_images&&(m=m.album_images),m.images&&(m=m.images)||m.items&&(m=m.items)}else{if(e._=JSON.parse(e._),e._.album)m=e._.album,v={title:m.title,description:m.description},m=m.images;else if(m=e._.data.image,m.is_album){if(v={title:m.title,description:m.description},m.album_images.count!=m.album_images.images.length)return this.t=v,{loop:b+"a/"+e[2]};m=m.album_images.images}delete this.t}if(!m)throw e._.lastIndexOf(k,300)>-1;for(v=v&&[v.title,v.description].filter(Boolean).join(" - ")||!1,m=Array.isArray(m)?m:[m],c=0;c<m.length;++c)a=m[c].image||m[c],l=[a.title,a.caption,a.description].filter(Boolean).join(" - "),!c&&v&&v!=l&&(l="["+v+"] "+l),a.ext=a.ext||m[c].links.original.match(/\.[^.]+$/)[0],n=""+a.animated=="true",w=b+a.hash,t.push([!n&&a.width<=1200&&a.height<=1200?w+a.ext:n?[w+".mp4",w+".gif"]:["#"+w+a.ext,w+"h"+a.ext],l])}catch{}return t.length?t:null},img:"^i\\.imgur\\.com/\\w+\\.webp\\?maxwidth=\\d+&shape=thumb&fidelity=[a-z]+$",loop:2,to:function(){var t;var e=arguments;return location.hostname.indexOf("imgur.")>-1&&((t=this.node.closest('a[class^="Post-item "]'))==null?void 0:t.href)||e[0]}},"IMGUR.io_redirect":{link:"^imgur\\.io/(\\w+(?:(?:\\?\\w+)|(?:/\\w+(?:\\.\\w+)?))?)",loop:1,to:"https://imgur.com/$1"},"IMHentai-x-p":{link:"^imhentai\\.xxx/gallery/\\d+/$",res:function(e){var l;const t=this.find,a=e._.match(/data-src="(https:\/\/(?:[^\/]+\/)+)1(t\.[^"]+)/),n=parseInt(((l=e._.match(/<li class="pages">Pages:\s*(\d+)/))==null?void 0:l[1])||0);if(!a||!n)return this.node.src?{loop:this.node.src.replace("thumb","1t")}:"";for(e=[],i=1;i<=n;i++)e.push([t({src:a[1]+i+a[2]})]);return e},img:"^(m\\d?\\.imhentai\\.xxx/\\d+/\\w+/\\d+)t(?:\\.\\w+)",to:"$1#.jpg .png .gif#"},"IMX-h-x":{link:"^(imx\\.to/)i(/\\w+)",url:"$1i$2 :imgContinue=",res:'="centred" src="([^"]+)"(?:\\salt="([^"]+))?',img:"^(?:t\\.)?(imx\\.to/)(?:u/)?t/\\d+/\\d\\d/\\d\\d(/\\w+).*"},"Inkbunny-x-p":{link:"^(inkbunny\\.net)\\/s\\/\\d+",url:function(){var e=arguments;return location.hostname===e[1]?"data:,"+e[0]:e[0]},res:function(e){if(e.base.startsWith("data:")){const w=new XMLHttpRequest;w.open("Get",e[0],!1),w.send(),e._=w.responseText}let t=e._.match(/submission-standarddefURL.*?(https:\/\/\w\w\.ib\.metapix\.net\/files\/screen\/\d+\/\d+[^'\"]*?)['\"]/),a=e._.matchAll(/<a.*?href=['\"][^'\"]*?pictop['\"].*?src=['\"]([^'\"]*)['\"]/g),n=e._.match(/<meta name="og:title" content="(.+)? &lt;/),l=Array.from(a),m,c=n[1];if(t==null){let w=e._.match(/jwplayer-file.*?value=['\"](.*?)['\"]/);if(w!=null)return m=[[w[1],c]],m;let b=e._.match(/src=['\"](https:\/\/\w\w\.ib\.metapix\.net\/files\/screen\/\d+\/.*?)['\"]/);if(b!=null)return m=[[b[1],c]],m;let k=e._.match(/<meta content=['\"](.*?)['\"] property=['\"]og:image['\"]>/);if(k!=null)return m=[[k[1],c]],m;console.error("No known media context found.");return}let v=t[1];if(l.length==0)v=v.replace("/screen/","/full/"),m=[[v,c]];else{m=[];let w=v.match(/(.(jpg|jpeg|png|webp|gif))/)[1],b="/files/full/";for(let k=0;k<l.length;k++){let S=l[k][1];S=S.replace("/thumbnails/medium/",b),S=S.replace("_noncustom",""),S=S.replace(".jpg",w),m.push([S,c])}}return m}},"inoSMI.ru":{link:"inosmi\\.ru\\/\\d{8}\\/[\\w-]+-\\d+\\.html",res:'data-photoview-src="([^"]+)"'},"INSTAGRAM_pub_api_a1_1-p":{link:"^(?:(?:i\\.)?instagr(?:\\.am|am\\.com))\\/(?:[\\w.-]+\\/)?(?:tv\\/|p\\/|reel\\/){1,2}([^\\/?#]+).*",ci:1,url:function(){var e=arguments;return`https://www.instagram.com/p/${e[1]}/?__a=1&__d=dis`},res:function(e){var w,b,k,S,G,j,R,M,P;var a=JSON.parse(e._);a=a.items?a.items[0]:(w=a.graphql)==null?void 0:w.shortcode_media;var n=((b=a.user)==null?void 0:b.full_name)??((k=a.owner)==null?void 0:k.full_name),l=((S=a.user)==null?void 0:S.username)??((G=a.owner)==null?void 0:G.username),m=new Date((a.taken_at||a.taken_at_timestamp)*1e3).toLocaleString("en-GB"),c=a.caption?a.caption.text:(M=(R=(j=a.edge_media_to_caption)==null?void 0:j.edges[0])==null?void 0:R.node)!=null&&M.text?a.edge_media_to_caption.edges[0].node.text:"";c=[`@${l}`,`(${n})`,m,c].join(`
`),c=`<imagus-extension type="sidebar">${c}</imagus-extension>`;let v;return a.carousel_media?v=a.carousel_media.map(L=>[L.video_versions?L.video_versions[0].url:L.image_versions2.candidates[0].url,c]):a.video_versions?v=[a.video_versions.sort((L,C)=>C.height-L.height)[0].url,c]:a.edge_sidecar_to_children?v=a.edge_sidecar_to_children.edges.map(L=>{var C,V;return[((C=L.node)==null?void 0:C.video_url)||((V=L.node)==null?void 0:V.display_url),c]}):a.video_url||a.display_url?v=[a.video_url??a.display_url,c]:v=[a.image_versions2.candidates[0].url,c],this.CNT.filename=l+"_"+((P=(Array.isArray(v[0])?v[0][0]:v[0]).match(/\/([^\/.]+\.\w{3,4})(?:$|\?)/))==null?void 0:P[1].replace(/[^\w.-]/g,"_")),this.TRG.IMGS_ext_data=v,{loop:"imagus://extension"}}},"INSTAGRAM_pub_api_a1_2-p":{off:1,link:"^(?:(?:i\\.)?instagr(?:\\.am|am\\.com))\\/(?:[\\w.-]+\\/)?(?:tv\\/|p\\/|reel\\/){1,2}([^\\/?#]+).*",url:function(){var e=arguments;return`https://www.instagram.com/p/${e[1]}/${this.ig_embed_fail?"?__a=1&__d=dis":"embed/"}`},res:function(e){var w,b,k,S,G,j,R,M,P,L,C,V,J,N,U,W;var a=this.ig_embed_fail?JSON.parse(e._):(j=JSON.parse(((G=(S=(k=(b=JSON.parse(((w=e._.match(/s\.handle\(({.+?})\);requireLazy/))==null?void 0:w[1])||"{}").require)==null?void 0:b[1])==null?void 0:k[3])==null?void 0:S[0])==null?void 0:G.contextJSON)||"{}").context)==null?void 0:j.media;if(!a&&!this.ig_embed_fail)return this.ig_embed_fail=!0,{loop:e[0]};delete this.ig_embed_fail,a=((R=a.items)==null?void 0:R[0])||((M=a.graphql)==null?void 0:M.shortcode_media)||a;var n=((P=a.user)==null?void 0:P.full_name)||((L=a.owner)==null?void 0:L.full_name),l=((C=a.user)==null?void 0:C.username)||((V=a.owner)==null?void 0:V.username),m=new Date((a.taken_at||a.taken_at_timestamp)*1e3).toLocaleString("en-GB"),c=a.caption?a.caption.text:(U=(N=(J=a.edge_media_to_caption)==null?void 0:J.edges[0])==null?void 0:N.node)!=null&&U.text?a.edge_media_to_caption.edges[0].node.text:"";c=[`@${l}`,n&&`(${n})`,m,c].filter(Boolean).join(`
`),c=`<imagus-extension type="sidebar">${c}</imagus-extension>`;let v;return a.carousel_media?v=a.carousel_media.map(F=>[F.video_versions?F.video_versions[0].url:F.image_versions2.candidates[0].url,c]):a.video_versions?v=[a.video_versions[0].url,c]:a.edge_sidecar_to_children?v=a.edge_sidecar_to_children.edges.map(F=>{var Z,te;return[((Z=F.node)==null?void 0:Z.video_url)||((te=F.node)==null?void 0:te.display_url),c]}):a.video_url||a.display_url?v=[a.video_url||a.display_url,c]:v=[a.image_versions2.candidates[0].url,c],this.CNT.filename=l+"_"+((W=(Array.isArray(v[0])?v[0][0]:v[0]).match(/\/([^\/.]+\.\w{3,4})(?:$|\?)/))==null?void 0:W[1].replace(/[^\w.-]/g,"_"))||"",this.TRG.IMGS_ext_data=v,{loop:"imagus://extension"}}},"INSTAGRAM_priv_api-p":{off:1,link:"^instagr(?:am\\.com|\\.am)/(?:[\\w.]+/)?(?:p|reel)/([\\w-]+)(?:\\W|$)(?!\\?e=|liked_by|comments).*",url:function(){var e=arguments;return"data:,"+e[1]},res:function(e){var v,w;const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",a=[...e[1]].reduce((b,k,S)=>b+BigInt(t.length**(e[1].length-S-1)*t.indexOf(k)),0n),n=new XMLHttpRequest;if(n.open("GET",`https://i.instagram.com/api/v1/media/${a}/info/`,!1),n.setRequestHeader("X-IG-App-ID","936619743392459"),/firefox/i.test(navigator.userAgent)||(n.withCredentials=!0),n.send(),n.status!==200)return["data:image/svg+xml,"+encodeURIComponent(`
    <svg xmlns="http://www.w3.org/2000/svg" height="120" width="360" style="background-color: #2a2a2a;">
      <foreignObject height="100%" width="100%">
        <div xmlns="http://www.w3.org/1999/xhtml" style="display: table; height: 100%; width: 100%;">
          <span style="color: tomato; display: table-cell; font: 18px sans-serif; vertical-align: middle; text-align: center; white-space: pre-wrap;">
            Something went wrong
HTTP status ${n.status}: ${n.statusText}
          </span>
        </div>
      </foreignObject>
    </svg>`.replace(/\n\s+/g,""))," "];const l=JSON.parse(n.responseText).items[0],m=[`@${l.user.username}${l.user.full_name?`(${l.user.full_name})`:""}`,new Date(l.taken_at*1e3).toLocaleString(navigator.language,{dateStyle:"medium",timeStyle:"medium"}),(v=l.caption)==null?void 0:v.text].filter(Boolean).join(" | "),c=b=>{var k;return[((k=b.video_versions)==null?void 0:k[0].url)||b.image_versions2.candidates[0].url,m]};return((w=l.carousel_media)==null?void 0:w.map(b=>c(b)))||c(l)}},"INSTAGRAM_graphql-p":{off:1,link:"^instagram\\.com/(?:[^/]+/)*(?:p|reel)/([\\w-]+).*",url:"data:,$1",res:function(e){var w,b;if(location.hostname!=="www.instagram.com")return null;const t=document.createElement("script");t.textContent='sessionStorage.setItem("__imagus_fb_dtsg", fb_dtsg); sessionStorage.setItem("__imagus_doc_id", require("PolarisPostRootQuery").params.id); document.currentScript.remove();',document.head.appendChild(t);const a=sessionStorage.getItem("__imagus_fb_dtsg"),n=sessionStorage.getItem("__imagus_doc_id");sessionStorage.removeItem("__imagus_fb_dtsg"),sessionStorage.removeItem("__imagus_doc_id");const l=new XMLHttpRequest;l.open("POST","https://www.instagram.com/api/graphql",!1),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.setRequestHeader("X-IG-App-ID","936619743392459"),l.send(`fb_dtsg=${encodeURIComponent(a)}&variables=%7B%22shortcode%22%3A%22${e[1]}%22%7D&doc_id=${n}`);const m=JSON.parse(l.responseText).data.xdt_api__v1__media__shortcode__web_info.items[0],c=[`@${m.user.username}${m.user.full_name?`(${m.user.full_name})`:""}`,new Date(m.taken_at*1e3).toLocaleString(navigator.language,{dateStyle:"medium",timeStyle:"medium"}),(w=m.caption)==null?void 0:w.text].filter(Boolean).join(" | "),v=k=>{var S,G;return[((S=k.video_dash_manifest.match(/(?:frameRate=[^"]*"60[^"]*"\s+ sar=|-hfr_).+?<BaseURL>([^<]+)/))==null?void 0:S[1])||((G=k.video_versions)==null?void 0:G[0].url)||k.image_versions2.candidates[0].url,c]};return((b=m.carousel_media)==null?void 0:b.map(k=>v(k)))||v(m)}},"INSTAGRAM_html-p":{off:1,link:"^instagram\\.com/(?:[\\w.]+\\/)?(?:p|reel)/([\\w-]+).*",url:"data:,$1",res:function(e){var m,c;if(location.hostname!=="www.instagram.com")return;const t=new XMLHttpRequest;t.open("GET",`https://www.instagram.com/p/${e[1]}/`,!1),t.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"),t.send();const a=JSON.parse(t.responseText.match(/xdt_api__v1__media__shortcode__web_info":(.+)},"extensions/)[1]).items[0],n=[`@${a.user.username}${a.user.full_name?`(${a.user.full_name})`:""}`,new Date(a.taken_at*1e3).toLocaleString(navigator.language,{dateStyle:"medium",timeStyle:"medium"}),(m=a.caption)==null?void 0:m.text].filter(Boolean).join(" | "),l=v=>{var w;return[((w=v.video_versions)==null?void 0:w[0].url)||v.image_versions2.candidates[0].url,n]};return((c=a.carousel_media)==null?void 0:c.map(v=>l(v)))||l(a)}},"IRecommend.ru":{link:"^irecommend\\.ru/content/.+",res:function(e){const t=e._.match(/\/sites\/default\/files\/product-images\/[^?"]+/)[0],a=e._.match(new RegExp('(?<=href=")\\/sites\\/default\\/files\\/imagecache\\/copyright1[^?"]+',"g"));return(a==null?void 0:a.map(n=>["https://irecommend.ru"+n.replace("/imagecache/copyright1",""),""]))||"https://irecommend.ru"+t}},"Itaku-g":{useimg:1,link:"^(http(|s):\\/\\/|)itaku.ee\\/images\\/(\\d+)$",url:"https://itaku.ee/api/galleries/images/$3/?format=json",res:function(e){return $data=JSON.parse(e._),$data.video!=null?$url=$data.video.video:$url=$data.image,$caption=`${$data.title} - by ${$data.owner_displayname}`,$res=[$url,$caption],$res},img:"itaku\\.ee\\/api\\/media\\/gallery_imgs\\/(.*)\\/.*(\\..*)$",to:"https://itaku.ee/api/media/gallery_imgs/$1/xl$2"},iTunes:{img:"^(is\\d(?:-ssl)?\\.mzstatic.com/image/thumb/[^?]+/)\\d+x\\w+",to:"$19999x9999"},"iWantClips-x":{link:"^iwantclips\\.com/store/(?:item/)?\\d+",url:function(){var e=arguments;return/iwantclips\.com$/.test(location.hostname)?"data:,"+e[0]:e[0]},res:function(e){var a;if(e.base[0]==="d"){const n=new XMLHttpRequest;n.open("GET",e[0],!1),n.send(),e._=n.responseText}return((a=e._.match(/(?:"og:video" content|video src|width="100%" poster)="([^"]+)/))==null?void 0:a[1])||[...e._.matchAll(/data-src="([^"]+)/g)].map(n=>[n[1]])}},IXBT_photo:{img:"^(ixbt\\.photo\\/photo\\/[0-9]+\\/[0-9a-zA-Z]+\\/[0-9]+)(\\.(?:jpe?g|gif|png))$",to:"$1w$2"},"JD-s":{link:"^item\\.jd\\.com/\\d+\\.html$",res:function(e){return[...e._.matchAll(/src='([^']+)'\s+data-url=/g)].map(t=>[t[1].replace("/n5/","/shaidan/")])},img:"^(img\\d+\\.360buyimg\\.com/+)[^/]+/(?:[^_/]+_)?(jfs/)",to:"$1shaidan/$2"},"jimcdn-CDN":{img:"(image\\.jimcdn\\.com/app/cms/image/transf/dimension=)\\d+x\\d+(:format=\\w+/path/\\w+/image/\\w+/version/\\w+/\\w+\\.\\w+)",to:"$12048x2048$2"},JoeMonster:{useimg:1,link:"^joemonster\\.org/mg/show/\\d+/.+",res:function(e){let t=/\?next/.test(e.url[0])?e._.match(/<a class="swipe-link swipe-left" href=[^<]+<img src="([^"]+)/s)[1].replace("large_thumb_",""):(e._.match(/src="([^"]+)"[\W]+class="image"/)||[,""])[1];return!t&&!/\?next/.test(e.url[0])?/class="swipe-link swipe-right"/.test(e._)?{loop:e._.match(/<a class="swipe-link swipe-right" href="([^"]+)/)[1]+"?next"}:"":t},img:"^((?:img|vader)\\.joemonster\\.org/(?:mg/albums/.+?|upload/[a-z]{3}/))(?:thumb|s)_([^.]+\\.).*",to:"$1$2#jpg png gif#"},"Joxi.ru-h":{link:"^(joxi\\.ru/[^/]+)$",to:`$1/download
$1.#jpg png gif#`},"JulesJordan_gallery-x-p":{img:"^(thumbs\\.julesjordan\\.com/trial/content/.+)thumbs(.+)",to:"$1photos$2"},"JulesJordan_trailer-x-p-b":{link:"^julesjordan\\.com/trial/scenes/.+vids",res:function(e){if(regex=new RegExp(/id:"\d+",path:"([^"]+)",.+movie_height:"(\d+)/g),streams=[...e._.matchAll(regex)],!streams.length)return null;let t="",a=0;return streams.forEach(n=>{let l=parseInt(n[2]);l>a&&(a=l,t=n[1])}),t}},"JumpShare|jmp.sh-h":{link:"^(jmp\\.sh|jumpshare.com)\\/\\w\\/\\w+$",res:'data-original-image-src="([^"]+)"'},"Junipergallery|Shorpy-g":{useimg:1,link:"((?:shorpy|junipergallery)\\.com/node/\\d+)/?$",url:function(){var e=arguments;return/shorpy\.com\/node/.test(e[0])?e[1]+"?size=_original":e[1]},res:function(e){var l,m;let t,a,n;if(/shorpy/i.test(e[0])){const c=new DOMParser().parseFromString(e._,"text/html");if(t=(l=c.images[0])==null?void 0:l.src,!/files\/images/.test(t))return"";a=["#"+t,t.replace(/jpg$/,"preview.jpg")],n=[c.querySelector("title").textContent.replace(/[^:]+::\s(.*)\shigh-.*/,"$1"),(m=c.getElementById("caption"))==null?void 0:m.textContent.replace(/(?:\s+BUY PRINT)?\s+([^|]+).*/,"$1")].join(" | ")}else{if(t=(e._.match(/src="(https:\/\/www\.junipergallery\.com\/sites\/[^"]+)/)||[])[1],!t)return"";a=["#"+t.replace("large","jumbo"),t],n=[e._.match(/<title>([^:<]+)/)[1],e._.match(/<\/h1><\/a>[^<]+<h2>([^<]+)/)[1]].join(" | ")}return[[a,n]]},img:"(shorpy\\.com/files/images/[^.]+)\\.(?:thumbnail|preview)\\.jpg|(junipergallery\\.com/sites/default/files/styles/)[^/]+(/public/[^.]+\\.jpg).*|junipergallery\\.com/galleryview\\.php\\?targetnode=[^&]+&height=[^&]+&width=[^&]+&[^&]+&picurl=([^.]+\\.jpg)",to:function(){var e=arguments;return e[1]?`#${e[1]}.jpg
${e[1]}.preview.jpg`:e[4]?`https://www.junipergallery.com/sites/default/files/styles/jumbo/public/${e[4]}`:`#${e[2]}jumbo${e[3]}
${e[2]}large${e[3]}`}},JustJared:{img:"^(cdn\\d*\\.justjared(?:jr)?\\.com/wp-content/uploads/(?:\\d+/\\d+/)?[^/]+/)(?:headlines|thumbs/)",to:"$1"},kbin:{link:"^[^/]+/m/[^/]+/[pt]/\\d+(?!.*#comments).*",loop:1,img:"^([^/]+)/media/cache/(?:resolve/)?[^/]+(/.*)(?:\\.webp)?",to:function(){var n,l;var e=arguments;if(e[1])return`//#${e[1]}/media media.${e[1]}#${e[2]}`;const t=this.node.closest("article,div");return(t&&((n=t.querySelector('button[class="show-preview"]'))==null?void 0:n.dataset.previewUrlParam))??((l=t.querySelector("img"))==null?void 0:l.src)??""}},Keepa:{img:"^graph\\.keepa\\.com/graphimage\\?.+",to:"$&"},"KG-Portal.ru":{link:"^kg-portal\\.ru/n\\d+",res:`<a href="[^"]+url=([^"]+)" class="video_high">
<title>([^<]+)`,img:"^(media\\.kg-portal\\.ru/.+_\\d+)[st](?:_\\d+x)?(\\.\\w+)$",to:"$1$2"},KICK:{link:"^(kick\\.com/).*(?:\\?clip=|/clips/)(.+)",url:"https://$1api/v2/clips/$2",res:function(e){return kick_json=JSON.parse(e._),kick_clip_playlist=kick_json.clip.video_url,/\.m(?:3u8|pd)\b/.test(kick_clip_playlist)?(this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${kick_clip_playlist}"></imagus-extension>`],{loop:"imagus://extension"}):kick_clip_playlist},img:"^kick\\.com/category/.+",loop:2,to:function(){var t,a,n,l;var e=arguments;return e=(l=(n=(a=(t=this.node.closest('[class="group/card relative flex w-full shrink-0 grow-0 flex-col gap-2 lg:gap-0"]'))==null?void 0:t.querySelector("img"))==null?void 0:a.src)==null?void 0:n.match(/clip_\w+/))==null?void 0:l[0],e?"//kick.com/?clip="+e:""}},KICK_Live:{link:"^kick\\.com/(?!about|category|browse)[\\w-]+$",loop:3,res:'"([^"]+\\.m3u8[^"]+)\\\\"',img:"^(images\\.kick\\.com/video_thumbnails/.+)",to:function(){var a;var e=arguments;const t=new RegExp(`${e[1].replaceAll(".","\\.")} \\d+w[^<]+?\\\\"playback_url\\\\":\\\\"([^"]+)\\\\"`);return((a=document.body.outerHTML.match(t))==null?void 0:a[1])||""}},"KICK_VoD-q":{link:"^(kick\\.com/)(?:[^/]+/)*videos?/([a-zA-Z0-9-]+).*",url:"https://$1api/v1/video/$2",res:function(e){const n=JSON.parse(e._).source.replace("master.m3u8","master.m3u8");return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${n}"></imagus-extension>`],{loop:"imagus://extension"}}},"Kindgirls-x":{link:"^kindgirls\\.com/(?:gallery|video)\\.php\\?id=\\d+",res:function(e){return/<source src=["']/.test(e._)?e._.match(/<source src=["']([^"']+)/)[1]:[...e._.matchAll(/<img\s+src="([^"]+)/g)].map(t=>[t[1].replace("/m6","")])},img:"^(gals\\.kindgirls\\.com/[\\w\\d\\/]+/)m6/",to:"$1"},"KINK-x-p":{link:"^kink.com/shoot/\\d+",res:function(e){return"https://"+e._.match(/cdnp.kink.com\/.+?.mp4/m)[0]},img:"^(imgopt02.kink.com\\/.+)\\?.+",to:"$1"},"Kino-Teatr.ru":{useimg:1,link:"^(kino-teatr\\.ru)/(?:(video/.+)|\\w+/(?:acter/[a-z]/(?:\\w+/)*\\d+/(?:foto|poster|(\\w+/))|movie/(?:\\w+/)*\\d+/(?:foto|poster|(\\w+/)))(?!/i?\\d+/$))",url:function(){var e=arguments;return(()=>{if((e[3]||e[4])&&!this.node.src)throw"";return e[3]?e[0].replace(e[3],"foto/"):e[4]?e[0].replace(e[4],"poster/"):e[0]})()},res:function(e){var a,n,l;if(e[2])return((a=e._.match(/data-video-src\s*=\s*"([^"]+)/))==null?void 0:a[1].replace(/^\/.+/,"//"+e[1]+"$&"))||"";this.ls||(this.ls=0),this.kino_teatr_album||(this.kino_teatr_album=[]);const t=[...new DOMParser().parseFromString(e._,"text/html").querySelector('div[class="grid_content photo_album wrap_cols_4 width_100"],div[class="big_content_block"]').children];return this.kino_teatr_album.push(...t.filter(m=>m.className==="block_wrap").map(m=>(m=m.firstChild.firstChild,[m.src.replace("pv_",""),m.title]))),this.ls++,t.some(m=>{var c,v;return((v=(c=m.firstChild)==null?void 0:c.lastChild)==null?void 0:v.textContent)===">"})&&this.ls<40?{loop:t.find(m=>m.firstChild.lastChild.textContent===">").firstChild.lastChild.href.replace(/\/$/,"")}:(e=this.kino_teatr_album,delete this.kino_teatr_album,delete this.ls,e.length||(e=((l=(n=t[0])==null?void 0:n.querySelector("img[src]"))==null?void 0:l.src)||""),e)},img:"^(kino-teatr\\.ru/(?:movie|acter)/.+/)(?:pv|sm)_",to:"$1"},"Kinomania.ru":{link:"^kinomania\\.ru/film/\\d+/(?:poster|frame)s(?!/\\d)",res:function(e){return[...e._.matchAll(/data-type-over-img="((?!')[^"]+)/g)].map(t=>[t[1]])},img:"^(?:(fs\\.kinomania\\.ru)/image(/file/(?:film|person)(?:_(?:poster|photo|frame))?/\\w+/\\w{2}/\\w{32}\\.)\\d+\\.\\d+\\.(jpe?g|png|gif)|(fs\\.kinomania\\.ru/image/file/(?:person|film)_wallpaper/\\w+/\\w{2}/\\w{32}\\.)\\d+\\.\\d+(\\.jpe?g|png|gif))",to:`$1$2$3
$41920.1200$5
$41920.1080$5
$41680.1050$5
$41600.1200$5
$41440.900$5
$41366.768$5
$41280.1024$5
$41280.960$5
$41280.800$5
$41024.768$5
$4960.600$5
$4800.600$5`},Kinorium:{link:"^\\w\\w\\.kinorium\\.com/(?:name/)?\\d+/gallery/",res:function(e){return[...e._.matchAll(/data-photo='([^']+)/g)].flatMap((t,a)=>a?[[t[1]]]:[])},img:"^(?:((?:\\w\\w-)?images(?:-s)?\\.kinorium.com/(?:movie|persona|user)/)\\d+(/\\d+\\.\\w+)|(\\w\\w\\.kinorium\\.com/(?:name/)?\\d+/video)/.*)",loop:2,to:function(){var t,a,n;var e=arguments;if(e[3]){const l=this.node;return((t=l.dataset)==null?void 0:t.video)||((n=(a=l.offsetParent)==null?void 0:a.dataset)==null?void 0:n.video)||""}return`${e[1]}1080${e[2]}
${e[1]}600${e[2]}
${e[1]}480${e[2]}
${e[1]}300${e[2]}
${e[1]}180${e[2]}`}},Kinorium_poster:{img:"^(images(?:-s)?\\.kinorium\\.com\\/movie\\/(?:shot|poster|backstage|promo|cover|fanart)\\/\\d+\\/)h\\d+(_\\d+\\.\\w+)",to:"$1w1500$2"},Kinopoisk_block:{url:"http://www.kinopoisk.ru/picture/$1/",res:'id="image" src="([^"]+)"',img:"^(?:st|www)\\.kinopoisk\\.ru/images/(?:kadr|poster|wallpaper)/sm_(\\d+)(\\.(?:jpe?g|png|gif|bmp))$"},Kinopoisk_gallery:{link:"^kinopoisk\\.ru/film/(\\d+)/(?:concept|covers|fanart|posters|promo|screenshots|shooting|stills|wall)/$",res:function(e){var n;let t=JSON.parse(e._.match(/<script id="__NEXT_DATA__" type="application\/json".+?({.+?)<\/script>/)[1]).props.apolloState.data["Film:"+e[1]],a=[];return(n=Object.values(t).find(l=>l==null?void 0:l.items))==null||n.items.forEach(l=>{var m;return a.push([((m=l.image)==null?void 0:m.avatarsUrl)+"/orig"])}),a}},Kinopoisk_people:{useimg:1,link:"^kinopoisk\\.ru\\/(?:name|level\\/\\d+\\/people)\\/(\\d+)/photos/?$",res:function(e){let t=e._.search(/<div class="styles_root__[^ ]+ styles_gallery__/);if(t<0)return null;let a=e._.indexOf('<div class="styles_bannerContainer__',t);if(a<0)return null;let n=[],l=/<a href="([^"]+)" target="_blank"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n},img:"^(avatars\\.mds\\.yandex\\.net/get-kinopoisk-image/\\d+/[\\w-]+/)\\d+x\\d+",to:"$1orig"},Kinopoisk_people_2:{link:"^kinopoisk\\.ru\\/(?:name|level\\/\\d+\\/people)\\/(\\d+)/(?:sr/\\d/)?$",to:"https://st.kp.yandex.net/images/actor_iphone/iphone360_$1.jpg"},Kinopoisk_poster:{link:"^kinopoisk\\.ru/film/(\\d+)/(\\S+)?",img:"^st\\.kinopoisk\\.ru/images/film/(\\d+)(\\.(?:jpe?g|png|gif|bmp))$",to:"http://st.kinopoisk.ru/images/film_big/$1.jpg"},"KizlyarExtreme.ru":{link:"^kizlyarextreme\\.ru/[\\w-]+/[\\w-]+",res:function(e){e=JSON.parse(e._.match(/data-product-json="([^"]+)/)[1].replaceAll("&quot;",'"'));const t=e.title+" | "+e.short_description;return e.images.map((a,n)=>[a.original_url,n?"":t])},img:"^(static\\.insales-cdn\\.com/)r/\\w+/rs:fit(?::\\d+){3}/q:\\d+/plain/(images/products/(?:\\d+/){3}\\w+\\.(?:jpe?|pn)g)@\\w+",to:"$1$2"},"KnowYourMeme-p":{useimg:1,link:"^knowyourmeme\\.com/(?:photos/\\d+(?:-[\\w-]+)?|memes/[\\w-]+)",res:`<meta property='og:image' content='([^']+)
<meta property='og:title' content='([^']+)`,img:"^(i(?:\\d+)?\\.kym-cdn\\.com/(?:entries/icon|photos/image)s/)(?!original)[^/]+(/.*)",to:"$1original$2"},"Kolesa.kz-s":{link:"^kolesa\\.kz/\\w+/show/\\d+",res:function(e){var t=e._.indexOf('<ul class="gallery__thumbs-list js__gallery-thumbs">');if(t<0)return null;var a=e._.indexOf("</ul>",t);if(a<0)return null;var n=[],l=/data-href="([^"]+)"/gi;let m=e._.substring(t,a);for(var c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n.length<1?e._.match(/<meta property="og:image" content="([^"]+)"/)[1]:n},img:"^(cf-kl\\.kcdn\\.online/\\w+/\\w+/[\\w-]+/\\d+-)\\d+x\\d+(\\.\\w+)$",to:"$1full$2"},"Konachan-x-p":{link:"konachan\\.com\\/post\\/show\\/\\d+\\/.*",res:function(e){orig_img_url=e._.match(/content="([^"]*?)" property="og:image"/)[1];var t=[[orig_img_url,""]];return t}},"Kufar.by-s":{link:"^(\\w+\\.)?kufar\\.by/(?:item|vi)/(?:cars/)?\\d+",res:function(e){try{return JSON.parse(e._.match(/__NEXT_DATA__" type="application\/json">(.+?)<\//)[1]).props.initialState.adView.data.images.gallery.map(t=>[t])}catch{return""}},img:"^(yams\\.kufar\\.by/api/v1/kufar-ads/images/\\d{2}/\\d+\\.(?:jpe?g|png|gif|bmp)\\?rule=|content\\.kufar\\.by/)(line_thumbs(?:_2x)?|mobile_thumbs)(/\\d{2}/\\d+\\.(?:jpe?g|png|gif|bmp))?",to:"$1gallery$3"},"Kuper.ru-s":{link:"^kuper\\.ru/\\w+/[\\w-]+\\?sid=\\d+",res:function(e){var t;return e=JSON.parse(((t=e._.match(/"__NEXT_DATA__" type="application\/json">(.+?)<\/script/))==null?void 0:t[1])||"{}").props.pageProps.data.preloadedState.viewData.product.images,e.map(a=>[a.originalUrl])},img:"^(imgproxy\\.kuper\\.ru/imgproxy/)size-\\d+-\\d+(?:-2x)?",to:"$1width-auto"},"Lamnia-s":{link:"^lamnia\\.com/\\w+/\\w/\\d+/[\\w%-]+/[\\w%-]+",res:function(e){var t=e._.indexOf('class="lamnia-slider');if(t<0)return null;var a=e._.indexOf("</a></div>",t);if(a<0)return null;for(var n=[],l=/src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1].replace("140x140","800x800")]),c=l.exec(m);return n}},"Last.fm":{img:"^((?:img\\d-ak\\.lst\\.fm|lastfm(?:.freetls.fastly|-img\\d\\.akamaized)\\.net)/i/u/)[^/]+/",to:"$1"},"lazy...info":{img:"^(img00\\d\\.lazy(g(?:irl|adget|ame)|boy|car|sport)|lzimages\\.lazygirl)(s\\.info/.+)\\.m?thumb",to:function(){var e=arguments;return e[1]+e[3]+(/girl|boy/.test(e[2]||"")?".sized":"")}},"LemanaPro.ru-s":{link:"^(?:\\w+\\.)?lemanapro\\.ru/product/[\\w-]+/",res:function(e){var t,a,n;return((n=(a=JSON.parse(((t=e._.match(/window\.INITIAL_STATE\["pdp"\]=({.+?});;/))==null?void 0:t[1])||"{}"))==null?void 0:a.pdp)==null?void 0:n.pdp.product.media.images.map(l=>[l.url]))||""}},"Lenta-s":{link:"^lenta\\.com/product/[\\w-]+",res:function(e){return[...e._.matchAll(/srcset="(\S+) 1600w" alt=/g)].map(t=>[t[1].replace(/\/\d+x\d+\//,"0x0")])},img:"^(cdn\\.lentochka\\.lenta\\.com/resample/webp/)\\d+x\\d+",to:"$10x0"},Letterboxd:{link:"^(letterboxd\\.com/)(?:[^/]+/)?(film/[^/]+).*",url:function(){var e=arguments;return this.lb_stats?`https://${e[1]}${e[2]}/`:`https://${e[1]}csi/${e[2]}/stats/`},res:function(e){var J,N,U,W,F,Z,te,s,d,p,y,I,T,O,A,E,D,X,B,Q;if(!this.lb_stats)return this.lb_stats={views:(J=e._.match(/hed by ([0-9,]+)/))==null?void 0:J[1],top:(N=e._.match(/Top 250">(\d+)/))==null?void 0:N[1]},{loop:`https://${e[1]}${e[2]}/`};const t=JSON.parse(((U=e._.match(/<!\[CDATA\[[^{]{0,15}(\{".*?})\n/))==null?void 0:U[1])||"{}");if(!t.name)return null;const a=t.name,n=(W=t.countryOfOrigin)==null?void 0:W.map(ie=>ie.name).join(", "),l=((F=e._.match(/runTime:\s(\d+)/))==null?void 0:F[1])||"",m=(Z=t.releasedEvent[0])==null?void 0:Z.startDate,c=(te=t.genre)==null?void 0:te.join(", "),v=((s=t.aggregateRating)==null?void 0:s.ratingValue)&&(((p=(d=t.aggregateRating)==null?void 0:d.ratingValue)==null?void 0:p.toFixed(1))||"undefined")+"/5 ("+((y=t.aggregateRating)==null?void 0:y.ratingCount.toLocaleString())+")",w=((I=e._.match(/"description" content="([^"]+)/))==null?void 0:I[1])||"",b=(T=t.director)==null?void 0:T.map(ie=>ie.name),k=[...e._.matchAll(/"\/writer\/[^\/]+\/" class="text-slug">([^<]+)/g)].map(ie=>ie[1]),S=[...e._.matchAll(/<a title="([^"]+)" href="[^"]+" class="text-slug tooltip">([^<]+)<\/a>/g)].flatMap((ie,le)=>{var pe;return le<18||!/\([^\)]+\)/.test(ie[1])&&le<30?[ie[2],(pe=ie[1])==null?void 0:pe.replace(/([^\(]+)(\s\(|$)/,"($1)$2")].filter(Boolean).join(" "):[]}),G=(O=t.productionCompany)==null?void 0:O.map(ie=>ie.name).join(", "),j=this.lb_stats.views,R=this.lb_stats.top;delete this.lb_stats;const M=(E=(A=this.node.parentNode.parentNode)==null?void 0:A.firstChild)==null?void 0:E.src,P=[((D=t.image)==null?void 0:D.replace(/.+/,"#$&").replace(/0-\d+-0-\d+/,"0-2000-0-3000"))||"",((X=t.image)==null?void 0:X.replace(/0-\d+-0-\d+/,"0-600-0-900"))||"https://s.ltrbxd.com/static/img/icons/touch-icon-192x192.257b84e7.png"].filter(Boolean),L=M!=null&&M.length&&/alternative-/.test(M)?[(M==null?void 0:M.replace(/.+/,"#$&").replace(/0-\d+-0-\d+/,"0-2000-0-3000"))||"",(M==null?void 0:M.replace(/0-\d+-0-\d+/,"0-600-0-900"))||""].filter(Boolean):"",C=[[((B=e._.match(/data-backdrop2x="([^"]+)/))==null?void 0:B[1].replace(/.+/,"#$&"))||"",((Q=e._.match(/data-backdrop="([^"]+)/))==null?void 0:Q[1])||""].filter(Boolean),""],V=[`<span style="font-size: 120%; font-weight: bold;">${a}</span>`,n,[l?(Math.floor(l/60)+" hr ").replace("0 hr ","")+l%60+" min"+(l>60?" ("+l+" min)":""):"",m].filter(Boolean).join(" | "),c,[v?"<b>&#x2B50;</b> "+v:"",j?"<b>&#128065;&#65039;</b> "+j:"",R?"<b>&#128081;</b> "+R:""].filter(Boolean).join("  "),`
<b>Plot</b>
`+w,`
<b>Director`+(b.length>1?"s":"")+":</b> "+b.join(", "),k!=null&&k.length?"<b>Writer"+(k.length>1?"s":"")+":</b> "+k.join(", "):"",S!=null&&S.length?`
<b>Top cast</b>
`+S.join(`
`):"",G?`
<b>Production companies</b>
`+G:""].filter(Boolean).join(`
`);return this.TRG.IMGS_ext_data=[L,P,C[0].length?C:""].filter(Boolean).map((ie,le)=>[ie,le?"":`<imagus-extension type="sidebar">${V}</imagus-extension>`]),{loop:"imagus://extension"}},img:"^(a\\.ltrbxd\\.com/resized/(?:film-poster/(?:\\d/){5}|sm/upload).+-0-)\\d+-0-\\d+(-crop\\.jpg.*)",to:`#$12000-0-3000$2
$1600-0-900$2`},"LibertyCity.ru_gallery":{img:"^(libertycity\\.ru/uploads/gallery/)thumb(/.+\\.(?:jpe?g|gif|png))$",to:"$1main$2"},"LifeIsPhoto.ru-g":{img:"^(photos\\.lifeisphoto\\.ru/\\d+/)[012](/\\d+\\.(?:jpe?g|gif|png))$",to:"$1#3 2 0#$2"},"Likey.me":{link:"^likey(?:\\.me/post/\\d+|_album/(.+))",url:function(){var e=arguments;return e[1]?"data:,"+e[1]:e[0]},res:function(e){return e[1]?e[1].split("!").map(t=>[t]):[...e._.matchAll(/,url:"([^"]+)/g)].map(t=>[t[1].replace(/\\u002F/g,"/")])},img:"^static\\.likeycontents\\.xyz/media/\\d+/post_([^_]+_)+thumb\\..*",loop:2,to:function(){var a;let e,t=[...document.body.outerHTML.matchAll(/,url:"([^"]+)",height:\w,thumbnailUrl:"([^"]+)/g)].map(n=>n.map(l=>l.replace(/\\u002F/g,"/")));return(e=!t.length&&((a=this.node.closest("section"))==null?void 0:a.getAttribute("id")))?"//likey.me/"+e.replace("_","/"):"//likey_album/"+t.map(n=>n[1]).join("!")}},"LinkedIn-b":{img:"^(media\\.licdn\\.com/mpr/mpr/)shrink[^/]+/",to:"$1"},Listal:{link:"^listal\\.com/(list|video|viewimage)/.*",res:function(e){var n,l;let t;const a=new DOMParser().parseFromString(e._,"text/html");return e[1]==="video"?(t=(n=a.querySelector("iframe[src]"))==null?void 0:n.src,t&&t.length?{loop:t}:""):e[1]==="viewimage"?(t=a.querySelector('img[class="pure-img"]'),[t.src.replace(/\/\d+full/,"/5000full"),t.alt]):[...(l=a.querySelector('div[id="customlistitems"]'))==null?void 0:l.querySelectorAll('img[class="pure-img"],img[loading="lazy"],img[class="whiteshelfimage"],img[src^="https://collage"]')].map(m=>{var c;return[m.src.replace(/\d+full/,"5000full").replace(/\?.*$/,"").replace(/(image\/products\/)\d+/,"$15000"),[...new Set([m.alt,(c=m.parentNode.parentNode.querySelector('div[class="text listnote"],div[class="listsettitle2"]'))==null?void 0:c.innerText.replace(/[\n\t]/g,"")])].filter(Boolean).join(" | ")]})},img:"^(?:([lp]thumb\\.lisimg\\.com/[^?]+).*|list\\.lisimg\\.com/image/(\\d+)/\\d+full\\.jpg)",to:function(){var e=arguments;return e[1]?e[1]:`#//list.lisimg.com/${e[2]}/5000full.jpg
//list.lisimg.com/${e[2]}/1024full.jpg`}},"LiveJournal_pics-h":{link:"^pics\\.livejournal\\.com/(\\w+)/pic/(\\w+)(/.*)?",to:"pics.livejournal.com/$1/pic/$2"},"LiveStreamFails-h":{link:"^livestreamfails\\.com/(?:clip|post)/(\\d+)",url:"api.livestreamfails.com/clip/$1",res:function(e){const t=JSON.parse(e._);return t?[`https://livestreamfails-video-prod.b-cdn.net/video/${t.videoId}`,t.label]:null}},"LKI.ru":{img:"^((?:\\w+\\.)?lki\\.ru/Txt\\d+/\\d+/[^/]+/)Small/([^/]+\\.(?:jpe?g|png|gif|bmp))$",to:"$1Main/$2"},"loc.gov_pictures":{img:"^(tile\\.)?(loc\\.gov/storage-services/service/pnp/)(.*?)_\\d+.*(?:jpe?g|png)",to:"$1$2$3r.#jpg jpeg png#"},"LostFilm.info":{img:"^(lostfilm\\.info/images/)\\d+",to:"$1"},"LostFilm.tv_poster-p":{link:"^lostfilm\\.tv/news/id\\d+",res:function(e){const t=[...e._.matchAll(/"play-btn" data-src="([^"]+)/g)].map(a=>[["#"+a[1].replace("_480p","_1080p"),a[1]]]);return[...e._.matchAll(/img\s+src="([^"]+)"\s+data-description=/g)].map(a=>[a[1].replace("/m_","/")]).concat(t)},img:"^(?:(static\\.lostfilm\\.(?:tv|run|uno|top)\\/Images\\/\\d{3}\\/Posters\\/)i(?:con|mage)(_\\w+\\.(?:jpe?g|png|gif))|(static\\.lostfilm\\.top/Images/\\d+/Posters/)image(\\.jpg))$",to:function(){var e=arguments;return e[1]?e[1]+"shmoster"+e[2]:e[3]+"poster"+e[4]}},"LostFilm.tv_photo-p":{img:"^(static\\.lostfilm\\.(tv|run|uno|top)/Gallery/\\w/\\w/\\w/)(?:m|t)_(\\w+\\.(?:jpe?g|png|gif))$",to:"$1$3"},"LPI.usra.edu":{img:"^(lpi\\.usra\\.edu/resources/[^/]+/[^/]+/)(thumbs?|browse)/(.+)(\\.jpe?g)$",to:function(){var e=arguments;const t=e[2]==="thumb"?"browse":"images";return`${e[1]}${t}/${e[3]}${e[4]}`}},Mafrservices:{img:"^(cdn\\.mafrservices\\.com/[^?]+)\\?.*",to:"$1"},Mage:{img:"^(resize\\.mage\\.space/plain/)dpr:[^/]+/width:\\d+/",to:"$1"},"Magnit.ru-s":{link:"^(?:apteka|cosmetic)\\.magnit\\.ru/product/[\\w-]+",res:function(e){var t;return JSON.parse(((t=e._.match(/id="__NUXT_DATA__" data-ssr="true">(.+?)<\//))==null?void 0:t[1])||"[]").filter(a=>/\/rs:fit:1600/.test(a)).map(a=>[a])}},"MAIL.RU_cloud-h-b":{link:"^cloud\\.mail\\.ru/[^/]+/\\w{4}/\\w{9}\\b",res:function(e){var n;const t="https://thumb.cloud.mail.ru/weblink/thumb/xw";if(e=JSON.parse(e._.match(/cloudSettings=({.+?})<\//)[1].replace(/,"FOOTER":.+?\/footer>"/,"").replace(/\\x3c/g,"\\\\x3c")||"{}").params,/\.(?:3g[2p]|a(?:mv|sf|vi)|drc|f(?:lv|4[vpab])|gifv?|m[42ko]v|mng|mp[g42ev]|mpeg|m2?ts|ts|mxf|nsv|og[vg]|r(?:m(?:vb)?|oq)|svi|v(?:iv|ob)|w(?:ebm|mv)|yuv)$/i.test(((n=e==null?void 0:e.serverSideFolders)==null?void 0:n.name)||""))return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${e==null?void 0:e.DISPATCHERS.videowl_view.url}/0p/${btoa(e.serverSideFolders.weblink)}.m3u8?double_encode=1"></imagus-extension>`],{loop:"imagus://extension"};const a='<imagus-extension type=""></imagus-extension>';return e=e==null?void 0:e.serverSideFolders,e!=null&&e.list?e.list.map(l=>[["#"+t+"1/"+l.weblink,t+"0/"+l.weblink],a]):e!=null&&e.weblink?[[["#"+t+"1/"+e.weblink,t+"0/"+e.weblink]]]:""},img:"^(thumb\\.cloud\\.mail\\.ru/weblink/thumb/xw)\\d+",to:`#$11
$10`},"MAIL.RU_news":{link:"^(?:.+\\.)?mail\\.ru/[^/]+/[^/]*\\d{6,}/",res:function(e){return e=JSON.parse(e._.match(/"application\/ld\+json">({.+?})<\//)[1]),[e.image.url,e.articleBody]},img:"^(retina\\.news\\.mail\\.ru/)prev\\d+x\\d+/",to:"$1/"},"MAIL.RU_video-h-b":{link:"^my\\.mail\\.ru/(?:[^/]+/){0,3}video/(?:(?:[^/]+/)*\\d+\\.html|meta)",res:function(e){var t;return e._[0]!=="{"?{loop:e._.match(/"metaUrl":\s+"([^"]+)/)[1]}:(e=JSON.parse(e._),this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="480"></svg>',`<imagus-extension type="videojs" url="https:${e.videos[0].url}"></imagus-extension>${((t=e.meta)==null?void 0:t.title)||""}`],{loop:"imagus://extension"})},img:"^(?:(?:img\\d*\\.)?(?:content(?:-\\d+)?\\.)?(?:f|ph)(oto\\.(?:my\\.)?mail\\.ru/)(?:images/)?((?:mail|bk|list|corp|community)[/=][^/=]+[/=][^/=]+[/=])(?:s?p|ii?)(-\\d+)|filed\\d+-\\d+\\.my\\.mail\\.ru/pic\\?url=([^&]+).*)",to:function(){var e=arguments;return e[4]?decodeURIComponent(e[4]).replace(/\/i(-\d+\.[^?]+).*/,"/h$1"):"content.f"+e[1]+e[2].replace(/=/g,"/")+"h"+e[3]}},"MakeAGif-g-p":{useimg:1,link:"^(makeagif\\.com/)(?:i/|gif/[^?/]+)?([\\w-]{6})(?:$|\\?.*)",url:"//$1i/$2",res:`data-src="([^"]+)"
--elips"\\s+title="([^"]+)`,img:"^(?:cdn\\.|i\\.)?(makeagif\\.com/media/\\d+-\\d+-\\d{4}/)t([\\w-]{6}).*",to:"//i.$1$2.#mp4 gif#"},"MakeaMeme-g":{link:"^(makeameme\\.org/m)eme(/[^?/#]+)(?:/raw)?$",img:"^(makeameme\\.org/m)edia/created/\\d+(/[^.]+)\\.jpg$",to:"$1edia/created$2.jpg"},"ManyVids-x-p":{link:"^(manyvids\\.com/)Video/(\\d+).*",url:"https://www.$1bff/store/video/$2/private",res:function(e){var t,a;return e=JSON.parse(e._).data,e.filepath||(t=e.teaser)!=null&&t.filepath?[[["#"+(e.filepath||((a=e.teaser)==null?void 0:a.filepath)),e.transcodedFilepath||""],""]]:""}},Marvel:{img:"^(cdn\\.marvel\\.com/u/prod/marvel/i/[a-z]{2}/\\w+/\\w+/[a-f0-9]+/)[^.]+",to:"$1clean"},MaximKorea:{img:"^(maximkorea\\.net/\\w+/\\w+/\\d+/\\w+_\\w+_\\d+(?:_img)?)_\\d+\\.",to:"$1."},mlbpark:{link:"^mlbpark\\.donga\\.com/mp/b\\.php\\?id=\\d+",res:function(e){return e=[...new DOMParser().parseFromString(e._,"text/html").getElementById("contentDetail").querySelectorAll("img[src],source[src],iframe[src]")],e.some(t=>t.nodeName==="IFRAME")?(this.TRG.IMGS_ext_data=e.map(t=>t.nodeName==="IFRAME"?["",`<imagus-extension type="videojs" url="${t.src}"></imagus-extension>`]:[t.src,""]),{loop:"imagus://extension"}):e.map(t=>[t.src])}},"MCGL.ru":{link:"(i\\.mcgl\\.ru/[A-Za-z0-9]+$)",img:"(i\\.mcgl\\.ru/[A-Za-z0-9]+$)",to:"$1"},"MediaFire-h-b":{link:"mediafire\\.com/view/(.*)",url:"https://www.mediafire.com/file/$1",res:function(e){const t=e._.match(/window.location.href = '(ht[^']+)/);return t?t[1]:""}},"Medium-p":{useimg:1,link:"^(?:[^/.]+\\.)?medium\\.com/(?:@?[\\w-]+/)?(?:[\\w-]+-)+\\w+(?:$|\\?.+)",img:"^((?:cdn-images-\\d|miro)\\.medium\\.com/)[^?]+/([^?]+).*",to:function(){var a,n,l;var e=arguments;if(e[1])return`#${e[1]}${e[2]}
${e[1]}max/1024/${e[2]}`;if(!/medium\.com$/.test(location.hostname))return"";const t=(l=(n=(a=[...this.node.offsetParent.querySelectorAll("img")||[]].sort((m,c)=>c.height*c.width-m.height*m.width))==null?void 0:a[0])==null?void 0:n.src)==null?void 0:l.match(/^(https:\/\/(?:cdn-images-\d|miro)\.medium\.com\/)[^?]+\/([^?]+).*/);return t?`#${t[1]}${t[2]}
${t[1]}max/1024/${t[2]}`:""}},"Meetup-p":{link:"^meetup\\.com/(?:(?:[^-]+-)+\\w+(?:/[^/]+)*/?|\\w+)$",res:function(e){var t;return((t=e._.match(/<meta property="og:image"\s+content="([^"]+)/))==null?void 0:t[1].replace(/\d+_/,"highres_"))||""},img:"^((?:a\\d+\\.e\\.akamai\\.net/secure|photos\\d*|secure)\\.meetupstatic\\.com/photos/[^_]+/)(?!highres)[^_]+",to:"$1#highres member#"},"Megafon.ru-s":{link:"\\w+\\.shop\\.megafon\\.ru/[\\w-]+/\\d+$",res:function(e){var t=e._.indexOf('<div class="b-gallery__images">');if(!t)return null;var a=e._.indexOf('<div class="b-gallery__bottom">',t);if(!a)return null;for(var n=[],l=/data-lazy="([^"]+)"/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1]]),m=l.exec(e._.substring(t,a));return n}},"MegaMarket.ru-s":{link:"^megamarket\\.ru/catalog/details/[\\w-]+-([\\d_]+)/",res:function(e){var t=e._.indexOf('<div class="scroller__content scroller_enlarged">');if(t<0&&(t=e._.indexOf('<div class="pdp-first-screen-regular__gallery-and-attr">')),t<0)return null;var a=e._.indexOf("</div></div>",t);if(a<0)return null;for(var n=[],l=/gallery[_-][^"]+?"><img src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);if(x=new XMLHttpRequest,x.open("POST","https://megamarket.ru/api/mobile/v1/catalogService/productCardReviewInfo/get",!1),x.setRequestHeader("content-type","application/json"),x.send('{"goodsId":"'+e[1]+'","auth":{"locationId":"50","appPlatform":"WEB","analyticsDeviceId":"","os":"UNKNOWN_OS"}}'),x.readyState!=4||x.status!=200)return n;var v=JSON.parse(x.responseText).previewMediaGalleryItems;return v.forEach(function(w){n.push([w.url])}),n}},"MemeGenerator-g-p":{link:"^(?:(?:ru|es)\\.)?memegenerator\\.net/(instance)/(\\d+)(\\d{3}).*",res:'<meta property="og:image" content="([^"]+)"',img:"^cdn\\.meme(?:\\.am|generator\\.net)/(?:cache/)?(instance)s/(?:folder\\d+/)?\\d+x\\d*/(\\d+)(\\d{3}).*",to:"https://cdn.meme.am/cache/$1s/folder$3/$2$3.jpg"},"Memozee-g":{img:"^(animal\\.memozee\\.com)/Thumb(\\d+)/thumb-(\\d+)\\.jpg$",to:`#$1/Arch$2/$3.jpg
$1/Arch$2/$3-m.jpg`},"Meshok-s":{link:"^meshok\\.net/(?:[a-z]{2}/)?item/(\\d+)_[\\w%-]+",url:'https://meshok.net/api/command/lots/get-lot-by-id :{"lotId":$1}',res:function(e){var t;return((t=JSON.parse(e._).result.pictures)==null?void 0:t.map(a=>[a.url]))||""},img:"^(itemimg\\.com/i/\\d+\\.\\d)\\.\\d+x\\d+s?(\\.[a-z]+).*",to:"b.$1$2"},"Metro-cc.ru-s":{link:"^online\\.metro-cc\\.ru/products/[\\w-]+",res:function(e){let t=e._.indexOf("images:[");if(t<0)return null;let a=e._.indexOf("]",t);if(a<0)return null;let n=JSON.parse('{"images":'+e._.substring(t+7,a+1)+"}"),l=[];for(img of n.images)l.push([img]);return l}},"MGStage-x":{img:"(image\\.mgstage\\.com\\/images\\/.+\\/)pf_\\w{2}(_\\w+-\\d+.jpg)",to:"$1pb_e$2"},"Midjourney-g":{link:"^(midjourney\\.com/)jobs(/[a-f0-9-]+).*",img:"^(cdn\\.midjourney\\.com/[a-f0-9-]+/\\d+_\\d+).*",to:function(){var e=arguments;return e[2]?"//www."+e[1]+"api/img"+e[2]+"/0/original":e[1]+".#png jpeg webp#"}},"Microscope-s-p":{link:"^microscope\\.com/(?:catalog/product/view/id/\\d+/category/\\d+/|[^-]+-[^.]+\\.html$)",res:function(e){var t;return JSON.parse(((t=e._.match(/(\[{"thumb".+?\]),/))==null?void 0:t[1])||"[]").map(a=>[["#"+(a.videoUrl||a.full),a.img],a.caption])},img:"^(microscope\\.com/media/catalog/product/cache/(?:\\d+/)?)[a-f0-9]+",to:"https://www.$135199edbacd6c0ae89d877a2f9a9c5b8"},"Mile-stone.jp-s":{link:"^b2b\\.mile-stone\\.jp/(?:[a-z]{2}/)?products/\\d+",res:function(e){return[...e._.matchAll(/data-pswp-height="[^"]+"\s+href="([^"]+)/g)].map(t=>[t[1]])}},"Minds-p":{img:"^(?:(cdn\\.minds\\.com/api/v1/media/thumbnails/\\d+).*|cdn\\.minds\\.com/api/v2/media/proxy\\?(?:[^&]+&)*?src=([^&]+).*)",dc:2,to:"$1"},"Minitokyo-g":{img:"^static([123]?\\.minitokyo\\.net/)(?:thumbs|view|downloads)(/\\d\\d/\\d\\d/\\d+)",to:"static$1downloads$2"},"mrJH-h":{link:"^(mrjh\\.org/)gallery\\.php\\?entry=(images/[^.]+\\.jpg)",img:"^(mrjh\\.org/)gallery\\.php\\?entry=(images/[^.]+\\.jpg)",to:"$1$2"},Mobygames:{link:"(?:www\\.)?mobygames\\.com\\/game\\/[^,]+?,\\d+\\/",res:'og:image" content="([^"]+)"'},ModDB:{link:"(?:www\\.)?moddb\\.com\\/mods\\/.+\\/videos\\/.+",res:function(e){var t=e._.indexOf('<video id="mediaplayer"');if(t<0)return null;var a=e._.indexOf('<div class="normalbox" id="comments">',t);if(a<0)return null;for(var n=[],l=/<source src="([^"]+)" type="video\/mp4" label="([^"]+)"/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1],m[2]]),m=l.exec(e._.substring(t,a));return n},img:"(media\\.moddb\\.com\\/)cache\\/(images\\/\\w+\\/\\d+\\/\\d+\\/\\d+\\/)crop_\\w+\\/(.+)",to:"$1$2$3"},ModelMayhem:{useimg:1,link:"^modelmayhem\\.com/portfolio/pic/\\d+",res:`="og:image" content="([^"]+)
="og:description" content="([^"]+)`,img:"^(photos\\.modelmayhem\\.com/(?:photo|cover|potd/entrant|avatar)s(?:/\\d+)+/[^.]+)(?:_[^.]+|-small)\\.",to:"$1# -big _m#."},"Motherless-x-p":{link:"^(lm\\d\\.)?motherless\\.com/\\w{1,7}",res:"__fileurl = '([^']+)"},"Motorsport.tv":{link:"^motorsport\\.tv/(?:[^/]+/)*video/.+",res:function(e){var a;const t=((a=e._.match(/<source src="([^"]+)/))==null?void 0:a[1])||"";return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1920" height="1080"></svg>',`<imagus-extension type="videojs" url="${t}"></imagus-extension>`],t!=null&&t.length?{loop:"imagus://extension"}:""}},"mp4porn-x-p":{link:"^(mp4porn\\.space|mp4porn\\.rip)/video/.+",res:function(e){return"//"+e[1]+e._.match(/url_v = "([^"]+)/)[1].replace(/(play)_/,"$1")+"#mp4"}},"Multihoster.Saxonia-Fighter.de-h":{img:"(multihoster\\.saxonia-fighter\\.de)/viewer\\.php\\?is_random=\\d&file=([^.]+\\.gif)",to:"$1/images/$2"},"MVideo.ru-s":{link:"^mvideo\\.ru\\/products\\/.+-(\\d+)$",url:"https://www.mvideo.ru/bff/product-details?productId=$1",res:function(e){var t=[];return JSON.parse(e._).body.images.forEach(function(a){t.push(["https://img.mvideo.ru/"+a])}),t},img:"(img\\.mvideo\\.ru/rimpic/)\\d+/(.+)",to:"$1$2"},MyAnimeList:{img:"^((?:myanimelist\\.cdn-dena\\.com|cdn\\.myanimelist\\.net)/)(?:r/[^/]+/)?(?:(s/[^.]+)|(images/[^.]+\\d+(?:_thumb)?)\\D*)\\.([^?]+).*",to:function(){var e=arguments;return e[1]+(e[2]||(e[3].indexOf("/userimages")>0?e[3].replace(/_?thumbs?\/?/g,""):e[3]+"#l #"))+"."+e[4]}},MyDramaList:{img:"^(i\\.mydramalist\\.com/[A-Za-z0-9]+_\\d)[a-z]",to:"$1f"},"MyPhoto-g":{link:"^(.*myphoto\\.eu/\\w+/photo)/(\\d{6}/.+\\.(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?)))",url:"$1/big/$2",res:"url\\((/photos/.+(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?)))\\) no-repeat",to:"https://myphoto\\.eu/$1"},NASA:{img:"^(nasa.gov/sites/default/files/)styles/.+/public/(thumbnails/image/.+\\.jpg)",ci:2,to:"$1$2"},NASA_apod:{link:"^apod\\.nasa\\.gov/apod/(?:a(?:stropix|p\\d{6})\\.html)?$",res:function(e){var t=e._.match(/<br>\s*<a href="(image\/[^"]+)"[^<]+<img src="([^"]+)/i);return t&&[[["#"+e.base+t[1],e.base+t[2]],e._.match(/Explanation:?\s*<\/[^>]+>:?\s*([\s\S]+?)<p>/)[1].trim().replace(/<[^>]+>/g,"")]]||null}},NASA_eoimg:{img:"^(eoimages\\.gsfc\\.nasa\\.gov/images/.+)_front\\.jpg",ci:2,to:"$1_lrg.jpg"},"NASA_eol.jsc":{img:"(.*eol\\.jsc\\.nasa\\.gov/.*)/small/(.*\\.jpg)",ci:2,to:"$1/large/$2"},NASA_img:{link:"^images.nasa.gov/details/(.+)",url:"https://images-api.nasa.gov/asset/$1",res:function(e){var n,l;const t=[],a=JSON.parse(e._).collection.items;for(let m of a){if(!/(jpg|jpeg|png|mp4|mov)$/i.test(m.href))continue;let v="["+(((n=/~(.+?)\./.exec(m.href))==null?void 0:n[1])||"").toUpperCase()+"] "+(((l=this==null?void 0:this.TRG)==null?void 0:l.alt)||"");t.push([m.href,v])}return t}},NatGeo:{link:"^nationalgeographic\\.com/\\w+/article/[\\w-]+",res:function(e){var t=JSON.parse(e._.match(/window\['__natgeo__'\]=(.+);<\/script>/i)[1]),a=t.page.content.article.frms[0].mods,n=[];a.forEach(l);function l(m){m.hasOwnProperty("image")&&n.push([m.image.src]);for(var c=0;c<Object.keys(m).length;c++)typeof m[Object.keys(m)[c]]=="object"&&l(m[Object.keys(m)[c]])}return n}},"NaughtyAmerica-x-p":{link:"naughtyamerica.com/scene/.+",res:function(e){const t=/source src="([^"]+)" type="video/.exec(e._);return t?t[1]:"//i.imgur.com/ejZcAGv.png"}},"NAVER_TV-h":{link:"^(?:(?:m\\.)?tv\\.(naver\\.com/)v/(?:(\\d+)(?:$|[/?#])|([\\dA-F]+)/(\\w+)).*|apis\\.naver\\.com/rmcnmv/rmcnmv/vod/play/v2\\.0/.+)",res:function(e){var t,a,n,l,m,c;if(e[1]){if(e=(n=(a=(t=JSON.parse(e._.match(/"__NEXT_DATA__" type="application\/json">(.+?)<\/script/)[1]))==null?void 0:t.props)==null?void 0:a.pageProps)==null?void 0:n.vodInfo,!e)return null;const v=e.clip.videoId,w=e.play.inKey;return{loop:`https://apis.naver.com/rmcnmv/rmcnmv/vod/play/v2.0/${v}?key=${w}`}}return e=(m=(l=JSON.parse(e._).videos)==null?void 0:l.list)==null?void 0:m.sort((v,w)=>w.bitrate.video-v.bitrate.video),e!=null&&e.length?[[["#"+e[0].source,(c=e[Math.floor((e==null?void 0:e.length)/2.5)])==null?void 0:c.source]]]:""},img:"^([^/.]+\\.pstatic\\.net/[^?]+)\\?type=w\\d+.*",to:"$1"},"NeatClip-h-p":{link:"^(neatclip\\.com/)(?:clip|embed)(/\\w+)",url:"$1clip$2",res:`="nc:video" content="([^"]+)
<title>([^<]+) -`},"NewEgg-s":{link:"^newegg\\.com/[\\w-]+/[\\w-]+",res:function(e){let t=e._.indexOf('<div class="product-view-container">');if(t<0)return null;let a=e._.indexOf('<div class="product-hover-area"></div>',t);if(a<0)return null;let n=[],l=/src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n},img:"^((?:images|c)\\d+\\.newegg(?:images)?\\.com(?:\\.cn)?/)(?:(is/image/newegg/[^?]+)\\?\\$.*|((?:NeweggImage/)?ProductImage)(?:CompressAll\\d*)?|(neweggpic\\d/neg/P)(?!800)\\d+)",to:function(){var e=arguments;return e[1]+(e[2]?e[2]+"?$S1280$":e[4]?e[4]+"800":e[3]+"CompressAll1280")}},"Newgrounds-g":{link:"^newgrounds\\.com/art/view/[^/]+/[^/]+",res:`="(https://art\\.ngfiles\\.com/images/[^"]+)
="og:title" content="([^"]+)`,img:"^newgrounds\\.com/downloads/wallpapers/get\\.php\\?id=\\d+.*",to:"$&"},Nextdoor:{img:"^([\\da-z]{14}\\.cloudfront\\.net/[\\w-]+_photos/([\\da-f]{2})/([\\da-f]{2})/\\2\\3[\\da-f]{28}\\.\\w+).*",to:"$1"},NexusMods:{img:"^(staticdelivery\\.nexusmods\\.com/(?:mods|images)/(?:[^/]+/)+?)thumbnails/",to:"$1"},NexusMods_img:{link:"^(nexusmods\\.com/[\\w-]+/mods/\\d+)$",url:function(){var e=arguments;return e[1]+"?tab=images"},res:function(e){var t=e._.indexOf('<ul class="thumbgallery gallery clearfix">');if(t<0)return null;var a=e._.indexOf('<div id="fileinfo"',t);if(a<0)return null;let n=e._.substring(t,a);for(var l=[],m=/data-src="([^"]+)"/gi,c=m.exec(n);c;)l.push([c[1]]),c=m.exec(n);return l}},"nhentai.net-x-p":{link:"^(nhentai\\.net)/g/\\d+/$",url:function(){var e=arguments;return location.hostname===e[1]?"data:,"+e[0]:e[0]},res:function(e){if(e.base[0]==="d"){var t=new XMLHttpRequest;t.open("GET",e[0],!1),t.send(),e._=t.responseText}var a=e._.indexOf('id="thumbnail-container"');if(a<0)return null;var n=e._.indexOf("</a></div></div></div>",a);if(n<0)return null;for(var l=[],m=/data-src="([^"]+)"/gi,c=m.exec(e._.substring(a,n));c;)l.push([c[1].replace(/t(\d?.nhentai)/,"i$1").replace(/t(\.\w+).*/,"$1")]),c=m.exec(e._.substring(a,n));let v=document.querySelector('head > meta[name="referrer"]');return v?v.attributes.content.value!=="same-origin"&&(v.attributes.content.value="same-origin"):(v=document.createElement("meta"),v.name="referrer",v.content="same-origin",document.getElementsByTagName("head")[0].appendChild(v)),l},img:"^t(\\d?\\.nhentai\\.net/galleries/\\d+/\\d+)t\\..+",to:"i$1.#webp png jpg gif#"},"NicoVideo.jp-h-p":{link:"nicovideo\\.jp/watch/(sm|so|nm)(\\d+).*",res:function(e){var c,v,w,b,k,S,G,j,R,M,P,L,C,V,J;const t=[],l=new DOMParser().parseFromString(e._,"text/html").querySelector('meta[name="server-response"]');let m=JSON.parse((c=l==null?void 0:l.attributes)==null?void 0:c.content.value);if(m){const N=(v=m==null?void 0:m.data)==null?void 0:v.response;t.push((b=(w=N==null?void 0:N.video)==null?void 0:w.thumbnail)==null?void 0:b.player);let U=(k=N==null?void 0:N.video)==null?void 0:k.duration,W="";if(U){let Z=Math.floor(U/3600),te=Math.floor(U%3600/60),s=U%60;W=`${Z?Z.toString().padStart(2,"0")+":":""}${te.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}let F=(G=new Date((S=N==null?void 0:N.video)==null?void 0:S.registeredAt))==null?void 0:G.toLocaleString("ja-JP");return t.push(`<imagus-extension type="sidebar"><h3 style="font-size: 1.2em;"><b>${(j=N==null?void 0:N.video)==null?void 0:j.title}</b></h3>
Author:  		${((R=N==null?void 0:N.owner)==null?void 0:R.nickname)||((M=N==null?void 0:N.channel)==null?void 0:M.name)}
Date:    		${F}
Length:  		${W}
Views:   		${(L=(P=N==null?void 0:N.video)==null?void 0:P.count)==null?void 0:L.view}
Comments:	${(V=(C=N==null?void 0:N.video)==null?void 0:C.count)==null?void 0:V.comment}

${(J=N==null?void 0:N.video)==null?void 0:J.description}</imagus-extension>`),this.TRG.IMGS_ext_data=t,{loop:"imagus://extension"}}else return}},"NightCafe-g":{link:"^creator(\\.nightcafe\\.studio)(/creation/\\w+).*",url:"https://api$1/v2$2",res:function(e){var m,c,v;const t=JSON.parse(e._).job,a=t&&[new Date(t.created).toLocaleString(),((m=t.title)==null?void 0:m.slice(0,34))!==t.prompts[0].slice(0,34)&&t.title,"Prompts: "+((c=t.prompts)==null?void 0:c.join(", ")),t.tags&&"Tags: [ "+t.tags.join(", ")+" ]",t.description].filter(Boolean).join(" | "),n="https://images"+e[1];let l=((v=t==null?void 0:t.progressImages)==null?void 0:v.map(w=>[n+w.output,w.output==t.output?a:w.revisedPrompt||""]))||(t==null?void 0:t.output);return Array.isArray(l)&&(l=l.concat(l.splice(0,l.findIndex(w=>w[0].slice(31)==t.output)))),l?Array.isArray(l)?l:[n+l,a]:""},img:"^(images\\.nightcafe\\.studio/jobs/[^?]+).*",to:"$1"},"Nijie-x-p":{link:"^nijie\\.info\\/view\\.php\\?id=\\d+",url:"data:;$&",res:function(e){var l;const t=this.find,a=new XMLHttpRequest;a.open("GET",e[0],!1),a.send(),e._=a.responseText;let n=[...e._.matchAll(/data-original="([^"]+)/g)].map(m=>[t({src:m[1]})]);return n!=null&&n.length||(n=(l=e._.match(/itemprop="image" src="([^"]+)/))==null?void 0:l[1]),n||""},img:"^(pic\\.nijie\\.net/\\d)\\d(/nijie/\\d+m\\d+/\\d+/\\d+/illust/[a-f0-9_]+\\.)",to:"$1#1 2 3#$2"},"nimg.jp-CDN":{link:"((?:img\\.cdn\\.nimg\\.jp/s/nicovideo|nicovideo\\.cdn\\.nimg\\.jp)/thumbnails/.*)",img:"((?:img\\.cdn\\.nimg\\.jp/s/nicovideo|nicovideo\\.cdn\\.nimg\\.jp)/thumbnails/.*)",to:"$1"},Ning:{img:"^(api\\.ning\\.com/files/[\\w-*]+/[^?]+)\\?.+",to:"$1"},"NIX.ru-s":{useimg:1,link:"^(\\w+\\.)?nix\\.ru/autocatalog/[\\w-]+/[\\w-]+\\.html$",res:function(e){let t=e._.indexOf('<span id="gallery-images"');if(t<0)return null;let a=e._.indexOf('<div id="goods_info">',t);if(a<0)return null;let n=[],l=/<span data-href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n},img:"^((?:\\w+\\.)?nix\\.[^/]+/autocatalog/(?:\\w+/)+(?:\\d+)_(?:\\d+)_draft)_(small|micro|large)(\\.jpg)$",to:`#$1$3
$1_large$3`},"NNMClub-p":{link:"nnmclub\\.to/forum/viewtopic\\.php",res:function(e){let t=[],a=/class=\"postImg postImgAligned img-right\" title=\"([^\"]+)/gi,n=a.exec(e._);if(n)t.push([n[1]]);else return null;for(a=/class=\"highslide\".+?<var class=\"postImg\" title=\"(http[^\"]+)/gi,n=a.exec(e._);n;)t.push([n[1]]),n=a.exec(e._);return t}},"NoelShack-h":{link:"^(?:.*)noelshack\\.com/(\\d{4})-(\\d{1,2})-(\\d{1,2})-(.+(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?)))",to:"http://image.noelshack.com/fichiers/$1/$2/$3/$4"},"Nozhikov.ru-s":{link:"(?:www\\.)?nozhikov\\.ru\\/product\\/[\\w-]+",res:function(e){var t=e._.indexOf('<div class="swiper-wrapper">');if(t<0)return null;var a=e._.indexOf('<div class="thumbs-pagination"></div>',t);if(a<0)return null;for(var n=[],l=/href="(https?:\/\/img\.nozhikov\.ru\/images\/products\/\d\/\d+\/\d+\/[\w-\.]+\.(?:jpe?g|png|bmp))"/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1]]),m=l.exec(e._.substring(t,a));return n}},"NozhiMAN.ru-s":{link:"^nozhiman\\.ru/[\\w-]+/[\\w-]+(/[\\w-]+)?",res:function(e){var t=e._.indexOf('<div id="image-additional-carousel"');if(t<0)return null;var a=e._.indexOf("</ul>",t);if(a<0)return null;for(var n=[],l=/data-image="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n}},"NRK.no":{link:"^(?:(?:nrk\\.no/video/[^_]+_|tv\\.nrk\\.no/(?:program|serie|direkte)/)(.*)|nrk/no\\?album/(.+))",url:function(){var e=arguments;return e[1]?/serie/.test(e[0])?e[0]:"https://psapi.nrk.no/playback/manifest/"+(/program/.test(e[0])?"program/":/direkte/.test(e[0])?"channel/":"clip/")+e[1]:"data:,"},res:function(e){var a;if(e[1]){if(/serie/.test(e[0]))return/data-program-id="/.test(e._)?{loop:"https://tv.nrk.no/program/"+e._.match(/data-program-id="([^"]+)/)[1]}:"";const n=1080;let l=(a=JSON.parse(e._).playable)==null?void 0:a.assets[0].url;if(!l)return"";const m=l.match(/^(.+?\/)playlist/)[1];var t=new XMLHttpRequest;t.open("GET",l,!1),t.send();let c=[...t.responseText.matchAll(/RESOLUTION=(\d+)x(\d+)[^\n]+\n([^\n]+)/g)].filter(v=>parseInt(v[2])<=n).sort((v,w)=>parseInt(w[2])-parseInt(v[2]))[0];return this.TRG.IMGS_ext_data=[`//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="${c[1]}" height="${c[2]}"></svg>`,`<imagus-extension type="videojs" url="${m+c[3]}"></imagus-extension>`],c?{loop:"imagus://extension"}:""}else return e[2].split("!").map(n=>[n])},img:"^(?:mediaorigin|gfx)\\.nrk\\.no/([^?.]+).*",loop:2,to:function(){var n,l,m;var e=arguments;let t;if(t=(n=this.node.closest("ul[data-scroll-container]"))==null?void 0:n.querySelectorAll("figure"))return"nrk/no?album/"+[...t].map(c=>{var v,w,b,k;return(k=(b=(w=(v=c.querySelector('source[type="image/jpeg"]'))==null?void 0:v.srcset)==null?void 0:w.split(/,\s*/))==null?void 0:b.pop())==null?void 0:k.replace(/\s\d+w.*/gs,"")}).join("!");let a=(l=document.querySelector(`[srcset*="${e[0]}"]`))==null?void 0:l.srcset.split(/,\s*/);return a?"#"+a.pop().replace(/\s\d+w.*/gs,"")+`
`+((m=a.filter(c=>/\s1\d{3}w$/.test(c))[0])==null?void 0:m.replace(/\s\d+w.*/gs,"")):e[0]}},"nsimg-CDN":{link:"^(?:[^.]+\\.)?nsimg\\.net/biopic/[^/]+/\\d+",img:"^(?:[^.]+\\.)?nsimg\\.net/biopic/[^/]+/\\d+",to:"$&"},"NTV.ru":{link:"^(ntv\\.ru/)video/(\\d+).*",url:"//www.$1api/player/?id=$2",res:function(e){e=JSON.parse(e._);const t=[e.title,e.description].join(" | ");e=e.playback;const a=e==null?void 0:e.hd_video,n=e==null?void 0:e.video;return a||n?[[[a&&"#"+a,n&&""+n],t]]:e!=null&&e.hls?{loop:e.hls}:""}},"Nuum.ru-h":{link:"^nuum\\.ru/(?:[^/]+/)*(?:clip|video)s/(\\d+).*",url:"//nuum.ru/api/v2/media-containers/$1",res:function(e){var a,n,l,m;e=JSON.parse(e._).result;const t=[e.media_container_name,(a=e.media_container_channel)==null?void 0:a.channel_name,new Date(e.published_at).toLocaleString("ru-RU"),e.media_container_description].filter(Boolean).join(" | ");return e=(m=(l=(n=e.media_container_streams[0])==null?void 0:n.stream_media[0])==null?void 0:l.media_meta)==null?void 0:m.media_archive_url,this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="640"></svg>',`<imagus-extension type="videojs" url="${e}"></imagus-extension>${t}`],e?{loop:"imagus://extension"}:null},img:"^(storage-cdn\\.nuum\\.ru/api/v1/files/nuum-vod-production/.+|blob:https://nuum\\.ru/[a-f0-9+$])",loop:2,to:function(){var e=arguments;let t=this.node;return t=t.closest('a[class$=" ng-star-inserted"],a[class="preview"]')||"",(t==null?void 0:t.href)||e[1][0]==="s"&&e[0]||""}},"OBI.ru-s":{link:"^obi\\.ru/products/(\\w+-)+\\d+$",res:function(e){return e=new DOMParser().parseFromString(e._,"text/html"),e.querySelectorAll('source[srcset$="thumbnail 2x"]').length>1?[...e.querySelectorAll('source[srcset$="thumbnail 2x"]')].map(t=>(t=t.srcset.match(/^([^?]+)/)[1],[["#"+t.replace(/resize\/\d+x\d+\//,""),t.replace(/(resize\/)\d+x\d+/,"$1780x780")]])):e.querySelector('source[srcset$=" 2x"]').srcset.match(/^([^?]+)/)[1].replace(/resize\/\d+x\d+\//,"")},img:"^(media\\.obi\\.ru/)resize/\\d+x\\d+/(media/catalog/product/[^.]+\\.jpg).*",to:`#$1$2
$1resize/780x780/$2`},"OK.ru_album-h":{link:"(ok\\.ru\\/\\w+\\/album\\/\\d+\\/(\\d+))",url:"$1",res:function(e){const a=new RegExp(`img src="([^"]+)" class="image-layer_img image__4rmea" loading="eager" data-photo-id="${e[2]}`,"g").exec(e._);if(a)return a[1];const l=new RegExp(`data-photoId="${e[2]}" data-gifSrc="([^"]+)`,"").exec(e._);if(l)return l[1]}},"OK.ru_video-h":{link:"^ok\\.ru/(?:live|video)/\\d+",res:function(e){var t,a,n,l,m;if(e=(t=new DOMParser().parseFromString(e._,"text/html").getElementsByClassName("vid-card_cnt h-mod"))==null?void 0:t[0].getAttribute("data-options"),e=e&&((a=JSON.parse(e).flashvars)==null?void 0:a.metadata),e=e&&JSON.parse(e),(n=e==null?void 0:e.videos)!=null&&n.length){e=e.videos;const c=(l=e.pop())==null?void 0:l.url,v=(m=e.reverse().find(b=>b.name==="sd"||b.name==="low"||b.name==="lowest"))==null?void 0:m.url,w="#mp4";return[[[c&&"#"+c+w,v&&""+v+w]]]}return e=e==null?void 0:e.hlsManifestUrl,this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${e}"></imagus-extension>`],e?{loop:"imagus://extension"}:""}},"Oldi.ru-s":{link:"^(\\w+\\.)?oldi\\.ru/catalog/element/\\d+/$",res:function(e){let t=e._.indexOf('<div id="morephotosroot"');if(t<0)return null;let a=e._.indexOf("<table class='prod-menu'>",t);if(a<0)return null;let n=[],l=/data-href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n}},"Olx.pl|Olx.ua-s-p":{useimg:1,link:"^(([^\\.]+\\.)?[^\\.]+\\.)?olx\\.\\w\\w\\/\\w?(\\/\\w+)?/(obyavlenie|oferta)\\/[^\\/]+\\.html(?:\\?.+)?",res:function($){let jsonEnc=$._.match(/window.__PRERENDERED_STATE__= "({.+})";/)[1],json=JSON.parse(eval('"'+jsonEnc+'"')),res=[];for(obj in json.ad.ad.photos)res.push([json.ad.ad.photos[obj]]);return res},img:"^(olx(?:ua|by)-ring\\d+\\.akamaized\\.net/images_[^/]+/\\d+_\\d+)_\\d+x\\d+_([^/]+\\.(jpe?g|png|gif))$",to:"$1_1000x700_$2"},"Olx_pm-s-p":{link:"^(?:slando\\.ua|olx\\.by|olx\\.ua)/attachment/attachments_.+\\.(jpe?g|png|gif)/$"},"OM.cn":{link:"^om\\.cn/md/\\w+\\.html",res:function(e){let t=e._.indexOf('<div class="swiper-wrapper">');if(t<0)return null;let a=e._.indexOf('<div class="thumbnail"',t);if(a<0)return null;let n=[],l=/<img src="([^?"]+)\?[^"]+" title="/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n}},Omegle_logs:{link:"^logs\\.omegle\\.com/[\\da-f]+",res:'"og:image" content="([^"]+)'},"OnlineTrade.ru-s":{link:"^(www\\.)?onlinetrade\\.ru\\/catalogue\\/[a-z0-9_-]+\\/.+\\.html$",res:function(e){var t=e._.indexOf("productPage__displayedItem__images");if(t<0)return null;var a=e._.indexOf('<div class="clear"',t);if(a<0)return null;var n=[],l=/<a href="https:\/\/static\.onlinetrade\.ru\/img\/items\/\w([^"]+)"/gi;data=e._.substring(t,a);for(var m=l.exec(data);m;)n.push(["https://static.onlinetrade.ru/img/items/b"+m[1]]),m=l.exec(data);if(t=e._.indexOf('<div class="productPage__topReview__gallery'),t<0||(a=e._.indexOf('<div class="swiper-pagination">',t),a<0))return n;for(l=/<a href="([^"]+)"/gi,data=e._.substring(t,a),m=l.exec(data);m;)n.push([m[1]]),m=l.exec(data);return n}},OpenDesktop:{img:"^([^.]+\\.pling\\.com/)cache/[\\dx]+(?:-\\d)?/",to:"$1"},"OP.GG_Talk":{link:"^talk\\.op\\.gg/s/[^/]+/[^/]+/\\d+/",res:function(e){return/<iframe src='/.test(e._)?{loop:e._.match(/<iframe src='([^']+)/)[1]}:[...e._.matchAll(/<img src="([^"]+)" alt="[^"]*" \//g)].map(t=>[t[1]])}},"Orbi.kr":{link:"^image\\.orbi\\.kr/\\d+",res:function(e){var t,a;return/iframe\s+width[^>]+src="/.test(e._)?{loop:e._.match(/iframe\s+width[^>]+src="([^"]+)/)[1]}:((a=JSON.parse(((t=e._.match(/<script type="application\/ld\+json">[^{]+([^\n]+)\n/))==null?void 0:t[1])||"{}")["@graph"])==null?void 0:a[2].image.flatMap(n=>/\/emoticons\//.test(n.url)?[]:[[n.url]]))||""}},"Orsm_image-x":{useimg:1,link:"^orsm\\.net/i/(gallery/pictures/)?[\\da-z-]*~\\d+\\.html",res:function(e){if(e[1])return e._.match(/="bigimg" src=['"]([^'"]+)/)[1];var t=e._.match(/<h1>([^<]+)/),a=e._.match(/\n\s*<img src='[^']+/g);return a&&a.map(function(n,l){return[n.slice(n.lastIndexOf("'")+1).replace("/thumbnails/","/"),!l&&t&&t[1]]})},img:"^(prycless\\d*\\.orsm\\.net/[^/]+/)thumbnails(/.+)_jpg\\.jpe?g",to:"$1images$2.#jpg#"},"Orsm_video+gallery-x":{link:"^(orsm\\.net/)v/(update2\\d{7}/[\\da-z-]+\\.mp4).*",to:"//grab.$1$2"},OSEN:{img:"^(file\\.osen\\.co\\.kr/article/\\d{4}/\\d{2}/\\d{2}/(?![^.]+_\\d+x\\.)[^.]+)",to:"$1_1024x"},"Oshi.at-h":{link:"^oshi\\.at/\\w{4}$"},"Osinka.ru_club":{img:"^(?:(pic\\.oscdn\\.net/pic/\\d+/)[a-z]|(images\\.osinka\\.net/\\d+/)c\\d+)$",to:function(){var e=arguments;return e[1]?e[1]+"l":e[2]+"s1500"}},OSzone:{link:"^(soft\\.oszone\\.net)/(?:screenshots|program)/(\\d+)/",img:"^(soft\\.oszone\\.net)/images/thumb/screenshot/\\?soft=(\\d+)$",to:"$1/images/screenshot/?soft=$2"},"Otomoto.pl-s":{link:"^otomoto\\.pl/[\\w-/]+\\.html",res:function(e){var a;let t=[...e._.matchAll(/data-lazy="([^"]+)/g)].map(n=>[n[1]]);return t.length||(t=((a=JSON.parse(e._.match(/id="__NEXT_DATA__"[^{]+({.+?})<\//)[1]).props)==null?void 0:a.pageProps.advert.images.photos.map(n=>[n.url]))??""),t}},Otzovik:{useimg:1,link:"^otzovik\\.com/review_\\d+.html$",res:function(e){return[...e._.matchAll(/<img (?:class="?bigimg"?\s+)?src="([^"]+)"\s+loading="lazy"\s+(?:alt="[^"]*"\s+)?width/g)].map(t=>[["#"+t[1].replace(/\.[a-z]{3,4}$/,"_b$&"),t[1]]])},img:"^(i\\d*\\.otzovik\\.com\\/\\d+\\/\\d\\d\\/\\d\\d\\/\\d+\\/img\\/\\w+?)(?:_t)?(\\.(?:jpe?g|png))",loop:2,to:function(){var e=arguments;const t=this.node;return t.className==="img-more"?t.parentNode.href:`#${e[1]}_b${e[2]}
${e[1]}${e[2]}`}},"Overclockers.ru_blog":{img:"^overclockers\\.ru\\/st\\/\\w\\/\\d+/-/legacy/blog/(\\d+/\\w+_\\w.\\w+)",to:"st.overclockers.ru/legacy/blog/$1"},"Overclockers.ru_forum":{link:"^(forums\\.overclockers\\.ru/(?:download|gallery)/(?:file|image)\\.php\\?(?:album_id=\\d+&)*(?:id=\\d+.+mode=view|image_id=\\d+))",img:"^(forums\\.overclockers\\.ru/download/file\\.php\\?id=\\d+)",to:"$1"},"OZON.ru-s":{link:"^(ozon\\.ru/(?:product/[\\w-]+|context/detail/id/\\d+|t))/.*?(?:\\?|$)",res:function(e){var n,l,m,c;const t=[];try{if(!e[0].includes("/reviews")){const j=new DOMParser().parseFromString(e._,"text/html"),R=j.querySelector("title").textContent;let M=JSON.parse(j.querySelector('div[id^="state-webGallery-"]').dataset.state);(n=M.images)==null||n.forEach(P=>t.push([P.src,P.alt||R])),(l=M.videos)==null||l.forEach(P=>t.push([P.url,P.name||R]))}const v="https://www.ozon.ru/api/composer-api.bx/widget/json/v2?widgetStateId=webReviewGallery-2954366-pdpPage1column-1",w=(m=e[0].match(/[^?]+/))==null?void 0:m[0],b=(c=e._.match(/reviewVuuid=([^"]+)/))==null?void 0:c[1],k=btoa(`{"url":"${w.replace(/^https?:\/\/[^\/]+/,"")}?layout_container=pdpPage1column&layout_page_index=1","ci":{"vertical":"rpProduct","name":"webReviewGallery","params":[{"name":"reviewGalleryElementsLimit","int":50},{"name":"showVideosParam","bool":true},{"name":"paramSeoMode"},{"name":"isEnableNewHarvestBadge","bool":true},{"name":"sortingType","text":"videos_first_asc"},{"name":"showTrialPinParam","bool":true},{"name":"withCanceled","text":"offCanceled"},{"name":"withBadgeCanceled","text":"offBadgeCanceled"}],"version":2,"layoutID":11855,"id":2954366}}`),S=new XMLHttpRequest;S.open("POST",v,!1),S.send(`{"asyncData":"${k}","extraBody":{},"url":"${w}reviewVuuid=${b}&reviewsVariantMode=2","componentName":"${w}reviewVuuid=${b}&reviewsVariantMode=2"}`);const G=JSON.parse(S.responseText);Object.values(G.state.reviews).forEach(j=>{const R=j.content;[...R.photos||[],...R.videos||[]].forEach(M=>{const P=["&#11088;"+R.score];R.comment&&P.push(R.comment),R.positive&&P.push("&#128077;&#127995; "+R.positive),R.negative&&P.push("&#128078;&#127995; "+R.negative),j.createdAt&&P.push(new Date(j.createdAt*1e3).toISOString().substring(0,10)),t.push([M.url,P.join(" | ")])})})}catch(v){console.error(v)}let a=!1;return t.forEach(v=>{v[0].endsWith(".m3u8")&&(a=!0,v[1]=`<imagus-extension type="videojs" url="${v[0]}"></imagus-extension>${v[1]}`,v[0]="")}),a?(this.TRG.IMGS_ext_data=t,{loop:"imagus://extension"}):t},img:"^((?:ir(?:-\\d)?|cdn\\d)\\.ozone\\.ru/s3/(rp-photo-\\d+|multimedia-\\w+(?:-\\w+)?|video[-\\d]*)/)(?:wc\\d+/)?(.+\\.jpe?g)",loop:2,to:function(){var t;var e=arguments;if(this.getImages_original||(this.getImages_original=this.getImages,this.getImages=a=>{var n;return this.getImages_original(((n=a==null?void 0:a.firstElementChild)==null?void 0:n.nodeName)=="IMG"?a.firstElementChild:a)}),(t=e[2])!=null&&t.startsWith("video")){e[2].includes("-")||(e[2]+="-7");let a=/[0-9A-Z]{20,}/.exec(e[0])[0];return`https://v.ozone.ru/vod/${e[2]}/${a}/master.m3u8`}else return e[1]+e[3]}},"Paixin-g":{useimg:1,link:"^v(\\.paixin.com/)photocopyright(/\\d+).*",url:"//api2$1medias/1$2",res:`"image":"([^"]+)
"title":"([^"]+)","description":"([^"]+)`,img:"^((?:(?:q-extra|gaga-ppt)\\.paixin\\.com|images\\.gaga\\.me|d\\d+\\.paixin\\.com/thumbs)/[^?]+).*",to:"$1"},"Parovoz-g":{link:"parovoz\\.com\\/newgallery\\/pg_view.php\\?ID=\\d+",res:`<img src='([^"]+)' border='1'>`,img:"(parovoz\\.com\\/gallery)\\/icons(\\/[A-Z0-9]+\\/.*)-s(\\.jpg)",to:"$1$2$3"},"Pasteboard-h":{link:"pasteboard\\.co\\/\\w+\\.(?:jpe?g|a?png|gif|tiff)",res:'data-src="([^"]+)"'},"Paste.pics-h":{useimg:1,link:"^(?:[a-z]{2}\\.)?paste(?:now)?\\.(?:pics|ru)/(\\w+).*",img:"^i\\d+?\\.paste\\.pics/(\\w+)\\..+",to:"//i.paste.pics/$1.#png jpg#"},"PBase-g":{link:"^(pbase\\.com/)(?:[^/]+/)?image(/\\d+).*",res:'imgurl="([^"]+)" imgx="\\d+" imgy="\\d+" imgsize="original"',img:"^m\\d\\.i\\.(pbase\\.com/).+(/\\d+).*"},"Pepper.ru-g":{link:"^pepper\\.ru/[a-z]+/[\\w-]+$",res:function(e){return JSON.parse(e._.match(/window.__INITIAL_STATE__\s*=\s*(.+?);\n/)[1]).threadDetail.galleryImages.map(t=>["//static.pepper.ru/"+t.path+"/"+t.name+".jpg"])},img:"^(static\\.pepper\\.ru/threads/raw/\\w+/[\\d_]+)/re/\\d+x\\d+",to:"$1"},"Perekrestok.ru-s":{link:"^perekrestok\\.ru/cat/\\d+/\\w/[\\w-]+-\\d+$",res:function(e){const t=[],a=JSON.parse(/window\.__INITIAL_STATE__\s*=\s*({.+})/.exec(e._)[1]),n=a.catalog.productData[Object.keys(a.catalog.productData)[0]].images;for(img of n)t.push([img.cropUrlTemplate.replace("%s","1600x1600-fit")]);return t}},"Performance-PCs-p":{link:"^performance-pcs\\.com/(?:catalog/product/view/id/|[^/]+/[^.]+\\.html$)",res:function(e){var t,a;return e=((a=JSON.parse(((t=e._.match(/{"\[data-gallery-[^<]+/))==null?void 0:t[0])||"{}")["[data-gallery-role=gallery-placeholder]"])==null?void 0:a["mage/gallery/gallery"].data)||[],e.map(n=>[n.full])}},"Phica.eu-x":{link:"^(phica\\.eu)/forums/media/(albums/)?[\\w-]+\\.\\d+/",loop:1,res:function(e){var n;if(!e[2])return((n=e._.match(/<(?:img|source) src="((?:https:\/\/[^\/]+)?\/forums\/(?:medi|dat)a\/[^"]+)/))==null?void 0:n[1].replace(/^\/[^\/]/,"//www."+e[1]+"$&"))||"";let t=[];function a(l){var c;const m=new XMLHttpRequest;return m.open("GET",l,!1),m.send(),(c=m.responseText.match(/<source src="((?:https:\/\/[^\/]+)?\/forums\/(?:medi|dat)a\/[^"]+)/))==null?void 0:c[1].replace(/^\/[^\/]/,"//www."+e[1]+"$&")}return e._=[...new DOMParser().parseFromString(e._,"text/html").getElementsByClassName("js-lbImage")],e._.forEach(l=>t.push([l.getAttribute("data-lb-type-override")==="video"?a(l.href):l.getAttribute("data-src")])),t},img:"^phica\\.eu/forums/attachments/\\d+/",to:`$&
$&#mp4`},"PhoneArena-s":{link:"^phoenarenaalbum/(.+)",url:"data:,$1",res:function(e){return e[1].split("!").map(t=>[t])},img:"^([mi]-cdn\\.phonearena\\.com/images/)(?:((?:article|review)s/\\d+-)(?:gallery|image|\\d+)|(review/\\d+-[^_]+)_\\w+)(/[^/]+\\.(?:jpe?g|gif|png|webp))(?:\\?.+|$)",loop:2,to:function(){var a,n,l,m,c,v,w;var e=arguments;let t=this.node;return t=e[2]&&t.srcset&&[...((w=(v=(c=(m=(l=(n=(a=this.node.parentElement)==null?void 0:a.parentElement)==null?void 0:n.parentElement)==null?void 0:l.parentElement)==null?void 0:m.parentElement)==null?void 0:c.lastElementChild)==null?void 0:v.lastElementChild)==null?void 0:w.firstElementChild.children)||[]].map(b=>{var k;return(k=b.firstElementChild.src)==null?void 0:k.replace(/-\d+/,"-image")}).join("!"),t!=null&&t.length?"phoenarenaalbum/"+t:e[2]?`//${e[1]}${e[2]}image${e[4]}`:"//"+e[1]+e[3]+e[4]}},"Photo.net-g":{link:"^photo\\.net/photo(?:db/photo\\?photo_id=|/)(\\d+).*",img:"^(?:d6d2h4gfvy8t8\\.cloudfront\\.net|thumbs\\.photo\\.net/photo)/(\\d+)-sm.+",to:"//d6d2h4gfvy8t8.cloudfront.net/$1-#orig lg#.jpg"},"Photo.I.ua-g-p":{link:"photo\\.i\\.ua\\/(?:user|channel)\\/(?:\\d+\\/)*",res:function(e){var t=e._.indexOf('<div class="block_gamma_bg image_viewer');if(t<0)return null;var a=e._.indexOf('<div class="viewer_toolbar clear">',t);if(a<0)return null;var n=[],l=/bsrc="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(c==null&&(l=/src="([^"]+)"/gi,c=l.exec(m));c;)n.push([c[1]]),c=l.exec(m);return n}},"Photo.Sibnet.ru-h":{useimg:1,link:"^((photo\\.sibnet\\.ru)/(?:alb\\d+/(?:(?=[^\\w])|$)|(\\w+/ft\\d+)))",res:function(e){return e[3]?[[e._.match(/class="original"><a href="([^"]+)/)].map(t=>["#//"+e[2]+t[1],"//"+e[2]+t[1].replace("great","big")])]:(this.imgNum||(this.imgNum=parseInt(e._.match(/Ð¤Ð¾Ñ‚Ð¾ <\/span>(\d+)/)[1])),this.albumArray||(this.albumArray=[]),this.pageNum||(this.pageNum=1),this.pageNum++,this.albumArray.push(...[...e._.matchAll(/<img src="(\/upload\/[^"]+)"\s+title=/g)].map(t=>[["#//"+e[2]+t[1].replace(/(img)[^\/]*/,"$1great"),"//"+e[2]+t[1].replace(/(img)[^\/]*/,"$1big")]])),this.albumArray.length<imgNum&&this.pageNum<=this.imgNum/12?{loop:"//"+e[1]+"&page="+this.pageNum}:(()=>{let t=this.albumArray;return delete this.albumArray,delete this.pageNum,delete this.imgNum,t})())},img:"^([a-z]*photo\\.sibnet\\.ru/upload/img)[^/]*",to:`#$1great
$1big`},"Photo-Forum-g":{img:"^(photo-forum\\.net/)(?:static/)?(?:site|imgs)_thumbs[^/]*/(.+)",to:"//$1static/site_pics/$2"},"Photo-Screen.ru-h":{link:"photo-screen\\.ru/i/\\w+/?$",res:"id='screenshot' src='([^']+)"},"Photoforum.ru-g":{img:"^(photoforum\\.ru/f/p(?:hoto|ortr))\\.(?:50|75|th(?:sq)?)(/\\d{3}/\\d{3}/\\d+_\\d+)(?:\\.th(?:sq)?)?",to:"$1$2"},"Photosex.biz-x":{link:"^(photosex\\.biz/)v\\.php\\?id=([a-f0-9]+)",img:"^(photosex\\.biz/)imager/w_\\d+/h_\\d+/([a-f0-9]+).+",to:"//$1pic_b/$2.jpg"},"PhotoZou.jp-g":{img:"^((?:kura|art)\\d+\\.photozou\\.jp/pub/\\d+/\\d+/photo/\\d+).*\\.",to:"$1_org."},"Pic.Maxiol-h":{link:"(pic\\.maxiol\\.com/)\\?v=([^&]+)&?.*",img:"(pic\\.maxiol\\.com/)\\?v=([^&]+)&?.*",to:"$1images2/$2"},"Pic4a.ru-h":{link:"^pic4a\\.ru\\/[\\w-]{4}\\/?$",res:'<a class="a_img"  href="(https?:\\/\\/pic4a\\.ru\\/\\w+\\/[\\w-]+\\.\\w+)">',img:"^(pic4a\\.ru\\/\\d+\\/[\\w-]+)_scale_150x150\\.(jpe?g|png|bmp|gif)$",to:"$1# .jpg .png .bmp .jpeg .gif#"},"PicturePush-h":{link:"^(?:[\\w-]+\\.)?picturepush\\.com/(?:\\+\\w+|album/\\d+/\\d+/[\\w-]+/.+\\.html$)",res:'<(?:img class="photo"|source) src="([^"]+)',img:"^((?:www\\d?\\.)?picturepush\\.com/photo/\\w/\\d+/)(?!img)[^/]+(/[^?]+).*",to:"$1640$2"},"Pic-Upload.de-h":{link:"^pic-upload\\.de/view-\\d+",res:"' src='([^']+)"},"Picabox.ru-h":{link:"picabox\\.ru/pic/\\d+",res:'<meta property="og:image" content="([^"]+)"'},"Picbit-h":{link:"picbit\\.net/view/[^.]+\\.jpg",res:'<p><a href="(/image/[^"]+)'},"PicCash-h":{link:"(^piccash\\.net/\\d+/\\d+/$)",url:"$1/1",res:function(e){var t=[],a=e._.match(/id="pcash-click-zoom-pic"><img src="(\/allpics\/\d+\/\d+-\d+\/img_)thumb(\/\d+)-thumb(\.\w+)">/);return a!=null?t.push(["https://piccash.net"+a[1]+"full"+a[2]+a[3]]):(a=e._.match(/<div class="pcash-pic-full">\s*<img src="([^"]+)">/),t.push(["https://piccash.net"+a[1]])),t}},"PicDrop-h":{link:"^picdrop\\.com/(\\w+)/([\\w\\d]+)(?:\\?file=([\\da-f]+))?(?:\\.jpg)?",url:function(){var e=arguments;return`picdrop.com/api/content/${e[1]}:${e[2]}/files${e[3]?`/${e[3]}`:"?limit=750"}`},res:function(e){var l,m,c,v,w;let t;try{t=JSON.parse(e._)}catch{console.error("Could not fetch data."),console.error("Post error on /r/imagus");return}const a=(m=(l=t==null?void 0:t.thumbnails)==null?void 0:l[0])==null?void 0:m.url;return a||((w=(v=(c=t==null?void 0:t.files)==null?void 0:c.map(b=>{var k,S;return(S=(k=b==null?void 0:b.thumbnails)==null?void 0:k[0])==null?void 0:S.url}))==null?void 0:v.filter(b=>b))==null?void 0:w.map(b=>[b,""]))},img:"^(public\\.picdrop\\.com/)preview/(t/[\\w\\d]+)_\\d+",loop:2,to:function(){var a,n;const e=(n=(a=this.node)==null?void 0:a.closest("div[data-preview-file-key]"))==null?void 0:n.getAttribute("data-preview-file-key"),t=`${this.node.baseURI}?file=${e}`;return e&&t}},"picforall.ru-h-x":{useimg:1,link:"^((?:picforall|imgclick|picclick|freescreens)\\.ru/\\d+/\\d+).*",url:"$1/1/",res:'<img src="(http://(?:s\\d+\\.)?(?:picforall|imgclick|picclick|freescreens)\\.ru/allimage/[^"]+)',img:"^((?:s\\d+\\.)?(?:picforall|imgclick|picclick|freescreens)\\.ru/allimage/[^.]+)-thumb",to:"$1"},"Picrew-h":{link:"^picrew\\.me/(?:share\\?cd=\\w+|[a-z]{2}/image_maker/\\d+)",res:`(?:<img src|"og:image" content)="([^"]+)
"\\s+alt="([^"]+)`},"PicState-h":{link:"^picstate\\.com/view/full/\\d+",res:'<img\\s+src="([^"]+)"\\s+alt="'},"PictureShack.ru-h":{link:"^(pictureshack\\.ru/)(view_)([^/]+\\.)(jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?))\\.html$",ci:1,to:"$1images/$3$4"},"Pikabu.ru":{useimg:1,link:"^pikabu\\.ru/(?:story|view)/.+",res:function(e){return[...e._.matchAll(/"application\/ld\+json">({.+?contentUrl.+?})<\/script>/g)].map(t=>[JSON.parse(t[1]).contentUrl])},img:"^(?:(c?s(?:\\d+)?\\.pikabu\\.ru/(post_img|video)/)(\\d{4}/\\d{2}/\\d{2}/\\d+(?:/[0-9_]+|(?:_[a-f0-9]+)?_\\d+x\\d+))(\\.(?:jpe?g|png|gif|bmp|webp))|(blob:https://pikabu\\.ru/[a-f0-9]+).*)",to:function(){var e=arguments;let t=e[2]!=="post_img"&&this.node.parentNode;return e[5]&&(t=t.offsetParent),t=t&&((t==null?void 0:t.getAttribute("data-webm"))||(t==null?void 0:t.getAttribute("data-source"))+".mp4"),t||e[1]+e[3]+`.gif
`+e[1]+"big/"+e[3]+`.jpg
`+e[1]+"big/"+e[3]+e[4]+`
`+e[1]+e[3]+e[4]}},"Pikky-h":{link:"(pikky\\.net/\\w+)/?$",img:"(pikky\\.net/\\w+)/?$",to:"$1.#jpg png#"},"PimpAndHost-h-x-p":{link:"^(pimpandhost\\.com/image/\\d+).*",url:"$1?size=original",res:'="original" src="([^"]+)',img:"^(ist\\d-\\d\\.filesor\\.com/pimpandhost\\.com/[^?#]+)_[0sml]\\.",to:"$1."},"Pingvinus.ru":{img:"^(pingvinus\\.ru/cr_images/userpicture)/s/(.+)",to:"$1/n/$2"},"PINTEREST-g":{link:"^(?:[a-z]{2}\\.)?pinterest(?:\\.[a-z]{2,3}){1,2}/pin/[\\w-]+/$",ci:3,loop:3,res:function(e){var j,R,M,P,L,C,V,J;const t=/(?:"__PWS_INITIAL_PROPS__"|data-relay-response="true") type="application\/json">(?<data>.+?)<\/script>/g;let a;try{if(a=[...e._.matchAll(t)].map(N=>JSON.parse(N.groups.data)),a.length===0)throw new Error("No data found")}catch{console.error("Failed to parse jsons"),console.error("Post error on /r/imagus");return}const n=((R=(j=a.find(N=>{var U;return typeof((U=N==null?void 0:N.initialReduxState)==null?void 0:U.pins)=="object"&&Object.keys(N.initialReduxState.pins)>0}))==null?void 0:j.initialReduxState)==null?void 0:R.pins)||null;let l;if(l=n?n[Object.keys(n)[0]]:null,l=l||((C=(L=(P=(M=a.find(N=>{var U,W;((U=N==null?void 0:N.requestParameters)==null?void 0:U.name)==="CloseupStoryPinQuery"||((W=N==null?void 0:N.requestParameters)==null||W.name)})||a[a.length-1])==null?void 0:M.response)==null?void 0:P.data)==null?void 0:L.v3GetPinQuery)==null?void 0:C.data),!l){console.error("Pinterest object likely changed."),console.error("Post error on /r/imagus");return}const m=N=>{var U,W,F,Z,te,s,d,p,y,I,T,O,A,E,D,X,B,Q,ie,le,pe,re,ee,ae,ne,he,_e,ve,we,be,se,de,me,Y,ue,K,ge,H,oe,ce;return((W=(U=N==null?void 0:N.images)==null?void 0:U.orig)==null?void 0:W.url)||((Z=(F=N==null?void 0:N.images)==null?void 0:F.orig)==null?void 0:Z["1200x"])||((s=(te=N==null?void 0:N.images)==null?void 0:te.orig)==null?void 0:s["750x"])||((p=(d=N==null?void 0:N.images)==null?void 0:d.orig)==null?void 0:p["736x"])||((I=(y=N==null?void 0:N.images)==null?void 0:y.orig)==null?void 0:I["564x"])||((O=(T=N==null?void 0:N.images)==null?void 0:T.orig)==null?void 0:O["474x"])||((E=(A=N==null?void 0:N.images)==null?void 0:A.orig)==null?void 0:E["236x"])||((B=(X=(D=N==null?void 0:N.image)==null?void 0:D.images)==null?void 0:X.originals)==null?void 0:B.url)||((le=(ie=(Q=N==null?void 0:N.image)==null?void 0:Q.images)==null?void 0:ie["1200x"])==null?void 0:le.url)||((ee=(re=(pe=N==null?void 0:N.image)==null?void 0:pe.images)==null?void 0:re["736x"])==null?void 0:ee.url)||((he=(ne=(ae=N==null?void 0:N.image)==null?void 0:ae.images)==null?void 0:ne["564x"])==null?void 0:he.url)||((we=(ve=(_e=N==null?void 0:N.image)==null?void 0:_e.images)==null?void 0:ve["474x"])==null?void 0:we.url)||((de=(se=(be=N==null?void 0:N.image)==null?void 0:be.images)==null?void 0:se["236x"])==null?void 0:de.url)||((me=N==null?void 0:N.imageSpec_orig)==null?void 0:me.url)||((Y=N==null?void 0:N.imageSpec_1200x)==null?void 0:Y.url)||((ue=N==null?void 0:N.imageSpec_750x)==null?void 0:ue.url)||((K=N==null?void 0:N.imageSpec_736x)==null?void 0:K.url)||((ge=N==null?void 0:N.imageSpec_564x)==null?void 0:ge.url)||((H=N==null?void 0:N.imageSpec_474x)==null?void 0:H.url)||((oe=N==null?void 0:N.imageSpec_236x)==null?void 0:oe.url)||((ce=N==null?void 0:N.imageSpec_170x)==null?void 0:ce.url)},c=N=>{var U,W,F,Z,te,s,d,p,y,I,T,O,A,E,D,X,B,Q,ie,le,pe,re,ee,ae,ne,he,_e;return((F=(W=(U=N==null?void 0:N.video)==null?void 0:U.video_list)==null?void 0:W.V_EXP7)==null?void 0:F.url)||((s=(te=(Z=N==null?void 0:N.video)==null?void 0:Z.video_list)==null?void 0:te.V_EXP6)==null?void 0:s.url)||((y=(p=(d=N==null?void 0:N.video)==null?void 0:d.video_list)==null?void 0:p.V_EXP5)==null?void 0:y.url)||((O=(T=(I=N==null?void 0:N.video)==null?void 0:I.video_list)==null?void 0:T.V_EXP4)==null?void 0:O.url)||((D=(E=(A=N==null?void 0:N.video)==null?void 0:A.video_list)==null?void 0:E.V_EXP3)==null?void 0:D.url)||((Q=(B=(X=N==null?void 0:N.video)==null?void 0:X.video_list)==null?void 0:B.V_HLSV3_MOBILE)==null?void 0:Q.url)||((pe=(le=(ie=N==null?void 0:N.videoData)==null?void 0:ie.videoList1080P)==null?void 0:le.v1080p)==null?void 0:pe.url)||((ae=(ee=(re=N==null?void 0:N.videoData)==null?void 0:re.videoList720P)==null?void 0:ee.v720P)==null?void 0:ae.url)||((_e=(he=(ne=N==null?void 0:N.videoData)==null?void 0:ne.videoListMobile)==null?void 0:he.vHLSV3MOBILE)==null?void 0:_e.url)},v=(l==null?void 0:l.gridTitle)||(l==null?void 0:l.grid_title)||"",w=(l==null?void 0:l.storyPinData)||(l==null?void 0:l.story_pin_data),b=w&&w.pages.map(N=>{var U,W,F,Z,te,s;return((W=(U=N==null?void 0:N.blocks)==null?void 0:U[0])==null?void 0:W.__typename)==="StoryPinVideoBlock"||((Z=(F=N==null?void 0:N.blocks)==null?void 0:F[0])==null?void 0:Z.type)==="story_pin_video_block"?c((te=N==null?void 0:N.blocks)==null?void 0:te[0]):m((s=N==null?void 0:N.blocks)==null?void 0:s[0])}).filter(N=>N).map(N=>[N,v])||[];if(b.length)return b;const k=((V=l==null?void 0:l.videos)==null?void 0:V.videoList)||((J=l==null?void 0:l.videos)==null?void 0:J.video_list)||{},S=Object.keys(k).filter(N=>k[N].url).map(N=>({url:k[N].url,height:k[N].height})).filter(N=>N.url.endsWith(".mp4")).sort((N,U)=>U.height-N.height);if(S.length)return[S[0].url,v];const G=m(l);return G&&[G,v]},img:"^((?:i|(?:s-)?media-c(?:dn|ache\\D*)\\d*)\\.pin(?:terest|img)\\.com/)(?:(upload/\\d+_[^\\W_]{8})_[bft]|(?!550)\\d+x?\\d*(?:_[^/]+)?/|(avatars/[^.]+[_-]\\d+)(?:_(?!600)[^.]+)?(?=\\.))(.*)",to:function(){var e=arguments;const t=this.TRG.closest('[data-test-id="pin"]');if(t!=null&&t.querySelector('[data-test-id^="pincard-video"], [data-test-id="pinrep-video"]'))return`https://ru.pinterest.com/pin/${t.dataset.testPinId}/`;if(e[1])return e[1]+(e[2]?e[2]:e[3]?e[3].replace(/(\d+)_\d+$/,"$1")+"_600":"#originals 736x 564x#/"+e[4]);var a=this.node,n=document.evaluate('./ancestor::a[starts-with(@href,"/pin/")]//img[contains(@src,"pinimg.com")]',a,null,9,null).singleNodeValue;return n=n?this.find({src:n.src,IMGS_TRG:a}):"",(Array.isArray(n)?n.join(`
`):n===null?"null":n)||""}},"PixAI-g":{useimg:1,link:"^pixai\\.art/artwork/\\d+",res:function(e){var t;return((t=e._.match(/"og:image" content="([^"]+)/))==null?void 0:t[1].replace(/(?:still)?[Tt]humb/,"orig"))||""},img:"^(images-ng\\.pixai\\.art/images/)(?:still)?[Tt]humb/",to:"$1orig/"},"PiXhost-h-x":{useimg:1,link:"^(pixhost\\.)(?:to|org)(/(?:gallery|show)/(?:\\d+/|\\w+))",url:"$1to$2",res:function(e){return/\/gallery\//.test(e[2])?[...e._.matchAll(/img\s+src="(htt[^t]+)t(.+?)thumb([^"]+)/g)].map(t=>[t[1]+"img"+t[2]+"image"+t[3]]):(e._.match(/="image-img" src="([^"]+)/)||[,""])[1]},img:"^(?:t|img)(\\d+\\.pixhost\\.)(?:to|org)/(?:image|thumb)(s/.+)",to:"img$1to/image$2"},"PIXIV-g-x-q-p":{link:"^(pixiv\\.net/)(?:(?:\\w\\w/)?artworks/|member_illust\\.php\\?mode=(?:[^&]+&)+?illust_id=)(\\d+).*",url:"$1ajax/illust/$2",res:function(n){if(n=JSON.parse(n._),n.error)return!1;for(var t=0,a=[],n=n.body;t<n.pageCount;++t)a.push([["#"+n.urls.original.replace("_p0","_p"+t),""+n.urls.regular.replace("_p0","_p"+t)]]);return a[0][1]="["+n.title+" by "+n.userName+" | "+new Date(n.uploadDate).toLocaleString()+"] "+n.description,a},img:"^i(?:\\d\\.pixiv|\\.pximg)\\.net/(?:c/\\d+x\\d+[\\d_a-z]*/)?(user-profile|img-master)(/img/\\d\\d(?:\\d\\d/){6}\\d+_[^_]+)_[^.]+(\\.\\w+).*",to:function(){var e=arguments,t=e[1][0]=="i";return"//i.pximg.net/"+(t?"img-original":e[1])+e[2]+(t&&e[3]==".jpg"?".#jpg png gif#":e[3])}},"Pixnet-h":{img:"^(?:pic|s\\d?)(\\.pimg\\.tw/)(?:album/)?([^/]+)/(?:element/\\d+_)?([^/_]+)(?:/[^/]+/)?(?:_[nbstq]|\\d+x\\d+).+",to:`#pic$1$2/$3.#jpg png#
pic$1$2/$3_b.#jpg png#`},"Pixnet-proxy-h":{img:"^imageproxy\\.pimg\\.tw/zoomcrop\\?url=([^&]+).*",dc:2,loop:2,to:"$1"},"Placeit-g":{link:"^(?:recordit\\.co|placeit\\.net)/(?:\\w{10}|c/\\w+/stages/.+)",res:'(?:class="h-full w-full" src|image/\\w+"/><link rel="preload" as="image" href)="([^"]+)'},"PlayGround.ru":{link:"^playground\\.ru/\\w+/\\w+/\\w+-\\d+$",res:'<meta property="og:image" content="([^\\?]+)\\?',img:"^(i\\.playground\\.ru/i/(?:pix|screenshot)/\\d+/[\\w_]+\\.\\w+)\\?\\d+x\\d+$",to:"$1"},"Plvideo.ru-h":{link:"^plvideo\\.ru/(?:shorts/|watch\\?v=)([\\w-]{12}).*",url:"//api.g1.plvideo.ru/v1/videos/$1?Aud=16",res:function(e){if(e=JSON.parse(e._).item,!e)return null;const t=[e.title,e.channel.name,new Date(e.createdAt).toLocaleString("ru-RU"),e.description].filter(Boolean).join(" | ");return e=Object.entries(e.profiles).sort((a,n)=>parseInt(n[0])-parseInt(a[0]))[0][1].hls+"#.m3u8",this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${e}"></imagus-extension>${t}`],{loop:"imagus://extension"}},img:"^blob:https://plvideo\\.ru/[a-f0-9-]+$",loop:2,to:function(){var t;var e=arguments;return e=(t=this.node.closest("[data-video-id]"))==null?void 0:t.getAttribute("data-video-id"),e?"//plvideo.ru/watch?v="+e:""}},"Porn.com-x-p-b":{link:"^(?:[a-z]*\\.)?porn.com\\/videos\\/.+",res:'url:"([^"]+)'},"Porn3dx-x":{link:"^porn3dx\\.com/post/\\d+/[\\w-]+",res:function(e){var t,a,n;return(n=(a=JSON.parse(((t=e._.match(/<script type="application\/ld\+json">([^<]+)/))==null?void 0:t[1])||"{}"))==null?void 0:a.image)==null?void 0:n.map(l=>[l])}},"PornBox-x-q":{link:"^pornbox\\.com/application/watch-page/(\\d+)",url:"pornbox.com/contents/$1",res:function(e){var v,w,b;max_resolution=1080;let t;try{t=((v=JSON.parse(e._))==null?void 0:v.medias)||[]}catch{return}const a=(w=t.find(k=>k.title==="Trailer"))==null?void 0:w.media_id;if(!a)return;const n=new XMLHttpRequest;if(n.open("GET",`https://pornbox.com/media/${a}/stream`,!1),n.send(),n.status!==200)return;let l;try{l=JSON.parse(n.responseText).qualities}catch{return}const m={"1080p":1080,hd:720,vga:480,web:240};return((b=l.map(k=>({res:m[k.quality],url:k.src})).filter(k=>k.res<=max_resolution).sort((k,S)=>k.res-S.res).pop())==null?void 0:b.url)||null}},"PornHub_albums-x-p":{link:"^([a-z]{2}\\.)?pornhub\\.com/album/\\d+",res:function(e){let t=[],a=[...e._.matchAll(/<a href="\/(photo\/[^"]+)/g)].map(l=>l[1]);const n=new XMLHttpRequest;for(i=0;i<a.length;i++){n.open("Get","https://"+(e[1]?e[1]:"www.")+"pornhub.com/"+a[i],!1),n.send();let l=n.responseText;t.push([l.match(/="twitter:image:src" content="([^"]+)/)[1]])}return t}},"PornHub_images-x-p":{link:"^(?:[a-z]{2}\\.)?pornhub\\.com/photo/\\d+",res:`="twitter:image:src" content="([^"]+)
="caption_text"[^>]+="([^"]+)`},"PornHub_video-x-p":{link:"^(?:[a-z]{2}\\.)?pornhub\\.com/(?:view_video\\.php\\?viewkey=\\w+|video/get_media)",res:function(e){var a;return e._[0]!=="["?{loop:JSON.parse(e._.match(/var flashvars_\d+\s*=\s*({.+?});/)[1]).mediaDefinitions.find(n=>n.format==="mp4").videoUrl}:(e=JSON.parse(e._).filter(n=>n.quality<=2160),[[[""+e.pop().videoUrl,"#"+((a=e[Math.floor(e.length/2)])==null?void 0:a.videoUrl)]]])}},"PornHub_video_embed-x-p":{off:1,link:"^(?:[a-z]{2}\\.)?pornhub\\.com/(view_video\\.php\\?viewkey=(\\w+)|video/get_media)",url:function(){var e=arguments;return e[1][2]==="e"?"https://www.pornhub.com/embed/"+e[2]:e[0]},res:function(e){return e._[0]!=="["?{loop:e._.match(/"mp4","videoUrl":"([^"]+)/)[1].replace(/\\/g,"")}:JSON.parse(e._)[0].videoUrl}},"PornWorld_trailer-x-q":{link:"^pornworld.com/watch/\\d+/.+",res:function(e){var l;const a=/source src="(?<url>.+?mp4.*?)" size=\"(?<res>\d+)"/g;return((l=Array.from(e._.matchAll(a)).map(m=>({res:Number(m.groups.res),url:m.groups.url})).filter(m=>m.res<=1080).sort((m,c)=>m.res-c.res).pop())==null?void 0:l.url)||null}},"Positronica.ru-s":{link:"^positronica\\.ru/product/.+",res:function(e){var t=e._.indexOf('<div class="detail-gallery__slide swiper-slide">');if(!t)return null;var a=e._.indexOf("<button class=",t);if(!a)return null;for(var n=[],l=/src="([^"]+)"/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1]]),m=l.exec(e._.substring(t,a));return n},img:"^(img\\.positronica\\.ru/items/\\d+_[^_]+_)[a-z]",to:"$1b"},"Postimages|postimg|postlmg|pixxxels-h":{link:"^(p(?:ost[il]m(?:g|ages?)|ixxxels)\\.(?:cc|org)/(gallery/)?\\w{7,8}/?$)|^(?:i\\.(p(?:ost[il]m(?:g|ages?)|ixxxels)\\.(?:cc|org)/\\w{7,8})/\\S+$(?<!\\?dl=1))",url:function(){var e=arguments;return e[1]||e[3]},res:function(e){if(!e[2])return[e._.match(/http[^?"]+\?dl=1/)[0],e._.match(/="imagename">([^<]+)/)[1]];if(this.__bg_request||(this.__bg_request_data={},this.__bg_request_id=9e3,this.__bg_request=t=>(this.__bg_request_id+=1,Port.send({cmd:"resolve",id:this.__bg_request_id,params:{rule:{id:e.rule.id}},url:t}),new Promise(a=>{const n=(l,m)=>l[m]?(a(l[m].params._),delete l[m]):setTimeout(n,100,l,m);n(this.__bg_request_data,this.__bg_request_id)})),Port.listen(t=>t?t.cmd==="resolved"&&t.id>9e3?(this.__bg_request_data[t.id]=t,void 0):this.onMessage(t):void 0)),!this.__postimg){const t=this.__postimg={index:0};t.get=async(a,n)=>{if(/i\.p(?:ost[il]m(?:g|ages?)|ixxxels)\.(?:cc|org)/.test(a))return a;n&&this.show("load");const m=(await this.__bg_request(a)).match(/http[^?"]+\?dl=1/)[0];return this.stack[this.TRG.IMGS_album].every((c,v,w)=>c[0]===a?(w[v][0]=m,!1):!0),m},t.orig_set=this.set,this.set=async a=>{if(!/p(?:ost[il]m(?:g|ages?)|ixxxels)\.(?:cc|org)/.test(a))return t.orig_set(a);t.index+=1;const n=t.index,l=await t.get(a,!0);n===t.index&&t.orig_set(l)},t.orig__preload=this._preload,this._preload=async a=>/p(?:ost[il]m(?:g|ages?)|ixxxels)\.(?:cc|org)/.test(a)?t.orig__preload(await t.get(a)):t.orig__preload(a)}return Object.entries(JSON.parse(e._.match(/embed_value=([^}]+})/)[1])).map(t=>["https://"+(e[1]||e[3]).match(/^[^\/]+\//)[0]+t[0],t[1][0]])}},Printables:{link:"printables\\.com/model/(\\d+)-[\\w-]+",res:function(e){var t=[];if(x=new XMLHttpRequest,x.open("POST","https://api.printables.com/graphql/",!1),x.setRequestHeader("Content-Type","application/json"),x.send('{"operationName":"PrintProfile","variables":{"id":"'+e[1]+'"},"query":"query PrintProfile($id: ID!) {\\n  print(id: $id) {\\n    ...PrintDetailFragment\\n    __typename\\n  }\\n}\\n\\nfragment PrintDetailFragment on PrintType {\\n  id\\n  slug\\n  name\\n  authorship\\n  eduProject {\\n    id\\n    subject {\\n      id\\n      name\\n      slug\\n      __typename\\n    }\\n    language {\\n      id\\n      name\\n      __typename\\n    }\\n    free\\n    timeDifficulty\\n    audienceAge\\n    complexity\\n    equipment {\\n      id\\n      name\\n      __typename\\n    }\\n    suitablePrinters {\\n      id\\n      name\\n      __typename\\n    }\\n    organisation\\n    authors\\n    targetGroupFocus\\n    knowledgeAndSkills\\n    objectives\\n    equipmentDescription\\n    timeSchedule\\n    workflow\\n    approved\\n    datePublishRequested\\n    __typename\\n  }\\n  user {\\n    ...AvatarUserFragment\\n    isFollowedByMe\\n    canBeFollowed\\n    email\\n    donationLinks {\\n      id\\n      title\\n      url\\n      __typename\\n    }\\n    printsCount\\n    __typename\\n  }\\n  ratingAvg\\n  myRating\\n  ratingCount\\n  description\\n  category {\\n    id\\n    path {\\n      id\\n      name\\n      description\\n      __typename\\n    }\\n    __typename\\n  }\\n  modified\\n  firstPublish\\n  datePublished\\n  dateCreatedThingiverse\\n  hasModel\\n  nsfw\\n  summary\\n  shareCount\\n  likesCount\\n  makesCount\\n  liked\\n  printDuration\\n  numPieces\\n  weight\\n  nozzleDiameters\\n  usedMaterial\\n  layerHeights\\n  materials {\\n    id\\n    name\\n    __typename\\n  }\\n  dateFeatured\\n  downloadCount\\n  displayCount\\n  filesCount\\n  privateCollectionsCount\\n  publicCollectionsCount\\n  pdfFilePath\\n  commentCount\\n  userGcodeCount\\n  remixCount\\n  canBeRated\\n  printer {\\n    id\\n    name\\n    __typename\\n  }\\n  images {\\n    ...ImageSimpleFragment\\n    __typename\\n  }\\n  tags {\\n    name\\n    id\\n    __typename\\n  }\\n  thingiverseLink\\n  filesType\\n  foundInUserGcodes\\n  license {\\n    id\\n    disallowRemixing\\n    __typename\\n  }\\n  remixParents {\\n    ...remixParentDetail\\n    __typename\\n  }\\n  gcodes {\\n    id\\n    name\\n    filePath\\n    fileSize\\n    filePreviewPath\\n    __typename\\n  }\\n  stls {\\n    id\\n    name\\n    filePath\\n    fileSize\\n    filePreviewPath\\n    __typename\\n  }\\n  slas {\\n    id\\n    name\\n    filePath\\n    fileSize\\n    filePreviewPath\\n    __typename\\n  }\\n  ...LatestCompetitionResult\\n  competitions {\\n    id\\n    name\\n    slug\\n    description\\n    isOpen\\n    __typename\\n  }\\n  competitionResults {\\n    placement\\n    competition {\\n      id\\n      name\\n      slug\\n      printsCount\\n      openFrom\\n      openTo\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment AvatarUserFragment on UserType {\\n  id\\n  publicUsername\\n  avatarFilePath\\n  slug\\n  handle\\n  company\\n  verified\\n  badgesProfileLevel {\\n    profileLevel\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment ImageSimpleFragment on PrintImageType {\\n  id\\n  filePath\\n  rotation\\n  __typename\\n}\\n\\nfragment remixParentDetail on PrintRemixType {\\n  id\\n  parentPrintId\\n  parentPrintName\\n  parentPrintAuthor {\\n    id\\n    slug\\n    publicUsername\\n    company\\n    verified\\n    handle\\n    __typename\\n  }\\n  parentPrint {\\n    id\\n    name\\n    slug\\n    datePublished\\n    images {\\n      ...ImageSimpleFragment\\n      __typename\\n    }\\n    license {\\n      id\\n      name\\n      disallowRemixing\\n      __typename\\n    }\\n    eduProject {\\n      id\\n      __typename\\n    }\\n    __typename\\n  }\\n  url\\n  urlAuthor\\n  urlImage\\n  urlTitle\\n  __typename\\n}\\n\\nfragment LatestCompetitionResult on PrintType {\\n  latestCompetitionResult {\\n    placement\\n    competitionId\\n    __typename\\n  }\\n  __typename\\n}"}'),x.readyState==4&&x.status==200){var a=JSON.parse(x.responseText).data.print.images;return a.forEach(function(n){t.push(["https://media.printables.com/"+n.filePath])}),t}}},"prnt.sc-h-p":{link:"^prnt(?:\\.sc|scr\\.com)\\/[\\w-]+(\\/|\\..*)?$",res:function(e){let t=document.querySelector('head > meta[name="referrer"]');return t?t.attributes.content.value!=="same-origin"&&(t.attributes.content.value="same-origin"):(t=document.createElement("meta"),t.name="referrer",t.content="same-origin",document.getElementsByTagName("head")[0].appendChild(t)),[(e._.match(/="og:image" content="([^"]+)/)||[])[1]]},img:"^img\\.prntscr\\.com/img\\?url=([^&]+).*",to:"$1"},"pr0gramm-g":{link:"^pr0gramm\\.com/.+/?(.+)?/(\\d+)$",ci:1,url:"https://pr0gramm.com/api/items/get?id=$2&flags=1&tags=$1",res:function(e){let a="pr0gramm.com/"+JSON.parse(e._).items[0].image;return a.slice(-3)=="mp4"?"https://vid."+a:"https://img."+a}},"Price.ru-s":{link:"^(?:\\w+\\.)?price\\.ru/[^/]+/[^/]+/",ci:3,res:function(e){const t=[],a=new DOMParser().parseFromString(e._,"text/html");return Array.from(a.querySelectorAll(".model-slider__sub img")).forEach(n=>{t.push([n.src.replace(/\d+x\d+/,"2000x2000")])}),t},img:"^(static\\.price\\.ru/images/models)/\\d+x\\d+/(.+\\.(?:jpe?g|png))",to:"$1/2000x2000/$2"},"Profi.ru-s":{img:"^(cdn\\.profi\\.ru/xfiles/\\wfiles/(?:\\d+/)?\\w+\\.(?:jpg|png))\\S+",to:"$1"},"Prokofe.ru":{link:"^prokofe\\.ru/plugins/eHighSlide/foto\\.php\\?img=(https?://prokofe\\.ru/files/public/[^/]+\\.(?:jpe?g|png|gif))&h=\\d+&w=\\d+",to:"$1"},PromoDJ:{link:"^promodj\\.com/foto/\\d+/(\\d+)$",res:function(e){var t=e._.indexOf("var fotos =");if(t<0)return null;var a=e._.indexOf("function BootFotoViewer",t);if(a<0)return null;var n=[],l=new RegExp("fotoID: "+e[1]+",[\\S\\s]+?originalURL: '(https?://cdn\\.promodj\\.com/afs/[^']+)',","mg"),m=l.exec(e._.substring(t,a));return m&&n.push([m[1]]),n}},"PronPic-x-p":{img:"(pronpic\\.org\\/pic\\/\\d+\\/\\d\\d\\/\\d\\d\\/)th_(\\d+\\.\\w+)",to:"$1$2"},"public-pic.de-h":{link:"public-pic\\.de/image/show/[^/]+/[a-z0-9]+",res:`<img src="([^"]+)" alt="
<h1 style="margin-bottom: 10px"><i>([^<]+)`},"puush|puu.sh-h":{link:"^(puush\\.me/[^/]+/Gallery)$",url:"$1/feed",res:function(e){try{for(e=JSON.parse(e._).objects,i=e.length,u="//puu.sh/";i--;)e[i]=[u+e[i].id+"/"+e[i].name,null,u+"t/"+e[i].id];return e}catch{return null}},img:"^(puu\\.sh/)(?:t/)?(.+)",to:"$1$2"},QuestionableContent:{link:"^questionablecontent\\.net\\.?/view\\.php\\?comic=(\\d+).*",to:"questionablecontent.net/comics/$1.#png jpg gif#"},"QuestZone.ru":{link:"^(questzone\\.ru/)showpic\\.php\\?(\\w+/\\w+/.+\\.(?:jpe?g|png|gif))$",img:"^(questzone\\.ru/solutions/pics/)small/(.+\\.(?:jpe?g|png|gif))$",to:"$1$2"},"Rambler.ru":{link:"^images\\.rambler\\.ru\\/.+image_url=([^&]+).*",dc:1,img:"^([^/]+\\.rambler\\.ru/img/[^?]+).*",to:"$1"},"RanmaBooks-x":{useimg:1,link:"^ranmabooks\\.com/([^/]+/)*?image\\.php\\?",res:'src="([^"]+)" alt="([^"]+)" /',img:"^(ranmabooks\\.com/([^/]+/)+?)RHGt/(?!index\\.)",to:"$1"},"Rasfokus.ru-g":{img:"(rasfokus\\.ru\\/images\\/photos\\/)(?:small|mini|topday)(\\/\\w+\\.\\w+)",to:"$1medium$2"},"Rasfokus.ru_blog":{img:"(rasfokus\\.ru\\/upload\\/blogs\\/)(?:small|mini|topday)\\/(\\w+\\.\\w+)",to:"$1$2"},Ravelry:{link:"^ravelry\\.com/patterns/library/.+",res:function(e){const t=a=>["#"+(a==null?void 0:a.replace(/_[^_.]+\.(?!.*\.)/,".").replace(/webp[/#]/g,"")),a==null?void 0:a.replace(/_[^_.]+\.(?!.*\.)/,"_medium2.").replace(/webp[/#]/g,"")];return e=new DOMParser().parseFromString(e._,"text/html"),e=[...e.querySelectorAll("img[data-photo-id]")],e.map(a=>[t(a.src),a.alt])},img:"^((avatar|image)s\\d?-[a-z].ravelrycache.com/)(?:(flickr/[^?]+)_[a-z]|((?:uploads/)?[^/]+/\\d+/)(?:webp/)?([^.]+(?:\\.fw)?)_(?:small(?:2?|_best_fit)|medium2?|square|large)(?:\\.(\\w+))?(?:#(\\w+))?)",to:function(){var e=arguments;return e[1]+(e[3]||e[4]+e[5]+(e[2]=="avatar"?"_xlarge":"# _b#")+(e[7]||e[6]?"."+(e[7]||e[6]):""))}},"RBT.ru-s":{link:"(\\W+\\.)?rbt\\.ru/cat/[\\w-]+/[\\w-]+/[\\w-]+/",res:function(e){let t=e._.indexOf('<div class="item-card__carousel-inner');if(t<0)return null;let a=e._.indexOf("</ul>",t);if(a<0)return null;let n=[],l=/data-img-gal="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n},img:"cdn\\.rbt\\.ru/images/gen/item_image/image/\\d+/\\d+/\\w+\\.jpg",to:function(){return this.node.parentNode.parentNode.getAttribute("data-img-gal")}},REDDIT_gallery:{link:"^(reddit\\.com/)gallery/([\\da-z]+).*",url:"https://www.$1by_id/t3_$2.json",res:function(e){return e=JSON.parse(e._).data.children[0].data,(e.gallery_data&&e.gallery_data.items||[]).map(function(t,a){var n=e.media_metadata[t.media_id].s;return[n.u?n.u.replace(/preview(\.redd.it\/[^?]+).*/,"i$1"):n.mp4?n.mp4+"#mp4":n.gif,(a?"":"["+new Date(e.created_utc*1e3).toLocaleString()+" | "+e.title+"] ")+(t.caption||"")]})}},REDDIT_gifs:{link:"^redditgif/\\?(.+)",url:"//www.reddit.com/by_id/$1.json",res:function(e){var t,a,n;return e=JSON.parse(e._).data.children[0].data,[((n=(a=(t=e.preview)==null?void 0:t.images[0].variants)==null?void 0:a.mp4)==null?void 0:n.source.url.replace(/.+/,"$&#mp4"))||e.url,"["+new Date(e.created_utc*1e3).toLocaleString()+"] "+e.title]},img:"^i\\.redd\\.it/[\\da-z]+\\.gif",loop:2,to:function(){var e=arguments,t=window.location.hostname.slice(-10)=="reddit.com"&&this.TRG||this.node;if(!t)return e[0];if(t.matches("div.link a.thumbnail,div.link a.thumbnail>img, div.link a.title, div.link a.thumbnail.image")){for(;(t=t.parentNode)&&!t.matches("div.link"););if(t=t.getAttribute("data-fullname"),t)return"//redditgif/?"+t}return e[0]}},REDDIT_media:{link:"^(?:[a-z]{2,5}(?:-[a-z]{2})?\\.)?reddit\\.com/(?:r|user)/[^/]+/comments/([\\da-z]+)/[^/]+/(?:\\?utm_content=(?:title|thumbnail).*)?$",loop:3,img:"^(g\\.redditmedia\\.com/[\\w-]+\\.gif\\?(?:[^&]+&)*?fm=mp4[^#]*)(.*)",to:function(){var m,c;var e=arguments;if(location.hostname==="reddtastic.com"&&((m=this.node.closest(".post"))!=null&&m.querySelector("img,video")))return"//reddtastic/"+e[1];if(e[2]!==0)return e[2]=="#mp4"?e[0]:e[1]+"#mp4";var t,a,n,l=window.location.hostname.slice(-10)=="reddit.com"&&this.node;if(!l)return"";if(!this.find_original&&l.matches("shreddit-post > a.absolute")&&(this.find_original=this.find,this.find=function(v,w,b){var k,S,G,j;if((k=v.matches)!=null&&k.call(v,"faceplate-img")){let R=(j=(G=(S=v.closest)==null?void 0:S.call(v,"shreddit-post"))==null?void 0:G.querySelector("a.absolute"))==null?void 0:j.href;if(R)return this.find_original({href:R,IMGS_TRG:v})}return this.find_original(v,w,b)}),l.matches("div.link a.thumbnail,div.link a.thumbnail>img, div.link a.title, div.link a.thumbnail.image")){for(a=l;(a=a.parentElement)&&!a.matches("div.link"););if(t=a&&a.dataset,t=t&&(t.url||t.hrefUrl),t&&/(v\.redd\.it|\.reddit\.com\/gallery)\//.test(t))return t;if(n=a&&a.querySelector("div.expando[data-cachedhtml]"),n=n&&n.getAttribute("data-cachedhtml"),t=n&&n.match(/(?:<a href|(?:class="preview"|<source) src)="([^"]+)/g),t)return t=t.map(function(v){var w=v.slice(v.lastIndexOf('"')+1).replace(/&amp;/g,"&");return w+(v[1]=="s"?"#mp4":"")}),t=n.indexOf("<source")!=-1?t.reverse():t,t.length?t.join(`
`):"";t=a.dataset,t=t.url||t.hrefUrl}else if(l.matches("a.Post__titleLink"))t=l.closest(".Post__top").querySelector("a.PostThumbnail").href;else if(l.matches("a[data-click-id=body] > div > h3, .Post div > div[role=img], faceplate-img, a.thumbnail > img")||l.matches("shreddit-post > a.absolute")&&!l.parentElement.querySelector("faceplate-img:not(.avatar, .shreddit-subreddit-icon__icon, .absolute, .flair-image)"))return/^(?:text|multi_media)$/.test((c=l.offsetParent)==null?void 0:c.getAttribute("post-type"))||(a=l.closest("div[id^=t3_]"),a&&a.querySelector("p, i.icon-text"))?"":(a=a&&a.querySelector("a > .icon-external_link"),a=a?a.parentElement:{href:"//www.reddit.com/by_id/t3_"+e[1]+".json"},a=this.find({href:a.href,IMGS_TRG:l}),l.title=l.getAttribute("aria-label")||l.title,(Array.isArray(a)?a.join(`
`):a===null?"null":a)||"");return t&&/^(https?:)?\/\/i\.redd\.?it/.test(t)?t:""}},REDDIT_post:{link:"^reddit\\.com/by_id/(t3_[\\da-z]+)",res:function(e){var a,n,l,m,c,v,w,b,k,S,G;e=JSON.parse(e._).data.children[0].data,e.crosspost_parent&&(e=e.crosspost_parent_list[0]);const t=this.find({href:e.url});return t!==!1&&t!==""?{loop:e.url}:(c=(m=(l=(n=(a=e.preview)==null?void 0:a.images)==null?void 0:n[0])==null?void 0:l.variants)==null?void 0:m.mp4)!=null&&c.source.url?[e.preview.images[0].variants.mp4.source.url+"#mp4",e.title]:(w=(v=e.preview)==null?void 0:v.reddit_video_preview)!=null&&w.hls_url?{loop:(k=(b=e.preview)==null?void 0:b.reddit_video_preview)==null?void 0:k.hls_url}:e.url.includes(e.permalink)?!0:e.is_video||e.is_gallery||(G=(S=this.TRG)==null?void 0:S.matches)!=null&&G.call(S,"faceplate-img")||["youtube.com","youtu.be"].includes(e.domain)?{loop:e.url}:!0}},REDDIT_thumbs:{link:"^rt/\\?(http.+)",url:"$1",res:function(e){var t,a=[`<meta[^>]+?property=['"]?og:`,`['"]?\\s[^>]*?content=['"]([^'">]+)`],n=e._.match(RegExp(a[0]+"image(?::url)?"+a[1]));return n?[n[1],(t=e._.match(RegExp(a[0]+"title"+a[1])))&&t[1]]:!1},img:"^(?:i\\.r(eddituploads\\.com|ddt\\.co)/[\\da-f]{32}\\?|[a-f]\\.thumbs\\.redditmedia\\.com/[\\w-]{16,43}\\.jpg$)",loop:2,to:function(){var c,v,w,b,k;var e=arguments,t=!e[1]&&this.node,a=t&&(t.matches(".Post div>div[role=img]")||((v=(c=t.offsetParent)==null?void 0:c.offsetParent)==null?void 0:v.getAttribute("content-href"))),n=a;t&&(t.title=t.getAttribute("aria-label")||t.title);var l=this.find({href:a}),m=(w=t.parentNode)==null?void 0:w.getAttribute("data");return m=m&&JSON.parse(m).postId||((k=(b=t==null?void 0:t.closest(".text-neutral-content"))==null?void 0:b.querySelector(".i18n-list-item-post-content"))==null?void 0:k.getAttribute("post-id")),a&&(a=t.closest(".Post")&&(a=a.querySelector("div>a[data-click-id=body][href]"))||l!==!1&&l!==""&&a)?a.href||a:t&&t.matches("div.link>a.thumbnail>img, .PostThumbnail>img, a>div[role=img]")&&t.parentNode.href||n?"//rt/?"+(t.parentNode.href||n):m?"//reddit.com/by_id/"+m+".json":e[0]}},REDDIT_video:{link:"^(?:v\\.redd\\.it|(?:[^.]{2,5}\\.)?reddit\\.com/link/[\\da-z]+/video)(/[\\da-z]+).*",url:function(){var e=arguments;return this.use_reddit_MP4=!1,this.use_reddit_MP4?`//v.redd.it${e[1]}/DASHPlaylist.mpd`:"data:,"+e[0]},res:function(e){if(this.use_reddit_MP4){var t=0,a,n=e._.match(/width="\d+">\s*<BaseURL>([^<]+)/g);return n&&(n.forEach(function(l){l=l.match(/"(\d+)">[^>]+>(.+)/),l[1]>t&&(t=l[1]|0,a=l[2])}),(/^https:\/\//.test(a)?a:"//v.redd.it"+e[1]+"/"+a)+"#mp4")}return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1280" height="720"></svg>',`<imagus-extension type="videojs" url="https://v.redd.it${e[1]}/DASHPlaylist.mpd"></imagus-extension>${this.TRG.IMGS_caption}`],{loop:"imagus://extension"}},img:"^preview(\\.redd.it/[^?]+)\\?.*",to:function(){var t;var e=arguments;return(t=this.TRG)!=null&&t.hasAttribute("src")&&!this.TRG.src&&(this.TRG.src=this.TRG.getAttribute("src")),e[0].indexOf("format=mp4")>0?e[0]+"#mp4":"i"+e[1]}},"Reddtastic-g":{link:"^reddtastic/(.+)",url:"https://www.reddit.com/by_id/t3_$1.json",res:function(e){var t,a,n,l,m,c,v,w,b,k,S,G,j,R,M,P,L;return e=(n=(a=(t=JSON.parse(e._).data)==null?void 0:t.children)==null?void 0:a[0])==null?void 0:n.data,e=((m=(l=e.secure_media)==null?void 0:l.reddit_video)==null?void 0:m.hls_url)||!/reddit\.com\/(?:r|u(?:ser)?)\//.test(e.url)&&e.url||((v=(c=e.preview)==null?void 0:c.reddit_video_preview)==null?void 0:v.dash_url)||((j=(G=(S=(k=(b=(w=e.preview)==null?void 0:w.images)==null?void 0:b[0])==null?void 0:k.variants)==null?void 0:S.mp4)==null?void 0:G.source)==null?void 0:j.url)||((L=(P=(M=(R=e.preview)==null?void 0:R.images)==null?void 0:M[0])==null?void 0:P.source)==null?void 0:L.url),e!=null&&e.length?/\.gif\b/.test(e)?e:{loop:e}:""}},"Reddxxx-x-p":{url:function(){return"https://reddxxx.com/api/db/post?postId="+this.node.closest('div[role="gridcell"]').querySelector('a[href*="/comments/"]').pathname.match(/\/comments\/(\w+)/)[1]},res:function(e){return e._=JSON.parse(e._).Media,e._.some(t=>t.galleryIndex)?e._.map((t,a)=>e._.filter(n=>n.galleryIndex===a).sort((n,l)=>l.height-n.height)[0]).filter(Boolean).map(t=>["https://"+e[1]+t.loc+e[2]+t.id]):e._.some(t=>t.type==="video")?(e._=e._.filter(t=>t.type==="video").sort((t,a)=>a.height-t.height)[0],"https://"+e[1]+e._.loc+e[2]+e._.id):(e._=e._.sort((t,a)=>a.height-t.height)[0],"https://"+e[1]+e._.loc+e[2]+e._.id)},img:"^(cdn)\\d(\\.reddxxx\\.com/).+"},"REDGIFs_gallery-x-p":{link:"^(?:(?:i|v\\d)\\.)?redgifs\\.com/(?:watch|i(?:fr)?)/(\\w+).*",url:function(){var e=arguments;return!this.rg_auth&&(location.hostname!=="www.redgifs.com"||!localStorage.getItem("session_data")||this.rg_auth_fail)?"https://api.redgifs.com/v2/auth/temporary":"data:,"+e[1]},res:function(e){this.rg_auth||(this.rg_auth=e._[0]==="{"?JSON.parse(e._).token:JSON.parse(localStorage.getItem("session_data")).token);let t=new XMLHttpRequest;if(t.open("GET","https://api.redgifs.com/v2/gifs/"+e[1].toLocaleLowerCase()+"?_redgifs_headers_",!1),t.setRequestHeader("Authorization","Bearer "+this.rg_auth),t.send(),t.status!==200)return!this.rg_auth_fail&&location.hostname==="www.redgifs.com"?(this.rg_auth_fail=!0,delete this.rg_auth,{loop:e[0]}):null;const a=JSON.parse(t.responseText).gif,n=[a.tags.join(", ").replace(/.+/,"[$&]"),a.userName,new Date(a.createDate*1e3).toLocaleString(),a.description].filter(Boolean).join(" | ");return a.gallery?(t.open("GET","https://api.redgifs.com/v2/gallery/"+a.gallery,!1),t.setRequestHeader("Authorization","Bearer "+this.rg_auth),t.send(),JSON.parse(t.responseText).gifs.map((l,m)=>[l.urls.hd,m?"":n])):[[["#"+a.urls.hd,a.urls.sd],n]]},img:"^(?:thumbs\\d+|files)\\.redgifs\\.com/([^-]+)-mobile\\.jpg.*"},"REDGIFs-x-p":{link:"^((gfycat)|(?:[^.]+\\.)?redgifs|gifdeliverynetwork)\\.com/+(?:\\w\\w\\w?/|watch/)?(?!popular|privacy|support|partners|gifbrewery|gaming|reaction|upload|create|signup|cajax/)(?:ifr/|amp/)?(?:(?:(?:gifs/)?detail/)?([a-zA-Z]{7,})[^/?#]*/?(?:[?#].*)?|@([\\w.-]+)(?:/[^/]+)*/([\\w-]+).*)$",url:function(){var e=arguments;return"https://api."+(e[2]||"redgifs")+".com/v1/"+(e[4]?"users/"+e[4]+"/album_links/"+e[5]:"gfycats/"+e[3])},res:function(e){var t,a,n=0,l=[],m=JSON.parse(e._),c="redgifs";if(m.errorMessage)return e[1]==c?null:{loop:e[0].replace(e[1],c)};for(m=m.publishedGfys||[m.gfyItem];a=m[n++];)t=["#"+a.webmUrl,"#"+a.mp4Url],a.mobileUrl&&t.push(a.mobileUrl),l.push([t,(a.title||"")+(a.tags&&a.tags.length?" ["+a.tags.join(", ")+"]":"")]);return l.length?l:null},img:"^(?:zippy|fat|giant|thumbs\\d*)\\.((gfycat)|redgifs)\\.com/([a-zA-Z]+).*"},Redlib:{link:"^((?:libreddit|lr?|red(?:dit(?!\\.com/)|lib)?|rl?|snoo)\\.[^/]+|safereddit\\.com)/(?:r/\\w+/(?:comments/[a-z0-9]+|s)/\\w+|(u(?:ser)?/[\\w-]+))",loop:1,url:function(){var e=arguments;return location.hostname===e[1]?"data:,"+e[0]:e[0]},res:function(e){var l,m,c,v,w,b;if(e.base[0]==="d"){const k=new XMLHttpRequest;k.open("Get",e[0],!1),k.send(),e._=k.responseText}const t="https://"+e[1];if(e[2]){let k=e._.match(/(?:"user_description">([^<]+)<.+?)?<label>(Karma)<\/label>[^<]+<label>(Created)<\/label>[^<]+<div>([^<]+)<\/div>[^<]+<div>([^<]+)<\/div>/s);return[(l=e._.match(/id="user_icon" src="([^"]+)/))==null?void 0:l[1],[k[1],k[2]+": "+k[4],k[3]+": "+k[5]].filter(Boolean).join(", ")]}let a,n=((m=e._.match(/<div class="post_body"><!-- SC_OFF --><div class="md"><p>(.+?)<\/p>/s))==null?void 0:m[1])||"";return a=[...e._.matchAll(/<figure>[^<]+<a href="([^"]+)".+?<figcaption>[^<]+<p>([^<]*)<\/p>/gs)].map((k,S)=>[t+k[1],[S?"":n,k[2]].filter(Boolean).join(" | ")]),a!=null&&a.length||(a=((b=((c=e._.match(/"og:video" content="([^"]+)/))==null?void 0:c[1])||((v=e._.match(/<a id="post_url" href="([^"]+)/))==null?void 0:v[1])||((w=e._.match(/<a href="([^"]+)" class="post_media_image"/))==null?void 0:w[1]))==null?void 0:b.replace(/^\//,t+"/"))||""),/vid\/([^/]+)\/\d+\.mp4$/.test(a)?(a=a.replace(/vid\/([^/]+)\/\d+\.mp4/,"hls/$1/HLSPlaylist.m3u8"),this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="480"></svg>',`<imagus-extension type="videojs" url="${a}"></imagus-extension>`],"imagus://extension"):Array.isArray(a)?a:[a,n]}},"RedTube|Tube8|YouPorn-x-q-p":{link:"^(?:[a-z]{2}\\.)?(redtube|tube8|youporn)\\.com/(?:watch/\\d+/|(?:(?!pornstar/|cat/)[^/]+/[^/]+|porn-video)/\\d+|\\d{3}.*?(?:\\/|\\?|$)|(video/get_media|media/mp4/?\\?s=))",url:function(){var e=arguments;return!e[2]&&RegExp(`${e[1]}.com$`).test(location.hostname)?"data:,"+e[0]:e[0]},res:function(e){var a;if(e.base[0]==="d"){const n=new XMLHttpRequest;n.open("Get",e[0],!1),n.send(),e._=n.responseText}return e[2]?(e=JSON.parse(e._).filter(n=>n.quality<=2160),[[[""+e.pop().videoUrl,"#"+((a=e[Math.floor(e.length/2)])==null?void 0:a.videoUrl)]]]):{loop:JSON.parse(e._.match(/mediaDefinition:\s*(\[[^\]]+mp4[^\]]+\])/)[1]).find(n=>n.format==="mp4").videoUrl.replace(/^\//,"//"+e[1]+".com/")}}},"Regard.ru-s":{link:"^regard\\.ru/product/\\d+/.+",res:function(e){let t=e._.indexOf('<div class="swiper-wrapper">');if(t<0)return null;let a=e._.indexOf('<div class="product-pagination">',t);if(a<0)return null;let n=[],l=/data-src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(c==null&&(l=/<img src="([^"]+)"/gi,c=l.exec(m));c;)n.push([c[1]]),c=l.exec(m);return n}},"Render.ru|Renderu.com":{link:"^renderu?\\.(ru\\/ru|com\\/en)\\/gallery\\/artwork\\/(\\d+)",res:'target="_blank"><img itemprop="image url" src="(https?:\\/\\/[^\\)]+?)" alt='},"Renderotica_gallery-x":{link:"^renderotica\\.com/gallery/shorturl/\\d+/.+",url:function(){var e=arguments;return/renderotica\.com$/.test(location.hostname)?"data:,"+e[0]:e[0]},res:function(e){if(e.base[0]==="d"){const m=new XMLHttpRequest;m.open("Get",e[0],!1),m.send(),e._=m.responseText}var t=e._.indexOf('<div id="galleryimage">');if(t<0)return null;var a=e._.indexOf('<div class="clearfix">',t);if(a<0)return null;var n=/<a target=["']_blank["'] href=["']([^"']+)["']>/gi,l=n.exec(e._.substring(t,a));return l==null&&(n=/file: '([^']+)',/i,l=n.exec(e._.substring(t,a))),l[1]}},"Renderotica_store-x":{link:"^renderotica\\.com/store/sku/.+",res:function(e){var t=e._.indexOf('<div class="image-navigation">');if(t<0)return null;var a=e._.indexOf('<div class="Pager">',t);if(a<0)return null;for(var n=[],l=/<a href\s*=\s*["']([^"']+)["']/gi,m=l.exec(e._.substring(t,a));m;)n.push([m[1]]),m=l.exec(e._.substring(t,a));return n}},Reuters:{link:"^reuters(?:agency)?\\.com/(?:[a-z]{2}/licensereuterscontent/\\?utm_medium|(video/).+|null(.*))",url:function(){var e=arguments;return e[1]?e[0]:"data:"+Date.now()},res:function(e){var t,a,n,l;if(e[1])return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1920" height="1080"></svg>',`<imagus-extension type="videojs" url="${e._.match(/contentUrl":\s*"([^"]+)/)[1]}"></imagus-extension>${(t=e._.match(/"description":\s*"([^"]+)/))==null?void 0:t[1]}`],{loop:"imagus://extension"};{let m,c=this.node;try{m=JSON.parse(document.body.outerHTML.match(/Fusion\.globalContent=({.+?});/)[1]).result.related_content.galleries.find(v=>v.content_elements.find(w=>{var b,k,S,G,j;return w.alt_text===((k=(b=c.attributes)==null?void 0:b.alt)==null?void 0:k.textContent)||((S=w.caption)==null?void 0:S.match(/^[^.]+/)[0])===((j=(G=c.previousSibling)==null?void 0:G.textContent)==null?void 0:j.match(/^[^.]+/)[0])})).content_elements.map(v=>[v.url,v.caption])}catch{m=[...((a=c.closest('div[data-testid^="gallery-"],div[data-testid^="primary-gallery"],div[class^="carousel-"][role="presentation"],div[class^="gallery-modal__gallery-carousel__"]'))==null?void 0:a.querySelectorAll('div[data-testid="Image"]'))||[]],m=m!=null&&m.length?m.map(w=>{var b;return[((b=w.querySelector("img[src]"))==null?void 0:b.src)||w.lastChild.innerText.match(/img\s+src="([^"]+)/)[1]]}):(l=(n=c.closest("figure").querySelector("img"))==null?void 0:n.src)==null?void 0:l.match(/^[^&]+/)[0]}return e[2]&&(m=m.concat(m.splice(0,m.findIndex(v=>RegExp(`${e[2].replaceAll(".","\\.")}`).test(v[0]))))),m}},img:"^(ajo\\.prod.reuters\\.tv/api/v\\d/img/[\\w-]+|static\\.reuters\\.com/resources/r/\\?.*&t=|(reuters\\.com/resizer/[^&]+)).*",loop:2,to:function(){var t,a;var e=arguments;if(e[2]&&this.node.closest('div[class^="carousel"][role="presentation"]'))return"https://www.reutersagency.com/null"+this.node.src;try{return JSON.parse(document.scripts.__NEXT_DATA__.innerText).props.initialState.video.playlist.find(n=>RegExp(`${e[1].replace("?","\\?")}`).test(n.image)).canonical_url}catch{const l=(t=document.body.outerHTML.match(/https:\/\/[^\/]+\/reuters\//))==null?void 0:t[0];return e[2]&&l?l+((a=e[2].match(/([^\/?]+)\?/))==null?void 0:a[1])+`
//`+e[2]:"//"+(e[2]||e[0]).replace(/.*filters:quality\(\d+\)\/(.*)/,"$1")}}},"Reverb-s-p":{link:"^reverb\\.com/item/\\d+-",res:function(e){var a;const t=((a=e._.match(/description__content">(.+?)<\//))==null?void 0:a[1].replaceAll("<br>"," - "))||"";return[...e._.matchAll(/meta itemProp="image" content="([^"]+)/g)].map((n,l)=>[["#"+n[1].replace(/^(.*upload\/).*\/([^\/]+\/[^.]+\..*)/,"$1$2"),n[1].replace("_large","_supersize")],l?"":t])}},"Rezat.ru-s":{link:"^rezat\\.ru/[\\w-]+/[\\w-]+/[\\w-]+",res:function(e){var t=e._.indexOf('<ul class="gallery__preview-list">');if(t<0)return null;var a=e._.indexOf("</ul>",t);if(a<0)return null;for(var n=[],l=/<li class="gallery__preview-item" num="\d+"><img src="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1].replace("preview.","wm/")]),c=l.exec(m);return n}},RiotPixels:{link:"^\\w+\\.riotpixels\\.com/games/[^/]+/(screenshots|covers|promos|artworks)/\\d+/",res:'<div class="big-image">\\n\\s+<a target=_blank href="(http://s\\d+\\.riotpixels\\.net/data/[^/]+/[^/]+/[^"]+)">'},RottenTomatoes:{link:"^(rottentomatoes\\.com/(?:m|tv)/[^/]+(?:/s\\d+)?)(/(?:trailer|picture|video)s)?.*",url:function(){var e=arguments;return/https:\/\/www\.rottentomatoes\.com\/(?:m|tv)\/[^\/]+(?:\/s\d+)?$/.test(location.href)&&[...document.querySelectorAll('rt-img[data-qa="carousel-item-img"],rt-link[href$="/pictures"]')].map(a=>a.outerHTML=a.outerHTML.replace(/\brt-(img|link)\b/g,(n,l)=>l==="img"?"img":"a")),e[0]},res:function(e){var t,a,n,l,m,c,v,w,b,k;if(!e[2]){const S=(...F)=>F.filter(Boolean).join(" - ");let G=!1;const j=(((a=JSON.parse(((t=e._.match(/"castAndCrewData" type="application\/json">({.+?})<\/script/))==null?void 0:t[1])||"{}"))==null?void 0:a.people)||[...e._.matchAll(/"cast-crew-item-link">[^<]+<p>([^<]+)<\/p>.+?<p class="p--small">[^\w]+([^<]+)/gs)]).flatMap(F=>(/Director/.test(F[2])&&(G=!0),G?[]:[[F.name||F[1],F.role||!/^p>/.test(F[2])&&F[2].replace(/\n\s*/g," ").replace(/\s(Voice)/," ($1)")].filter(Boolean).join(" - ")])).join(`
`).replace(/.+/,`
<b>Top Cast</b>
$&`);e._=JSON.parse(e._.match(/type="application\/ld\+json">(?:\n\s+)?({.+?})(?:\n|<\/script)/)[1]);const R=`<span style="font-size: 120%; font-weight: bold;">${e._.name}</span>`,M=e._.duration,P=new Date(e._.dateCreated).toLocaleDateString(navigator.language,{year:"numeric",month:"short",day:"2-digit"}),L=e._.genre.join(", "),C=e._.contentRating,V=(n=e._.aggregateRating)==null?void 0:n.ratingValue.replace(/.+/,"TomatoMeter: $&%"),J=(m=(l=e._.director)==null?void 0:l.map(F=>F.name))==null?void 0:m.join(", ").replace(/.+/,F=>`
<b>Director`+(e._.director.length>1?"s":"")+": </b>"+F),N=(v=(c=e._.author)==null?void 0:c.map(F=>F.name))==null?void 0:v.join(", ").replace(/.+/,F=>"<b>Writer"+(e._.author.length>1?"s":"")+": </b>"+F),U=(w=e._.description)==null?void 0:w.replace(/.+/,`
<b>Plot</b>
$&`),W=[R,S(M,P),S(L,C),V,U,J,N,j].filter(Boolean).join(`
`);return this._RT_imgs=[[e._.image,`<imagus-extension type="sidebar">${W}</imagus-extension>`]],{loop:"https://www."+e[1]+"/pictures"}}if(e[2][1]==="p")return e._=JSON.parse(((b=e._.match(/"pictures-json"\s+type="application\/json">(\[.+?\])<\/script/))==null?void 0:b[1])||"[]").map(S=>{var G;return[(G=S.srcFull)==null?void 0:G.replace(/^https:\/\/resizing\.flixster.+\/(https:\/\/)/,"$1"),S.caption||""]}),this._RT_imgs?(e._.forEach(S=>this._RT_imgs.push(S)),{loop:"https://www."+e[1]+"/videos"}):e._;if(/^[vt]$/.test(e[2][1])){if(e=JSON.parse(((k=e._.match(/id="videos"\s+type="application\/json">(\[.+?\])<\/script/))==null?void 0:k[1])||"[]").map(S=>{var G;return[((G=S.file)==null?void 0:G.match(/^[^?]+/)[0])+"#mp4",S.description||""]}),!this._RT_imgs)return e;e.forEach(S=>this._RT_imgs.push(S))}return this.TRG.IMGS_ext_data=this._RT_imgs,delete this._RT_imgs,{loop:"imagus://extension"}},img:"^(?:resizing\\.flixster\\.com/.+/(https://resizing\\.flixster\\.com/)|rottentomatoes\\.com/.+)",to:function(){var e=arguments;return/https:\/\/www\.rottentomatoes\.com\/(?:m|tv)\/[^\/]+(?:\/s\d+)?$/.test(location.href)&&[...document.querySelectorAll('rt-img[data-qa="carousel-item-img"],rt-link[href$="/pictures"]')].map(a=>a.outerHTML=a.outerHTML.replace(/\brt-(img|link)\b/g,(n,l)=>l==="img"?"img":"a")),e[1]||""}},"RoumenovoMaso.cz-x":{link:"^(roumenovomaso\\.cz/)masoShow\\.php\\?file=([^&]+).*",img:"^(roumenovomaso\\.cz/)(?:thumbnails|archived)/(?:POH)?([^?]+).*",to:"$1#upload signed archived trash#/$2"},"Rouming.cz":{link:"^(rouming\\.cz/)roumingShow\\.php\\?file=([^&]+).*",img:"^(rouming\\.cz/)(?:thumbnails|archived)/(?:POH)?([^?]+).*",to:"$1#upload signed archived trash#/$2"},"Rozetka.com.ua-s-p":{link:"^(?:\\w+\\.)?rozetka\\.com\\.ua/(ua/)?[^/]+/p\\d+",res:function(e){var a,n,l;e=JSON.parse(((a=e._.match(/"rz-client-state" type="application\/json">(.+?)<\//))==null?void 0:a[1])||"{}"),e=Object.values(e).find(m=>{var c,v;return(v=(c=m.body)==null?void 0:c.data)==null?void 0:v.images}).body.data;const t=(n=e.description)==null?void 0:n.text;return(l=e.images)==null?void 0:l.map((m,c)=>{var v,w;return[["#"+((v=m.original)==null?void 0:v.url),(w=m.big)==null?void 0:w.url],c?"":t]}).concat(e.videos.map(m=>[m.url]))},img:"^(content\\d*\\.rozetka\\.com\\.ua/goods/images/)(?:base_action|big(?:_tile)?|(?:mobile_)?large|(?:mobile_)?medium|preview|small)",to:`#$1original
$1big`},"Rule34.dev-x-p-b":{link:"^rule/34\\?(.*)",url:"$1",res:function(e){var c;const t="https://proxy"+Math.ceil(Math.random()*5)+".rule34.dev/proxy?q=",a=this.use_proxy_url===!0?t:"",l=(((c=JSON.parse((e._.match(/__NEXT_DATA__" type="application\/json">({.+?})</)||[,"{}"])[1]).props)==null?void 0:c.pageProps.newResult[0])??[]).find(v=>v.id===this.id),m=/\.mp4$/.test(l==null?void 0:l.file_url)?"#mp4":"";return l?[[["#"+a+l.file_url+m,a+l.sample_url+m]]]:""},img:"^(?:rule34\\.dev/[^?]+\\?id=(\\d+)|cdn\\.rule34\\.dev/file/.*)",loop:2,to:function(){var l;var e=arguments;if(this.use_proxy_url=!0,!e[1])return e[0];const t="https://proxy"+Math.ceil(Math.random()*5)+".rule34.dev/proxy?q=";this.id=parseInt(e[1]),proxy=this.use_proxy_url===!0?t:"",this.jsn||(this.jsn=((l=JSON.parse((this.node.ownerDocument.body.outerHTML.match(/__NEXT_DATA__" type="application\/json">({.+?})</)||[,"{}"])[1]).props)==null?void 0:l.pageProps.newResult[0])??[]);const a=this.jsn.find(m=>m.id===this.id),n=/mp4$/.test(a==null?void 0:a.file_url)?"#mp4":"";return a?"#"+proxy+a.file_url+n+`
`+proxy+a.sample_url+n:"rule/34?"+e[0]}},"Rule34.Paheal-x-p":{useimg:1,link:"^rule34\\.paheal\\.net/post/view/\\d+",res:function(e){var a;var t=(a=e._.match(/<title>([^<]+)/))==null?void 0:a[1];return e=e._.match(/(?:id='main_image'|<source)\s+src='([^']+)('\s+type='video\/mp4')?/),[e[1]+(e[2]?"#mp4":""),t]},img:"^(?:(r34i.paheal-cdn.net/[a-f0-9]{2}/[a-f0-9]{2}/[a-f0-9]+)|[^.]+\\.paheal\\.net/_thumbs((/[a-f0-9]{2})([a-f0-9]{2})[^/]+)/thumb\\.(?:pn|jpe?)g)$",to:function(){var e=arguments;return e[1]?e[1]+`
`+e[1]+"#mp4":"//r34i.paheal-cdn.net"+e[3]+"/"+e[4]+e[2]+`
//r34i.paheal-cdn.net`+e[3]+"/"+e[4]+e[2]+"#mp4"}},"Rule34.us-x-p":{link:"rule34\\.us\\/index\\.php\\?r=posts\\/view&id=\\d+",res:function(e){orig_img_url=e._.match(/href="([^"]*?)".{1,100}Original/)[1];var t=[[orig_img_url,""]];return t}},"Rule34.xxx|Realbooru-x-p":{link:"^(?:(realbooru\\.com|rule34\\.xxx))/index\\.php\\?page=post&s=view&id=(\\d+)",url:function(){var e=arguments;return e[1]=="rule34.xxx"?`https://api.${e[1]}/index.php?page=dapi&s=post&q=index&id=${e[2]}&json=1`:`https://${e[1]}/index.php?page=dapi&s=post&q=index&id=${e[2]}&json=1`},res:function(e){let t=JSON.parse(e._)[0];return t.file_url||`https://${e[1]}/images/${t.directory}/${t.image}`}},"Rule34Hentai-x-p":{useimg:1,link:"^(rule34hentai\\.net)/post/view/\\d+",res:function(e){return"//"+e[1]+e._.match(/<a href="([^"]+)" download[>=]/)[1]},img:"^(rule34hentai\\.net/)_thumbs(/[\\da-f]{32}).*",to:`$1_images$2
$1_images$2#mp4`},"Rule34images-x":{link:"^rule34images.com/post/view/[0-9]+",res:function(e){var a;return(a=e._.match(/src='(\/_images\/.+?)'/m))==null?void 0:a[1]}},"Rule34Video-x-q-p":{link:"^rule34video\\.(?:party|com)/videos?/\\d+/.*?/",res:function($){let title=/<title>([^<]+)/gm.exec($._)[1];function deobfuscate(e,t){let a=(e=e.split("/").splice(2))[5],n="",l="";l=n=a.substring(0,32);let m="";for(f="",g=1;g<t.length;g++)f+=parseInt(t[g])?parseInt(t[g]):1;for(c=parseInt(f.length/2),v=parseInt(f.substring(0,c+1)),(g=(w=parseInt(f.substring(c)))-v)<0&&(g=-g),f=g,(g=v-w)<0&&(g=-g),f+=g,f*=2,f=""+f,i=10,b="",g=0;g<c+1;g++)for(h=1;h<=4;h++)(k=parseInt(t[g+h])+parseInt(f[g]))>=i&&(k-=i),b+=k;m=b;for(var c=l,v=l.length-1;v>=0;v--){for(var w=v,b=v;b<m.length;b++)w+=parseInt(m[b]);for(;w>=l.length;)w-=l.length;for(var k="",S=0;S<l.length;S++)k+=S==v?l[w]:S==w?l[v]:l[S];l=k}return e[5]=a.replace(n,l),e.join("/")}let videovars=/var flashvars = ({[\n].+});/gm.exec($._);eval("videovars = "+videovars[1]);let urls=[];for(el in videovars)el.match(/^video.*?url\d?$/)&&urls.push([deobfuscate(videovars[el],videovars.license_code)+"#mp4",videovars[el+"_text"]?videovars[el+"_text"]:title]);return[[["#"+urls[urls.length-1][0],""+urls[0][0]]]]}},Ruliweb:{link:"^bbs\\.ruliweb\\.com/\\w+/(?:/\\d+/)?board/\\d+/",res:function(e){return[...e._.matchAll(/(?:muted="" playsinline="|img loading="lazy" [^>]+)" src="(https?:\/\/\w+\.ruliweb\.com\/(?:img|osi)[^"]+)" (?:alt|style)=/g)].map(t=>[t[1]])},img:"^([a-z0-9]+\\.ruliweb\\.com/)thumb(/[^.]+\\.)([a-z0-9]+)",to:function(){var e=arguments;return e[3]==="gif"?e[1]+"ori"+e[2]+"mp4":e[1]+"img"+e[2]+e[3]}},"Rumble-h-q-p":{link:"^rumble\\.com/.+\\.html",res:function(e){var m,c;let t=e._.match(/"video":"(\w+)","div":"videoPlayer"/i)[1],a=new XMLHttpRequest;a.open("GET","https://rumble.com/embedJS/u3/?request=video&ver=2&v="+t,!1),a.send();let n=JSON.parse(a.responseText),l=(m=Object.values(n.ua.mp4))==null?void 0:m.sort((v,w)=>v.meta.h-w.meta.h);return l?[[["#"+l.pop().url,""+((c=l==null?void 0:l[0])==null?void 0:c.url)]]]:""}},"RussianPlanes-g":{link:"^(russianplanes\\.net/id)(\\d+)$",res:'<img src="(https?:\\/\\/russianplanes\\.net\\/images\\/to\\d+\\/0?$2\\.(?:jpe?g|png|bmp))"',to:`
`},"RuTracker|Pornolab-p":{link:"(rutracker\\.org|pornolab.net)/forum/viewtopic\\.php(?!.+&).+",res:function(e){let t=[],a=/class=\"postImg postImgAligned img-right\".+?=\"([^\"]+)/gi,n=a.exec(e._);if(n)n[1].includes("ipicture.ru")||n[1].includes("tinypic.com")||n[1].includes("imageshack.us")||n[1].includes("10pix.ru")||n[1].includes("imgur.com")||n[1].includes("photobucket.com")||n[1].includes("radikal.ru")||n[1].includes("vfl.ru")||n[1].includes("lostpic.tk")?t.push(["https://static.t-ru.org/smiles/tr_oops.gif"]):t.push([n[1]]);else return null;let l=e._.substring(e._.indexOf("Ð¡ÐºÑ€Ð¸Ð½ÑˆÐ¾Ñ‚Ñ‹")+1);for(l=l.substring(0,l.indexOf("/go/1")),a=/class=\"postImg\" title=\"([^\"]+)/gi,n=a.exec(l);n;)n[1].includes("ipicture.ru")||n[1].includes("tinypic.com")||n[1].includes("imageshack.us")||n[1].includes("10pix.ru")||n[1].includes("imgur.com")||n[1].includes("photobucket.com")||n[1].includes("radikal.ru")||n[1].includes("vfl.ru")||n[1].includes("lostpic.tk")?t.push(["https://static.t-ru.org/smiles/tr_oops.gif"]):t.push([n[1]]),n=a.exec(l);return t}},"RUTUBE.ru-h":{link:"^rutube\\.ru/(?:video|shorts)/([a-f0-9]+)/.*",url:"//rutube.ru/api/play/options/$1/?pver=v2",res:function(e){var a,n;if(e=JSON.parse(e._),!e)return null;const t=[e.title,(a=e.author)==null?void 0:a.name,e.description].filter(Boolean).join(" | ");return e=(n=e.video_balancer)==null?void 0:n.m3u8,this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${e}"></imagus-extension>${t}`],{loop:"imagus://extension"}}},"Safebooru|XBooru-x-p":{useimg:1,link:"^(?:safebooru\\.org|xbooru\\.com)/index\\.php\\?page=post&s=view&id=\\d+",res:'<li><a href="(https?://(?:safe|img\\.x)booru\\.[^/]+/+images/[^"]+)',img:"^(safebooru\\.org/+)(?:sample|thumb(?:nail)?)s/(\\d+)/(?:thumbnail|sample)_([\\da-f]+)\\.([^?]+).*",to:`#$1/images/$2/$3.#$4 png gif#
$1/samples/$2/sample_$3.$4`},Sahibinden:{img:"^(i\\d\\.shbdn\\.com/photos/\\d+/\\d+/\\d+/)[^_]+",to:"$1#x16 big x5#"},"SANKAKU-x-p":{link:"^(?:(?:idol|chan)\\.)?sankakucomplex\\.com/(?:\\w{2}/)?posts?/(?:show/)?([a-zA-Z0-9]+)",url:function(){var e=arguments;return this.no_auth?e[0]:"data:,"+e[0]},res:function(e){var l;const t=/sankakucomplex\.com$/.test(location.hostname)&&((l=document.cookie.match(/(?:^|;\s*)accessToken=([^;]+)/))==null?void 0:l[1]);if(/^data:/.test(e.url[0]))if(t&&/sankakucomplex\.com$/.test(location.hostname)){const m=new XMLHttpRequest;if(m.open("Get","https://capi-v2.sankakucomplex.com/posts?lang=en&page=1&limit=1&tags=id_range:"+e[1],!1),m.setRequestHeader("Authorization","Bearer "+t),m.send(),e._=m.responseText,m.status!==200||!/file_url/.test(m.responseText))return this.no_auth=!0,{loop:e[0]}}else return this.no_auth=!0,{loop:e[0]};let a=document.querySelector('head > meta[name="referrer"]');a?a.attributes.content.value!=="same-origin"&&(a.attributes.content.value="same-origin"):(a=document.createElement("meta"),a.name="referrer",a.content="same-origin",document.getElementsByTagName("head")[0].appendChild(a));let n;return n=(e._.match(/(?:(?:(?:Original|Resized): <a|<a id="(?:low|high)res"[^>]+?) href=|(?:sample|file)_url": ?)"([^"]+)/)||[])[1],[n]}},"SANKAKU_beta|SANKAKU.app-x-q-p":{link:"^(?:beta\\.sankakucomplex\\.com|sankaku\\.app)/(?:\\w{2}/)?posts?/(?:show/)?(\\w+).*",url:function(){var e=arguments;return this.no_auth?"https://chan.sankakucomplex.com/posts/show/"+e[1]:"data:,"+e[0]},res:function(e){const t="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";if(/^data:/.test(e.url[0]))if(!/^x+$/.test(t)&&/sankaku(?:complex\.com|\.app)\//.test(this.node.baseURI)){const l=new XMLHttpRequest;if(l.open("Get","https://capi-v2.sankakucomplex.com/posts?lang=en&page=1&limit=1&tags=id_range:"+e[1],!1),l.setRequestHeader("Authorization","Bearer "+t),l.send(),e._=l.responseText,l.status!==200||!/sample_url/.test(l.responseText))return this.no_auth=!0,{loop:e[0]}}else return this.no_auth=!0,{loop:e[0]};let a=document.querySelector('head > meta[name="referrer"]');a?a.attributes.content.value!=="same-origin"&&(a.attributes.content.value="same-origin"):(a=document.createElement("meta"),a.name="referrer",a.content="same-origin",document.getElementsByTagName("head")[0].appendChild(a));let n;return n=(e._.match(/(?:(?:sample|file)_url": ?|(?:Original:\s+<a\s+|id="(?:low|high)res"[^<>]+)href=)"([^"]+)/)||[])[1],[n]}},"Saro-Knives.ru-s":{link:"^saro-knives\\.ru/products/[\\w-]+",res:function(e){var t=e._.indexOf('class="avatar-view ">');if(t<0)return null;var a=e._.indexOf("</noindex>",t);if(a<0)return null;for(var n=[],l=/"\s+href=".+top\/([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push(["https://"+c[1]]),c=l.exec(m);return n}},"SaveImg.ru-h":{useimg:1,link:"^saveimg\\.ru/show-image.php\\?id=\\w+$",res:"<img src='(http://saveimg\\.ru/pictures/[^']+)'",img:"^(saveimg\\.ru/)thumbnails(/\\d{2}-\\d{2}-\\d{2}/\\w+\\.(?:jpe?g|png|gif))$",to:"$1pictures$2"},"Screencast-h":{link:"^screencast\\.com/t/[^/]+$",res:function(e){const a=/<meta property="og:video" content="([^"]+)"/g.exec(e._);if(a)return a[1];const l=/<meta property="og:image" content="([^"]+)"/g.exec(e._);if(l)return l[1]}},"Screensider-h":{img:"^((?:img\\.)?screensider\\.com/images/albums/\\d+/[^/]+)-(?:top|th|md)(\\.(?:jpe?g|png|gif|bmp))$",to:`#$1$2
$1-md$2`},"Scrolller-x-p":{link:"^(?:api\\.)?scrolller\\.com/(?:[^-]+-)+[a-z0-9]+$",url:function(){var t;var e=arguments;return(t=this.sAlbumSrc)!=null&&t.length?`https://api.scrolller.com/api/v2/graphql :{"query":" query AlbumQuery( $url: String! $iterator: String ) { getAlbum(url: $url) { children( iterator: $iterator limit: 50 ) { iterator items { __typename mediaSources { url width height isOptimized } } } } } ","variables":{"url":"${this.sAlbumSrc}"},"authorization":null}`:e[0]},res:function(e){var a,n,l,m,c,v,w,b,k,S;if(delete this.sAlbumSrc,e=JSON.parse(e._[0]==="{"?e._:JSON.parse(((a=e._.match(/scrolllerConfig\s*=\s*("{.+?}")<\//))==null?void 0:a[1].replace(/\\'/g,"'"))||"{}")),(l=(n=e.item)==null?void 0:n.albumUrl)!=null&&l.length||((m=e.item)==null?void 0:m.__typename)==="Album")return e=e.item,this.sAlbumSrc=e.albumUrl||e.url,{loop:"https://scrolller.com"+(e.albumUrl||e.url)};if(e.data)return e=(w=(v=(c=e.data)==null?void 0:c.getAlbum)==null?void 0:v.children)==null?void 0:w.items,e!=null&&e.length?e.map(G=>{var j;return G=G.mediaSources,[G.some(R=>/\.mp4/.test(R.url))?G.find(R=>/\.mp4/.test(R.url)).url:(j=G.sort((R,M)=>M.height-R.height)[0])==null?void 0:j.url]}):"";if(e=((b=e.item)==null?void 0:b.mediaSources)||[],e.some(G=>/\.mp4/.test(G.url)))return e.find(G=>/\.mp4/.test(G.url)).url;let t=(k=e.filter(G=>G.height<1080).sort((G,j)=>j.height-G.height)[0])==null?void 0:k.url;return e=(S=e.sort((G,j)=>j.height-G.height)[0])==null?void 0:S.url,e?[[["#"+e,t]]]:""}},"SeaArt-g":{link:"^seaart\\.ai/[^/]+/detail/.*",img:"^seaart\\.ai/[^/]+/detail/.*",to:function(){var t,a;const e=this.node;return e.src??((t=e.querySelector("img"))==null?void 0:t.src)??((a=e.offsetParent.querySelector("img"))==null?void 0:a.src)}},"SendVid-h":{link:"^(sendvid\\.com/)(?:embed/)?([\\da-z]{8})\\W*",url:"$1embed/$2",res:function(e){const t=(e._.match(/="og:video:secure_url" content="([^"]+)/)||[,""])[1],a=(e._.match(/="og:title" content="([^"]+)/)||[,""])[1],n=(e._.match(/video:height" content="(\d+)/)||[,""])[1],l=(e._.match(/video:width" content="(\d+)/)||[,""])[1];return this.TRG.IMGS_ext_data=[`//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="${l}" height="${n}"></svg>`,`<imagus-extension type="videojs" url="${t}"></imagus-extension>${a}!`],t?{loop:"imagus://extension"}:""}},"Servimg-h":{link:"servimg\\.com/view/\\d+/\\d+$",res:'<meta property="og:image" content="([^"]+)'},"Sex.com-x-p-b":{useimg:1,link:"^(sex\\.com)/picture/(\\d+).*",res:'="image_src" href="([^"?]+)',img:"^(images\\.sex\\.com/images/pinporn/\\d{4}/[01]\\d/[0-3]\\d/)(?!620/|video/)[^/]+",to:"$1620"},"Sexy-eGirls-x":{img:"^forum\\.sexy-egirls\\.com/attachments/[^/]+-([A-Za-z\\d]{3,4})\\.\\d+/",to:function(){var e=arguments;return e[0]+(/m(4v|p[34])|webm/i.test(e[1])?"#mp4":"")}},"ShemaleHD-x-p":{link:"^shemalehd.sex/\\w+/[\\w-]+",res:function(e){return e._.match(/video_url: '([^']+)/)[1]+"#mp4"}},"ShemalesTube-x-p-b":{link:"^shemalestube\\.com\\/video\\/[a-z-]+\\/",res:'<source src="([^"]+)'},"ShemaleTubeVideos-x-p":{link:"^shemaletubevideos.com/video/[\\w\\-\\.]+",res:'<source data-res=\\"480p\\" type=\\"video/mp4\\" src=\\"([^\\"]+)'},"Shopee-s":{useimg:1,link:"^(shopee\\.(?:com?\\.)?[a-z]{2})/.+",img:"^(?:[^.]+\\.img\\.susercontent|play-[^.]+\\.vod\\.shopee)\\.com/.+",to:function(){var n,l,m,c,v,w,b,k,S,G,j,R,M,P,L;var e=arguments;if(e[1]&&e[1]!==location.hostname)return"";let t=[...document.getElementsByClassName("shopee-rating-media-list-image__content--blur")];for(let C=0;C<t.length;C++)t[C].remove();const a=this.node;return((n=a.parentNode.nextSibling)==null?void 0:n.className)==="rating-media-list__video-cover"?a.closest(".rating-media-list").querySelector("video").src:((L=(/\/[a-z]{2}?-50009109-/.test(e[0])?((l=a.parentNode.parentNode.querySelector('img[src^="https://down-"]:not([src*="-50009109-"])'))==null?void 0:l.src)||((w=(v=(c=(m=a.attributes)==null?void 0:m.style)==null?void 0:c.textContent)==null?void 0:v.match(/https:[^_]+/))==null?void 0:w[0])||((M=(R=(j=(G=(S=(k=(b=a.nextSibling)==null?void 0:b.nextSibling)==null?void 0:k.firstChild)==null?void 0:S.attributes)==null?void 0:G.style)==null?void 0:j.textContent)==null?void 0:R.match(/https:[^_]+/))==null?void 0:M[0])||"":e[1]?a.src||((P=a.querySelector("img[src]"))==null?void 0:P.src)||"":e[0]).match(/^([^_]+)/))==null?void 0:L[1])||""}},"ShopGoodwill-s-p":{link:"^shopgoodwill\\.com/item/(\\d+).*",url:"https://buyerapi.shopgoodwill.com/api/ItemDetail/GetItemDetailModelByItemId/$1",res:function(e){if(e=JSON.parse(e._),!e.imageUrlString)return"";let a=[],n=e.imageServer,l=e.imageUrlString.split(";");for(i=0;i<l.length;i++)a.push([n+l[i],i?"":`<imagus-extension type="sidebar">${e.description}</imagus-extension>`]);return this.TRG.IMGS_ext_data=a,{loop:"imagus://extension"}},img:"^(shopgoodwillimages\\.azureedge\\.net/production/\\d+/Items/[\\d-]+/[a-z0-9-]+_\\d+)t?(\\d*\\.).+",to:"$1$2#jpg png jpeg#"},"shottr-h":{link:"shottr\\.cc/s/.*",res:"<meta property='og:image' content='([^']+)"},"ShutterStock-g-b":{link:"shutterstock.com/.*",res:function(e){const t=e[0];function a(S){const G=new XMLHttpRequest;if(G.open("GET",S,!1),G.send(),G.readyState==4&&G.status==200)return JSON.parse(G.responseText)}function n(S){if(!S)return;let G={width:0};for(const j of Object.values(S))j.width>G.width&&(G=j);return G.src}function l(S){if(!S)return S;const G=S.indexOf("?");return G<0?S:S.substring(0,G)}function m(S){const G=S.split("-");if(G.length!==0)return l(G[G.length-1])}const c=/shutterstock\.com\/(.*\/)*g\/(.*)/;if(match=t.match(c),match&&match.length>=2){const S=l(match[match.length-1]);return S?a(`https://www.shutterstock.com/_next/data/123/en/_shutterstock/g/${S}.json`).pageProps.assets.map(R=>{const M=n(R.displays),P=R.title;return[M,P]}):void 0}const v=/shutterstock\.com\/(.*\/)*editorial\/image-editorial\/(.*)/;if(match=t.match(v),match&&match.length>=2){const S=match[match.length-1],G=m(S);if(!G)return;const j=a(`https://www.shutterstock.com/_next/data/123/en/_shutterstock/editorial/image-editorial/${G}.json`),R=n(j.pageProps.asset.displays),M=j.pageProps.asset.title;return[R,M]}const w=/shutterstock\.com\/(.*\/)*image-photo\/(.*)/;if(match=t.match(w),match&&match.length>=2){const S=match[match.length-1],G=m(S);if(!G)return;const j=a(`https://www.shutterstock.com/studioapi/images/${G}`),R=n(j.data.attributes.displays),M=j.data.attributes.title;return[R,M]}const b=/shutterstock\.com\/(.*\/)*video\/search\/(.*)\/*/;if(match=t.match(b),match&&match.length>=2){const S=l(match[match.length-1]),G=a(`https://www.shutterstock.com/_next/data/123/en/_shutterstock/video/search/${S}.json`);if(!G||!G.pageProps||!G.pageProps.videos)return;const j=G.pageProps.videos,R=G.pageProps.query&&G.pageProps.query.term||S;return j.map(M=>[M.previewVideoUrls.mp4,R])}const k=/shutterstock\.com\/(.*\/)*search\/(.*)\/*/;if(match=t.match(k),match&&match.length>=2){const S=l(match[match.length-1]),G=a(`https://www.shutterstock.com/_next/data/123/en/_shutterstock/search/${S}.json`);if(!G||!G.pageProps||!G.pageProps.assets)return;const j=G.pageProps.assets,R=G.pageProps.query&&G.pageProps.query.term||S;return j.map(M=>[n(M.displays),R])}},img:"shutterstock.com/.*"},"Sight.photo-g":{link:"^(sight\\.photo)/photos/\\d+",url:function(){var e=arguments;return location.hostname===e[1]?"data:,"+e[0]:e[0]},res:function(e){var t;if(e.base[0]==="d"){const a=new XMLHttpRequest;a.open("Get",e[0],!1),a.send(),e._=a.responseText}return(t=e._.match(/id="big_photo" src="([^"]+)" alt="[^"]+"/))==null?void 0:t[1]},img:"^(?:(?:icon\\.)?s|img-(?:[^.]+)|cdn)(\\.sight\\.photo/img/(?:[\\da-z]+)/(?:[\\da-z]{3}/\\d+_))(?!xlarge)[^.]+",to:"cdn$1#x #large"},"Sima-land.ru-s":{link:"^sima-land\\.ru/\\d+/(?:\\w+-)+\\w+/",res:function(e){var t;return JSON.parse((t=e._.match(/\["product__serverData"\]\s*=\s*JSON\.parse\("({.+?})"\);<\/script/))==null?void 0:t[1].replace(/\\"/g,'"').replace(/\\\\/g,"\\")).media.items.filter(a=>a.src).map(a=>{var n;return[[(n=a.srcIncreased)==null?void 0:n.replace(/.+/,"#$&"),a.src]]})},img:"^(goods-photos\\.static1-sima-land\\.com/items/\\d+/\\d+/)\\d+(\\.\\w+).*",to:`#$11600$2
$1700$2`},"Simkl-p":{img:"simkl.(in)/posters/(\\d\\d)/([a-z0-9]+_)(c).*",to:"simkl.net/posters/$2/$30.jpg"},"Skeb.jp-g":{link:"^skeb\\.jp/@([^/]+)/works/(\\d+)",url:"data:$1$2",res:function(e){var t=new XMLHttpRequest;t.open("Get","https://skeb.jp/api/users/"+e[1]+"/works/"+e[2],!1),t.setRequestHeader("Authorization","Bearer null"),t.send();let a=JSON.parse(t.responseText);return[a.article_image_url].concat(a.previews.map(n=>n.url+(/fcdn/.test(n.url)?"#mp4":""))).filter(Boolean).map(n=>[n])}},"Skrinshoter.ru|skr.sh-h":{link:"^skr\\.sh/\\w{11}",res:'<meta property="og:image" content="([^"]+)"/>',img:"^(skrinshoter\\.ru)/s/(\\d+)/(\\w+)",to:"$1/i/$2/$3.png"},"Skroutz.gr-s-p":{link:"^skroutz\\.gr/s/\\d+/.+",res:function(e){const t=/"ImageObject","contentUrl":"(?<img>[^"]+)/g;return[...e._.matchAll(t)].map(n=>{var l;return[(l=n.groups)==null?void 0:l.img,""]})}},Skype_web:{img:"^(api\\.asm\\.skype\\.com/v1/objects/[^/]+/views/imgpsh_)thumbnail_sx",to:"$1fullsize_anim"},"Slushe-x":{link:"^slushe\\.com/(galleries|video)/[\\w-]+\\.html",res:function(e){let t=[...e._.matchAll(/cloud_vid = '([^']+)/g)];if(t.length>0)return{loop:"https://videodelivery.net/"+t[1][1]+"/manifest/video.m3u8"};let a=e._.indexOf('<div class="gallery-photo');if(a<0)return null;let n=e._.indexOf("</section>",a);if(n<0)return null;let l=[],m=/href="([^"]+)" target="_blank"/gi,c=e._.substring(a,n),v=m.exec(c);for(;v;)l.push([v[1]]),v=m.exec(c);return l}},"slow.pics-h":{link:"^slow\\.pics/(c/)?(\\w{8})/?$",res:function(e){var c,v,w,b;if(!e[1])return((c=e._.match(/"card-body"\s*>\[IMG\]([^[]+)/))==null?void 0:c[1])||"";const t=k=>[a+k.publicFileName,k.name],a=((v=e._.match(/cdnUrl\s*=\s*"([^"]+)/))==null?void 0:v[1].replace(/\\/g,""))||"//i.slow.pics/";let n=[],l=JSON.parse(((w=e._.match(/collection\s*=\s*([^;]+)/))==null?void 0:w[1])||"{}"),m=l.key===e[2];return l=l.comparisons||l.images||[],m?l.forEach(k=>{var S;return k.images?(S=k.images)==null?void 0:S.forEach(G=>n.push(t(G))):n.push(t(k))}):(b=l.find(k=>k.key===e[2]))==null||b.images.forEach(k=>n.push(t(k))),n}},"SMBC-comics":{link:"^smbc-comics\\.com\\/(?:comics?\\/.+|(?:index\\.php)?\\?(?:db=comics(?:_[^&]+)?&)?id=\\d+)",res:function(e){let t=e._.match(/" src="([^"]+)" id="cc-comic"/)[1],a=e._.match(/ title="([^"]*)" src="[^"]+" id="cc-comic"/)[1],n=e._.match(/<div id="aftercomic" onclick='toggleBlock\("aftercomic"\)' style="display:none;" class="mobilehide"><img src='([^']+)'/)[1];return[[t,a],[n,"Extra"]]}},"Smotrim.ru-h":{link:"^(?:player\\.)?smotrim\\.ru/(?:(brand|video)/(\\d+)|iframe/video/id/(\\d+)).*",url:function(){var e=arguments;return e[1]==="brand"?e[0]:`//player.smotrim.ru/iframe/datavideo/id/${e[2]||e[3]}/sid/smotrim`},res:function(e){var n,l,m,c;if(e[1]==="brand")return{loop:((n=e._.match(/\/\/player\.smotrim\.ru\/iframe\/video\/id\/[^"]+/))==null?void 0:n[0])||""};if(e=JSON.parse(e._).data,!e)return null;const t=new XMLHttpRequest,a=e.tagsTitle||"";return e=(c=(m=(l=e.playlist)==null?void 0:l.medialist[0])==null?void 0:m.sources.m3u8)==null?void 0:c.auto,t.open("GET",e,!1),t.send(),e=e.replace(/playlist\.m3u8.+/,t.responseText.match(/chunklist_[^\n]+/)[0]),this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${e}"></imagus-extension>${a}`],e?{loop:"imagus://extension"}:null}},"SmugMug-h":{img:"^[^.]+\\.smugmug\\.com/.+(?:T[ih]|S|M|L|X[2L]|\\d+x\\d+)(?:-\\d)?\\.[^.]{3,4}$",to:function(){var e=arguments;return e[0].replace(/(?:(\/)(?:T[ih]|S|M|L|X[2L]|\d+x\d+)(\/)|(-)(?:T[ih]|S|M|L|X[2L]|\d+x\d+)([.\/]))/g,"$1$35K$2$4")}},"Softodrom.ru":{img:"^(soft\\.softodrom\\.ru/screens/soft/\\d+/\\d+/)small_(\\d+\\.(?:jpe?g|png))$",to:"$1$2"},"SoftoRoom-p":{img:"^(softoroom\\.(?:net|org)/images/(?:server\\d+/)?out\\.php/)t([^/]+\\.(?:jpe?g|gif|png))$",to:"$1i$2"},Softpedia:{link:"^softpedia\\.com/get/.+/[\\w-.]+\\.shtml",url:function(){var e=arguments;return/softpedia\.com$/.test(location.hostname)?"data:,"+e[0]:e[0]},res:function(e){if(e.base[0]==="d"){const v=new XMLHttpRequest;v.open("Get",e[0],!1),v.send(),e._=v.responseText}let t=e._.indexOf('<div class="slide">');if(t<0)return e._.match(/<img width="32" height="32" src="([^"]+)"/)[1];let a=e._.indexOf("</div>",t);if(a<0)return null;let n=[],l=/href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);for(;c;)n.push([c[1]]),c=l.exec(m);return n||"https://cdn-icons-png.flaticon.com/512/1179/1179237.png"}},SoftPortal:{link:"^softportal\\.com/software-\\d+-[\\w-]+\\.html",res:function(e){var t=e._.indexOf('<div class="zoom-button">');if(t<0)return null;var a=e._.indexOf("</div></div>",t);if(a<0)return null;for(var n=[],l=/<link itemprop="contentUrl" href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n},img:"^(softportal\\.com/scr/\\d+/[^/]+-)(tmb|mid)(-\\d+\\.(?:jpe?g|png))$",to:"$1#big mid#$3"},SourceForge:{link:"^sourceforge\\.net/(projects|software/product)/[^\\/]+/$",res:function(e){var t=e._.indexOf('<div class="owl-carousel');if(t<0)return null;var a=e._.indexOf("</div>",t);if(a<0)return null;for(var n=[],l=/<img itemprop="screenshot" src="([^"]+)\/\d+\/\d+\/\d+"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n},img:"^((?:a\\.fsdn\\.com/con/app/proj|sourceforge\\.net/projects)/[^/]+/screenshots/[^/]+).*",to:"$1"},"Sp-Shopogoliki.ru":{link:"(foto\\.sp-shopogoliki\\.ru/images/[^.]+\\.[^.]+).html",img:"(foto\\.sp-shopogoliki\\.ru/images/[^.]+\\.[^.]+).html",to:"$1"},"SpankBang-x-q-p":{link:"^(.*\\.)?spankbang.com\\/(.*?\\/video|[^-]+-.+?\\/playlist)\\/.*",res:function(e){var a;return e=JSON.parse(((a=e._.match(/stream_data\s*=\s*({[^;]+})/))==null?void 0:a[1].replaceAll("'",'"'))||"{}"),e=Object.entries(e).filter(n=>/^\d+[pk]$/.test(n[0])&&parseInt(n[0].match(/^(\d+)[pk]$/)[1].replace(/^4$/,"2160"))<=2160).sort((n,l)=>parseInt(n[0].match(/^(\d+)[pk]$/)[1].replace(/^4$/,"2160"))-parseInt(l[0].match(/^(\d+)[pk]$/)[1].replace(/^4$/,"2160"))).map(n=>n[1][0]).filter(Boolean),e!=null&&e.length?[[["#"+e.pop(),e==null?void 0:e[Math.floor(e.length/2)]]]]:""}},"Sportmaster.ru-s":{link:"^sportmaster\\.ru/product/\\d+/",res:function(e){var t,a;return e=(a=JSON.parse(((t=e._.match(/__PINIA_INITIAL_STATE__\s*=\s*(.+?);\n/))==null?void 0:t[1])||"{}").product)==null?void 0:a.product,e.media.photoImages.map((n,l)=>[["#"+n.high,n.og],l?"":e.description])},img:"^cdn\\.sportmaster\\.ru/upload/mdm/media_content/resize/([^.]+)\\.jpg.*",to:function(){var a,n,l,m,c;var e=arguments;let t=(a=document.body.outerHTML.match(/__PINIA_INITIAL_STATE__\s*=\s*(.+?);\n/))==null?void 0:a[1];return t=t&&((c=(m=(l=(n=JSON.parse(t).product)==null?void 0:n.product)==null?void 0:l.media)==null?void 0:m.photoImages)==null?void 0:c.find(v=>Object.values(v).find(w=>RegExp(e[1]).test(w)))),(t==null?void 0:t.high)||""}},Squarespace:{img:"^((?:static\\d\\.squarespace\\.com/static|images\\.squarespace-cdn\\.com/content)/[^?]+).*",to:function(){var e=arguments,t=e[1].replace(/-\d+(?:w|x\d+)(?=\.jpg)$/,"#-2500w #");return t==e[1]?t+"#?format=2500w #":t}},"SS.lv-s":{link:"^ss\\.lv/msg/(lv|ru)/.+\\.html$",res:function(e){var t=e._.indexOf('class="ads_photo_label">');if(t<0)return null;var a=e._.indexOf("</div></div><div",t);if(a<0)return null;for(var n=[],l=/<a href="([^"]+)"/gi,m=e._.substring(t,a),c=l.exec(m);c;)n.push([c[1]]),c=l.exec(m);return n},img:"^i\\.ss\\.lv/images/\\d{4}-\\d{2}-\\d{2}/\\d+/[^/]+=/\\d-1\\.th2\\.jpg$"},Startpage:{link:".*?startpage\\.com/av/anon-image\\?piurl=.+",url:function(){return""},res:function(e){return new URL(e[0]).searchParams.get("piurl")},img:".*?startpage\\.com/av/proxy-image\\?piurl=(.+)&sp=.+",to:function(){var e=arguments;const a=JSON.parse(document.documentElement.outerHTML.match(/UIStartpage\.AppSerp, (.+?)\),/)[1]).render.presenter.regions.mainline[0].results;for(const n in a)for(const l in a[n])if(typeof a[n][l]=="string"&&a[n][l].includes(e[1]))return"https://www.startpage.com"+a[n].clickUrl}},"StashApp-x":{img:"^(localhost:9999/image/.*?/)thumbnail(\\?.*)",to:"$1image$2"},SteamPowered:{img:"^((?:(?:cloud[-\\d]*|images\\.akamai)\\.steam(?:powered|usercontent)\\.com|steamuser(?:images|content)[^.]*\\.akamaihd\\.net)/ugc/\\d+/[\\dA-F]{40}).*",to:"$1/"},"SteamPowered_store-s":{img:"^((?:(?:cdn|shared)\\.(?:edgecast|akamai|cloudflare|fastly)\\.steamstatic\\.com|steamcdn-[a-z]\\.akamaihd\\.net)/(?:store_item_assets/)?steam/apps/\\d+/)(?:(movie)\\.\\d+x\\d+\\.|(\\w+))[^/]+$",to:function(){var e=arguments;return e[1]+(e[2]?e[2]+"_max.webm":e[3]+".jpg")}},"StopGame.ru":{img:"(stopga\\.me\\/images\\/uploads\\/images\\/\\d+\\/form\\/\\d+\\/\\d+\\/\\d+\\/)(?:normal|small)_(\\d+\\.(?:jpe?g|png|bmp))",to:"$1$2"},"StopGame.ru_2":{img:"(stopga\\.me\\/images\\/articles\\/\\d+\\/\\d+\\/\\d+\\/\\w+-\\d+)-s(\\.(?:jpe?g|png|bmp))",to:"$1$2"},"Streamable-h-p":{link:"^(streamable\\.com/)(?!about|documentation|privacy|terms|signup|login|tools|videos|albums|dashboard|search|clipper)(?:\\w/|album|ajax/groups/)?([\\da-z]+).*",url:"$1s/$2",res:function(e){if(e._=e._.match(/var videoObject = (\{[^\n]+\})/),!e._)return null;e._=JSON.parse(e._[1]);var t;return e._.group?(t=e._.name,e._=e._.group.videos):e._=[e._],e._.map(function(a,n){var l=a.files,m=[];return["mp4","webm","mp4-mobile","webm-mobile"].forEach(function(c,v){l[c]&&m.push((v<2?"#":"")+l[c].url)}),[m,(!n&&t?"["+t+"] ":"")+(e._.title||"")]})},img:"^cdn\\.(streamable\\.com/)video/[^/]+/([^.]+).*"},"Streamff-h":{link:"^(streamff\\.[a-z]{2,})/v/(.+)",res:function(e){return`https://ffedge.streamff.com/uploads/${e[2]}.mp4`},to:`

`},"Streamin|Cazn-h":{link:"^(?:cazn|streamin)\\.(?:one|me)/v/.*",res:function(e){return e._.match(/(?:og:video:secure_url["'] content=|<video src=)["']([^'"]+)/)[1]+"#mp4"}},"Streamlala-h":{link:"streamlala\\.com/\\w+",res:'<meta property="og:video:secure_url" content="([^"]+)">'},"Streamvi-h":{link:"^streamvi\\.com/watch(?:/|\\.php\\?video=)(\\d+).*",to:"//edge1.cdnvi.org/uploads/$1.mp4"},"StripDir-x-p":{link:"(stripdir.com/sd/\\?strip=[^&]*)",url:function(){var e=arguments;return e[1]+"&maxpp=all"},res:function(e){var t=new DOMParser().parseFromString(e._,"text/html"),a=t.querySelectorAll('img[id^="#sdimg"]'),n=Array.from(a).map(v=>v.src),l=e.base.replace(new RegExp("((https?://)?[/]).","gi"),"$1"),m=e.base.split("/");m.pop(),m=m.join("/");var c=n.map(function(v){return v=v.replace(/src="/gi,""),v.search(/https?:\/\//)==-1&&(v[0]=="/"?v=l+v:v=m+"/"+v),[v,""]});return c}},"Super-H.fr":{img:"^(img.super-h.fr/images/[0-9a-f]+)\\.(md|th)\\.(\\w+)",to:"$1.$3"},"Sutochno.ru-s":{link:"^sutochno.ru/front/searchapp/detail/(\\d+).*",url:function(){var e=arguments;return(()=>{debugger;if(!this.node.closest(".card__img, .card-map__img"))throw"";return"data:,"+e[1]})()},res:function(e){var v,w;const t=new XMLHttpRequest;t.open("GET",`https://sutochno.ru/api/json/objects/getObject?id=${e[1]}`,!1),t.setRequestHeader("Api-Version","1.10"),t.setRequestHeader("Token","Hy6U3z61fflbgT2yJ/VdlQ2719"),t.send();const a=JSON.parse(t.responseText).data,n=a.object.media.map(b=>[b.image_url,b.comment||""]),l=a.object.short_description,m=((w=(v=a.object.properties.detail_description)==null?void 0:v.properties)==null?void 0:w.find(b=>b.name==="description").value)||"",c=[`<b>${l}</b>`,m].join(`

`);return n.length&&(n[0][1]=`<imagus-extension type="sidebar">${c}</imagus-extension>`),this.TRG.IMGS_ext_data=n,{loop:"imagus://extension"}}},"Svadba-g":{img:"^(svadba\\.pro/images/(?:users/avatar|(photo))s/)(?:small|mini|medium)/([\\da-f]{32})",to:function(){var e=arguments;return e[1]+(e[2]?"medium/":"/")+e[3]}},"Svalko-g":{img:"(svalko\\.org/data/)thumbs/(\\w+\\.(?:jpe?g|bmp|png))",to:"$1$2"},"SVGshare|SVGur-h":{link:"svg(ur|share)\\.com/s/(\\w+)",img:"svg(ur|share)\\.com/s/(\\w+)",to:"svg$1.com/i/$2.svg"},"TBIB-x-p":{link:"tbib\\.org\\/index\\.php\\?page=post&s=view&id=\\d+",res:function(e){orig_img_url=e._.match(/href="([^"]*?)".{1,200}Original image/)[1];var t=[[orig_img_url,""]];return t}},"Telegraph.co.uk-p":{link:"^telegraph\\.co\\.uk/.+",img:"^(telegraph\\.co\\.uk/content/dam/[^?]+).*",to:function(){var n,l,m,c;var e=arguments;const t=!1;if(e[1])return"#"+e[1]+`
`+e[1]+"?imwidth=1280";let a=this.node;return a=(c=(m=(l=(n=a.closest("article"))==null?void 0:n.querySelector('img[src]:not([src*="%20"])'))==null?void 0:l.src)==null?void 0:m.match(/^([^?]+).*/))==null?void 0:c[1],!t&&(a!=null&&a.length)?"#"+a+`
`+a+"?imwidth=1200":""}},"Tenor-g":{link:"tenor\\.com/view/[\\w-]+",res:'<link class="dynamic" rel="image_src" href="([^"]+)">'},"TESall.ru":{link:"^media\\.tesall\\.(?:club|ru)/image/[\\w-]+"},"ThePlace.ru-g":{img:"^(theplace\\.ru/)cache/(archive/\\S+/img/\\S+)-gthumb-.+\\.jpg",to:"$1$2.jpg"},"Thetv.jp":{img:"^(thetv\\.jp/i/\\w+/\\d+/\\d+\\.jpg).*",to:`#$1?w=5000
$1?h=1200`},Thingiverse:{link:"(www\\.)?thingiverse\\.com\\/thing:(\\d+)",res:function(e){var t=[];if(x=new XMLHttpRequest,x.open("GET","https://api.thingiverse.com/things/"+e[2]+"/images",!1),x.setRequestHeader("Authorization","Bearer 56edfc79ecf25922b98202dd79a291aa"),x.send(),x.readyState==4&&x.status==200){var a=JSON.parse(x.responseText);return a.forEach(function(n){n.sizes.forEach(function(l){l.type=="display"&&l.size=="large"&&t.push([l.url,n.name])})}),t}}},"Threads-p":{link:"^threads\\.net/(@[\\w-]+/post/[\\w-]+)$",img:"^(?:[^/.]+\\.)*(?:fbcdn\\.net|cdninstagram\\.com)/(?:[^_]+_)+p\\d+x\\d+\\w*&.+",to:function(){var a,n;var e=arguments;const t=this.node;return e[1]?((a=t.offsetParent.offsetParent.querySelector("video[src]"))==null?void 0:a.src)||"":((n=t.querySelector("img[srcset]"))==null?void 0:n.src)||""}},"ThumbSnap-h-p":{link:"thumbsnap\\.com/(\\w/)?\\w+$",res:`<meta property="og:(?:image|video)" content="([^"]+)"
`},"Tiermaker-s":{img:"^tiermaker\\.com/images/chart/chart/.+",to:"$&"},"TIKTOK-p":{link:"^(?:(v[tm]\\.tiktok\\.com/\\w+|tiktok\\.com/(?:t/[^/]+|@[^/]+/live))|(?:m\\.)?(tiktok\\.com/)(?:(?:share|@[^/]+)/video|(?:embed/)?v2?|embed(?:/v\\d)?)(/\\d+)).*",url:function(){var e=arguments;return e[3]?"https://www.tiktok.com/embed/v2"+e[3]:e[0]},res:function(e){var m,c,v,w;if(!e[3]){if(e=JSON.parse(e._.match(/"__UNIVERSAL_DATA_FOR_REHYDRATION__" type="application\/json">({.+?})<\/script/)[1]).__DEFAULT_SCOPE__["webapp.video-detail"].itemInfo.itemStruct,/tiktok\.com$/.test(location.hostname)){let b=(m=e.author)==null?void 0:m.nickname,k=e.music,S=["["+new Date(e.createTime*1e3).toLocaleString()+"]","@"+b,e.desc,"&#9834;",k.authorName+" - "+k.title].join(" "),G=e.video.playAddr.length?e.video:e.imagePost.images.map((j,R)=>[j.imageURL.urlList[0],R?"":S]);return Array.isArray(G)?G:[(G.playAddr||G.downloadAddr)+"#mp4",S]}return this._TikTokTime=new Date(e.createTime*1e3).toLocaleString(),{loop:"https://www.tiktok.com/embed/v2/"+e.id}}e=JSON.parse(e._.match(/"__FRONTITY_CONNECT_STATE__" type="application\/json">({.+?})<\/script/)[1]).source.data[`/embed/v2${e[3]}`].videoData;let t=(c=e.authorInfos)==null?void 0:c.nickName,a=e.musicInfos,n=[((v=this._TikTokTime)==null?void 0:v.replace(/.*/,"[ $& ]"))||"","@"+t,(w=e.itemInfos)==null?void 0:w.text,"&#9834;",a.authorName+" - "+a.musicName].join(" "),l=e.itemInfos.video.urls[0];return delete this._TikTokTime,[l+"#mp4",n]},img:"^(v\\d+-webapp.*\\.tiktok\\.com/(?:[a-f\\d]+/[a-f\\d]+/)?video/tos.+)",to:function(){var e=arguments;const t=this.node;return(t.src?t.src:e[0])+"#mp4"}},TinyURL:{link:"^(tinyurl\\.com/[\\w-]{5,30})(?:$|\\?)",loop:1,url:function(){var e=arguments;return e[1]+"?"+Date.now()},res:'<meta property="og:url" content="([^"]+)'},"Tistory-g":{link:"^[^.]+\\.(?:(?:tistory|comnewb|tensornova|bskyvision|martian36|opnay|iconsketch|readiz|mintmeter)\\.com|(?:openipc|helpot|marketingplus|creativestudio|kinesis|bosim)\\.kr|donza\\.net)/\\d+$",img:"^[^.]+\\.daumcdn\\.net/thumb/[A-Z]\\d+x\\d+/.+fname=(http.+)",dc:2,to:function(){var a,n,l,m,c;var e=arguments;let t=this.node;return t=(c=(m=(l=(n=(a=t.parentNode)==null?void 0:a.parentNode)==null?void 0:n.querySelector('img[class="thumb_g"]'))==null?void 0:l.src)==null?void 0:m.match(/^.+fname=(http.+)/))==null?void 0:c[1],!e[1]&&t?decodeURIComponent(t):e[1]||""}},"TnAFlix-x-p":{useimg:1,link:"^(?:tnaflix.com/(?:[a-z]{2}/)?[\\w-]+/.+?/video(\\d+)|tnaflix\\.com/gallery/.+)",url:function(){var e=arguments;return e[1]?"https://www.tnaflix.com/ajax/video-player/"+e[1]:e[0]},res:function(e){if(e[1]){e=[...e._.matchAll(/<source src=\\"([^"]+)/g)];const t=Math.floor(e.length/2)-1;return[[e.flatMap((a,n)=>!n||n===t?(n?"":"#")+a[1].replace(/\\/g,""):[])]]}else{if(this.gallery||(this.gallery=[]),this.ls||(this.ls=0),this.gallery.push(...[...e._.matchAll(/<a class="no_ajax" href="([^"]+)/g)].map(t=>[t[1]])),/<link rel="next" href="/.test(e._)&&this.ls<25)return this.ls++,{loop:e._.match(/<link rel="next" href="([^"]+)/)[1]};{let t=this.gallery;return delete this.gallery,delete this.ls,t}}},img:"^(img\\.tnastatic\\.com/)[^/]+(/pics/alpha/[^.]+\\.(?:jpe?g|png))",to:"$1q80w900r$2"},"TopHotels.ru-s":{link:"^tophotels\\.ru/hotel/(\\w+)/media/(?:gallery$|list\\?type=(?:photo|(video)))",url:function(){var e=arguments;return e[2]?e[0]:`https://tophotels.ru/hotel/${e[1]}/media/fsg-items?tab=photos`},res:function(e){return e[2]?(this.TRG.IMGS_ext_data=[...e._.matchAll(/data-src="([h\/][^"]+)/g)].map(t=>/\/\/video\.tophotels\.ru|\.mp4\b/.test(t[1])?[t[1]+"#mp4",""]:["",`<imagus-extension type="iframe" url="${t[1].replace(/^\/\//,"https://")}"></imagus-extension>`]),{loop:"imagus://extension"}):(e=JSON.parse(e._).items||[],e.map(t=>[t.src,t.description]))},img:"^(?:(tophotels\\.ru/icache/(?:hotel|user)_photos/[0-9/]+_)\\d+x\\d+\\.|(video\\.tophotels\\.ru/poster/\\w+/(?:\\S/)?[^./]+\\.jpg))",loop:2,to:function(){var t;var e=arguments;return e[2]?((t=this.node.parentNode.firstElementChild)==null?void 0:t.getAttribute("data-src"))+"#mp4"||e[0]:e[1]+"#1600x1200 1140x820#."}},"toiimg-CDN":{link:"(static\\.toiimg\\.com/)[^/]+(/[^.]+\\.cms).*",img:"(static\\.toiimg\\.com/)[^/]+/([^.]+\\.cms).*",to:"$1photo$2"},"Toptoon-x-p":{link:"^toptoon\\.(?:com|net)/.*",img:"^(?:toptoon\\.(?:com|net)/|(?:shtosebzjw|twattraction)\\.akamaized\\.net/).*",to:function(){var t,a,n,l,m,c,v,w;const e=this.node;return e.src||((t=e.dataset)==null?void 0:t.src)||((n=(a=e.style["background-image"])==null?void 0:a.match(/url\("([^"]+)/))==null?void 0:n[1])||((w=(v=(c=(m=(l=e.parentNode)==null?void 0:l.querySelector('div[style^="background-image"]'))==null?void 0:m.style)==null?void 0:c.backgroundImage)==null?void 0:v.match(/url\("([^"]+)/))==null?void 0:w[1])||""}},TradingView:{link:"^tradingview\\.com/x/.+",res:`<main.+\\n?.+?<img.+?src=['"](\\S+)['"]`},"Trakt.tv":{img:"^(walter\\.trakt\\.tv/images/(?:[^/]+/)+?)(?:thumb|medium|large)/",to:"$1#full large#/"},Trampt:{link:"^trampt\\.com/item/[\\w-]+",res:function(e){var t,a,n,l,m;return((m=(l=(n=(a=JSON.parse(((t=e._.match(/"__NEXT_DATA__" type="application\/json">({.+?})</))==null?void 0:t[1])||"{}").props)==null?void 0:a.pageProps)==null?void 0:n.metadata)==null?void 0:l.images)==null?void 0:m.map(c=>["//img.trampt.com/"+c.original.location]))||""},img:"^(img\\.trampt\\.com/[^?]+).*",to:"$1"},"Tranny-x-p":{link:"^tranny\\.one/view/\\d+",res:'<video src="([^"]+)'},"TrannyTube-x-p":{link:"^(?:|[a-z]+)trannytube\\.(com|tv|net)+(\\/\\w+)+[\\w\\-\\.]+",res:'<source src="([^"]+)'},"TrannyVideosX-x-p-b":{link:"^trannyvideosx\\.com\\/video\\/[\\d]+\\/[\\w\\-]+",res:'source src="([^"]+)'},"TransPhoto-g":{img:"^(transphoto\\.org/photo/\\d+/\\d+/\\d+/\\d+)_s(\\.jpg)$",to:"$1.#jpg gif png#"},"Trinixy.ru-g":{link:"^trinixy\\.ru/\\d+-[\\w-\\.]+\\.html",res:function(e){var t=[],a,n,l=e._.indexOf('<img itemprop="image"');if(l>0){var m=e._.indexOf('<div class="clear"',l);if(m>0){var c=e._.substring(l,m);for(a=/src="([^"]+)" alt="([^"]+)"/gi,n=a.exec(c);n;)t.push([n[1],n[2]]),n=a.exec(c)}}for(a=/<source src="([^"]+)" type="video\/mp4">/gi,n=a.exec(e._);n;)t.push([n[1]+"#mp4"]),n=a.exec(e._);return t}},Tripadvisor:{link:"^tripadvisor\\.com/[\\w-]+\\.html",res:function(e){let t=[];try{let a=JSON.parse(JSON.parse(decodeURIComponent(/<script.+src="(data:text.+)/.exec(e._)[1]).match(/JSON.parse\((".+}")/)[1]));const n=JSON.parse(Object.values(a.urqlSsrData.results).find(l=>/mediaWindow\":/.test(l.data)).data);t.push(...n.mediaWindow.windowPanes[0].albums[0].mediaList.map(l=>[l.photoSizes.reduce((m,c)=>m.width>c.width?m:c).url,""]))}catch{}return t.length?t:[...new DOMParser().parseFromString(e._,"text/html").querySelectorAll(".mobile_flex_container img")].map(a=>[a.dataset.lazyurl.replace(/\/photo-\w\//,"/photo-o/")])},img:"^(?:dynamic-)?(media-cdn\\.tripadvisor\\.com/media/(?:[^/]+/)*?photo-)[a-z](?:/[\\dx]+)?(/(?:[\\da-f]{2}/){4}[^?]+).*",to:"$1#o s#$2"},"TrueImages.ru|prtscr.site-h":{link:"^(trueimages\\.ru|prtscr\\.site)/(view/)?\\w+$",res:'<meta property="og:image" content="([^"]+)"'},"TSModelsTube-x":{link:"^tsmodelstube\\.com/videos/[\\w-]+\\.html",res:'<source src="([^"]+)'},"Tuchong-g":{link:"^(?:[^.]+\\.(tuchong\\.com/)(?:(\\d+)|artist/[^~]+~)|(tuchong\\.com/)\\d+/(\\d+))(?!/?#image\\d+).*",url:function(){var e=arguments;return e[2]||e[4]?`//${e[1]||e[3]}rest/posts/${e[2]||e[4]}`:e[0]},res:function(e){if(!e[2]&&!e[4])return e=e._.match(/searchResult=([^;]+)/),e=e&&JSON.parse(e[1]).hits||[],e.map(n=>["https://cdn"+[3,6,9][Math.floor(Math.random()*3)]+"-banquan.ituchong.com/weili/image/l/"+n.image_id+".jpg",n.title]);var t,a="http://photos."+(e[1]||e[3]);return e=JSON.parse(e._),!e||!e.images?null:(t=e.post?[e.post.title,e.post.exerpt].filter(Boolean).join(" - "):"",t=t?"["+t+" by "+e.post.author.name+"] ":"",e=e.images,e&&e.length?e.map(function(n,l){return[a+n.user_id+"/f/"+n.img_id+".jpg",(!l&&t?t:"")+[n.title,n.description].filter(Boolean).join(" - ")]}):null)},img:"^(?:(photos\\.tuchong\\.com/\\d+/)(?!f/)[^/]+|(cdn\\d+-banquan\\.ituchong\\.com/weili/image/)[a-z]{1,3}(/\\d+\\.)\\w+)",to:function(){var e=arguments;return e[1]?e[1]+"f":`${e[2]}l${e[3]}#jpg jpeg png#`}},"Tudocdn-CDN":{link:"^(?:[a-z]+\\.)?tudocdn\\.net/\\d+",to:"$&"},"Tumbex-g-p":{link:"^tumbex\\.com/[^.]+\\.tumblr/post/\\d+",loop:1,res:function(e){var t,a;return((a=JSON.parse(((t=e._.match(/window\.launcher\(({.+?}), /))==null?void 0:t[1])||"{}").params)==null?void 0:a.content.posts[0].blocks[0].content.filter(n=>{var l;return n.hd||((l=n.media)==null?void 0:l.url)||n.url}).map(n=>{var l;return n.hd?[["#"+n.hd,n.md]]:[((l=n.media)==null?void 0:l.url)||n.url]}))||""}},"TUMBLR-2-g-p":{link:"^(\\d\\d\\.media\\.tumblr\\.com/[\\da-f]{32}/[\\da-f]{16}-\\w\\w/)s\\d+x\\d+(/[\\da-f]+\\.\\w+)",res:`:
`,img:"^(\\d\\d\\.media\\.tumblr\\.com/[\\da-f]{32}/[\\da-f]{16}-\\w\\w/)s\\d+x\\d+(?:_\\w+)?(/[\\da-f]+\\.\\w+)",to:function(){let t=this.node.getAttribute("srcset").split(/ \d+w,? ?/);return t[t.length-2]}},"TUMBLR_video-g-p":{img:"(va\\.media\\.tumblr\\.com/tumblr_\\w+\\.mp4)",to:"$1"},"TurboImageHost-h":{link:"^turboimagehost.com/p/\\d+/.*",res:'="og:image" content="([^"]+)'},"tv2.no":{img:"^(breaking-general\\.aws\\d\\.tv2\\.no/post/[a-f0-9]+/[a-f0-9]+)/resized/750x0",to:`#$1
$1/resized/1500x0`},"Twibooru-x":{img:"^(cdn.twibooru.org/img.+/).+",to:"#$1full.#png jpg jpeg gif webp mp4 webm#"},TWITCH:{img:"^(static-cdn\\.jtvnw\\.net\\/)(?:((?:ttv-boxart|(j)tv_user_pictures|(p)reviews-ttv)\\/[^?\\/]+)[-_]\\d+x\\d+(\\.[^?]+).*|((emoticons|badges)\\/[^.]+\\/)\\d+)",to:function(){var e=arguments;return e[1]+(e[2]?e[2]+(e[3]?"-600x600":e[4]?"-0x0":"")+e[5]:e[6]+(e[7][0]=="b"?3:5))}},"TWITCH_clips-q":{link:"^(?:clips\\.twitch\\.tv/(?:embed\\?clip=)?|(?:m\\.)?twitch\\.tv/(?:\\w+/)?clip/)([\\w-]+).*",url:function(){return""},res:function(e){var t=this,a=new XMLHttpRequest;return a.open("POST","https://gql.twitch.tv/gql"),a.timeout=3e3,a.setRequestHeader("Client-ID","kimne78kx3ncx6brgo4mv6wki5h1ko"),a.send('[{"operationName":null,"variables":{},"query":'+JSON.stringify('{clip(slug:"'+e[1]+'"){broadcaster{displayName} createdAt game{name} video{id} title}}')+'},{"operationName":"VideoAccessToken_Clip","variables":{"slug":"'+e[1]+'"},"extensions":{"persistedQuery":{"version":1,"sha256Hash":"36b89d2507fce29e5ca551df756d27c1cfe079e2609642b4390aa4c35796eb11"}}}]'),a.onloadend=function(){const n=JSON.parse(this.responseText),l=n[0].data.clip,m=n[1].data.clip,c=m.playbackAccessToken.signature,v=JSON.parse(m.playbackAccessToken.value);t.prepareCaption(t.node,"["+(l.game&&l.game.name)+"] "+[l.title,l.broadcaster&&l.broadcaster.displayName,new Date(l.createdAt).toLocaleString(),l.video&&"https://twitch.tv/videos/"+l.video.id].filter(Boolean).join(" | ")),t.set(m.videoQualities.sort((w,b)=>parseInt(b.quality)-parseInt(w.quality)).map(function(w,b){return(b?"":"#")+(w.sourceURL+"?sig="+c+"&token="+encodeURIComponent(JSON.stringify(v)))}))},null}},"TWITCH_Video+Live":{link:"^(?:m\\.)?twitch\\.tv/(?:(?!directory|downloads|jobs|store|twitchartists|turbo|privacy)(\\w+)$|(?:\\w+/)?videos/(\\d+))",url:"data:,$&",res:function(e){const t=e[1]?"api/channel/hls":"vod",a=new XMLHttpRequest,n=["A","B","C","D","E","F","0","1","2","3","4","5","6","7","8","9"];a.open("POST","https://gql.twitch.tv/gql",!1),a.setRequestHeader("Client-ID","kimne78kx3ncx6brgo4mv6wki5h1ko"),a.send(`{"operationName":"PlaybackAccessToken_Template","query":"query PlaybackAccessToken_Template($login: String!, $isLive: Boolean!, $vodID: ID!, $isVod: Boolean!, $playerType: String!, $platform: String!) {  streamPlaybackAccessToken(channelName: $login, params: {platform: $platform, playerBackend: \\"mediaplayer\\", playerType: $playerType}) @include(if: $isLive) {    value    signature   authorization { isForbidden forbiddenReasonCode }   __typename  }  videoPlaybackAccessToken(id: $vodID, params: {platform: $platform, playerBackend: \\"mediaplayer\\", playerType: $playerType}) @include(if: $isVod) {    value    signature   __typename  }}","variables":{"isLive":${e[1]?"true":"false"},"login":"${e[1]||""}","isVod":true,"vodID":"${e[2]||""}","playerType":"site","platform":"web"}}`);const l=Math.floor(999999*Math.random()),m=JSON.parse(a.responseText).data[(e[1]?"stream":"video")+"PlaybackAccessToken"];let c="";for(i=0;i<32;i++)c+=n[Math.floor(Math.random()*16)];const v=`https://usher.ttvnw.net/${t}/${e[1]||e[2]}.m3u8?acmb=eyJBcHBWZXJzaW9uIjoiYjlhNjU4ZWMtMTcyMS00Y2FjLThkMjgtZjk0NmJmY2E3YzUwIn0%3D&allow_source=true&p=${l}&platform=web&play_session_id=${c}&sig=${m.signature}&supported_codecs=av1,h264&token=${encodeURIComponent(m.value)}&transcode_mode=cbr_v1`;return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${v}"></imagus-extension>`],{loop:"imagus://extension"}}},"uDrop-h":{link:"^(udrop\\.com/)([^/]+/[^./]+\\.(?!7z|exe|msi|pdf|rar|zip)\\w{3,4}\\b)",img:"^(udrop\\.com/)cache/plugins/(?:filepreview|mediaconvert)er/\\d+/[^.]+\\.(?:jpe?|pn)g",to:function(){var t,a;var e=arguments;return((a=(t=this.node.parentNode)==null?void 0:t.parentNode)==null?void 0:a.className)==="thumbIcon"?null:e[1]+"file/"+(e[2]||location.hostname==="www.udrop.com"&&location.pathname.slice(1))}},"Upload.ee-h":{link:"^(upload\\.ee/)(?:files/|gallery/\\d+/[^?]+\\?vid=)(\\d+).*",loop:1,res:'="(https?://www.$1(?:image|download)/$2[^"]+)',img:"^(upload\\.ee/)(?:thumb|preview|files)(/.+\\.(?:jpe?g|a?png|gif|bmp))(\\.html)?$",to:"$1image$2"},"UploadBETA-h":{useimg:1,link:"uploadbeta\\.com/share-picture/\\w+",res:`Full Image Resolution: <a href=["']([^"']+)`,img:"(uploadbeta\\.com/_s/upload/[^.]+\\.[a-z]{3,4}).*",to:"$1"},"UploadDeImagens.com.br-h":{link:"uploaddeimagens\\.com\\.br/imagens/\\w+",res:'<a class="fancybox" href="([^?"]+)'},"UploadHouse-h":{link:"^(.*)uploadhouse\\.com/imgs/\\d{8}/",res:'value=\\"\\[img\\](.+(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?)))\\[/img\\]'},"Uploadir-h":{link:"uploadir\\.com/(\\d+/)(.*)",loop:1,res:'<(?:div style="padding: 20px;">|source)[^<s]+(?:<img src="|src=")([^"]+)'},UrleBird_TikTok:{link:"^urlebird\\.com/(?:[a-z]{2}/)?(?:video|song)/(?:[^-/]+-)*(\\d+)/.*",res:function(e){var a;const t=(a=e._.match(/="og:(?:vide|audi)o" content="([^"]+)/))==null?void 0:a[1];return t!=null&&t.length?[t+"#mp4",e._.match(/="og:description" content="([^"]+)/)[1]]:{loop:`//www.tiktok.com/embed/v2/${e[1]}`}}},"Userapi_sun*-CDN":{link:"sun\\d{1,2}-\\d{1,2}\\.userapi\\.com\\/\\w{7}\\/\\w{10}\\/\\w{5,6}\\/[\\w-]{11}\\.(?:jpe?g|png|bmp|gif)"},Userstyles:{img:"^(userstyles\\.org/(?:auto_)?style_screenshot)(?:_thumbnail)?(s/\\d+[_-]after)(?:-thumbnail)?(\\.(?:jpe?g|png|gif)\\?r=\\d+)$",to:"$1$2$3"},"Utkonos.ru-s":{link:"^utkonos\\.ru/item/(\\d+)",url:"data:,$&",res:function(e){const t=new XMLHttpRequest;t.open("Get",e[0],!1),t.send();const a=t.responseText.match(/class="product-tab_content"><p _ngcontent-ng-c4047868991="">([^<]+)/)[1];return[...t.responseText.matchAll(/src="(https:\/\/[^\/]+\/resample\/)webp\/50x50([^"]+)/g)].map(n=>[["#"+n[1]+"0x0"+n[2],n[1]+"900x900"+n[2]],a])},img:"^(scdn\\.utkonos\\.ru/resample/)webp/(\\d+)x\\d+(/photo/(\\d+)/(?:[a-f0-9_-]+|(\\d+)[A-Z])\\.[a-z]+)",loop:2,to:function(){var e=arguments;return e[2]==="250"&&this.node.className==="lu-product-card-image ng-star-inserted"?"https://www.utkonos.ru/item/"+(e[5]||e[4]):"#"+e[1]+"0x0"+e[3]+`
`+e[1]+"900x900"+e[3]}},Vero:{link:"^vero/\\?album(.*)",url:"data:,$1",res:function(e){return[...this.node.closest('div[class="slick-track"]').children].map(t=>[["#"+t.firstElementChild.src.match(/^[^_]+/),t.firstElementChild.src.replace(/_\d+x\d+/,"_c1246x1246")]])},img:"^(?:(d1dpu3msttfsqg\\.cloudfront\\.net/[a-f0-9-]{36}/[a-f0-9-]{36})_\\d+x\\d+(\\.[a-z]{3,4})|(d2hzlifut58gpa\\.cloudfront\\.net/[a-f0-9-]{36}/[a-f0-9-]{36}/)p0)",loop:2,to:function(){var e=arguments;return this.node.alt==="Album image"?"//vero/?album"+e[0]:e[3]?e[3]+"v0#mp4":`#${e[1]}
${e[1]}_c1246x1246${e[2]}`}},"VFL.ru-h":{link:"^vfl\\.ru/fotos/(\\w{8})(\\d+)(?:.*)\\.html$",res:"(//images\\.vfl\\.ru/ii/\\d+/\\w{8}/\\d+\\.(?:jpe?g|png|bmp|gif))",img:"(images\\.vfl\\.ru\\/ii\\/\\d+\\/\\w{8}\\/\\d+)_[ms](\\.(?:jpe?g|png|bmp|gif))",to:"$1$2"},"VG.no_TV-h":{link:"^tv\\.vg\\.no/video/\\d+/",res:function(e){const t=JSON.parse(e._.match(/window.ASSET = ({.+?);/)[1]).streamUrls;return t.mp4?t.mp4:(this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1920" height="1080"></svg>',`<imagus-extension type="videojs" url="${t.hls}"></imagus-extension>`],{loop:"imagus://extension"})}},"Vidble-h":{useimg:1,link:"^(vidble\\.com/)(?:(?:show|explore[^/]*|album)/|watch\\?v=)([\\da-zA-Z]+).*",res:function(e){var t=e._.match(RegExp("src='/[\\da-zA-Z]+(_[^.]*)?\\.[^']+","g")),a=e._.match(/<h2[^>]*>([^<]+)/),n="http://"+e[1];return t&&t.map(function(l,m){return["#"+n+l.replace(/_[^.]+/,""),!m&&a&&a[1]]})},img:"^(vidble\\.com/[\\dA-Za-z]+)(?:_[^.]+)?\\.",to:"#$1."},"Vimeo-h":{link:"^(.*\\.)?vimeo\\.com\\/(?!($|for-|user\\d|groups(?!.*\\/videos\\/\\d)|.*?\\/(collections|likes)|((?!\\d+\\/?($|\\?))[^\\/]*?)?(\\/?$|\\?|#)|channels(?!\\/(.*?\\/\\d+))|(((categories|showcase|videoschool|watch|live|log.?in|faq|join|blog|pro|s|help|staff|hc|stock|solutions|settings|features|enterprise|vicdigital|ondemand|store|up(grade|load)|create|cart|ott|site|domain|jobs|about|terms|privacy|dmca|cookie_policy))($|\\/|\\?|#)))).*",loop:1,res:function(e){var S,G;let t;if(e._.match(/^\{/))return b(e._);const n=e._.match(/config_url":".*?"/);if(n)return t=n[0].replace(/config_url":"(.*)?"/,"$1").replace(/\\\//g,"/"),t;const l=(S=e._.match(/<meta property="og:video:url" content="(.+?)"/))==null?void 0:S[1];if(l)return l.replace(/&amp;/g,"&");const m=e._.match(/{.+"progressive":\[.*?\].+}/);if(m)return b(m[0]);let c=e._.match(/ content="https:\/\/vimeo\.com\/channels\/.*?\/\d+"/);if(c){c=c[0].replace(/.*\/channels\/.*?\/(\d+)"/,"$1");const j=new RegExp(`data-config-url=".*?\\/${c}.*?"`),R=e._.match(j);if(R)return t=R[0].replace(/data-config-url="(.*?)"/,"$1").replace(/&amp;/g,"&"),t}const v=(G=e[0].match(/\/(\d+)(\?|\/|$)/))==null?void 0:G[1],w=`https://player.vimeo.com/video/${v}?autoplay=1`;if(v&&w!=e[0])return w;function b(j){j=JSON.parse(j);const R=j.request.files.progressive;if(R!=null&&R.length)return k(R);const M=j.request.files.hls.cdns;return(M.akfire_interconnect_quic||M.google_mediacdn).url}function k(j){let R=j[0].width,M=j[0].url;for(let P=0;P<j.length;P++)j[P].width>R&&(R=j[P].width,M=j[P].url);return M}}},"Vipr|Vipergirls-h-x-p":{url:"$1$2",res:function(e){let t=document.querySelector('head > meta[name="referrer"]');return t?t.attributes.content.value!=="same-origin"&&(t.attributes.content.value="same-origin"):(t=document.createElement("meta"),t.name="referrer",t.content="same-origin",document.getElementsByTagName("head")[0].appendChild(t)),[(e._.match(/src="(https?:\/\/[^"]+)" (?:\w+="[^"]+"\s+)*?(?:class="pic|id="[^"]+"\s*>)/)||[])[1]]},img:"^i\\d\\.(vipr\\.im\\/)th\\/\\d{5}\\/(\\w+)\\.jpe?g$"},"VixenMediaGroup-x-q-p":{link:"(vixen|tushy|tushyraw|blacked|blackedraw|slayed|deeper|milfy)\\.com/videos/.+",url:"data:,$&",res:function(e){var c,v,w,b,k;const a=new XMLHttpRequest;a.open("GET",e[0],!1),a.send(),e._=a.responseText;const n=(v=(c=e._.match(/(?:videoTokenId|newId)":"(?<id>\d+)/))==null?void 0:c.groups)==null?void 0:v.id;if(!n||(a.open("POST",`https://www.${e[1]}.com/graphql`,!1),a.setRequestHeader("Content-Type","application/json"),a.send(`{"operationName":"getToken","variables":{"videoId":"${n}","device":"trailer"},"query":"query getToken($videoId: ID!, $device: Device!) {generateVideoToken(input: {videoId: $videoId, device: $device}) {p270 {token}p360 {token}p480 {token}p720 {token}p1080 {token}p2160 {token}}}"}`),a.status!==200))return;let l={};try{l=(b=(w=JSON.parse(a.responseText))==null?void 0:w.data)==null?void 0:b.generateVideoToken}catch{return}return((k=Object.keys(l).map(S=>{var G;return{res:Number(S.replace(/\D/g,"")),url:(G=l[S])==null?void 0:G.token}}).filter(S=>S.res<=900).sort((S,G)=>S.res-G.res).pop())==null?void 0:k.url)||null}},"VK-2-h":{link:"^(?:vk\\.com/(?:([\\w.]+)\\?pfp_thumb$|(doc[0-9_]+\\?hash=)|(video_ext\\.php\\?oid=-?\\d+&id=\\d+)|(album-?[0-9_]+)|[\\w-]+\\?(?:own=1&)?(z=photo-|reply=)|(video-\\d+_\\d+)\\?list=).*|vk_album/(?:([^!]+)!)?(.+))",url:function(){var e=arguments;return(()=>{var l,m,c,v,w;this.enable_on_video=!0;const t=this.node,a=(m=(l=(t.IMGS_TRG||t).closest('div[class^="ui_gallery__inner"]'))==null?void 0:l.querySelector("div[data-list-id]"))==null?void 0:m.getAttribute("data-list-id"),n=(v=(c=(t.IMGS_TRG||t).closest('div[class^="ui_gallery__inner"]'))==null?void 0:c.querySelector("div[data-photo-id]"))==null?void 0:v.getAttribute("data-photo-id");if(!this.enable_on_video&&(e[3]||e[6]))throw"";return e[1]?"//vk.com/"+e[1]:e[6]&&(t.IMGS_TRG||t).getAttribute("data-list")?"data:,"+e[6]:!e[2]&&!e[3]&&!e[5]&&!(t.IMGS_TRG||t).getAttribute("data-list")&&((w=t.parentNode)==null?void 0:w.className)!=="lnk"&&t.className!=="MediaGrid__imageElement"&&(e[4]||e[6]||e[7]||e[8]||a)?"https://vk.com/al_photos.php?act=show :act=show&al=1"+(e[4]||e[7]||a?"&list="+(e[4]||e[7]||a):"")+(e[8]||n?"&photo="+(e[8]||n):""):e[0]})()},res:function(e){var a,n,l,m,c,v,w,b,k,S,G,j,R,M;if(e[1]){const P=[...e._.matchAll(/"photo_\d+":"(https:\\\/\\\/sun[\-0-9]+\.userapi\.com\\\/(?:s\\\/v1\\\/i\w\d\\\/[^.]+\.jpg\?quality=\d+&crop=(?:\d+,?)+&as=(?:(\d+x\d+),?)+&ava=\d&u=[^&]+&cs=|impf\\\/[^"]+))[^"]*/g)].pop();return P!=null&&P.length?P[2]?P[1].replace(/\\/g,"")+P[2]:P[1]:""}if(e[2])return(a=e._.match(/"docUrl":"([^"]+)/))==null?void 0:a[1].replace(/\\/g,"");if(e.base[0]==="d")return{loop:"//vk.com/"+e[6]};if(e[3]||e[4]||e[6]||e[7]||e[8]){let P,L=this.node;if(this.vk_data=this.vk_data||{},this.vk_data.vids=this.vk_data.vids||[...((n=L.closest(".post_content"))==null?void 0:n.querySelectorAll('div[class="VideoPrimaryAttachment__thumbWrapper"]>a[data-video]'))||[]],this.vk_data.vid_length=this.vk_data.vid_length||this.vk_data.vids.length,this.vk_data.vid_num=this.vk_data.vid_num||0,this.vk_data.gallery_length=this.vk_data.gallery_length||((m=(l=L.closest(".post_content"))==null?void 0:l.querySelectorAll('div[class^="PhotoPrimaryAttachment__"]'))==null?void 0:m.length),this.vk_data.album=this.vk_data.album||[],this.loop_stop=this.loop_stop||0,this.loop_stop++,this.enable_on_video&&e[3]||e[6]&&(L.getAttribute("data-list")||((c=L.parentNode)==null?void 0:c.className)==="lnk"||L.className==="MediaGrid__imageElement")){if(e=JSON.parse(((v=e._.match(/var playerParams = ({.+?});/))==null?void 0:v[1])||((w=e._.match(/'al_video\.php[^[]+(.+])\)/))==null?void 0:w[1])||"{}"),e=((S=((k=(b=e[4])==null?void 0:b.player)==null?void 0:k.params)||e.params)==null?void 0:S[0])||[],e.extra_data)return{loop:"https://www.youtube.com/embed/"+e.extra_data};e=Object.entries(e).filter(V=>/^url\d+$/.test(V[0])).map(V=>V[1]).reverse(),e!=null&&e.length&&this.vk_data.album.push([["#"+e[0]+"#mp4",e[Math.floor(e.length/2)]+"#mp4"]])}else{const V=e[4];e=JSON.parse(e._.slice(e._.indexOf("{"))).payload[1],P=e[1],e=e[3]||[];const J=e.length?e[e.length-1].id:"";if(e=e.flatMap((N,U)=>this.vk_data.album.some(W=>W[0][1]===(N.z_src||N.y_src||N.x_src))?[]:[[[N.w_src?"#"+N.w_src:"",N.z_src||N.y_src||N.x_src]]]),this.vk_data.gallery_length===1&&(e=[e[4]]),this.vk_data.album.push(...e),(!this.vk_data.gallery_length||this.vk_data.gallery_length>1)&&this.vk_data.album.length<P&&this.vk_data.album.length<300&&e.length>0&&this.loop_stop<150)return{loop:"//vk_album/"+(V?V+"!":"")+J}}const C=(G=this.vk_data.vids[this.vk_data.vid_num])==null?void 0:G.getAttribute("data-video").split("_");return this.vk_data.vid_num++,this.enable_on_video&&C?{loop:"https://vk.com/video_ext.php?oid="+C[0]+"&id="+C[1]}:(e=this.vk_data.album,delete this.vk_data,delete this.loop_stop,e)}return e=(R=(j=JSON.parse(e._.match(/{"zFields"[^\)]+/)[0]))==null?void 0:j.zOpts)==null?void 0:R.temp,e&&(e.w||e.w_||e.z||e.z_||e.y||e.y_||e.x||e.x_)?[[[(e.w||e.w_)&&"#"+(e.w||e.w_),(M=e.z||e.z_||e.y||e.y_||e.x||e.x_)==null?void 0:M[0]]]]:!1},img:"^(sun[\\-0-9]+\\.userapi\\.com/)(?:.+?size=[\\dx]+&quality=\\d+&sign=\\w+|([^.]+\\.jpg\\?)(quality=\\d+(?:&crop=(?:\\d+,?)+)?&as=(?:(\\d+x\\d+),?)+&(?:(?:ava=\\d|from=\\w+)&u=[^&]+&cs|sign)=|size=\\d+x\\d+&quality=\\d+&crop=)).*",loop:2,to:function(){var m;var e=arguments,t,a=this.node,n=a&&a.parentNode;if(e[3]&&(n.href||a.href))return t=n.href||a.href,t?t+"?pfp_thumb":"";if(location.hostname==="vk.com"&&a){if((t=a.getAttribute("onclick"))&&t.indexOf("showPhoto(")>0)return a=JSON.parse(t.match(/(\{.+\})/)[0]).temp,a=(a.w?"#"+a.w+`
`:"")+(a.z||a.y||a.x),a!=null&&a.length?a:(t=t.match(/showPhoto\('([^']+)',\s*'([^']+)/),location.hostname+location.pathname+(location.search==="?own=1"?location.search+"&":"?")+"z=photo"+t[1]+"/"+t[2]);if(t=n.getAttribute("data-photo-id")){var l=n.getAttribute("data-list-id");return((m=n.parentNode)==null?void 0:m.className)==="PhotoPrimaryAttachment PhotoPrimaryAttachment--thinBorder PhotoPrimaryAttachment--inCarousel"?"//vk_album/"+l+"!"+t:location.hostname+location.pathname+"?z=photo"+t+(l?"/"+l:"")}}return e[0]}},VK_Play:{link:"^live\\.vk(?:play|video)\\.ru(/\\w+)(/(record|clip)/[a-f0-9-]+|$).*",url:function(){var e=arguments;return`https://api.live.vkvideo.ru/v1/${e[3]==="clip"?"channel"+e[1]:"blog"+e[1]+"/public_video_stream"}${e[2]}`},res:function(e){var n,l,m,c,v,w,b,k;let t=JSON.parse(e._).data;if(!t)return"";if(e[2]){if(t=(m=(l=(n=t[e[3]])==null?void 0:n.data[0])==null?void 0:l.playerUrls)==null?void 0:m.filter(j=>j.url),!t)return"";const S=((c=t.find(j=>j.type==="quad_hd")||t.find(j=>j.type==="ultra_hd")||t.find(j=>j.type==="full_hd")||t.find(j=>j.type==="high"))==null?void 0:c.url)||"",G=((v=t.find(j=>j.type==="medium")||t.find(j=>j.type==="low")||t.find(j=>j.type==="lowest")||t.find(j=>j.type==="tiny"))==null?void 0:v.url)||"";return S||G?[[[S&&"#"+S+"#mp4",G?G+"#mp4":""]]]:""}const a=(k=(b=(w=t[0])==null?void 0:w.playerUrls)==null?void 0:b.find(S=>S.type==="live_hls"))==null?void 0:k.url;return this.TRG.IMGS_ext_data=['//data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360"></svg>',`<imagus-extension type="videojs" url="${a}"></imagus-extension>`],a?{loop:"imagus://extension"}:""}},"VK_video-h-q":{link:"^(?:m\\.)?(vk(?:video)?\\.(?:com|ru)/)(?:(?:playlist/[\\w-]+/)?video|(?:clips/[a-z]+\\?z=)?clip)(-?\\d+_\\d+).*",url:"https://$1al_video.php?act=show :al=1&video=$2",res:function(e){const a=JSON.parse(e._.slice(e._.indexOf("{"))).payload[1][4].player.params[0];return[(l=>l[Object.keys(l).reduce((m,c)=>/^url\d+$/.test(c)&&Number(c.slice(3))<=1080&&Number(c.slice(3))>Number(m.slice(3))?c:m,"")])(a)+"#mp4",a.md_title]}},Vogue:{link:"^(?:vogue\\.com/video/.+|voguegallery/(.*)$)",url:function(){var e=arguments;return e[1]?"data:"+e[1]:e[0]},res:function(e){var n,l;if(e[1])try{let m=Object.values(JSON.parse([...document.scripts].find(c=>RegExp(`${e[1]}`).test(c.textContent)).textContent.match(/^[^{]+({.+?});/)[1]).transformed.article.body).find(c=>{var v,w;return((w=(v=c[1])==null?void 0:v.props)==null?void 0:w.contentType)==="gallery"})[1].props.slides.map(c=>[["#"+c.image.sources.md.url.replace(/\/w_\d+[^/]+/,""),c.image.sources.md.url],c.dangerousHed]);return m=m.concat(m.splice(0,m.findIndex(c=>RegExp(`${e[1]}`).test(c[0])))),m}catch{return(l=this.node.src)==null?void 0:l.replace(/\/(?:4:3\/[^/]+|master\/w_[^/]+)/,"/master")}else{const m=(n=JSON.parse((e._.match(/__PRELOADED_STATE__ = ({.+?});/)||[,"{}"])[1]).transformed)==null?void 0:n.video;return m?[m.sources.mp4.src,m.title+" | "+m.description]:null}},img:"^(?:(images\\.vogue\\.it/photovogue/[^_]+_)admin-thumbnail|(assets\\.vogue\\.com/photos/([^/]+)/.+)|vogue\\.com/(?:photovogue/photos|article)/.*|dwgyu36up6iuz\\.cloudfront\\.net/.+)",ci:2,loop:2,to:function(){var t,a,n,l,m;var e=arguments;return e[3]&&RegExp(`"slides":\\[.+?"id":"${e[3]}","`).test(document.body.textContent)?"//voguegallery/"+e[3]:e[1]?e[1]+"gallery":e[2]?e[2].replace(/\/(?:4:3\/[^/]+|master\/w_[^/]+)/,"/master"):/cloudfront/.test(e[0])&&/\/video/.test(this.node.baseURI)?((a=(t=this.node.closest(`div[data-in-view='{"pattern":"SummaryItem"}']`))==null?void 0:t.querySelector('a[href^="https://www.vogue.com/video/"]'))==null?void 0:a.href)??e[0]:((n=this.node.src)==null?void 0:n.replace("admin-thumbnail","gallery"))??((m=(l=this.node.parentNode.parentNode.parentNode.querySelector("img[src]"))==null?void 0:l.src)==null?void 0:m.replace(/\/(?:4:3\/[^/]+|master\/w_[^/]+)/,"/master"))??""}},"Vprok.ru-s":{link:"^(zoo\\.)?vprok\\.ru/product/[\\w-]+",res:function(e){const t=JSON.parse(e._.match(/__NEXT_DATA__[^{]+(.+)<\/script>/)[1]),a=t.props.pageProps.initialStore.productPage.product.images.map(n=>[n.url.replace("<SIZE>","x1400"),""]);return a.length>0&&(a[0][1]=t.props.pageProps.initialStore.productPage.product.description),a.length?a:!1},img:"^(media\\.vprok\\.ru/.+)/x\\d+/(.+)",to:"$1/x1400/$2"},"vsco-x":{img:"^(?:i(?:m(?:age(?:-aws[\\w-]+)?)?)?)(\\.vsco\\.co/)(?:[^/]{1,23}/)*?([\\da-f]{24}).*",to:"//i$1$2"},"VseInstrumenti.ru-s":{link:"^(\\w+\\.)?vseinstrumenti\\.ru\\/product\\/",res:function(e){const t=[],a=/__NUXT__.+/.exec(e._)[0],n=/guid:"(.+?)"/.exec(a)[1],l=JSON.parse(/productImages:\s*(\[.+?\])/.exec(a)[1]);try{const m=JSON.parse(/customerImages:\s*(\[.+?\])/.exec(a)[1]);l.push(...m)}catch{}for(let m of l)t.push([m.replace(/\/\d+x\d+\//,"/1200x800/")]);try{const m=new XMLHttpRequest;m.open("GET",`https://bff.vseinstrumenti.ru/product/reviews?guid=${n}&sortBy=createdAt&sortDirection=desc&hasImages=true&itemsPerPage=40&page=1`,!1),m.withCredentials=!0,m.send();const c=JSON.parse(m.responseText);for(let v of c.reviews)for(const w of v.images){const b=[v.productRating+"&#11088;"];v.content.advantages&&b.push("&#128077;&#127995; "+v.content.advantages),v.content.disadvantages&&b.push("&#128078;&#127995; "+v.content.disadvantages),v.content.comment&&b.push(v.content.comment),v.content.reasonToBuy&&b.push(v.content.reasonToBuy),t.push([w.replace("{width}x{height}","1200x800"),b.join(" | ")])}}catch(m){console.error(m)}return t},img:"(cdn\\.vseinstrumenti\\.ru/images/(?:responses|goods)/.+)/\\d+x\\d+/(.+\\.jpg)",to:`$1/1200x800/$2
`},"Vsemayki.ru-s":{link:"^vsemayki\\.ru/product/.+",res:function(e){return e=JSON.parse(e._.match(/"__NEXT_DATA__" type="application\/json">(.+?)<\/script/)[1]).props.initialReduxState.application.tagmanagerEvents[1].payload.sides,e.map(t=>[["#"+t.big.replace("500.","700."),t.big]])},img:"^(storage\\.vsemayki\\.ru/images/(?:\\d+/)+previews/(?:[^_]+_)+)\\d+\\.",to:`#$1700.
$1500.`},"Wallhaven-g":{link:"^(wallhaven\\.cc/)w/(([\\da-z]{2})[\\da-z]{4}).*",img:"^th\\.(wallhaven\\.cc/)[^/]+/\\w\\w/(([\\da-z]{2})[\\da-z]{4}).*",to:"w.$1full/$3/wallhaven-$2.#jpg png#"},"WallHere-g":{link:"^(wallhere\\.com/)\\w\\w/(wallpaper)/(\\d+).*",img:"^c\\.(wallhere\\.com/)photos/\\w\\w/\\w\\w/([^.]+)-(\\d+).*",to:"get.$1photo/$2-$3.jpg"},"WALMART-s-p":{link:"^walmart.com/ip/.+/\\d+",res:function(e){const t=[],a=JSON.parse(/"allImages":\s*(\[.+?\])/.exec(e._)[1]);for(let n of a)t.push([n.url]);return t},img:"^(i\\d\\.walmartimages\\.com/[^?]+).+",to:"$1"},"Weasyl-g":{link:"^(weasyl\\.com)/(?:~[^/]+/)?(?:submissions?|character)(/\\d+)/[\\w-]+",res:`href="(https://cdn\\.$1/(?:~[^/]+/submissions$2|static/(?:character|submission))/[\\da-f/]+/[^"]+)
<title>([^<]+)`},"Webfail-h":{useimg:1,link:"^(?:(?:en|de)\\.)?(webfail\\.com/)([\\da-f]{11})(?:\\?tag=\\w+)?$",loop:1,res:'(?:src="about:blank" data-cmp-vendor="s30" data-cmp-|<img class="wf-image" )src="([^"]+)',img:"^cdn\\.(webfail\\.com/)upl/img/([\\da-f]{11})/(?!post).+",to:"cdn.$1upl/img/$2/post2.jpg"},"WebmShare-h":{link:"^(webmshare\\.com/)(?!terms)(?:play/|done/)?(\\w{5})(?:[#?]|$)",url:"$1play/$2",res:`="og:video" content="([^"]+)
="og:title" content="([^"|]+)`},"WeHeartIt-p":{useimg:1,link:"^weheartit\\.com/entry/(\\d+).*",url:"weheartit.com/entry/$1",res:`<meta property="og:image" content="([^"]+)"
<title>([^|<]*)`,img:"^data\\d*\\.whicdn\\.com/images/(\\d+)/(?!original\\.).*"},"WEIBO-h":{link:"^(?:(?:imagus(album)?\\.)?weibo\\.com/\\d+/(\\w+).*|weiboalbum/([^/]+)/(.+))",url:function(){var e=arguments;return e[2]?"https://weibo.com/ajax/statuses/show?id="+e[2]+(e[1]?"&"+Date.now():""):""},res:function(e){var l,m,c,v,w,b;const t=this._video_backup,a=this._album_backup;if(delete this._video_backup,delete this._album_backup,e[3]&&e[4]){let k=e[4].split("!").map(G=>[G]),S=k.findIndex(G=>RegExp(`${e[3]}`).test(G[0]));return this.TRG.IMGS_album=e[3],this.stack[e[3]]=k,this.stack[e[3]].unshift(1),this.album(S),[[["",""]]]}e=JSON.parse(e._);const n=(((l=new Date(e.created_at))==null?void 0:l.toLocaleString().replace(/.+/,"[$&] "))||"")+(e.text_raw||"");if(e.pic_infos)return e=Object.values(e.pic_infos).slice(this._num),delete this._num,e=e.map((k,S)=>{var G,j;return[((G=k.video)==null?void 0:G.replace(/.+/,"$&#mp4"))||((j=k.largest)==null?void 0:j.url)||k.large.url,S?"":n]}),this._imgId&&(e=e.slice(e.findIndex(k=>RegExp(`${this._imgId}`).test(k[0]))),e[0][1]=n,delete this._imgId),e;if((m=e.mix_media_info)!=null&&m.items)return(c=e.mix_media_info)==null?void 0:c.items.map(k=>{var S,G,j,R,M,P,L;return[((S=k.media_info)==null?void 0:S.mp4_hd_url)||((j=(G=k.data)==null?void 0:G.media_info)==null?void 0:j.mp4_hd_url)||((M=(R=k.data)==null?void 0:R.video)==null?void 0:M.replace(/.+/,"$&#mp4"))||((L=(P=k.data)==null?void 0:P.large)==null?void 0:L.url),n]});if((v=e.page_info)!=null&&v.media_info){e=(w=e.page_info)==null?void 0:w.media_info;const k=((b=Object.entries(e).find(S=>/^mp4_\d+p_mp4$/.test(S[0])))==null?void 0:b[1])||"";return[[[k==null?void 0:k.replace(/.+/,"#$&"),e.mp4_hd_url||""],n]]}return e=t||a||"",e},img:"^(?:((w[a-z]|tva|mu)\\d\\.sinaimg\\.cn/)(?!large)[^/]+/(.+)|(video\\.weibo\\.com/media/play\\?livephoto=https?(?:%3A%2F%2F|://).+(?:/|%2F)([^.]+)\\..+))",loop:2,to:function(){var c,v,w,b,k,S,G;var e=arguments;const t=!0,a=!0,n=this.node,l=(v=(c=n.parentNode)==null?void 0:c.querySelector("video"))==null?void 0:v.src,m=(S=(k=(b=(w=n.closest("[class^=Feed_body_],.card-feed"))==null?void 0:w.querySelector('[class^=head-info_time],a[href][target="_blank"][suda-data$="click:wb_time"]'))==null?void 0:b.href)==null?void 0:k.match(/^[^?]+/))==null?void 0:S[0].replace("//","//imagus.");if(e[4])return this._imgId=e[5],m==null?void 0:m.replace(/(imagus)/,"$1album");{const j=[...((G=n.closest('.wbpro-feed-content,div[class="media media-piclist"]'))==null?void 0:G.querySelectorAll('img[class*="_focusImg"],img[data-gifviedo=""],img[class="woo-picture-img"]'))||[]].map(R=>{var M;return[(M=R.src)==null?void 0:M.replace(/\/(?:orj?|mw|thumb)\d+\//,"/original/")]});return this._num=j&&j.findIndex(R=>RegExp(`${e[3]}`).test(R[0])),this._video_backup=l,this._album_backup=j,this._album_backup=this._album_backup.slice(this._num),l!=null&&l.length?a&&m||l:(j==null?void 0:j.length)>1?t&&(m==null?void 0:m.replace(/(imagus)/,"$1album"))||"//weiboalbum/"+e[3]+"/"+j.join("!"):(e[2]=="mu"?"http://":e[1]+"large/")+e[3]}}},Weverse:{img:"^(phinf\\.wevpstatic\\.net/[^?]+).*",to:"$1"},"WikiArt-g-p":{img:"^(uploads\\d\\.wikiart\\.org/[^!]+)!.*",to:"$1"},"Wikimedia-g":{useimg:1,link:"^[^/]{4,70}/(?:[^/#?]*/)*?(?:index\\.php\\?title=)?(?:(?:%\\w\\w){2,42}|[ABDFIPST](?:%\\w\\w|[^\\d:/?&#]){2,10})(?::|%3A)[^/&]{1,1000}\\.(?:jp(?:g|eg?)|a?png|gif|svgz?|web[pm]|bmp|og[gv]|mp[g34]|wav)(?!&action=)",ci:3,dc:1,res:'(?:<td>[^<]+</td>(?:\\n[^<]*)?<td>[\\d.]+\\s+[A-Za-z]?bps</td>(?:\\n[^<]*)?<td|(?![\\W\\w]+id="transcodestatus">)fullMedia"[^>]*>(?:\\n[^<]*)?<p|class="fullImageLink" id="file")>(?:\\n[^<]*)?<a href="([^"]+)',img:"^([^/]+/+([^/]+/+)*?)(?:thumb|(images|avatars))/((?:archive/)?\\w{1,2}/\\w{1,4}/([^/]+(?:\\.(jpe?g|gif|png|svgz?|tif)|(?=/revision/))))(?:/(lossy-page\\d+-)?\\d+px-(?:\\3|thumbnail).*|(/revision/)[^?]*)",to:function(){var e=arguments;return e[7]?e[1]+"thumb/"+e[4]+"/"+e[7]+"2048px-"+e[5]+".jpg":"#"+e[1]+(e[3]?e[3]+"/":"")+e[4]+(!e[8]&&!e[1].lastIndexOf("upload.wikimedia.org",0)&&!/^gif/i.test(e[6])?`
`+e[1]+"thumb/"+e[4]+"/1024px-"+e[5]+(/^svg/i.test(e[6])?".png":""):e[8]?e[8]+"latest":"")}},"WILDBERRIES.ru-s":{link:"^(global\\.)?wildberries\\.ru/(?:catalog/|product/[-\\w]+-)(\\d+)(?:/(detail\\.aspx|feedbacks)(\\S+)?)?",url:"data:,$&",res:function(e){let t=!0,a=!0,n=!1;var l=[],m=this;e[1]&&(t=!1,n=!0);const c=new XMLHttpRequest,v=R(e[2],"nm")+"/info/ru/card.json";if(c.open("GET",v,n),c.onloadend=function(){var N,U,W,F;const C=JSON.parse(this.responseText);if((e[2]||e[3]=="detail.aspx")&&!((N=e[4])!=null&&N.includes("#Comments"))&&!((U=m.TRG.className)!=null&&U.includes("product-review"))&&!((W=m.TRG.className)!=null&&W.includes("product-product-review__rating"))&&!((F=m.TRG.className)!=null&&F.includes("product-review__count-review"))){C.media.has_video&&t&&l.push(["",`<imagus-extension type="videojs" url="${M(C.nm_id,"hls","1440p")}"></imagus-extension>${C.imt_name}`]);for(var V=1;V<=C.media.photo_count;V++)l.push([k(C.nm_id,"big",V),C.imt_name])}const J=new XMLHttpRequest;J.open("GET",`${b(C.imt_id)}/feedbacks/v1/${C.imt_id}`,n),J.onloadend=function(){var s,d,p,y,I,T;const Z=JSON.parse(this.responseText);(s=Z.feedbacks)==null||s.sort((O,A)=>O.nmId===C.nm_id&&A.nmId!==C.nm_id?-1:O.nmId!==C.nm_id&&A.nmId===C.nm_id?1:new Date(A.createdDate)-new Date(O.createdDate));let te=[];if((d=Z.feedbacks)==null||d.forEach(O=>{var E;let A=["&#11088;"+O.productValuation,O.nmId!==C.nm_id?"Ð”Ð Ð£Ð“ÐžÐ™ Ð’ÐÐ Ð˜ÐÐÐ¢":"",O.pros?"&#128077;&#127995; "+O.pros:"",O.cons?"&#128078;&#127995; "+O.cons:"",O.text,O.createdDate.substring(0,10)].filter(Boolean).join(" | ");if((E=O.photo)==null||E.forEach(D=>l.push([w(D),A])),O.text&&te.length<100&&te.push(A),t&&O.video){let[D,X]=O.video.id.split("/"),B=`https://videofeedback${String(D).padStart(2,"0")}.wbbasket.ru/${X}/index.m3u8`;l.push(["",`<imagus-extension type="videojs" url="${B}"></imagus-extension>${A}`])}}),l.length&&!n&&a){const O=l[0][1].startsWith("<imagus-extension")?1:0,A=Z.valuationDistributionPercent,E=Object.keys(A).reverse();l[O][1]=`<imagus-extension type="sidebar"><div>
          <style>
            #imagus-extension > div { display: flex; flex-direction: column; row-gap: 10px; padding-top: 6px; }
            #imagus-extension .valuation-distr { display: flex; }
            #imagus-extension .valuation-distr > * { padding: 4px 6px; border: 1px solid gray; margin: 0 -1px 0 0; text-align: right; }
            #imagus-extension p { border-bottom: 1px solid #80808080; padding-bottom: 6px; }
          </style>
          <div class="valuation">ÐžÑ†ÐµÐ½ÐºÐ°: &#11088; ${Z.valuation} &bull; ${Z.feedbackCount}</div>
          <div class="valuation-distr">
            <span>${E.map(D=>`${D}&nbsp;&#11088;`).join("<br>")}</span>
            <span>${E.map(D=>`${A[D]}%`).join("<br>")}</span>
            <span>${E.map(D=>`<progress max="100"value="${A[D]}">${A[D]}%</progress>`).join("<br>")}</span>
          </div>
          ${te.map(D=>`<p>${D}</p>`).join("")}
        </div></imagus-extension>${l[O][1]}`}l.length==0?l=!1:n?n&&((I=(y=m.TRG)==null?void 0:y.IMGS_ext_data)!=null&&I.length||l!=null&&l.length)&&(m.TRG.IMGS_album=e[0],m.stack[e[0]]=((T=m.TRG)==null?void 0:T.IMGS_ext_data)||l,m.stack[e[0]].unshift(1),m.album(0)):(m.TRG.IMGS_ext_data=l,l={loop:"imagus://extension"},(p=m.TRG.IMGS_c_resolved)!=null&&p.URL||(m.TRG.IMGS_c_resolved={URL:m.TRG.href}))},J.send()},c.send(),n)return null;return l;function w(C){const V=parseInt(C,10);return`${R(V,"feedback")}/photos/fs.webp`}function b(C){return`https://feedbacks${L(C)%100>=50?"2":"1"}.wb.ru`}function k(C,V,J){var N=parseInt(C,10),U="webp",W=R(N);return"".concat(W,"/images/").concat(V,"/").concat(J??1,".").concat(U)}function S(C){let V;switch(!0){case(C>=0&&C<=143):V="01";break;case C<=287:V="02";break;case C<=431:V="03";break;case C<=719:V="04";break;case C<=1007:V="05";break;case C<=1061:V="06";break;case C<=1115:V="07";break;case C<=1169:V="08";break;case C<=1313:V="09";break;case C<=1601:V="10";break;case C<=1655:V="11";break;case C<=1919:V="12";break;case C<=2045:V="13";break;case C<=2189:V="14";break;case C<=2405:V="15";break;case C<=2621:V="16";break;default:V="17"}return`basket-${V}.wbbasket.ru`}function G(C){let V;switch(!0){case(C>=0&&C<=431):V="01";break;case C<=863:V="02";break;case C<=1199:V="03";break;case C<=1535:V="04";break;case C<=1919:V="05";break;case C<=2303:V="06";break;default:V="07"}return`feedback${V}.wbbasket.ru`}function j(C){let V;switch(!0){case(C>=0&&C<=11):V="01";break;case C<=23:V="02";break;case C<=35:V="03";break;case C<=47:V="04";break;case C<=59:V="05";break;case C<=71:V="06";break;case C<=83:V="07";break;case C<=95:V="08";break;case C<=107:V="09";break;case C<=119:V="10";break;case C<=131:V="11";break;case C<=143:V="12";break;default:V="13"}return`videonme-basket-${V}.wbbasket.ru`}function R(C,V="nm"){const J=parseInt(C,10),N=V==="video"?J%144:~~(J/1e5),U=V==="video"?~~(J/1e4):~~(J/1e3);let W;return V==="nm"?W=S(N):V==="feedback"?W=G(N):V==="video"&&(W=j(N)),`https://${W}/vol${N}/part${U}/${J}`}function M(C,V="mp4",J="360p"){const N=parseInt(C,10);return`${R(N,"video")}/${V}/${J}/${V==="mp4"?"1.mp4":"index.m3u8"}`}function P(C){const V=new Uint8Array(8);for(let J=0;J<8;J++)V[J]=C%256,C=Math.floor(C/256);return V}function L(C){const V=P(C);let J=0;for(let N=0;N<V.length;N++){J^=V[N];for(let U=0;U<8;U++)(1&J)>0?J=J>>1^40961:J>>=1}return J}},img:"^(?:(feedback\\d+\\.(?:wb|wbbasket)\\.ru/.+/photos)/[fm]s\\.(?:webp|jpg)|(basket-\\d+\\.(?:wb\\.ru|wbcontent\\.net|wbbasket\\.ru)/.+/images)/c\\d+x\\d+/(\\d+\\.webp)|(videofeedback\\d+\\.(?:wb|wbbasket)\\.ru/.+)/preview\\.(?:webp|jpg))",ci:2,loop:2,to:function(){var e=arguments;if(!this.styleAdded&&document.URL.includes("/feedbacks")){const t=document.createElement("style");t.textContent=`
        .sw-slider-thumbs-gallery .gallery-set .gallery-set__item::before { z-index: 0 !important; }
        .gallery-set__list > li > img.hide-desktop { display: block !important;}
    `,document.head.appendChild(t),this.styleAdded=!0}if(e[1])return`${e[1]}/fs.webp`;if(e[2])return`${e[2]}/big/${e[3]}`;if(e[4])return`${e[4]}/index.m3u8`}},"Wildcritters-x-p-b":{useimg:1,link:"^wildcritters\\.ws/post/show/\\d+",res:': <a href="(http[^"]+)" id="highres"',img:"^(wildcritters\\.ws/data/)(?:preview|sample)/([\\da-f]{32}\\.).+",to:`#$1$2#jpg png gif#
$1sample/$2#jpg png gif#`},Wired:{useimg:1,link:"^wired\\.com/[^/]+/.+",img:"^(media\\.wired\\.com/photos/\\w+/)[\\d:]+/w_\\d+(,c_limit/.+\\.\\w+)",to:function(){var n;var e=arguments;if(e[1])return e[1]+e[2];const t="https://media.wired";let a=this.node;return a=RegExp(`^${t}`).test(a.src)?a.src:((n=a.querySelector(`img[src^="${t}"]`))==null?void 0:n.src)||"",a.replace(/\/(?:\d{1,2}:\d{1,2}|w_\d+[^/]+)/g,"")}},WordPress_fix:{img:"^(.+/wp-content/uploads/.+)-\\d+x\\d+(\\.jpg)$",to:"$1$2"},"wsimg-CDN":{link:"(wsimg.com/(?:isteam/)?ip/[^.]+\\.[^/]+)",img:"((?:[^.]+\\.)?wsimg.com/(?:isteam/)?ip/[^.]+\\.[^/]+)",to:"$1"},"Wykop.pl-s-p":{img:"^((?:x\\w\\.)?(?:cdn\\d+\\.imgwykop\\.pl|wykop.pl/cdn)/c\\d+/[^,]+),[^.]+",to:"$1"},"X.COM-p":{useimg:1,link:"^(?:m(?:obile)?\\.)?(?:x|(api\\.[fv]x)?twitter)\\.com/(?:[^/]+/)*status/(\\d+)(?:\\?img_id/(.+))?.*",url:function(){var e=arguments;return(()=>{const t=this.node;if(/^https:\/\/platform\.twitter/.test(t.baseURI)||/^(?:x|twitter)\.com$/.test(location.hostname)&&!RegExp("^(?:svg|path|time)$").test(t.localName)&&!t.IMGS_TRG)throw new Error("Not used on this link");return e[1]||!e[2]?e[0]:"https://cdn.syndication.twimg.com/tweet-result?id="+e[2]+"&token="+(Number(e[2])/1e15*Math.PI).toString(36).replace(/(0+|\.)/g,"")+(e[3]?"&"+e[3]:"")})()},res:function(e){var S,G,j,R,M,P,L,C,V,J,N,U,W,F,Z,te,s,d,p,y,I,T,O,A,E,D,X,B,Q,ie,le,pe,re,ee,ae,ne,he,_e,ve,we,be;if(!e[1]&&e._[0]!=="{"){const se=new XMLHttpRequest;if(se.open("Get","https://cdn.syndication.twimg.com/tweet-result?id="+e[2]+"&token="+(Number(e[2])/1e15*Math.PI).toString(36).replace(/(0+|\.)/g,""),!1),se.send(),se.status!==200)return"";e._=se.responseText}let l=e._[0]==="{"?JSON.parse(e._):"";if(!l)return null;const m=se=>["#"+se.replace(/\.([a-z0-9]{3,4}$)/,"?format=$1&name=orig").replace("webp","jpg"),se.replace(/\.([a-z0-9]{3,4}$)/,"?format=$1&name=large").replace("webp","jpg")];let c=[];const v=new RegExp(`${e[3]}`),w=(G=(S=l.user)==null?void 0:S.profile_image_url_https)==null?void 0:G.replace(/_[a-z0-9]+\./,"."),b="v";if(e[1]){const se="A third party API, "+e[1].slice(4).toUpperCase()+"Twitter, was used to get this media. This can be disabled in the sieve. For more information, see the notes section of the TWITTER_ext-p sieve. | "||"";if(e[1][4]==="v"){this.loopStop=this.loopStop||0;const de=l.text;let me=l.media_extended;if(e[3]){if(!me.some(Y=>v.test(Y.thumbnail_url))&&this.loopStop===0&&l.qrtURL)return this.loopStop=1,{loop:l.qrtURL.replace(/^.+(\.com\/).*(status\/\d+).*/,(Y,ue,K)=>"https://api.vxtwitter"+ue+K+(e[3]?"?img_id"+e[3]:""))};c=me.splice(me.findIndex(Y=>v.test(Y.thumbnail_url))).map(Y=>[Y.type==="video"||/\.mp4/.test(Y.url)?Y.url:m(Y.url),se+de])}else c=me.map(Y=>[Y.type==="video"||/\.mp4/.test(Y.url)?Y.url:m(Y.url),se+de]);delete this.loopStop}else{const de=(ie=l.tweet)==null?void 0:ie.text,me=(le=l.quote)==null?void 0:le.text;let Y=((re=(pe=l.tweet)==null?void 0:pe.media)==null?void 0:re.all)||[],ue=((ne=(ae=(ee=l.tweet)==null?void 0:ee.quote)==null?void 0:ae.media)==null?void 0:ne.all)||[];if(!e[3])Y.forEach(K=>{const ge=!!/\.mp4/.test(K.url);K=ge?K==null?void 0:K.variants.filter(H=>H.content_type==="video/mp4").sort((H,oe)=>oe.bitrate-H.bitrate).map(H=>H.url):K.url,c.push(ge?[["#"+K[0],(K==null?void 0:K[1])||""],se+de]:[m(K),se+de])});else{const K=((be=(we=(ve=(_e=(he=Y.concat(ue).find(H=>v.test(H.thumbnail_url)))==null?void 0:he.variants)==null?void 0:_e.filter(H=>H.content_type==="video/mp4").sort((H,oe)=>oe.bitrate-H.bitrate))==null?void 0:ve[0].url)==null?void 0:we.match(/\/([^\/.]+)\.mp4/))==null?void 0:be[1])||"",ge=K?new RegExp(K):null;(Y!=null&&Y.some(H=>v.test(H.thumbnail_url))||Y!=null&&Y.some(H=>v.test(H.url)))&&Y.forEach(H=>{const oe=!!/\.mp4/.test(H.url);H=oe?H.variants.filter(ce=>ce.content_type==="video/mp4").sort((ce,fe)=>fe.bitrate-ce.bitrate).map(ce=>ce.url):H.url,c.push(oe?[["#"+H[0],(H==null?void 0:H[1])||""],se+de]:[m(H),se+de])}),(ue!=null&&ue.some(H=>v.test(H.thumbnail_url))||ue!=null&&ue.some(H=>v.test(H.url)))&&ue.forEach(H=>{var ce;const oe=!!((ce=H.format)!=null&&ce.startsWith("video"));H=oe?H.variants.filter(fe=>fe.content_type==="video/mp4").sort((fe,xe)=>xe.bitrate-fe.bitrate).map(fe=>fe.url):H.url,c.push(oe?[["#"+H[0],(H==null?void 0:H[1])||""],me]:[m(H),se+me])}),c=c.splice(c.findIndex(H=>v.test(H[0][0])||(ge==null?void 0:ge.test(H[0][0]))))}}return c}else{const se=l.text,de=(j=l.quoted_tweet)==null?void 0:j.text;let me=l.mediaDetails||[],Y=((R=l.quoted_tweet)==null?void 0:R.mediaDetails)||[],ue=((L=(P=(M=l.card)==null?void 0:M.binding_values)==null?void 0:P.unified_card)==null?void 0:L.string_value)||((C=l.card)==null?void 0:C.binding_values);if(!e[3])me&&me.forEach(K=>{var H;const ge=!!K.video_info;K=ge?(H=K==null?void 0:K.video_info)==null?void 0:H.variants.filter(oe=>oe.content_type==="video/mp4").sort((oe,ce)=>ce.bitrate-oe.bitrate).map(oe=>oe.url):K.media_url_https,c.push(ge?[["#"+K[0],(K==null?void 0:K[1])||""],(Y!=null&&Y.length?"Main tweet media: ":"")+se+(!(Y!=null&&Y.length)&&de?" | Quote tweet text: "+de:"")]:[m(K),(Y!=null&&Y.length?"Main tweet media: ":"")+se+(!(Y!=null&&Y.length)&&de?" | Quote tweet text: "+de:"")])}),Y&&Y.forEach(K=>{var H;const ge=!!K.video_info;K=ge?(H=K==null?void 0:K.video_info)==null?void 0:H.variants.filter(oe=>oe.content_type==="video/mp4").sort((oe,ce)=>ce.bitrate-oe.bitrate).map(oe=>oe.url):K.media_url_https,c.push(ge?[["#"+K[0],(K==null?void 0:K[1])||""],"Quote tweet media: "+de+(!(me!=null&&me.length)&&se?" | Main tweet text: "+se:"")]:[m(K),"Quote tweet media: "+de+(!(me!=null&&me.length)&&se?" | Main tweet text: "+se:"")])}),ue&&c.push([typeof ue=="string"?[(N=(J=Object.values((V=JSON.parse(ue))==null?void 0:V.media_entities))==null?void 0:J[0])==null?void 0:N.media_url_https]:["#"+((W=(U=ue.photo_image_full_size_original)==null?void 0:U.image_value)==null?void 0:W.url),(Z=(F=ue.photo_image_full_size_large)==null?void 0:F.image_value)==null?void 0:Z.url],se]);else{const K=((I=(y=(p=(d=(s=(te=me.concat(Y).find(H=>v.test(H.media_url_https)))==null?void 0:te.video_info)==null?void 0:s.variants)==null?void 0:d.filter(H=>H.content_type==="video/mp4").sort((H,oe)=>oe.bitrate-H.bitrate))==null?void 0:p[0].url)==null?void 0:y.match(/\/([^\/.]+)\.mp4/))==null?void 0:I[1])||"",ge=K?new RegExp(K):null;((O=(T=me==null?void 0:me.video_info)==null?void 0:T.variants)!=null&&O.some(H=>v.test(H.poster))||me!=null&&me.some(H=>v.test(H.media_url_https)))&&me.forEach(H=>{const oe=!!H.video_info;H=oe?H.video_info.variants.filter(ce=>ce.content_type==="video/mp4").sort((ce,fe)=>fe.bitrate-ce.bitrate).map(ce=>ce.url):H.media_url_https,c.push(oe?[["#"+H[0],(H==null?void 0:H[1])||""],se]:[m(H),se])}),((E=(A=Y==null?void 0:Y.video_info)==null?void 0:A.variants)!=null&&E.some(H=>v.test(H.poster))||Y!=null&&Y.some(H=>v.test(H.media_url_https)))&&Y.forEach(H=>{const oe=!!H.video_info;H=oe?H.video_info.variants.filter(ce=>ce.content_type==="video/mp4").sort((ce,fe)=>fe.bitrate-ce.bitrate).map(ce=>ce.url):H.media_url_https,c.push(oe?[["#"+H[0],(H==null?void 0:H[1])||""],de]:[m(H),de])}),ue&&c.push([["#"+((X=(D=ue.photo_image_full_size_original)==null?void 0:D.image_value)==null?void 0:X.url),(Q=(B=ue.photo_image_full_size_large)==null?void 0:B.image_value)==null?void 0:Q.url],se]),c=c.splice(c.findIndex(H=>v.test(H[0][0])||(ge==null?void 0:ge.test(H[0][0]))))}return(c==null?void 0:c.length)&&c||!se&&!de&&b&&{loop:"https://api."+b+"xtwitter.com/status/"+e[2]+(e[3]?"?img_id"+e[3]:"")}||k(se)}function k(se){return["data:image/svg+xml,"+encodeURIComponent(`
    <svg xmlns="http://www.w3.org/2000/svg" height="100" width="540" style="background-color: #2a2a2a;">
      <foreignObject height="100%" width="100%">
        <div xmlns="http://www.w3.org/1999/xhtml" style="display: table; height: 100%; width: 100%;">
          <span style="color: tomato; display: table-cell; font: 36px sans-serif; vertical-align: middle; text-align: center; white-space: pre-wrap;">
            No media
          </span>
        </div>
      </foreignObject>
    </svg>`.replace(/\n\s+/g,"")),"Tweet text: "+se]}},img:"^(?:(pbs\\.twimg\\.com/(?:(profile_banners/\\d+/\\d+/)|([^?]+\\?format=[^&]+&name=)|(?!profile_images/)[^.]+\\.)).*|((?:x|twitter)\\.com/\\w+(?:/photo|\\?|$).*))",loop:2,to:function(){var n,l,m,c,v,w,b,k;var e=arguments;const t=this.node,a=((n=e[0].match(/\/([^\/?.]+)(?:[?.]|$)/))==null?void 0:n[1])||"";if(e[2])return e[1]+"1500x500";if(e[4])return((c=(m=(l=t.closest("a"))==null?void 0:l.querySelector('img[src][draggable="true"]'))==null?void 0:m.src)==null?void 0:c.replace(/_[a-z0-9]+\./,"."))||"";if(!/(?:x|twitter)\.com$/.test(location.hostname)||/\/semantic_core_img\//.test(e[1]))return"#"+e[1].replace(/\.([a-z0-9]{3,4}$)|\?format=(\w+)&.+/,"?format=$1$2&name=orig").replace("webp","#jpg png#")+`
`+e[1].replace(/\.([a-z0-9]{3,4}$)|\?format=(\w+)&.+/,"?format=$1$2&name=large").replace("webp","#jpg png#");if(/(?:x|twitter)\.com\/(?:[^\/]+\/|search\?q=.+=)media/.test(location.href)&&!/\/semantic_core_img\//.test(e[0])){let S=t;for(;S.parentNode&&!S.querySelector('a[href*="/status/"]');)S=S.parentNode;return S.querySelector('a[href*="/status/"]').href.replace(/^(https:\/\/[^\/]+\/[^\/]+\/status\/\d+).*/,"$1?img_id/"+a)}return(k=(b=((v=t.closest("article"))==null?void 0:v.querySelector('a[href*="/status/"][aria-label]'))||((w=t.closest('article,div[class="css-1dbjc4n r-1iusvr4 r-16y2uox r-a5pmau r-bnwqim"],div[class="css-1dbjc4n r-1iusvr4 r-16y2uox r-bnwqim"]'))==null?void 0:w.querySelector('a[href*="/status/"]')))==null?void 0:b.href)==null?void 0:k.replace(/^(https:\/\/[^\/]+\/[^\/]+\/status\/\d+).*/,"$1?img_id/"+a)}},"X.COM_proxy":{img:"^o\\.twimg\\.com/2/proxy\\.jpg\\?(?:[^&]+&)*?t=([^&]+).*",loop:2,to:function(){var e=arguments;return decodeURIComponent(window.atob(e[1].replace(/_/g,"/")).replace(/^[^h]*(https?:\/\/[^\/]+\/([\w\-.~:/?#\[\]@!$&'()*+,;=]|%\d\d)+).*/,"$1"))}},"xGames.zone-p":{link:"^(xgames\\.zone)/(?!category)(?:[\\w-]+/){2}$",url:function(){var e=arguments;return location.hostname===e[1]?"data:,"+e[0]:e[0]},res:function(e){if(e.base[0]==="d"){const t=new XMLHttpRequest;t.open("GET",e[0],!1),t.send(),e._=t.responseText}return[...e._.matchAll(/src="([^"]+)"+\s+alt="([^"]*)/g)].map(t=>[t[1].replace(/\/img\.|\/thumb\//g,"/").replace(/^\/[^\/]/,"//"+e[1]+"$&"),t[2]])}},"xHamster_gallery-x-p":{link:"^(?:[a-z]{2}\\.)?xhamster2?\\.(?:com|desi)/photos/gallery/[\\w/-]+",res:function(e){if(this.gallery||(this.gallery=[]),this.ls||(this.ls=0),this.gallery.push(...[...e._.matchAll(/<a href="([^"]+)" data-height=/g)].map(t=>[t[1]])),/data-page="next" href="[^"]/.test(e._)&&this.ls<25)return this.ls++,{loop:e._.match(/data-page="next" href="([^"]+)/)[1]};{let t=this.gallery;return delete this.gallery,delete this.ls,t.length||(t=JSON.parse(e._.match(/window\.initials=(.+?);</)[1]),t=t.photosGalleryModel.photos.items.find(a=>a.id===t.photoModel.id).imageURL),t}}},"xHamster_video-x-p":{link:"^(?:.*\\.)?xhamster2?\\.(?:com|desi)/videos/.*-.*",res:function(e){var t;return e=Object.values(JSON.parse(((t=e._.match(/"sources":{"mp4":({.+?}),/))==null?void 0:t[1])||"{}")),e.length?[[["#"+e[e.length-1],e[Math.floor(e.length/2)]||""]]]:""}},Xiaohongshu:{link:"^xiaohongshu\\.com/(?!user/profile/[a-f0-9]{24}$)(?:[^/]+/)*([a-f0-9]{24})(?:$|\\?)",res:function(e){var n,l,m,c;e=JSON.parse(e._.match(/__INITIAL_STATE__\s*=\s*({.+?})<\//)[1].replace(/:undefined/g,':""')).note.noteDetailMap[e[1]].note;const a=[e.title,(n=e.user)==null?void 0:n.nickname,new Date(e.time).toLocaleDateString(),e.desc].filter(Boolean).join(`
`);return e=(((c=(m=(l=e.video)==null?void 0:l.media)==null?void 0:m.stream)==null?void 0:c.h264)||e.imageList||[]).map((v,w)=>[v.urlDefault||v.masterUrl,w?"":a]),e[0][1]=`<imagus-extension type="sidebar">${a}</imagus-extension>`,this.TRG.IMGS_ext_data=e,{loop:"imagus://extension"}},img:"^(sns-(?:avatar|webpic)-qc\\.xhscdn\\.com/[^?]+).*",to:"$1"},xkcd:{link:"^(?:m\\.)?(xkcd\\.(?:org|com)/\\d{1,5})/?$",url:"$1/info.0.json",res:function(e){return e._[0]!="{"?e=!1:(e=JSON.parse(e._),e=[[e.num>1050?[e.img.replace(/(\.\w+)$/,"_2x$1"),e.img]:e.img,[e.year,("0"+e.month).slice(-2),("0"+e.day).slice(-2)].join("-")+" (#"+e.num+") | "+e.safe_title+" - "+e.alt+" "+e.link]]),e}},"XNXX-x-p":{link:"(.*\\.)?xnxx.com\\/(prof-)?video-.*",res:function(e){return e._.match(/setVideoUrlHigh.*\.mp4\?.*?'/)[0].replace(/setVideoUrlHigh.*\('(.*?)'/,"$1")}},"XVideos|XV-ru-x-q-p":{link:"^(?:.*\\.)?(xvideos\\.com|xv-ru\\.com)\\/(?:search-video\\/|video[\\d./]).+",loop:1,res:function(e){var t;return((t=e._.match(/setVideoUrlHigh\(["']([^"']+)/))==null?void 0:t[1])||""}},"XYZcomics-x-p":{link:"^xyzcomics\\.com/.*/$",res:function(e){let n=new DOMParser().parseFromString(e._,"text/html").querySelectorAll("#jig1-html ul li a");if(n.length===0)return null;let l=[];for(image of n)l.push([image.href]);return l}},"Yahoo-p":{link:"^(?:(?:images|video)\\.search\\.yahoo\\.com/(?:search/images|images/view|video/play)[?;](?:[^&]+&)*?(?:imgurl|rurl)=(?:https?(?:%3A%2F%2F|://))?([^&]+).*|news\\.yahoo\\.com/.+)",dc:3,loop:3,img:"^(?:[sl]\\d?\\.yimg\\.com/|yahoo.com/\\w\\w/)\\w\\w/api/res/(?:[^/]+/)+?(https?://.+)",to:function(){var t;var e=arguments;return e[1]||(e[1]=(t=this.node.offsetParent.querySelector("img[src]"))==null?void 0:t.src),e[1]?e[2]?(e[1]||"//")+e[2]:e[1].replace(/\.cf\.\w{3,4}$/,""):""}},YANDEX_avatars:{link:"^yandex_vid/([^!]+)!(.+)",url:function(){var e=arguments;return this.yandex_vid_data?"":e[2]},res:function(e){var t,a;return this.yandex_vid_data=this.yandex_vid_data||Object.values((a=JSON.parse(((t=e._.match(/({"widgets":{"@card\/Actions":.+?)<\/noframes>/))==null?void 0:t[1])||"{}").collections)==null?void 0:a.mediaItem),e=this.yandex_vid_data.find(n=>RegExp(e[1].slice(0,-7)).test(n.previewUrl)),{loop:e.streams[0].url}},img:"^(avatars(?:\\.mds)?\\.yandex\\.net/get-([^?]+)/)[^?].*",loop:2,to:function(){var e=arguments;return e[2].slice(0,3)==="vh/"&&location.pathname.split("/").includes("reviews")?"//yandex_vid/"+e[2]+"!"+location.href:e[1]+"orig"}},"YANDEX_Disk-h":{link:"^(?:yadi\\.sk|disk\\.yandex\\.(?:com|ru))/\\w/\\w+(/\\w+)?",res:function(e){var l,m,c,v,w;let t=document.querySelector('head > meta[name="referrer"]');t?t.attributes.content.value!=="same-origin"&&(t.attributes.content.value="same-origin"):(t=document.createElement("meta"),t.name="referrer",t.content="same-origin",document.getElementsByTagName("head")[0].appendChild(t));let a,n=(l=e._.match(/id="store-prefetch">({.+?})<\/script/))==null?void 0:l[1];return n&&(n=JSON.parse(n)),n!=null&&n.resources&&(n=Object.values(n.resources)),(a=(w=(v=(c=(m=n==null?void 0:n[0])==null?void 0:m.videoStreams)==null?void 0:c.videos)==null?void 0:v.pop())==null?void 0:w.url)?{loop:a}:(a=e[1]&&(n==null?void 0:n.find(b=>{var k;return(k=b.meta)==null?void 0:k.original})))?a.meta.original:(n==null?void 0:n.filter(b=>{var k;return((k=b.meta)==null?void 0:k.original)||b.meta.xxxlPreview}).map(b=>[b.meta.original||b.meta.xxxlPreview]))||""},img:"^(?:\\d\\.)?downloader\\.disk\\.yandex\\.(?:com|ru)/preview/[\\da-f]{64}/(?:inf/)?[^?]+\\?(?:[^&]+&)*?(?:content_type=image).+",to:function(){var e=arguments;return e[0].replace(/&crop=[^&]*/,"").replace(/(&size=)[^&]+/,"$110000x10000")}},"YANDEX_fotki-h":{img:"^(img\\d*-fotki\\.yandex\\.(?:ru|net)/get/\\d+/\\S+/\\w+_).+",to:"$1orig"},YANDEX_Images:{link:"^ya(?:ndex)?\\.\\w+/images/search\\?\\S+?img_url=([^&]+).*",loop:1,to:function(){var l;var e=arguments;const t=decodeURIComponent(e[1]),n=((l=this.TRG.parentNode.innerHTML.replace(/&amp;/g,"&").match(/avatars\.mds\.yandex\S+n=13|yandex-images\.clstorage\.net\/[^"]+/))==null?void 0:l[0])||"";return t+`
`+n}},YANDEX_Images_sideblock:{img:"^(?:avatars\\.mds\\.yandex\\.net/i\\?id=\\S+images-thumbs|yandex-images\\.clstorage\\.net).+",loop:2,to:function(){var t,a;var e=arguments;if(this.TRG.className=="MMThumbImage-Image"){for(const n of window.wrappedJSObject.Ya.SerpContext.serpItems)if(n.thumb.url.includes(e[0]))return n.img_href+`
`+n.thumb.url}if(this.TRG.className=="RelatedImages-Thumb"){for(const n of window.wrappedJSObject.Ya.reactBus.e["cbir:drag-start"])if(n.ctx!==void 0){for(const l of n.ctx._reactInternals.return.pendingProps.state.rimForItem)if(l.thumb.url.includes(e[0])){let m="";for(const c of l.preview)m+=(t=c.origin)!=null&&t.url?((a=c.origin)==null?void 0:a.url)+`
`+c.url+`
`:c.url+`
`;return m}}}return e[0]}},"YANDEX_Market-s":{link:"^market\\.yandex\\.[^/]+/(?:product-|cc/).*",res:function(e){var k,S,G,j,R;let t=((k=e._.match(/window\.location\.replace\("(.+?)"\)/))==null?void 0:k[1])||e[0];t=t.replace(/(\/reviews)?\?/,"/reviews?");let a=new XMLHttpRequest;a.open("GET",t,!1),a.send(),e._=a.responseText+e._;const n=new DOMParser().parseFromString(e._,"text/html");let l=M=>(M==null?void 0:M.video)||(M==null?void 0:M.entity)==="yandex_video",m=!1,c=JSON.parse(e._.match(/({"widgets":{"@card\/MediaViewer(?:Gallery|Manager)":{"\/content\/page\/fancyPage\/(?:defaultPage\/)?mediaViewer.+?})<\/noframes>/)[1]),v=[];Object.values(c.collections.mediaItem).forEach(M=>{var L,C;let P=l(M)?["",`<imagus-extension type="videojs" url="${(C=(L=M.streams)==null?void 0:L[0])==null?void 0:C.url}"></imagus-extension>${M.title||""}`]:M.origUrl?[M.origUrl]:"";l(M)&&(m=!0),P&&!M.picture&&!v.find(V=>{var J;return((J=V[0])==null?void 0:J[0])==P})&&v.push(P)});let w;try{w=JSON.parse((S=e._.match(/>({"widgets":{"@MarketNode\/UgcMediaGallery".+?})<\//))==null?void 0:S[1])}catch{}if((G=w==null?void 0:w.collections)!=null&&G.review)for(const M of Object.values(w.collections.review).reverse())M.photos.forEach(P=>{const L=["&#11088;"+M.averageGrade];M.comment&&L.push(M.comment),M.pro&&L.push("&#128077;&#127995; "+M.pro),M.contra&&L.push("&#128078;&#127995; "+M.contra),M.created&&L.push(new Date(M.created).toISOString().substring(0,10)),v.push([`https://avatars.mds.yandex.net/get-${P.namespace}/${P.groupId}/${P.imageName}/orig`,L.join(" | ")])});let b=[...n.querySelectorAll('[data-zone-name="ugc-media-gallery"] img')].map(M=>M.src.replace(/\/\d+x\d+$/,"/orig"));for(const M of b)v.find(P=>P[0]==M)||v.push([M,"User Image"]);if((j=w==null?void 0:w.collections)!=null&&j.ugcvideo){let M=Object.values((R=w==null?void 0:w.collections)==null?void 0:R.ugcvideo);for(const P of v){if(!P[0].includes("/get-vh/"))continue;let L=M.find(C=>{var V;return((V=C.metaInfo)==null?void 0:V.thumbnail)==P[0]});L&&(m=!0,P[1]=`<imagus-extension type="videojs" url="${L.metaInfo.streamUrl}"></imagus-extension>${L.title}`,P[0]="")}}return m?(this.TRG.IMGS_ext_data=v,{loop:"imagus://extension"}):v},img:"^mdata\\.yandex\\.[^/]+/i\\?path=[^/]+\\.(?:jpe?g|png|gif|bmp)$"},"YANDEX_Realty-s":{link:"^realty\\.ya\\.ru/offer/\\d+",ci:1,res:function(e){const t=[],a=JSON.parse(/window.INITIAL_STATE\s*=\s*({[^]+?})[;\s]*<\/script>/gm.exec(e._)[1]);for(let n=0;n<a.offerCard.card.fullImages.length;n++)t.push([a.offerCard.card.fullImages[n],n===0?a.offerCard.card.description:""]);return t}},"YAPfiles.ru-h":{link:"^yapfiles\\.ru\\/show\\/\\d+\\/.*\\.html$",ci:1,res:'name="direct_link" value="([^"]+)"'},YaPlakal:{img:"(\\w\\d\\d?\\.yaplakal\\.com/pics/pics_)preview(/\\d+/\\d+/\\d+/\\d+\\.jpg)",to:"$1original$2"},"Yapx.ru-h":{link:"^yapx\\.ru/(?:album|image)s?/\\w+",res:function(e){return e=JSON.parse(e._.match(/view_image\s*=\s*(.+?)<\/script/)[1]),e.images.map(t=>{var a;return[(a=t.pl)==null?void 0:a.src]})}},"Yarn-h":{link:"^(yarn\\.co/)yarn-clip/([\\da-f-]{36}).*",img:"^y\\.(yarn\\.co/)([\\da-f-]{36}).*",to:"y.$1$2.mp4"},Yelp:{useimg:1,link:"^yelp\\.com/biz(?:/[a-z0-9-]+|_photos/\\w+)$",res:function(e){const a=new XMLHttpRequest,n=e._.match(/(biz_photos)(\/[\w-]+)(?=[?"])/);let l,m=[];for(i=0;i<300&&(a.open("GET","https://www.yelp.com/"+n[1]+"/get_media_slice"+n[2]+"?start="+i+"&dir=f",!1),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(),l=a.responseText[0]==="{"&&JSON.parse(a.responseText).media||[],m.push(...l.map(c=>{var v,w;return[(v=c.src)==null?void 0:v.replace(/(video_contribution\/\d+\/)[^\/]+(\/.+)/,"$1progressive_video_high$2#mp4"),(w=c.media_data)==null?void 0:w.caption]})),!(l.length<30));i+=30);return m},img:"^(?:(s\\d(yelp\\d-a\\.akamaihd\\.net|-media\\d\\.\\w\\w\\.yelp(?:cdn|assets)\\.com)/[a-z]?photo/[\\w-]+/)(?!o)[^.]+|yelp\\.com/\\w+/consumer_video_contribution/.+)",to:function(){var t;var e=arguments;return e[1]?e[1]+"o":(t=e[0])==null?void 0:t.replace(/(video_contribution\/\d+\/)[^\/]+(\/.+)/,"$1progressive_video_high$2#mp4")}},"Ylilauta-g":{img:"^([a-z]\\.ylilauta\\.org/)(\\w+)/([^-]+)-[^.]+\\.avif",to:"$1$3.$2"},"Yodayo-g":{link:"^yodayo\\.com/\\d+/posts/[a-f0-9-]+/",res:function(e){return[...e._.matchAll(/role="button"><img src="([^"]+)/g)].map(t=>[t[1]])},img:"^(fly\\.storage\\.tigris\\.dev/syr-art-prod-character-images/[a-f0-9-]+)[^.]*\\.([a-z]+).*",to:"$1.#$2 jpg jpeg png webp#"},"YouJizz-x-p":{link:"(.*\\.)?youjizz.com\\/videos\\/.*-(.*?)\\.html.*",url:"https://www.youjizz.com/videos/embed/$2",res:function(e){return`https:${e._.match(/dataEncodings.*?filename\":\".*264\.mp4\?.*?\"/)[0].replace(/dataEncodings.*(\\\/\\\/.*?)\"/,"$1").replace(/\\\//g,"/")}`}},"Youla.ru-s":{link:"youla\\.ru/\\S+/\\S+/\\S+/\\S+",res:function(e){var t=e._.indexOf("window.__YOULA_STATE__ = {");if(t<0)return null;var a=e._.indexOf("};",t);if(a<0)return null;var n=JSON.parse(e._.substring(t+25,a+1)),l=[];for(let m of n.entities.products[0].images)l.push([m.url]);return l},img:"((?:cache3|cdn\\d)\\.youla\\.io/files/images/)\\d+_\\d+(?:_out)?(/\\w+/\\w+/\\S+\\.\\w+)",to:"$1orig$2"},"YouPic-h":{link:"^youpic\\.com/image/\\d+",res:function(e){var t=JSON.parse(e._.match(/{"@context"[^\n]+/)[0]),a=t.image.split(/(?:huge|large|medium|small|link)/);return[[["#"+a[0]+"huge"+a[1],a[0]+"large"+a[1]],[t.name,t.description].filter(Boolean).join(" | ")]]},img:"^((?:cdn\\.youpic\\.com|df0179xsabjj8\\.cloudfront\\.net)/)(?:huge|large|medium|small|tiny)(/\\d+_[\\da-z]+_\\d+)",to:`#$1huge$2
$1#large medium#$2`},"YOUTUBE-q-h-p":{useimg:1,link:"^(?:(?:(?:(?:\\w+\\.)?[yY][oO][uU][tT][uU][bB][eE](?:-nocookie|kids)?\\.com|youtube\\.googleapis\\.com)/(?:.*?\\#/)?(?:(?:(?:v|embed|e|shorts)/(?!videoseries|live_stream))|(?:(?:(?:watch|movie)(?:_popup)?(?:\\.php)?/?)?(?:\\?|\\#!?)(?:.*?[&;])??v=)))|youtu\\.be/)([0-9A-Za-z_-]{11})(?!&lc=)(?:\\?(thumb\\b))?(?:[?&](?:star)?t=(\\d+(?:\\.\\d+)?)s?)?(?:&end=(\\d+(?:\\.\\d+)?)s?)?.*$",url:function(){var e=arguments;return(()=>{if(this.node.nodeName==="YTD-BADGE-SUPPORTED-RENDERER"||this.node.id!==void 0&&this.node.id!=="title"&&this.node.id!=="video-title"&&/^(?:yt-simple-endpoint style-scope ytd-compact-movie-renderer|movie-metadata style-scope ytd-compact-movie-renderer|badge badge-style-type-ypc style-scope ytd-badge-supported-renderer style-scope ytd-badge-supported-renderer|ytp-impression-link(?:-[a-z]+)?|badge badge-style-type-live-now-alternate style-scope ytd-badge-supported-renderer style-scope ytd-badge-supported-renderer|ytp-youtube-button ytp-button yt-uix-sessionlink|ytp-title-link yt-uix-sessionlink|style-scope ytd-thumbnail-overlay-hover-text-renderer|progress|style-scope ytd-thumbnail-overlay-toggle-button-renderer|playlist-drag-handle style-scope ytd-playlist-panel-video-renderer|style-scope ytd-thumbnail(?:-overlay-time-status-renderer)?|style-scope ytd-playlist-panel-video-renderer|editable style-scope ytd-playlist-panel-video-renderer style-scope ytd-playlist-panel-video-renderer|yt-simple-endpoint style-scope ytd-structured-description-playlist-lockup-renderer|style-scope ytd-macro-markers-list-item-renderer|style-scope ytd-structured-description-playlist-lockup-renderer|yt-simple-endpoint style-scope ytd-structured-description-video-lockup-renderer|style-scope ytd-structured-description-video-lockup-renderer|style-scope ytd-badge-supported-renderer|badge badge-style-type-simple style-scope ytd-badge-supported-renderer style-scope ytd-badge-supported-renderer|yt-simple-endpoint style-scope ytd-compact-video-renderer|badges style-scope ytd-compact-video-renderer|style-scope ytd-video-meta-block)$/.test(this.node.className))throw new Error("YouTube sieve not used on this page element");return"https://www.youtube.com/embed/"+e[1]+"?"+e[2]+"&"+e[3]+"&"+e[4]})()},res:function($){var e,t,a;var config={order:{thumb:1,"native (360p)":2,"hls (1080p/4K)":3,"embed (360p-1080p)":4},returnDislikes:!0,useSidebar:!0,useSmallerThumbnail:!1,thumbVideoInfo:!0,nativeVideoInfo:!1};fallback=()=>(this.TRG.IMGS_ext_data=[["",`<imagus-extension type="iframe" url="https://youtube.com/embed/${$[1]}?${timeParam}"></imagus-extension>`]],{loop:"imagus://extension"});var fL,fH,f={},g=!1,cipher,decsig,o,mfr,ps,basejs,hls,x=new XMLHttpRequest;window.imagusCache=window.imagusCache||{};var timeParam=$[3]?"t="+$[3]+($[4]?","+$[4]:"")+"&":"",baseJsUrl="https://www.youtube.com"+JSON.parse($._.match(/\"[^\"]+player_[^\"]+\/base.js\"/)[0]);if(window.imagusCache[baseJsUrl])basejs=window.imagusCache[baseJsUrl];else try{x.open("GET",baseJsUrl,!1),x.send(),basejs=x.responseText,window.imagusCache[baseJsUrl]=basejs}catch{return fallback(this)}const escapeRegExp=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),parseunthrottle=n=>{const l=/\.[A-Za-z]&&\([A-Za-z]=[A-Za-z]+\(\),[A-Za-z]{2}\([A-Za-z]\),[A-Za-z]=[A-Za-z]\.[A-Za-z]\[[A-Za-z]\]\|\|null\)&&\([A-Za-z]=([^(]+?)(?:\[(\d+)\])?\([a-zA-Z0-9]\)/.exec(n);var m=l[1];l[2]&&(m=new RegExp("var "+escapeRegExp(m)+"\\s*=\\s*\\[(.+?)\\][,;]").exec(n)[1].split(",")[parseInt(l[2])]);const c=new RegExp(escapeRegExp(m)+'=function\\(([^\\)]+)\\){(.+?return \\w\\.join\\(""\\))};',"s").exec(n),[v,w,b]=c;return new Function([w],b.replace(/if\(typeof \w+==="undefined"\)return \w;/,""))};try{var unthrottle=window.imagusCache[baseJsUrl+"_unthrottle"]||parseunthrottle(basejs);window.imagusCache[baseJsUrl+"_unthrottle"]=unthrottle}catch(n){console.error("Imagus: cannot parse unthrottle function. Error:",n)}function nt(n){var l=new URL(n),m=l.searchParams,c=m.get("n");return c?(m.set("n",unthrottle?unthrottle(c):""),l.search=m.toString(),l.toString()):n}const api_key="AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",client_ver="2.20211221.00.00",sigtime=Number(basejs.match(/signatureTimestamp\s*:\s*(\d+)/)[1]),vid=$[1];function player_response(n){x.open("POST","https://www.youtube.com/youtubei/v1/%70%6C%61%79%65%72?imagus&key="+api_key,!1),x.setRequestHeader("Content-Type","application/json");var l={context:{client:{clientName:"WEB",clientVersion:client_ver}},videoId:vid,playbackContext:{contentPlaybackContext:{signatureTimestamp:sigtime,html5Preference:"HTML5_PREF_WANTS"}},contentCheckOk:!0,racyCheckOk:!0};return n==="agegate"&&(l.context.client.clientScreen="EMBED"),n==="embed"&&(l.context.client={clientName:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",clientVersion:"2.0"}),n&&(l.context.thirdParty={embedUrl:"https://www.youtube.com/"}),x.send(JSON.stringify(l)),o=JSON.parse(x.responseText),mfr=o.microformat||mfr,ps=o.playabilityStatus,ps.status==="OK"}function getDislikes(n){try{return x.open("GET",`https://returnyoutubedislikeapi.com/Votes?videoId=${n}`,!1),x.send(),JSON.parse(x.responseText)}catch{}}const prepResult=(n,l)=>{hls&&n.push(["",`<imagus-extension type="videojs" url="${hls}"></imagus-extension>${title}`]),n.push(["",`<imagus-extension type="videojs" url="https://youtube.com/embed/${$[1]}?${timeParam}"></imagus-extension>`]),l=l.replace(/https?:\/\/[\w\.\/?=&+@#\-]+/g,'<a href="$&" target="_blank">$&</a>'),n.find(v=>/\.ytimg\.com\//.test(v[0]))[1]=`<imagus-extension type="sidebar">${l}</imagus-extension>`;var m=Object.entries(config.order).filter(v=>v[1]>=1).sort((v,w)=>v[1]-w[1]).map(v=>v[0]),c=m.map(v=>{switch(v){case"thumb":return n[0];case"native (360p)":return n[1]||n[2];case"hls (1080p/4K)":return n[2]||n[1];case"embed (360p-1080p)":return n[3]||n[2]||n[1]}});return c.length=n.length,c=c.filter(Boolean),this.TRG.IMGS_ext_data=c,{loop:"imagus://extension"}};for(let n of[null,"embed","agegate"])if(player_response(n))break;if(["ERROR","LOGIN_REQUIRED"].indexOf(ps.status)!=-1)return[ps.errorScreen.playerErrorMessageRenderer.thumbnail.thumbnails[0].url,"["+ps.status+", "+ps.reason+"]"];var q=o.videoDetails,r=mfr.playerMicroformatRenderer,title=q.title,lenSec=parseInt(q.lengthSeconds),sText=r.title.simpleText,thumbnail=r.thumbnail.thumbnails[0].url+"?noloop",ss=lenSec%60,mm=(lenSec-ss)/60%60,hh=(lenSec-ss-mm*60)/3600,lenStr=(hh===0?"":hh+":")+("0"+mm).slice(-2)+":"+("0"+ss).slice(-2);Number(q.averageRating);var dl=getDislikes(q.videoId);if(dl!=null&&dl.rating){var colorShift=Math.round(120*Math.max(0,dl.rating-3)/2),rateStyle=`background-color:hsl(${colorShift}100%31%);padding:0 3px 0 1px;border-radius:2px;color:white;line-height:18px;display:inline-block`;dl.rating=`<span style="${rateStyle}">â­${Math.round(dl.rating*20*10)/10}%</span>`}var descr=[`<h3>${title}</h3>`,title!==sText&&sText,'Author:	<a href="//www.youtube.com/channel/'+q.channelId+'" target="_blank" style="color:white">'+q.author+"</a>","Date:	"+(r.publishDate?new Date(Date.parse(r.publishDate)).toLocaleString():""),"Length:	"+lenStr,"Views:	"+(q.viewCount|0).toLocaleString(),dl?`Rating:	${dl.rating}|ðŸ‘ðŸ»${(e=dl.likes)==null?void 0:e.toLocaleString()}|ðŸ‘ŽðŸ»${(t=dl.dislikes)==null?void 0:t.toLocaleString()}<br>(by returnyoutubedislike.com)`:"",`
`+q.shortDescription].filter(Boolean).join(`
`);if(ps.status!=="OK")return prepResult([[thumbnail,""]],`<h3>${ps.status}-${ps.reason}</h3><br>`+descr);var fs=o.streamingData.formats;if(Number(config.order["hls (1080p/4K)"])>0){x.open("POST","https://www.youtube.com/youtubei/v1/%70%6C%61%79%65%72?imagus&key="+api_key,!1),x.setRequestHeader("Content-Type","application/json");var hls_data={context:{client:{clientName:"IOS",clientVersion:"19.09.3",deviceModel:"iPhone14,3",userAgent:"com.google.ios.youtube/19.09.3 (iPhone14,3; U; CPU iOS 15_6 like Mac OS X)"}},videoId:vid,playbackContext:{contentPlaybackContext:{signatureTimestamp:sigtime,html5Preference:"HTML5_PREF_WANTS"}},contentCheckOk:!0,racyCheckOk:!0};x.send(JSON.stringify(hls_data)),hls=(a=JSON.parse(x.responseText).streamingData)==null?void 0:a.hlsManifestUrl}if(!fs)return prepResult([[thumbnail,""]],"<h3>No suitable formats to download, probably livestreaming</h3><br>"+descr);if(fs.forEach(function(n){if(n.url){f[n.itag]=nt(n.url);return}if(cipher=new URLSearchParams(n.signatureCipher),cipher.get("sig")){f[n.itag]=`${cipher.get("url")}&signature=${cipher.get("sig")}`;return}g=!0}),g){try{descr="*"+descr;const parseDecsig=data=>{if(data.startsWith("var script")){const obj={},document={createElement:()=>obj,head:{appendChild:()=>{}}};eval(data),data=obj.innerHTML}const fnnameresult=/=([a-zA-Z0-9\$]+?)\(decodeURIComponent/.exec(data),fnname=fnnameresult[1],_argnamefnbodyresult=new RegExp(escapeRegExp(fnname)+"=function\\((.+?)\\){(.+?)}").exec(data),[_,argname,fnbody]=_argnamefnbodyresult,helpernameresult=/;(.+?)\..+?\(/.exec(fnbody),helpername=helpernameresult[1],helperresult=new RegExp("var "+escapeRegExp(helpername)+"={[\\s\\S]+?};").exec(data),helper=helperresult[0];return new Function([argname],helper+`
`+fnbody)};decsig=parseDecsig(basejs)}catch(n){console.error(n)}fs.forEach(function(n){f[n.itag]||(cipher=new URLSearchParams(n.signatureCipher),f[n.itag]=nt(`${cipher.get("url")}&${cipher.get("sp")||"signature"}=${decsig(cipher.get("s"))}`))})}fL=f[18]||f[59]||f[78]||f[46]||f[45]||f[44]||f[43]||f[37]||f[22],fH=f[37]||f[22]||f[18]||f[59]||f[78]||f[46]||f[45]||f[44]||f[43]||fL;var ct=(timeParam?"#"+timeParam:"")+"#mp4",res=[[thumbnail,title]];return fH&&(fH=[(config.lowResFirst?"":"#")+fH+ct,(config.lowResFirst?"#":"")+fL+ct],res.push([fH,title])),prepResult(res,descr)},img:"^(?:i(?:\\d|mg)?\\.ytimg\\.com/(?:vi|an_webp)[^/]*/([\\w\\-]{11})/(?:[\\w]+?)\\.(?:\\w+)(?!.*[&?]noloop)|^(?:(?:(?:(?:\\w+\\.)?[yY][oO][uU][tT][uU][bB][eE](?:-nocookie|kids)?\\.com|youtube\\.googleapis\\.com)/(?:.*?\\#/)?(?:(?:(?:v|embed|e|shorts)/(?!videoseries|live_stream))|(?:(?:(?:watch|movie)(?:_popup)?(?:\\.php)?/?)?(?:\\?|\\#!?)(?:.*?[&;])??v=)))|youtu\\.be/)([0-9A-Za-z_-]{11})(?!&lc=)(?:\\?(thumb\\b))?(?:[?&](?:star)?t=(\\d+(?:\\.\\d+)?)s?)?(?:&end=(\\d+(?:\\.\\d+)?)s?)?.*$)",loop:2,to:"www.youtube.com/embed/$1$2?thumb"},YOUTUBE_redirect:{link:"youtube\\.com/redirect\\?event=comments&redir_token=\\w+&q=(.+?)&.+",ci:1,dc:1,loop:1,to:"$1"},YOUTUBE_clip_redirect:{link:"(?:www\\.)?youtube\\.com/clip/",loop:1,res:function(e){var t=e._.match(/(?:<link itemprop="embedUrl" href="|<meta (?:property="og:video:(?:secure_)?url"|name="twitter:player") content=")(https?:\/\/www\.youtube\.com\/embed\/[0-9A-Za-z_-]{11})/)[1],a=e._.match(/"clipConfig"\s*:\s*{([^}]+)}/)[1],n=Number(a.match(/"startTimeMs"\s*:\s*"(\d+)"/)[1])/1e3,l=Number(a.match(/"endTimeMs"\s*:\s*"(\d+)"/)[1])/1e3;return t+"?start="+n.toFixed(3)+"&end="+l.toFixed(3)}},"YunPhoto|tmyun-g":{link:"^yunphoto\\.net/(?:\\w+/)?photobase/yp(\\d+)\\.html$",to:`#http://tmyun.com/jpeg/yun_$1.jpg
http://www.tmyun.com/mid/yun_$1.jpg`},"Yupoo-s":{link:"^[^.]+\\.x\\.yupoo\\.com/albums/.*",res:function(e){let t=[...e._.matchAll(/data-origin-src="([^"]+)/g)].map(a=>[a[1]]);return t.unshift(t.splice(t.findIndex(a=>(a[0].match(/photo\.yupoo\.com\/[^\/]+\/([^/]+)/)||[,""])[1]===(this.node.previousElementSibling.src.match(/photo\.yupoo\.com\/[^\/]+\/([^/]+)/)||[,"null"])[1]),1)[0]),t},img:"^[^.]+\\.yupoo\\.com/.+\\.(?:png|jpe?g)",to:function(){var t;var e=arguments;if(/ic_play/.test(e[0])){let a=(t=this.node.closest('div[data-type="video"]'))==null?void 0:t.firstElementChild.dataset;return a?a.src.match(/\/\/[^\/]+/)+a.path+(/\.mp4/.test(a.path)?"":"#mp4"):""}else return/\/small/.test(e[0])?this.node.offsetParent.firstElementChild.dataset.originSrc:e[0]}},"Zapodaj-h":{link:"^(?:pro\\.)?zapodaj\\.net/[\\w-]+(?:\\.html)?$",res:'"(?:showImage"><a|image_src") href="([^"]+)',img:"^(zapodaj\\.net/)([^.]+\\.[^.]+)\\.html",to:"$1images/$2"},"ZdravCity.ru-s":{link:"^zdravcity\\.ru/[\\w-]+\\.html",res:function(e){return JSON.parse(e._.match(/"__NEXT_DATA__" type="application\/json">({.+?})<\/script/)[1]).props.pageProps.product.images.filter(t=>t.src).map(t=>[t.src])},img:"^(static\\.zdravcity\\.ru/upload/iblock/\\w+/|partners\\.protek\\.ru/api/files/shared-download\\?filename=\\d+\\.\\d+)(?:\\d+_\\d+_|_\\d+x\\d+)",to:`$1
`},"Zerochan-g":{useimg:1,link:"^(zerochan\\.net)(/)(?:full/)?(\\d{4,}).*",img:"^s(?:[123]|tatic)\\.(zerochan\\.net/)(?:(?:\\d\\d/)+|([^/]*)\\.(?:\\d+|full)\\.)(\\d{4,})\\.",to:"http://static.$1$2.full.$3.#jpg png gif#"},"zip2img-h":{link:"zip2img\\.com/(?:i/)?\\?fv?=(.*)",img:"zip2img\\.com/(?:i/)?\\?fv?=(.*)",to:"zip2img.com/?f=$1"},"Zonerama-g":{link:"eu.zonerama.com/(?:\\w+)/Photo/(?:\\d+)/(?:\\d+)",res:'<meta property="og:image" content="([^"]+)"'},"ZR.ru":{link:"^forum\\.zr\\.ru/forum/gallery/album/.+",res:function(e){return[...e._.matchAll(/class="galimageview"><img src="([^"]+)/g)].map(t=>[t[1]])},img:"^\\w+(\\.zr\\.ru/_ah/img/[^=]+).*",to:"img$1"},"Zupimages-h-p":{link:"^(.*)zupimages\\.net/viewer\\.php.+(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?))",res:'<a href=\\"(.+(?:jpe?g|a?png|gif|svgz?|webp|w?bmp|xbm|pict|j(?:if|fif?)))\\">',to:"https://www.zupimages.net/$1"},"[_dereferers_]":{link:"^[^/]{3,70}/\\??(https?:[^?#]+\\.(?:jpe?g|a?png|gifv?|bmp|svgz?|web[pm]|og[gv])).*",ci:1,dc:1,loop:1,to:"$1"},"[Akina-Photohost]":{link:"^([^/]+/)(demo/)?\\?v=(\\d{4}-\\d\\d)-(\\d\\d)_([^&]+).*",img:"^([^/]+/)(demo/)?thumbs/(\\d{4}-\\d\\d)/(\\d\\d)/([^?]+).*",to:"$1$2img/$3/$4/$5"},"[Discourse]":{img:"(?:/optimized(/[1-8](?:\\.[1-9])?X/([\\da-f])(?:/[\\da-f])*?/\\2[\\da-f]{39})[^.]*|(^[\\da-z.-]+/user_avatar/[\\da-z.-]+\\.[a-z]+/[^/]{2,40}/)\\d{1,4}(/\\d+(?:_\\d)?\\.png))",to:function(){var e=arguments;return e[1]?"/original"+e[1]:e[3]+"1000"+e[4]}},"[Lemmy]":{img:"^([^/]+/pictrs/image/[a-f0-9-]+\\.[a-z\\d]{3,4})\\?format=webp.*",to:"$1"},"[PeerTube|PeerVideo]":{link:"^([^/]+)/(?:videos/watch/([a-f0-9-]{36})|w/(\\w{22}))(?:[?/]|$)",url:"https://$1/api/v1/videos/$2$3",res:function(e){var l;if(!/^\{/.test(e._))return"";const t=JSON.parse(e._),a=t.duration;let n=t.files[0]?t.files:(l=t.streamingPlaylists[0])==null?void 0:l.files;return n.reverse(),[[["#"+n.pop().fileUrl,n&&n.length&&n[n.length-1].fileUrl],[t.name,t.account.name,new Date(t.createdAt).toDateString(),[Math.floor(a/3600).toString().replace("0",""),Math.floor(a%3600/60).toString().replace(/^(\d)$/,"0$1"),Math.floor(a%60).toString().replace(/^(\d)$/,"0$1")].filter(Boolean).join(":"),t.description].filter(Boolean).join(" | ")]]}},"[thumbor]":{img:"^[^/]{4,70}/(?:thumbor/|(?:new-)?resizer/|v\\d)?[\\w\\-]{26}[\\w\\=-]{2}/(?:(?:smart|trim(?::(?:top-left|bottom-right))?|left|center|right|top|middle|bottom|(?:full-)?fit-in|-?(?:\\d+|orig)?x-?(?:\\d+|orig)?|\\d+x\\d+:\\d+x\\d+|filters:[^/]+)/)*((?:https?(?:%3[aA]|:)(?:%2[fF]|/){2})?(?:[^./]{1,70}\\.)+[a-z]{2,6}(?:%2[fF]|/)[^&?#]+).*",to:function(){var e=arguments;return e[1].indexOf("%")>0&&(e[1]=decodeURIComponent(e[1])),/^http/.test(e[1])?e[1]:"//"+e[1]}},"[TUMBLR]-p":{link:"^(?:([^/]{5,70})/(?:image|post)|tumblr\\.com/([\\w-]+))/(\\d{8,18})(?:/[^.?]*$|\\?|#|$).*",url:"https://api.tumblr.com/v2/blog/$1$2/posts?id=$3&filter=raw&api_key=4AjWu4k7xrMxAqiJjppAHatW1QLQGxZ2NKo2XdTlcov4i8qZuw",res:function(e){if(e._=JSON.parse(e._),e._.meta.status!=200)return null;e=e._.response.posts[0];var t=e.caption||"";return e.body?[...new DOMParser().parseFromString(e.body,"text/html").querySelectorAll("img,source")].map((a,n)=>{var l;return[((l=a.srcset)==null?void 0:l.split(/\s+\d+w(?:,\s+)?/).filter(Boolean).pop())||a.src,n?"":t]}):e.photos?e.photos.map((a,n)=>{var l;return[(l=a.original_size)==null?void 0:l.url,n?"":t]}):e.video_url?[e.video_url,t]:e.permalink_url?{loop:e.permalink_url}:null},img:"^(?:((?:\\d\\d\\.)?media)|data)(\\.tumblr\\.com/(?:[\\da-f]{32}/)?tumblr_\\w+_)((?:\\d{2,4}|raw)\\.(?!gif)|frame\\d*\\.jpg)",to:function(){var e=arguments;return e[4][0]=="f"?"vt"+e[2]+".mp4":"//"+(e[1]||"78.media")+e[2]+"#1280 500 400#."}},"[SMF_images]":{link:"^[^/]+/forum/index\\.php\\?(.+)\\;attach=\\d+\\;image$"},"[XenForo]":{img:"/attachments/[^/]+[.-](?:jpe?g|png|gif)\\.\\d+/",to:"$&"},"[XFileSharing_post]":{link:"^([^/]+/)([\\da-z]{12})(/[\\w.-]+\\.(?:[Jj][Pp][Ee]?[Gg]|png|PNG|gif|GIF|bmp|BMP)(?:\\.html)?)$",url:"$1$2$3 :op=view&id=$2&pre=1",res:'src="(https?://[^"]+)" (\\w+="[^"]+"\\s+)*?(?:class="pic|id="[^"]+"\\s*>)',img:"^(?:i\\D{0,3}\\d*\\.|main\\.)?([^/]+/)(?:i/\\d{5}/([\\da-z]{12})_[^.]+|th/\\d{5}/([\\da-z]{12}))\\.jpg$"},"[Typepad]":{img:"^(?:([^/]{3,70}/\\.a/[\\da-f]{34})(?:-(?:\\d+wi|popup|pi))?|typepad\\.com/showcase/images(/[^-]+).*)$",to:function(){var e=arguments;return e[1]?e[1]:this.node.parentNode.hostname?"//"+this.node.parentNode.hostname+"/.a"+e[2]:""}},"[porn-galleries]-x":{img:"^(content\\d\\.[^.]{3,20}\\.[a-z]+/[\\da-z-]{3,20}(?:\\.[a-z]{2,5})?/(?:[a-z_-]+/){0,2}\\d+/(?:[^.]+_)?)tn_(?=\\d{2,3}\\.jpg)",to:"$1"},"[NDsoft-kr-news]":{img:"^([^/]{4,50}/news/)thumbnail(/\\d+/[\\d_]+)_v\\d+",to:"$1photo$2"},"[Marginal-Hacks]":{img:"^([^/]+/(?:[^/]+/+)*?)tn/([^/]+?)(?:(\\.(?:gif|png|bmp))\\.jpg|(?:\\.med)?(\\.(?:jpg|gif|png|bmp)))$",ci:2,to:function(){var e=arguments;return e[4]?"#"+e[1]+e[2]+e[4]+`
`+e[1]+"tn/"+e[2]+".med"+e[4]:"#"+e[1]+e[2]+e[3]+`
`+e[1]+"tn/"+e[2]+e[3]}},"[Coppermine_gallery]":{img:"^([^/]{3,70}/(?:[^/]{3,}/){0,2}?albums/(?:[^/]+/)+?)(?:thumb|normal)_(?=[^/]+$)",to:"$1# normal_#"},"[Labrador_CMS]":{img:"^([^/]+/(?:[^.]+\\.webp\\?imageId=\\d+|images/\\d+\\.webp\\?)).*?&width=\\d+&height=\\d+.*&format=webp",to:"$1&width=-1&height=-1&format=webp"},"[Cloudinary]":{img:"^([^/]{4,70}/(?:[\\w-]+/){0,2})(?:(image/(?:upload|fetch|sprite|facebook|twitter|gplus|instagram_name|gravatar|youtube|hulu|vimeo|animoto|worldstarhiphop|dailymotion))(?:/s--[\\da-zA-Z]{8}--)?(?:/(?:(?:[eghloqrtuwxyz]|\\$\\w+|ar?|bo?|c[os]?|d(?:l|n|pr)?|fl?|if|pg)_[^,/]+,?)+)*|(video/upload)(?:/s--\\w{8}--)?(?:/(?:(?:[ghloqwxyr]|a[cfr]?|b[or]?|co?|d[lu]|eo?|fl?|s[op]|v[cs])_[^,/]+,?)+)*)(/[^?#]+).*",to:"$1$2$3$4"},"[CbsiStatic]":{img:"^([^/]{4,50}/)(?:((?:hub/)?i/)r/(\\d{4}/\\d\\d/\\d\\d/[\\da-f-]{30,}/)[^/]+/[\\dxauto]+/|(img/)[\\w=-]+/(?:[\\dx:]+/)?\\d+x\\d+/)",to:"$1$2$3$4"},"[WixStatic]":{img:"^(static.wixstatic\\.com/[^.]+\\.[a-zA-Z]+).*",to:"$1"},"[vBulletin]":{link:"^[^/]{5,70}/(?:forums?/)?attachment\\.php\\?(?:[^&]+&)*?attachmentid=(\\d+).*",img:"^[^/]{5,70}(?:/[^/]+)?/attachment\\.php\\?(?:[^&]+&)*?thumb=(1)(?:$|&.*)",to:function(){var e=arguments,t=this.node,a=/\.(jpe?g|gif|png|bmp|web[mp]|mp[34])\b/i;return e[1]==1||a.test(t.textContent)||a.test(t.title)||~(t.src||"").indexOf(e[1])||t.classList.contains("thumbnail")?e[0].replace(/thumb=1&?/,""):""}},"[ImgShot-script]":{useimg:1,link:"^[^/]+/(?:[a-z]{1,5}/)?i(?:/|mg-)[\\da-f]{13}\\.html$",url:"$& :imgContinue=",res:`<img.+?' src=["']([^"']+)`,img:"^([^/]+/[^/]+/)small(/\\d{4}/\\d{2}/\\d{2}/[\\da-f]{13}\\..+)",to:"$1big$2"},"[CF-Image-Host]":{img:"^([^/]+/)(?:(?:[pd][mtl](-\\d+)|((?:[^/]+/)*?)[pd][mtl](/[\\dA-Z]{3,6}/.+))\\.(?:jpe?g|png|gif|bmp|html)$|(?:i(?:ndex|mage)\\.php)?\\?[pd][mtl]=([\\dA-Z]{3,6}))",to:function(){var e=arguments;return"http://"+e[1]+(e[5]?"#image.php #?di="+e[5]:(e[3]||"")+"di"+(e[2]||"")+(e[4]||"")+".jpg")}},"[CF-Image-Host_stock-photos]":{link:"^[^/]+/p/\\d{4,10}(?:_\\d)?\\.html$",res:'src="([^"]+)'},"[image-host-script]":{link:"/share(?:-|\\.php\\?id=)([\\dA-F]{4}_[\\dA-F]{8}).*",url:"/share.php?id=$1",res:`\\[img\\]([^\\[]+/image\\.php\\?id=$1[^\\[]+)
<h1>([^<]+)`,img:"/(?:thumb|image)(?:-|\\.php\\?id=)([\\dA-F]{4}_[\\dA-F]{8}).*"},"[LinkedMedia]":{link:"^[^?#]{6,4096}\\.(?:jp(?:g|eg?)|heic|3gp|a?png|gif|web[pm]|bmp|xbm|pict|j(?:if|fif?)|flv|m2ts|mkv|mov|mpeg|mpg|og[gv]|mp[34]|m4[va]|svgz?|ts|rm|wm[va])(?:$|[?#]).*",ci:3,img:"^[^?#]{6,4096}\\.(?:jp(?:g|eg?)|heic|3gp|a?png|gif|web[pm]|bmp|xbm|pict|j(?:if|fif?)|flv|m2ts|mkv|mov|mpeg|mpg|og[gv]|mp[34]|m4[va]|svgz?|ts|rm|wm[va])(?:$|[?#]).*",to:function(){var a,n,l,m,c,v;var e=arguments;if(location.hostname==="www.google.com")return"";const t=this.node;return(t==null?void 0:t.nodeName)==="VIDEO"&&(t.title="Imagus activating on videos can be disabled in the [LinkedMedia] sieve"),RegExp.prototype.test_original||(RegExp.prototype.test_original=RegExp.prototype.test,RegExp.prototype.test=function(w){var b;return(b=this.source)!=null&&b.startsWith("^[^?#]+\\.")?new RegExp(this.source,"i").test_original(w):this.test_original(w)}),((a=this.TRG)==null?void 0:a.localName)!=="a"&&((n=this.TRG)!=null&&n.clientWidth)&&((l=this.TRG)==null?void 0:l.clientWidth)<40&&((m=this.TRG)!=null&&m.clientHeight)&&((c=this.TRG)==null?void 0:c.clientHeight)<40?"":((v=this.TRG)!=null&&v.hasAttribute("src")&&!this.TRG.src&&(this.TRG.src=this.TRG.getAttribute("src")),e[0])}},"[Local_Files]":{link:"^file:///.+",url:function(){var e=arguments;return(()=>{if(e[0].length>=location.href.length)throw"";return"data:,"+e[0]})()},res:function(e){return[...document.getElementsByClassName("file")].map(t=>{var a;return[t.href,((a=t.href.match(/[^\/]+$/))==null?void 0:a[0])||""]}).filter(([t])=>/\.(?:jp(?:g|eg?)|heic|3gp|a?png|gif|web[pm]|bmp|xbm|pict|j(?:if|fif?)|flv|m2ts|mkv|mov|mpeg|mpg|og[gv]|mp[34]|m4[va]|svgz?|ts|rm|wm[va])/.test(t))}},"[phpGraphy]":{img:"^([^/]+/(?:[^/]+/)*?index\\.php\\?)(?:display(?:pic)?|previewpic)=([^&]+).*",to:function(){var e=arguments;return e[2].slice(-13)==="directory.jpg"?e[0]:e[1]+"displaypic="+e[2]}},"[WordPress]":{img:"^(?:(?![^/]*userapi\\.com))^([^/]{4,70}(?:/[^/?#]+){1,10})(?:(/)(?:(gallery/(?:[^/]+/)*?)thumbs/thumbs_|((?:upload|image(?:s_blog)?|file)s/)(?:(?:thumbnails_\\d+x\\d+/thumb_([^.]+?)(?:-\\d+x\\d+)?|([^?]+)-\\d{2,}x\\d{2,})(\\.[a-z]{3,4})))|(.{5})/?\\?(?:[^&]*&)*?(?:quality=[\\d.]+|fit=[\\d%C]+|(?:w(?:idth)?|h(?:eight)?|resize)=\\d+(?:(?:%2C|,)\\d+)?)(?:&.*|$))",ci:2,loop:2,to:function(){var e=arguments;if(/\.php$/.test(e[8]))return!1;if(/[&?]s=[\da-f]{32}/.test(e[0]))return e[0];var t=e[0].match(/[&?](?:url|src)=([^&]+)/);if(t)return decodeURIComponent(t[1]);var a=e[8]&&e[8].match(/^(.*\.)(jpe?g|gif|png)$/i);return e[1]+(e[2]||"")+(e[3]||"")+(e[4]||"")+(e[5]||"")+(e[6]?e[6]+e[7]:"")+(a&&a[2]?a[1]+(a[2]!="j"?a[2]:"#jpg jpeg png gif#"):e[8]||"")}},"[VK]-h":{link:"^(?:m\\.)?vk\\.com/photo([\\d\\-_]+)(?:\\?(tag)=(\\d+))?.*",url:function(){var e=arguments;return"vk.com/al_photos.php :list="+(e[3]?e[2]+e[3]:((this.node.parentNode.getAttribute("onclick")+"").match(/wall-[\d_]+/)||"")+"")+"&act=show&al=1&photo="+e[1]},res:function(e){var t=/[\-\d_]+/,a,n=null,l={_arr:[]},m,c=e.url[1].substr(e.url[1].lastIndexOf("=")+1),v=JSON.parse(e._.slice(e._.indexOf("{"))).payload[1][3];for(m in v)n=v[m].w_src?["#"+v[m].w_src]:[],n.push(v[m].z_src||v[m].y_src||v[m].x_src),v[m].id==c?a=[[n]]:(l[v[m].id]=n,l._arr.push('a[href^="/photo'+v[m].id+'"]'));return l._arr.length&&[].forEach.call(document.body.querySelectorAll(l._arr.join(",")),function(w){var b=l[w.pathname.match(t)[0]];w.IMGS_c||(w.IMGS_c_resolved=b,w.firstElementChild&&(w.firstElementChild.IMGS_c_resolved=b))}),a},img:"^(?:cs\\d+|pp|sun[\\-0-9]+)\\.(?:userapi\\.com|vk\\.me)\\/(c\\d+\\/*[uv]\\d+\\/.+\\/|.+\\/).+",to:function(){var e=arguments,t,a=this.node,n=a&&a.parentNode;if(a.dataset.src_big)return a=a.dataset.src_big.split("|")[0],a;if(a){if(n&&n.href&&a.classList.contains("page_doc_photo"))return a=n.href+"&wnd=1",a;if((t=a.getAttribute("onclick"))&&t.indexOf("showPhoto(")>0)return a=JSON.parse(t.match(/(\{.+\})/)[0]).temp,a=(a.w?"#"+a.w+`
`:"")+(a.z||a.y||a.x),a;if((t=n.getAttribute("onclick"))&&t.indexOf("showPhoto(")>0)return a=JSON.parse(t.match(/(\{.+\})/)[0]).temp,a=(a.w?"#"+a.w+`
`:"")+(a.z||a.y||a.x),a;if((t=a.getAttribute("style"))&&t.indexOf("background-image:")>0){var l=/.+background-image: url\((.*)\).*/;if(z=l.exec(t),z!=null)return z[1]}}return e[0]}},"[Chevereto]-h":{link:"^(?!(?:x|twitter)\\.com|(?:gallery\\.)?minitokyo\\.net)[^/]{4,}/(?:(a|alb|album)|(g|i|ib|image|images|imagine|img|view))/(?:[^\\./]+\\.)?\\w{1,7}$",res:function(e){return e[1]?[...e._.matchAll(/img\s+src="([^"]+)"\s+alt/g)].map(t=>[t[1]]):[e._.match(/="og:image" content="([^"]+)/)[1],e._.match(/="og:title" content="([^"]*)/)[1]]}},"[MediaGrabber]":{link:"^(?!(?:[a-z0-9.-]+\\.)?(?:8muses\\.(?:com|io)|4chan(?:nel)?\\.org|alphacoders\\.com|bdnews24\\.com|geograph\\.org\\.uk|hentaisea\\.com|joemonster\\.org|kinorium\\.com|minitokyo\\.net|nhentai\\.net|rule34\\.xxx|twitter\\.com|ya\\.ru)/).*(?:^z\\.photos/i|a|alb|album|cld|cloud|drop|file|files|fotka|foto|g|gif|gifs|host|hosting|i|ib|im|ima|imag|image|images|imagine|img|jpg|jpeg|keep|load|media|meme|photo|pic|pica|pico|pics|pict|picu|pik|pix|pixel|pixs|png|post|put|save|screen|send|share|shot|snap|stock|stream|thumb|thumbnail|thumbnails|tumb|upl|upload|vi|vid|video|view|watch/\\w+).*",url:function(){var e=arguments;return(()=>{var t;return this.oImg=this.node.src??((t=this.node.closest("a").querySelector("img[title]"))==null?void 0:t.src)??"",this.sReg||(this.sReg=new RegExp(cfg.sieve.filter(a=>a.off!==1).map(a=>{var n;return(n=a.img)==null?void 0:n.source}).filter(Boolean).join(")|(?:").replace(/.*/,"(?:$&)"))),this.sReg.test(this.oImg.replace(/^https?:\/\/(?:www\.)?/,""))?"data:"+e[0]:e[0]})()},res:function(e){return/^data:/.test(e.base)?{loop:this.oImg}:/\/(?:a|alb|album)\//.test(e[0])?[...e._.matchAll(/img\s+src="([^"]+)"\s+alt/g)].map(t=>[t[1]]):(e._.match(/<meta property="og:image" content="([^"]+)"/)||[,""])[1]},off:1}},content_mainworld=function(){function e(w){[...document.querySelectorAll("[data-i18n]")].forEach(b=>{const k=b.dataset.i18nValue||"textContent";b[k]=w[b.dataset.i18n]})}chrome.runtime={onMessage:{addListener:function(w){window.addEventListener("message",w)},removeListener:function(w){window.removeEventListener("message",w)}},sendMessage:function(w){const b={identifier:"imageDukeContentMainWorldBridge",listener:"imgus",href:location.href,payload:w};window.postMessage(b,location.href)}};var t={},a,n,l;a={name:"Image Duke"},document instanceof window.HTMLDocument&&(t=document.documentElement||document.createElementNS("http://www.w3.org/1999/xhtml","div"),window.requestAnimationFrame||(window.requestAnimationFrame=function(w){return window.setTimeout(w,25)},window.cancelAnimationFrame=function(w){return window.clearTimeout(w)}),t.style&&(l=t.style,t={wheel:"onwheel"in t?"wheel":"mousewheel",transition:("webkitTransition"in l?"webkitT":"t")+"ransition",transition_css:("webkitTransition"in l?"-webkit-":"")+"transition",transform:("webkitTransform"in l?"webkitT":"t")+"ransform",transform_css:("webkitTransform"in l?"-webkit-":"")+"transform","zoom-in":"zoom-in"},l=null));function m(w,b){if(!(!w||!Array.isArray(b))){if(!b.length)return w;for(var k=w.ownerDocument,S=k.createDocumentFragment(),G=0,j=b.length;G<j;G++)if(b[G]){if(typeof b[G]=="string"){S.appendChild(k.createTextNode(b[G]));continue}var R=k.createElement(b[G].tag);if(b[G].attrs)for(var M in b[G].attrs)M==="style"?R.style.cssText=b[G].attrs[M]:R.setAttribute(M,b[G].attrs[M]);b[G].nodes?m(R,b[G].nodes):b[G].text&&(R.textContent=b[G].text),S.appendChild(R)}return S.childNodes.length&&w.appendChild(S),w}}window.addEventListener("message",function(w){w.data.hasOwnProperty("vdfDpshPtdhhd")&&(w.stopImmediatePropagation(),t.onmessage&&t.onmessage(w))},!0),window.addEventListener("keydown",function(w){t.onkeydown&&t.onkeydown(w)},!0),t[navigator.userAgent.includes("Firefox")?"firefox":"chrome"]=!0,t.crx=!0;const c={checkMsg:function(w){return!w||!w.data?!0:!(w.data.href!==location.href||!w.data.identifier||w.data.identifier!=="imageDukeContentMainWorldBridgeSendResponse")},listen:function(w){if(this.listener&&chrome.runtime.onMessage.removeListener(this.listener),typeof w!="function"){this.listener=null;return}l?this.listener=function(b,k){k||w(b)}:this.listener=w,chrome.runtime.onMessage.addListener(this.listener)},send:function(w){chrome.runtime.sendMessage(w)}};/^(chrome|ms-browser|moz)-extension:/.test(location.protocol)&&(l=function(w){try{return chrome.i18n.getMessage(w)||w}catch{return w}},t.insertHTML=function(w,b){var k=/^([apbiusq]|d(iv|el)|em|h[1-6]|i(mg|ns)|s((pan|mall)|u[bp])|[bh]r|pre|code|blockquote|[ou]l|li|d[ltd]|t([rhd]|able|head|body|foot)|svg|symbol|line|path)$/i,S=/^(data-|stroke-|(class|style|xmlns|viewBox|i?d|fill|line(cap|join)|transform|[xy][12])$)/i,G=document.implementation.createHTMLDocument("").body,j=function(R){for(var M=R.childElementCount,P=R.children||R.childNodes;M--;){var L=P[M];if(L.nodeType!==Node.TEXT_NODE){if(!k.test(L.nodeName)){L.parentNode.removeChild(L);continue}for(var C=L.attributes.length;C--;)S.test(L.attributes[C].name)||L.removeAttribute(L.attributes[C].name);L.childElementCount&&j(L)}}};t.insertHTML=function(R,M){if(!(!R||typeof M!="string")){if(M.indexOf("<")===-1){R.insertAdjacentText("beforeend",M);return}G.innerHTML=M,j(G);for(var P=R.ownerDocument,L=P.createDocumentFragment();G.firstChild;)L.appendChild(P.adoptNode(G.firstChild));R.appendChild(L)}},t.insertHTML(w,b)});var v=function(w,b){var k=w.button;if(k)var S="Mouse"+k;else if(b)switch(w.code){case"Numpad1":var S="End";break;case"Numpad2":var S="ArrowDown";break;case"Numpad3":var S="PageDown";break;case"Numpad4":var S="ArrowLeft";break;case"Numpad0":var S="Insert";break;case"Numpad6":var S="ArrowRight";break;case"Numpad7":var S="Home";break;case"Numpad8":var S="ArrowUp";break;case"Numpad9":var S="PageUp";break;case"NumpadDecimal":var S="Delete";break;default:var S=w.code.replace("Key","").replace("Digit","").replace("Numpad","").replace(/Add$/,"Equal(Add)").replace(/Equal$/,"Equal(Add)").replace("Subtract","Minus").replace("Divide","Slash").replace("Decimal","Period").replace(new RegExp("(?<!Arrow)Right"),"").replace(new RegExp("(?<!Arrow)Left"),"")}else var S=w.code.replace("Key","").replace("Digit","").replace("Numpad","").replace(/Add$/,"Equal(Add)").replace(/Equal$/,"Equal(Add)").replace("Subtract","Minus").replace("Divide","Slash").replace("Decimal","Period").replace(new RegExp("(?<!Arrow)Right"),"").replace(new RegExp("(?<!Arrow)Left"),"");var G="";return w.shiftKey&&(S=="Control"||S=="Alt"||S=="")?S="Shift":w.altKey&&S=="Control"&&(S="Alt"),w.ctrlKey&&S!="Control"&&(G+="Ctrl+"),w.altKey&&S!="Alt"&&(G+="Alt+"),w.shiftKey&&S!="Shift"&&S!=""&&(G+="Shift+"),G+=S,G};(function(w,b){if(w.location.protocol!=="safari-extension:"&&!(!b||!(b instanceof w.HTMLDocument))){var k=b.images&&b.images.length===1&&b.images[0];if(!(k&&k.parentNode===b.body&&k.src===w.location.href)){var S=function(d,p){d.scale||(d.scale={h:1,v:1}),d.scale[p?"h":"v"]*=-1,p=d.scale.h!==1||d.scale.v!==1?"scale("+d.scale.h+","+d.scale.v+")":"",d.curdeg&&(p+=" rotate("+d.curdeg+"deg)"),d.style[t.transform]=p},G=function(d,p,y){!d||!d.preventDefault||!d.stopPropagation||((p===void 0||p===!0)&&d.preventDefault(),d.stopImmediatePropagation())},j=function(d){if(!d.url&&!d.name&&!d.url||d.url&&!/^http/.test(d.url)){alert("Invalid URL! ("+d.url.slice(0,d.url.indexOf(":")+1));return}for(var p=0,y=[],I=n.tls.sendToHosts;p<I.length;++p)(d.host===p||d.host===void 0&&I[p][0][0]==="+")&&y.push(I[p][1].replace("%url",encodeURIComponent(d.url)).replace("%raw_url",d.url));c.send({cmd:"open",url:y,nf:!!d.nf})},R=function(d){if(d&&Array.isArray(d=d.match(/\burl\(([^'"\)][^\)]*|"[^"\\]+(?:\\.[^"\\]*)*|'[^'\\]+(?:\\.[^'\\]*)*)(?=['"]?\))/g))){for(var p=d.length;p--;)d[p]=d[p].slice(/'|"/.test(d[p][4])?5:4);return d}return null},M=function(d){var p=d.nodeName.toUpperCase();if(p==="IMG"||d.type==="image"||p==="EMBED")return d.src;if(p==="CANVAS")return d.toDataURL();if(p==="OBJECT"&&d.data)return d.data;if(p==="AREA"){var y=b.querySelector('img[usemap="#'+d.parentNode.name+'"]');return y.src}else{if(p==="VIDEO")return p=b.createElement("canvas"),p.width=d.clientWidth,p.height=d.clientHeight,p.getContext("2d").drawImage(d,0,0,p.width,p.height),p.toDataURL("image/jpeg");if(d.poster)return d.poster}return null},P,L,C,V,J,N=/#(?![?!].).*/,U=/\.svgz?$/i,W=function(d){var p=b;p=p.compatMode==="BackCompat"&&p.body||p.documentElement;var y=p.clientWidth,I=p.clientHeight;y===L&&I===C||(L=y,C=I,V=y,J=I)},F=function(d){if(typeof s.freeze=="number"){s.freeze=!n.hz.deactivate;return}if(d.type==="mouseup"){if([1,3,4].includes(d.button)){s.key_action(d);return}if(d.target!==s.CNT||s.fullZm||d.button!==0||d.ctrlKey||d.shiftKey||d.altKey||s.md_x!==d.clientX||s.md_y!==d.clientY)return;s.reset(!0);return}s.keyup_freeze_on&&s.keyup_freeze()},Z=function(d){if(!(!n||!d.isTrusted)){var p=b.compatMode&&b.compatMode[0]==="B"?b.body:b.documentElement;if(!(d.clientX>=p.clientWidth||d.clientY>=p.clientHeight)){if(p=d.button===2&&s.freeze&&s.SRC!==void 0&&!n.hz.deactivate,s.fireHide&&s.state<3&&!p){s.m_over({relatedTarget:s.TRG}),(!s.freeze||s.lastScrollTRG)&&(s.freeze=1);return}if(d.button===0){if(s.fullZm){if(P=!0,d.ctrlKey||s.fullZm!==2)return;s.fullZm=3,w.addEventListener("mouseup",s.fzDragEnd,!0);return}if(t.opera&&(d.target.clientWidth&&d.offsetX>=d.target.clientWidth||d.target.clientHeight&&d.offsetY>=d.target.clientHeight))return;if(d.target===s.CNT){s.md_x=d.clientX,s.md_y=d.clientY;return}s.fireHide&&s.m_over({relatedTarget:s.TRG,clientX:d.clientX,clientY:d.clientY}),(!s.freeze||s.lastScrollTRG)&&(s.freeze=1);return}d.button===2&&(n.hz.actTrigger==="m2"?(s.fireHide&&p&&(s.SRC={m2:s.SRC===null?s.TRG.IMGS_c_resolved:s.SRC.m2||s.SRC}),s.freeze=n.hz.deactivate):s.keyup_freeze_on&&(s.keyup_freeze(),s.freeze=s.freeze?1:0),P=d.timeStamp,s.md_x=d.clientX,s.md_y=d.clientY,t.chrome&&(d.target.href||(p=d.target.parentNode)&&p.href)&&d.preventDefault())}}},te=async function(d){if(!P||d.button!==2||s.md_x!==d.clientX||s.md_y!==d.clientY){P&&(P=null),d.button===2&&(!s.fireHide||s.state>2)&&(Math.abs(s.md_x-d.clientX)>5||Math.abs(s.md_y-d.clientY)>5)&&n.hz.actTrigger==="m2"&&!n.hz.deactivate&&G(d);return}var p,y=d.timeStamp-P>=300;if(P=null,p=s.state>2&&(y&&n.hz.fzOnPress===2||!y&&!s.fullZm&&n.hz.fzOnPress===1),p)await s.fullzmtoggle(s.fullZm?!0:d.shiftKey);else if(p=s.state<3&&s.SRC&&s.SRC.m2!==void 0){if(y)return;await s.load(s.SRC.m2),s.SRC=void 0}else if(y&&s.state>2&&!s.fullZm&&n.hz.fzOnPress===1)return;p?G(d):d.target===s.CNT?G(d,!1):d.ctrlKey&&!y&&!d.shiftKey&&!d.altKey&&n.tls.opzoom&&s.state<2&&(p=M(d.target)||R(w.getComputedStyle(d.target).backgroundImage))&&(s.TRG=s.nodeToReset=d.target,s.fireHide=!0,s.x=d.clientX,s.y=d.clientY,s.set(Array.isArray(p)?p[0]:p),G(d))},s={TRG:null,DIV:null,IMG:null,CAP:null,HLP:b.createElement("a"),anim:{},stack:{},timers:{},resolving:[],lastTRGStyle:{cursor:null,borderImage:null},iFrame:!1,state:null,rgxHTTPs:/^https?:\/\/(?:www\.)?/,pageProtocol:w.location.protocol.replace(/^(?!https?:).+/,"http:"),palette:{load:"rgb(255, 255, 255)",R_load:"rgb(255, 204, 204)",res:"rgb(222, 255, 205)",R_res:"rgb(255, 234, 128)",R_js:"rgb(200, 200, 200)",pile_fg:"#000",pile_bg:"rgb(255, 255, 0)"},askForI18nMsgs:function(){const d=[];[...document.querySelectorAll("[data-i18n]")].forEach(p=>{d.push(p.dataset.i18n)}),c.send({toMainWorldHelper:!0,cmd:"i18nLoad",msgKeysNeeded:d})},addBlinkText:function(d){var p={};n.otherprefs4imageduke.blinkTextCount&&(p=n.otherprefs4imageduke.blinkTextCount);var y=document.getElementById("blinkText");if(y&&s.DIV.removeChild(y),!(p[d]&&p[d]>=5)){var I=document.createElement("div");I.id="blinkText",I.innerHTML=`<strong><span style="background-color: yellow; padding: 5px; border-radius: 5px; color:red; line-height: 45px;" data-i18n="${d}">Press "Enter" key</span></strong>`,I.style.position="absolute",I.style.top="50%",I.style.left="50%",I.style.transform="translateX(-50%)",I.style.fontSize="24px",I.style.textAlign="center",I.style.fontWeight="bold",s.DIV.appendChild(I);var T=!0;setInterval(function(){T?I.style.opacity=0:I.style.opacity=1,T=!T},500),s.askForI18nMsgs(),setTimeout(function(){s.DIV.removeChild(I)},3e3),p[d]=(p[d]||0)+1,n.otherprefs4imageduke.blinkTextCount=p,c.send({cmd:"savePrefs",prefs:{otherprefs4imageduke:n.otherprefs4imageduke}})}},convertSieveRegexes:function(){var d=n.sieve,p;if(!(!Array.isArray(d)||!(p=d.length)||typeof(d[0].link||d[0].img)!="string"))for(;p--;)d[p].link&&(d[p].link=RegExp(d[p].link,d[p].ci&&d[p].ci&1?"i":"")),d[p].img&&(d[p].img=RegExp(d[p].img,d[p].ci&&d[p].ci&2?"i":""))},create:function(){if(!s.DIV){var d,p,y,I;s.HLP=b.createElement("a"),s.DIV=b.createElement("div"),s.VID=b.createElement("video"),s.IMG=b.createElement("img"),s.LDR=s.IMG.cloneNode(!1),s.CNT=s.IMG,s.DIV.IMGS_=s.DIV.IMGS_c=s.LDR.IMGS_=s.LDR.IMGS_c=s.VID.IMGS_=s.VID.IMGS_c=s.IMG.IMGS_=s.IMG.IMGS_c=!0,s.DIV.style.cssText="margin: 0; padding: 2px; "+(n.hz.css||"")+(n.hz.cssdim?"box-shadow: 0 0 0 2000px rgba(0, 0, 0,"+n.hz.cssdim+"), 0 0 150px rgba(255, 255, 255, 0.8)":"")+"; visibility: visible; cursor: default; display: none; z-index: 2147483647; position: fixed !important; box-sizing: content-box !important; left: auto; top: auto; right: auto; bottom: auto; width: auto; height: auto; max-width: none !important; max-height: none !important;",s.DIV.curdeg=0,s.LDR.wh=[35,35];var T=function(){this.removeEventListener("load",T,!1),T=null;var O=this.style;this.wh=[O.width?parseInt(O.width,10):this.naturalWidth||this.wh[0],O.height?parseInt(O.height,10):this.naturalHeight||this.wh[1]]};s.LDR.addEventListener("load",T,!1),s.LDR.alt="",s.LDR.draggable=!1,s.LDR.style.cssText=(n.hz.LDRcss||"padding: 5px; border-radius: 50% !important; box-shadow: 0px 0px 5px 1px #a6a6a6 !important; background-clip: padding-box; width: 38px; height: 38px")+"; position: fixed !important; z-index: 2147483647; display: none; left: auto; top: auto; right: auto; bottom: auto; margin: 0; box-sizing: border-box !important; "+(n.hz.LDRanimate?t.transition_css+": background-color .5s, opacity .2s ease, top .15s ease-out, left .15s ease-out":""),s.LDR.src=n.hz.LDRsrc||"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSIjMDkwMTA0IiBzdHJva2U9IiMwOTAxMDQiIHN0cm9rZS13aWR0aD0iMTUiIHhtbG5zOnY9Imh0dHBzOi8vdmVjdGEuaW8vbmFubyI+PGNpcmNsZSByPSIxNSIgY3g9IjQwIiBjeT0iMTAwIj48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjIiIHZhbHVlcz0iMTswOzE7IiBrZXlTcGxpbmVzPSIuNSAwIC41IDE7LjUgMCAuNSAxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49Ii0uNCIvPjwvY2lyY2xlPjxjaXJjbGUgcj0iMTUiIGN4PSIxMDAiIGN5PSIxMDAiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGNhbGNNb2RlPSJzcGxpbmUiIGR1cj0iMiIgdmFsdWVzPSIxOzA7MTsiIGtleVNwbGluZXM9Ii41IDAgLjUgMTsuNSAwIC41IDEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iLS4yIi8+PC9jaXJjbGU+PGNpcmNsZSByPSIxNSIgY3g9IjE2MCIgY3k9IjEwMCI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgY2FsY01vZGU9InNwbGluZSIgZHVyPSIyIiB2YWx1ZXM9IjE7MDsxOyIga2V5U3BsaW5lcz0iLjUgMCAuNSAxOy41IDAgLjUgMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwIi8+PC9jaXJjbGU+PC9zdmc+",d="display: none; visibility: inherit !important; background: none; position: relative; width: 100%; height: 100%; max-width: inherit; max-height: inherit; margin: 0; padding: 0; border: 0; ",s.IMG.alt="",s.IMG.style.cssText=d+"; image-orientation: initial !important",s.IMG.addEventListener("error",s.content_onerror),s.DIV.appendChild(s.IMG),(t.chrome||t.maxthon)&&(s.VID.poster="data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA="),s.VID.volume=n.hz.mediaVolume/100,s.VID.autoplay=!0,s.VID.style.cssText=d+"box-shadow: 0 0 0 1px #f16529",s.VID.addEventListener("loadeddata",s.content_onready),s.VID.addEventListener("error",s.content_onerror,!0),s.DIV.appendChild(s.VID),(n.hz.thumbAsBG||n.hz.history)&&(s.IMG.addEventListener("load",s.content_onload),s.VID.addEventListener("canplay",s.content_onload)),n.hz.hideIdleCursor>=50?(s.DIV.cursor_hide=function(){s.CNT.style.cursor=t.opera?"text":"none",s.timers.cursor_hide=null},s.DIV.addEventListener("mousemove",function(O){if(O.target!==s.CNT||s.CNT===s.VID&&s.VID.clientHeight-35<(O.offsetY||O.layerY||0)){clearTimeout(s.timers.cursor_hide);return}s.timers.cursor_hide?clearTimeout(s.timers.cursor_hide):s.CNT.style.cursor="",s.timers.cursor_hide=setTimeout(s.DIV.cursor_hide,n.hz.hideIdleCursor)}),s.DIV.addEventListener("mouseout",function(O){O.target===s.CNT&&(clearTimeout(s.timers.cursor_hide),s.CNT.style.cursor="")},!1)):n.hz.hideIdleCursor>=0&&(s.IMG.style.cursor=t.opera?"text":"none"),s.DIV.addEventListener("dragstart",function(O){G(O,!1)},!0),d=b.documentElement,d.appendChild(s.DIV),d.appendChild(s.LDR),s.DBOX={},d=w.getComputedStyle(s.DIV),p={mt:"marginTop",mr:"marginRight",mb:"marginBottom",ml:"marginLeft",bt:"borderTopWidth",br:"borderRightWidth",bb:"borderBottomWidth",bl:"borderLeftWidth",pt:"paddingTop",pr:"paddingRight",pb:"paddingBottom",pl:"paddingLeft"};for(y in p)y[0]==="m"&&(s.DBOX[y]=parseInt(d[p[y]],10)),(y[1]==="t"||y[1]==="b")&&(I=y[1]+(y[0]==="p"?"p":"bm"),s.DBOX[I]=(s.DBOX[I]||0)+parseInt(d[p[y]],10)),I=(y[1]==="l"||y[1]==="r"?"w":"h")+(y[0]==="m"?"m":"pb"),s.DBOX[I]=(s.DBOX[I]||0)+parseInt(d[p[y]],10);s.anim={maxDelay:0,opacityTransition:function(){s.BOX.style.opacity=s.BOX.opacity||"1"}},p=t.transition,d[p+"Property"]&&(I=/,\s*/,I=[d[p+"Property"].split(I),d[p+"Duration"].replace(/initial/g,"0s").split(I)],s.anim.css=d[p]||s.DIV.style[p],["opacity","left","top","width","height"].forEach(function(O){var A=I[0].indexOf(O),E=parseFloat(I[1][A])*1e3;E>0&&A>-1&&(s.anim[O]=E,E>s.anim.maxDelay&&(s.anim.maxDelay=E),O==="opacity"&&d.opacity&&(s.DIV.opacity=""+Math.max(.01,d.opacity)))})),(n.hz.capText||n.hz.capWH)&&s.createCAP(),s.addBlinkText("PVIpressEnter"),!t.opera&&b.querySelector("embed, object")&&(s.DIV.insertBefore(b.createElement("iframe"),s.DIV.firstElementChild),s.DIV.firstChild.style.cssText="z-index: -1; width: 100%; height: 100%; position: absolute; left: 0; top: 0; border: 0"),s.reset()}},createCAP:function(){if(!s.CAP){s.CAP=b.createElement("div"),m(s.CAP,[{tag:"b",attrs:{style:"display: none; "+t.transition_css+": background-color .1s; border-radius: 3px; padding: 0 2px"}}," ",{tag:"b",attrs:{style:"display: "+(n.hz.capWH?"inline-block":"none")}}," ",{tag:"span",attrs:{style:"color: inherit; display: "+(n.hz.capText?"inline-block":"none")}}]);var d=s.CAP.firstElementChild;do d.IMGS_=d.IMGS_c=!0;while(d=d.nextElementSibling);s.CAP.IMGS_=s.CAP.IMGS_c=!0,s.create(),d=n.hz.capStyle,s.palette.wh_fg=d?"rgb(100, 0, 0)":"rgb(204, 238, 255)",s.palette.wh_fg_hd=d?"rgb(255, 0, 0)":"rgb(120, 210, 255)",s.CAP.style.cssText="right:auto; left:0; display:flex; cursor:default; position:absolute; width:auto; height:auto; border:thick double #fff; white-space: "+(n.hz.capWrapByDef?"pre-line":"nowrap")+'; font:13px/1.4em "Trebuchet MS",sans-serif; background:rgba('+(d?"255,255,255,.95":"0,0,0,.75")+") !important; color:#"+(d?"000":"fff")+" !important; box-shadow: 0 0 1px #"+(d?"666":"ddd")+" inset; padding:1px 4px;opacity:0.9;",d=n.hz.capPos?"bottom":"top",s.CAP.overhead=Math.max(-18,Math.min(0,s.DBOX[d[0]+"p"]-18)),s.CAP.style[d]=s.CAP.overhead+"px",s.CAP.overhead=Math.max(0,-s.CAP.overhead-s.DBOX[d[0]+"bm"]),Object.defineProperty(s.CAP,"firstChild",{get:function(){return this.querySelector("b")}});var p=document.createElement("div");p.style.display="flex",p.style.marginRight="3px",p.style.cursor="pointer",p.innerHTML='<div title="Download this image" data-i18n="capDlIconTitle" data-i18n-value="title" id="cap-dl-icon" style="width:20px;height:20px"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%; height:100%; pointer-events: none;" viewBox="0 0 24 24"><path fill="currentColor" d="M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"></path></svg></div><div>|<div>',p.addEventListener("mouseover",function(){this.querySelector("svg path").style.fill="#ff0"}),p.addEventListener("mouseout",function(){this.querySelector("svg path").style.fill="#fff"}),s.CAP.prepend(p),s.DIV.appendChild(s.CAP),s.askForI18nMsgs()}},prepareCaption:function(d,p){p&&typeof p=="string"?(s.HLP.innerHTML=p.replace(/<[^>]+>/g,"").replace(/</g,"&lt;"),d.IMGS_caption=s.HLP.textContent.trim().replace(/[\n\r]+/g," "),s.HLP.textContent=""):d.IMGS_caption=""},flash_caption:function(){s.timers.pileflicker=0,s.timers.pile_flash=setInterval(s.flick_caption,150)},flick_caption:function(){if(s.timers.pileflicker++>=n.hz.capFlashCount*2){s.timers.pileflicker=null,clearInterval(s.timers.pile_flash);return}var d=s.CAP.firstChild.style;d.backgroundColor=d.backgroundColor===s.palette.pile_bg?"red":s.palette.pile_bg},updateCaption:function(){var d=s.CAP,p;!d||d.state===0||d.style.display==="none"&&(s.TRG.IMGS_album&&d.firstChild.style.display==="none"&&(p=s.stack[s.TRG.IMGS_album])&&p[2]&&(p=d.firstChild.style,p.color=s.palette.pile_fg,p.backgroundColor=s.palette.pile_bg,p.display="inline-block",n.hz.capFlashCount&&(n.hz.capFlashCount>5&&(n.hz.capFlashCount=5),clearTimeout(s.timers.pile_flash),s.timers.pile_flash=setTimeout(s.flash_caption,s.anim.maxDelay))),s.CNT!==s.IFR&&(p=d.children[2],n.hz.capWH||d.state===2?(p.style.display="inline-block",p.style.color=s.palette[s.TRG.IMGS_HD===!1?"wh_fg_hd":"wh_fg"],p.textContent=(s.TRG.IMGS_SVG?s.stack[s.IMG.src]:[s.CNT.naturalWidth,s.CNT.naturalHeight]).join("Ã—")):p.style.display="none"),p=d.lastChild,n.hz.capText||d.state===2?(p.textContent=s.TRG.IMGS_caption||"",p.style.display="inline"):p.style.display="none",d.style.display=s.DIV.curdeg%360?"none":"flex")},attrObserver:function(d,p,y){if(p){var I=d.style.backgroundImage;if((!I||y&&y.indexOf(I.slice(5,-2))!==-1)&&y&&y.indexOf("opacity")===-1&&d.style.cssText.indexOf("opacity")===-1)return}s.resetNode(d)},onAttrChange:function(d){if(d.attrChange===1){var p=d.target;switch(d.attrName){case"style":var y=p.style.backgroundImage;if((!y||d.prevValue.indexOf(y.slice(5,-2))!==-1)&&d.prevValue.indexOf("opacity")===-1&&p.style.cssText.indexOf("opacity")===-1)return;case"href":case"src":case"title":case"alt":p===s.TRG?s.nodeToReset=p:s.resetNode(p),p.removeEventListener("DOMAttrModified",s.onAttrChange)}d.stopPropagation()}},listen_attr_changes:function(d){s.mutObserver?s.mutObserver.observe(d,s.mutObserverConf):d.addEventListener("DOMAttrModified",s.onAttrChange)},resetNode:function(d,p){if(delete d.IMGS_c,delete d.IMGS_c_resolved,delete d.IMGS_thumb,delete d.IMGS_thumb_ok,delete d.IMGS_SVG,delete d.IMGS_HD,delete d.IMGS_HD_stack,delete d.IMGS_fallback_zoom,p||delete d.IMGS_album,d.localName==="a"){var y=d.querySelectorAll('img[src], :not(img)[style*="background-image"],b, i, u, strong, em, span, div');y.length&&[].forEach.call(y,function(I){I.IMGS_c&&s.resetNode(I)})}},getImages:function(d){var p,y,I=d&&d instanceof w.HTMLElement;return I&&(d.childElementCount>0&&d.childElementCount<3?(p=d.firstElementChild,p.childElementCount&&p.childElementCount<4&&(p.firstElementChild.localName==="img"?p=p.firstElementChild:p.lastElementChild.localName==="img"&&(p=p.lastElementChild)),p.src&&!/\S/.test(d.textContent)&&d.offsetWidth-p.offsetWidth<25&&d.offsetHeight-p.offsetHeight<25&&(d=p)):!d.childElementCount&&d.parentNode.childElementCount<=5&&(d.localName==="img"?d.src.lastIndexOf("data:",0)===0||d.naturalWidth<3||d.naturalHeight<3||d.style.opacity==="0":!/\S/.test(d.textContent))&&d.style.backgroundImage[0]!=="u"&&(y=d.previousElementSibling,[y&&y.previousElementSibling,y,d.nextElementSibling].some(function(T){if(T&&T.localName==="img"&&T.offsetParent===d.offsetParent&&Math.abs(T.offsetLeft-d.offsetLeft)<=10&&Math.abs(T.offsetTop-d.offsetTop)<=10&&Math.abs(T.clientWidth-d.clientWidth)<=30&&Math.abs(T.clientHeight-d.clientHeight)<=30)return d=T,!0}))),d.clientWidth>V*.7&&d.clientHeight>J*.7?null:(p={imgSRC_o:d.currentSrc||d.src||d.data||null},!p.imgSRC_o&&d.localName==="image"&&(p.imgSRC_o=d.getAttributeNS("http://www.w3.org/1999/xlink","href"),p.imgSRC_o?p.imgSRC_o=s.normalizeURL(p.imgSRC_o):delete p.imgSRC_o),p.imgSRC_o&&(I?(d.naturalWidth>0&&d.naturalWidth<3||d.naturalHeight>0&&d.naturalHeight<3)&&(p.imgSRC_o=null):p.imgSRC_o=s.normalizeURL(p.imgSRC_o),p.imgSRC_o&&(p.imgSRC=p.imgSRC_o.replace(s.rgxHTTPs,""))),!I||(d.style.backgroundImage&&d.style.backgroundImage[0]==="u"?p.imgBG_o=d.style.backgroundImage:d.parentNode&&(y=d.parentNode,y.offsetParent===d.offsetParent&&y.style&&y.style.backgroundImage&&y.style.backgroundImage[0]==="u"&&Math.abs(y.offsetLeft-d.offsetLeft)<=10&&Math.abs(y.offsetTop-d.offsetTop)<=10&&Math.abs(y.clientWidth-d.clientWidth)<=30&&Math.abs(y.clientHeight-d.clientHeight)<=30&&(p.imgBG_o=y.style.backgroundImage)),!p.imgBG_o)||(p.imgBG_o=p.imgBG_o.match(/\burl\(([^'"\)][^\)]*|"[^"\\]+(?:\\.[^"\\]*)*|'[^'\\]+(?:\\.[^'\\]*)*)(?=['"]?\))/g),!p.imgBG_o||p.imgBG_o.length!==1)?p.imgSRC?p:null:(d=p.imgBG_o[0],p.imgBG_o=s.normalizeURL(d.slice(/'|"/.test(d[4])?5:4)),p.imgBG=p.imgBG_o.replace(s.rgxHTTPs,""),p))},_replace:function(d,p,y,I,T,O){var A,E;typeof T=="function"&&(s.node=O);var D=T?p.replace(d[I],T):p;if(typeof T=="function"){if(D==="")return 2;if(D==="null")return null;if(D.indexOf(`
`,7)>-1){var X=p.replace(d[I],"\r").split("\r");for(D=D.trim().split(/[\n\r]+/g),A=[],E=0;E<D.length;++E)E>0&&(D[E]=X[0]+D[E]),E!==D.length-1&&(D[E]+=X[1]),D[E]=s._replace(d,D[E],y,I,"",O),Array.isArray(D[E])?A=A.concat(D[E]):A.push(D[E]);return A.length>1?A:A[0]}}if(d.dc&&(I==="link"&&d.dc!==2||I==="img"&&d.dc>1)&&(D=decodeURIComponent(decodeURIComponent(D))),T[0]==="#"&&D[0]!=="#"&&(D="#"+D.replace("#","")),D=s.httpPrepend(D,y),A=D.indexOf("#",1),A>1&&(A=[A,D.indexOf("#",A+1)])[1]>1?(A=D.slice(A[0],A[1]+1),D=D.split(A).join("#"),A=A.slice(1,-1).split(/ |%20/)):A=!1,A){for(D[0]==="#"?(D=D.slice(1),p="#"):p="",E=0;E<A.length;++E)A[E]=p+D.replace("#",A[E]);D=A.length>1?A:A[0]}return D},replace:async function(d,p,y,I,T,O){var A,E,D;if(await s.toFunction(d,"to")===!1)return 1;if(O.IMGS_TRG&&(O=O.IMGS_TRG),I=I.slice(0,I.length-y.length),Array.isArray(d.to))for(A=[],E=0;E<d.to.length;++E)D=s._replace(d,y,I,T,d.to[E],O),Array.isArray(D)?A=A.concat(D):A.push(D);else d.to?A=s._replace(d,y,I,T,d.to,O):A=s.httpPrepend(y,I);return A},toFunction:async function(d,p,y){const I=(y?/^:\s*\S/:/^:\n\s*\S/).test(d[p]);typeof d[p]!="function"&&I&&(d[p]=RULES[d.ruleName][p].bind(s))},httpPrepend:function(d,p){return p&&(d=d.replace(/^(?!#?(?:https?:|\/\/|data:)|$)(#?)/,"$1"+p)),d[1]==="/"&&(d[0]==="/"?d=s.pageProtocol+d:d[0]==="#"&&d[2]==="/"&&(d="#"+s.pageProtocol+d.slice(1))),d},normalizeURL:function(d){return d[1]==="/"&&d[0]==="/"&&(d=s.pageProtocol+d),s.HLP.href=d,s.HLP.href},resolve:async function(d,p,y,I){if(!y||y.IMGS_c||y.IMGS_c_resolved&&typeof y.IMGS_c_resolved.URL!="string")return!1;if(d=d.replace(N,""),s.stack[d])return y.IMGS_album=d,d=s.stack[d],d[d[0]][0];var T,O;if(p.rule)T=p,p=T.rule;else{for(T={},O=0;O<p.$.length;)T[O]=p.$[O++];T.length=p.$.length,delete p.$,T.rule=p}if(n.sieve[p.id].res===1)p.req_res=!0;else if(p.skip_resolve){if(typeof n.sieve[p.id].res=="function")return T.url=[d],await s.onMessage({cmd:"resolved",id:-1,m:!1,return_url:!0,params:T,NotTypicalMsg:!0});delete p.skip_resolve}return!n.hz.waitHide&&(s.fireHide&&s.state>2||s.state===2||s.hideTime&&Date.now()-s.hideTime<200)&&(I=!0),s.resolve_delay||clearTimeout(s.timers.resolver),y.IMGS_c_resolved={URL:d,params:T},s.timers.resolver=setTimeout(function(){s.timers.resolver=null,c.send({cmd:"resolve",url:d,params:T,id:s.resolving.push(y)-1})},s.resolve_delay||(I?50:Math.max(50,n.hz.delay))),null},find:async function(d,p,y){var I=0,T=d,O=!1,A,E,D,X,B,Q;do{if(T.nodeType!==void 0){if(T.nodeType!==1||T===b.body)break;if(T.localName!=="a")continue}if(!T.href){T.href===""&&s.listen_attr_changes(T);break}if(T instanceof w.HTMLElement){if(T.childElementCount&&T.querySelector("iframe, object, embed"))break;if(t.opera)d.childElementCount&&((B=b.evaluate('.//*[self::img[@src] or self::*[contains(@style, "background-image:")]] | preceding-sibling::img[@src][1] | following-sibling::img[@src][1]',d,null,8,null).singleNodeValue)&&(B.src!==void 0||!/\S/.test(d.textContent))||T.parentNode.style.backgroundImage[0]==="u"&&(B=T.parentNode)&&B.childElementCount<3||T.style.backgroundImage&&T.style.backgroundImage[0]==="u"&&(B=T))&&Math.abs(d.offsetWidth-B.offsetWidth)<=25&&Math.abs(d.offsetHeight-B.offsetHeight)<=25&&(D=s.getImages(B));else if(typeof p=="number"&&typeof y=="number"){for(B=b.elementsFromPoint(p,y),I=0;I<5&&B[I]!==b.body;++I)if(!(!B[I].currentSrc&&B[I].style.backgroundImage.lastIndexOf("url(",0)!==0)){var ie=B[I].getBoundingClientRect();if(p>=ie.left&&p<ie.right&&y>=ie.top&&y<ie.bottom){var le=d.getBoundingClientRect();le.left-10<=ie.left&&le.right+10>=ie.right&&le.top-10<=ie.top&&le.bottom+10>=ie.bottom&&(D=s.getImages(B[I],!0))}break}}B&&(B=null),Q=T}else{if(T.getAttributeNS){if(B=T.getAttributeNS("http://www.w3.org/1999/xlink","href"),!B)continue;T={href:B}}T.href=s.normalizeURL(T.href)}if(A=T.href.replace(s.rgxHTTPs,""),D&&(A===D.imgSRC||A===D.imgBG))break;for(I=0;E=n.sieve[I];++I){if(!(E.link&&E.link.test(A))){if(!E.img)continue;if(B=E.img.test(A),B)X=!0;else continue}if(E.useimg&&E.img&&(D||(D=s.getImages(d)),D)){if(D.imgSRC&&E.img.test(D.imgSRC)){X=[I,!1];break}if(D.imgBG&&(X=E.img.test(D.imgBG),X)){X=[I,X];break}}if(E.res&&(!B||!E.to&&E.url)){if(w.location.href.replace(N,"")===T.href.replace(N,""))break;if(await s.toFunction(E,"url",!0)===!1)return 1;typeof E.url=="function"&&(s.node=d),O=E.url?A.replace(E[B?"img":"link"],E.url):A,O=await s.resolve(s.httpPrepend(O||A,T.href.slice(0,T.href.length-A.length)),{id:I,$:[T.href].concat((A.match(E[B?"img":"link"])||[]).slice(1)),loop_param:B?"img":"link",skip_resolve:O===""},d.IMGS_TRG||d)}else O=await s.replace(E,I,A,T.href,B?"img":"link",d);if(O===1)return 1;O===2&&(O=!1),typeof O=="string"&&T!==d&&d.hasAttribute("src")&&d.src.replace(/^https?:\/\//,"")===O.replace(/^#?(https?:)?\/\//,"")&&(O=!1);break}break}while(++I<5&&(T=T.parentNode));if(!O&&O!==null&&(D=s.getImages(d)||D,D&&(D.imgSRC||D.imgBG))){for(typeof X=="object"?(I=X[0],X[0]=!0):(I=0,X=[]);E=n.sieve[I];++I)if(X[0]||E.img&&(D.imgSRC&&E.img.test(D.imgSRC)||D.imgBG&&(X[1]=E.img.test(D.imgBG)))){if(!X[1]&&D.imgSRC?(X=1,A=D.imgSRC,D=D.imgSRC_o):(X=2,A=D.imgBG,D=D.imgBG_o),!E.to&&E.res&&E.url){if(await s.toFunction(E,"url",!0)===!1)return 1;typeof E.url=="function"&&(s.node=d),O=A.replace(E.img,E.url),O=await s.resolve(s.httpPrepend(O,D.slice(0,D.length-A.length)),{id:I,$:[D].concat((A.match(E.img)||[]).slice(1)),loop_param:"img",skip_resolve:O===""},d.IMGS_TRG||d)}else O=await s.replace(E,I,A,D,"img",d);if(O===1)return 1;if(O===2)return!1;d.nodeType===1&&(Q=d,n.hz.history&&(d.IMGS_nohistory=!0));break}}if(E&&E.loop&&typeof O=="string"&&E.loop&(X?2:1)){if(d.nodeType!==1&&O===d.href||d.IMGS_loop_count>5)return!1;E=O,O=await s.find({href:O,IMGS_TRG:d.IMGS_TRG||d,IMGS_loop_count:1+(d.IMGS_loop_count||0)}),O?O=Array.isArray(O)?O.concat(E):[O,E]:O!==null&&(O=E)}if(B===!0&&(d.IMGS_fallback_zoom=T.href),O&&(typeof O=="string"||Array.isArray(O))){for(A=/^https?:\/\//,A=[T&&T.href&&T.href.replace(A,""),d.nodeType===1&&d.src&&d.hasAttribute("src")&&(d.currentSrc||d.src).replace(A,"")],typeof O=="string"&&(O=[O]),I=0;I<O.length;++I){var pe=O[I].replace(/^#?(https?:)?\/\//,"");if(A[1]===pe){if(O[I][0]==="#"){X=O=!1;break}}else if(A[0]===pe)continue;B===!0?B=1:B===1&&O.splice(I--,1)}O.length?O.length===1&&(O=O[0][0]==="#"?O[0].slice(1):O[0]):d.IMGS_fallback_zoom?(O=d.IMGS_fallback_zoom,delete d.IMGS_fallback_zoom):O=!1}if(d.nodeType!==1)return O;e:if(d.localName==="img"&&d.hasAttribute("src")){if(O&&(O===(d.currentSrc||d.src)&&(!T||!T.href||T!==d)?X=O=!1:typeof X=="number"&&(X=3)),U.test(d.currentSrc||d.src))break e;for(d.parentNode.localName==="picture"?B=d.parentNode.querySelectorAll("[srcset]"):d.hasAttribute("srcset")?B=[d]:B=[],E={naturalWidth:d.naturalWidth,naturalHeight:d.naturalHeight,src:null},I=0;I<B.length;++I){A=B[I].getAttribute("srcset").trim().split(/\s*,\s*/);for(var re=A.length;re--;){var ee=A[re].split(/\s+/);if(ee.length===2){var ae=ee[1].slice(-1);if(ae==="x")ee[1]=d.naturalWidth*ee[1].slice(0,-1);else if(ae==="w")ee[1]=parseInt(ee[1],10);else continue;ee[1]>E.naturalWidth&&(E.naturalWidth=ee[1],s.HLP.href=ee[0],E.src=s.HLP.href)}}}E.src&&(E.naturalHeight*=E.naturalWidth/d.naturalWidth),E.src&&s.isEnlargeable(d,E)?E=E.src:s.isEnlargeable(d)?E=d.currentSrc||d.src:E=null;var ne=d;I=0;do{if(ne===b.body||ne.nodeType!==1||(B=w.getComputedStyle(ne),B.position==="fixed"))break;if(I!==0&&!(B.overflowY==="visible"&&B.overflowX==="visible")){switch(B.display){case"block":case"inline-block":case"flex":case"inline-flex":case"list-item":case"table-caption":break;default:continue}if(E){typeof E!="string"&&(E=null),d.IMGS_overflowParent=ne;break}if(!(ne.offsetWidth<=32||ne.offsetHeight<=32)&&s.isEnlargeable(ne,d,!0)){E=d.currentSrc||d.src,d.IMGS_fallback_zoom=d.IMGS_fallback_zoom?[d.IMGS_fallback_zoom,E]:E;break}}}while(++I<5&&(ne=ne.parentNode));if(!E)break e;Q=d,typeof O=="object"?d.IMGS_fallback_zoom!==E&&(d.IMGS_fallback_zoom=d.IMGS_fallback_zoom?[d.IMGS_fallback_zoom,E]:E):O?O!==E&&(O=[O,E]):(O=E,n.hz.history&&(d.IMGS_nohistory=!0))}if(!O&&O!==null)return Q&&s.listen_attr_changes(Q),O;X&&D?(X===2&&(d.IMGS_thumb_ok=!0),d.IMGS_thumb=D):X===3&&(d.IMGS_thumb=!0),B=T&&T.href?(T.textContent||"").trim():null,B===T.href&&(B=null),I=0,T=d;do if((T.IMGS_caption||T.title&&(!d.hasAttribute("src")||d.src!==T.title))&&(d.IMGS_caption=T.IMGS_caption||T.title),I===0&&!n.hz.capNoSBar&&(d.title=""),d.IMGS_caption)break;while(++I<=5&&(T=T.parentNode)&&T.nodeType===1);return d.IMGS_caption||(d.alt&&d.alt!==d.src&&d.alt!==D?d.IMGS_caption=d.alt:B&&n.hz.capLinkText&&(d.IMGS_caption=B)),d.IMGS_caption&&(!n.hz.capLinkText&&d.IMGS_caption===B||d.IMGS_caption===d.href?delete d.IMGS_caption:s.prepareCaption(d,d.IMGS_caption)),Q&&s.listen_attr_changes(Q),O},delayed_loader:function(){s.TRG&&s.state<4&&s.show(s.LDR_msg,!0)},show:function(d,p){if(s.iFrame){w.parent.postMessage({vdfDpshPtdhhd:"from_frame",msg:d},"*");return}if(!p&&typeof d=="string"&&(s.DIV.style.display="none",s.HD_cursor(!0),s.BOX=s.LDR,s.LDR.style.backgroundColor=n.hz.LDRbgOpacity<100?s.palette[d].replace(/\(([^\)]+)/,"a($1, "+n.hz.LDRbgOpacity/100):s.palette[d],n.hz.LDRdelay>20&&(clearTimeout(s.timers.delayed_loader),d[0]!=="R"&&s.state!==3&&!s.fullZm))){s.state=3,s.LDR_msg=d,s.timers.delayed_loader=setTimeout(s.delayed_loader,n.hz.LDRdelay);return}var y;if(d){if(s.state===2&&n.hz.waitHide)return;W(),(s.state<3||s.LDR_msg)&&(s.LDR_msg=null,w.addEventListener(t.wheel,s.wheeler,{capture:!0,passive:!1})),d===!0?(s.BOX=s.DIV,s.LDR.style.display="none",n.hz.LDRanimate&&(s.LDR.style.opacity="0"),s.CNT.style.display="block",(s.CNT===s.IMG?s.VID:s.IMG).style.display="none",typeof s.DIV.cursor_hide=="function"&&s.DIV.cursor_hide()):s.state<4&&((s.anim.left||s.anim.top)&&(s.DIV.style.left=s.x+"px",s.DIV.style.top=s.y+"px"),(s.anim.width||s.anim.height)&&(s.DIV.style.width=s.DIV.style.height="0")),y=s.BOX.style,(s.state<3||s.BOX===s.LDR)&&y.display==="none"&&((s.anim.left||s.anim.top)&&s.BOX===s.DIV||n.hz.LDRanimate&&s.BOX===s.LDR)&&s.show(null),y.display="block",y.opacity==="0"&&(s.BOX===s.DIV&&s.anim.opacity||s.BOX===s.LDR&&n.hz.LDRanimate)&&(s.state===2?s.anim.opacityTransition():setTimeout(s.anim.opacityTransition,0)),s.state=s.BOX===s.LDR?3:4}var I=s.x,T=s.y,O=L-I,A=C-T,E,D,X,B,Q,ie;if((d===void 0&&s.state===4||d===!0)&&(d=!1,s.TRG.IMGS_SVG?(Q=s.stack[s.IMG.src],B=Q[0],Q=Q[1]):(B=s.CNT.naturalWidth)?Q=s.CNT.naturalHeight:d=!0),s.fullZm){s.BOX||(s.BOX=s.LDR),d===!1?(y=s.DIV.style,y.visibility="hidden",s.resize(0),s.m_move(),y.visibility="visible",s.updateCaption()):s.m_move();return}if(d===!1){X=s.DIV.curdeg%180!==0,X&&(ie=B,B=Q,Q=ie),n.hz.placement===3&&(y=s.TBOX,I=y.left,T=y.top,O=L-y.right,A=C-y.bottom),y=s.DBOX,ie=B/Q;var le=n.hz.fullspace||n.hz.placement===2,pe=s.CAP&&s.CAP.overhead&&!(s.DIV.curdeg%360)&&s.CAP.state!==0&&(s.CAP.state===2||s.TRG.IMGS_caption&&n.hz.capText||s.TRG.IMGS_album||n.hz.capWH)?s.CAP.overhead:0,re=y.wm+(X?y.hpb:y.wpb),ee=y.hm+(X?y.wpb:y.hpb)+pe,ae=Math.min(n.hz.maxw!=-1?n.hz.maxw:B,(le?L:I<O?O:I)-re),ne=Math.min(n.hz.maxw!=-1?n.hz.maxw:B,L-re);switch(re=Math.min(n.hz.maxh!=-1?n.hz.maxh:Q,C-ee),ee=Math.min(n.hz.maxh!=-1?n.hz.maxh:Q,(le?C:T<A?A:T)-ee),(le=ae/ie)>re?ae=re*ie:re=le,(le=ee*ie)>ne?ee=ne/ie:ne=le,ne>ae?(B=Math.round(ne),Q=Math.round(ee)):(B=Math.round(ae),Q=Math.round(re)),ae=B+y.wm+(X?y.hpb:y.wpb),re=Q+y.hm+(X?y.wpb:y.hpb)+pe,ne=s.TRG!==s.HLP&&n.hz.minPopupDistance,n.hz.placement){case 1:ee=(I<O?O:I)<ae,ee&&n.hz.fullspace&&(C-re<=L-ae||ae<=(I<O?O:I))&&(ee=!1),E=I-(ee?ae/2:I<O?0:ae),D=T-(ee?T<A?0:re:re/2);break;case 2:E=(L-ae)/2,D=(C-re)/2,ne=!1;break;case 3:E=I<O||ae>=s.x&&L-s.x>=ae?s.TBOX.right:I-ae,D=T<A||re>=s.y&&C-s.y>=re?s.TBOX.bottom:T-re,ee=(I<O?O:I)<ae||(T<A?A:T)>=re&&L>=ae&&(s.TBOX.width>=L/2||Math.abs(s.x-E)>=L/3.5),(!n.hz.fullspace||(ee?re<=(T<A?A:T):ae<=(I<O?O:I)))&&(le=s.TBOX.width/s.TBOX.height,ee?(E=(s.TBOX.left+s.TBOX.right-ae)/2,le>10&&(E=I<O?Math.max(E,s.TBOX.left):Math.min(E,s.TBOX.right-ae))):(D=(s.TBOX.top+s.TBOX.bottom-re)/2,le<.1&&(D=T<A?Math.min(D,s.TBOX.top):Math.min(D,s.TBOX.bottom-re))));break;case 4:E=I-ae/2,D=T-re/2,ne=!1;break;default:ee=null,E=I-(I<O?Math.max(0,ae-O):ae),D=T-(T<A?Math.max(0,re-A):re)}ne&&(ee||(I<O?O:I)<ae||C<re?(ee=T<A?y.mt:y.mb,ne>ee&&(ne-=ee,D+=T<A?ne:-ne)):(ee=I<O?y.ml:y.mr,ne>ee&&(ne-=ee,E+=I<O?ne:-ne))),E=E<0?0:E>L-ae?L-ae:E,D=D<0?0:D>C-re?C-re:D,pe&&!n.hz.capPos&&(D+=pe),X&&(X=B,B=Q,Q=X,X=(ae-re)/2,E+=X,D-=X),s.DIV.style.width=B+"px",s.DIV.style.height=Q+"px",s.updateCaption()}else n.hz.placement===1?(E=n.hz.minPopupDistance,D=s.LDR.wh[1]/2):(E=13,D=T<A?-13:s.LDR.wh[1]+13),E=I-(I<O?-E:s.LDR.wh[0]+E),D=T-D;E!==void 0&&(s.BOX.style.left=E+"px",s.BOX.style.top=D+"px")},album:function(d,p){var y,I;if(!(!s.TRG||!s.TRG.IMGS_album)){var T=s.stack[s.TRG.IMGS_album];if(!(!T||T.length<2)){switch(!s.fullZm&&s.timers.no_anim_in_album&&(clearInterval(s.timers.no_anim_in_album),s.timers.no_anim_in_album=null,s.DIV.style[t.transition]="all 0s"),typeof d){case"boolean":d=d?1:T.length-1;break;case"number":d=T[0]+(d||0);break;default:if(/^[+-]?\d+$/.test(d))I=parseInt(d,10),d=d[0]==="+"||d[0]==="-"?T[0]+I:I||1;else{if(d=d.trim(),!d)return;for(d=RegExp(d,"i"),y=T[0],I=y+1,I=I<T.length?I:1;I!==y;++I<T.length?0:I=1)if(T[I][1]&&d.test(T[I][1])){d=I;break}if(typeof d!="number")return}}if(n.hz.pileCycle?(y=T.length-1,d=d%y||y,d=d<0?y+d:d):d=Math.max(1,Math.min(d,T.length-1)),y=T[0],!(y===d&&p&&s.state>3)){T[0]=d,s.resetNode(s.TRG,!0),s.CAP.style.display="none",s.CAP.firstChild.textContent=d+" / "+(T.length-1),n.hz.capText&&s.prepareCaption(s.TRG,T[d][1]),s.set(T[d][0]),y=y<=d&&!(y===1&&d===T.length-1)||y===T.length-1&&d===1?1:-1,I=0;for(var O=n.hz.preload<3?1:3;I++<=O;){if(!T[d+I*y]||d+I*y<1)return;s._preload(T[d+I*y][0])}}}}},set:function(d){var p,y,I;if(d){if(s.iFrame){p=s.TRG,w.parent.postMessage({vdfDpshPtdhhd:"from_frame",src:d,thumb:p.IMGS_thumb?[p.IMGS_thumb,p.IMGS_thumb_ok]:null,album:p.IMGS_album?{id:p.IMGS_album,list:s.stack[p.IMGS_album]}:null,caption:p.IMGS_caption},"*");return}if(clearInterval(s.timers.onReady),s.create(),Array.isArray(d)){if(!d.length){s.show("R_load");return}for(y=[],I=[],p=0;p<d.length;++p)d[p]&&(d[p][0]==="#"?I.push(s.httpPrepend(d[p].slice(1))):y.push(s.httpPrepend(d[p])));y.length?I.length&&(s.TRG.IMGS_HD=n.hz.hiRes,p=n.hz.hiRes?y:I,s.TRG.IMGS_HD_stack=p.length>1?p:p[0],y=n.hz.hiRes?I:y):y=I,s.TRG.IMGS_c_resolved=y,d=y[0]}else d[0]==="#"&&(d=d.slice(1));if(d[1]==="/"&&(d=s.httpPrepend(d)),d.indexOf("&amp;")!==-1&&(d=d.replace(/&amp;/g,"&")),U.test(d)?s.TRG.IMGS_SVG=!0:delete s.TRG.IMGS_SVG,d===s.CNT.src){s.checkContentRediness(d);return}if(/^[^?#]+\.(?:m(?:4[abprv]|p[34g]|ov)|og[agv]|webm|3gp|avi|asf|flv|mkv|mpeg|rm|ts|wmv)(?:$|[?#])/.test(d)||/#(mp[34]|og[gv]|webm|mov|3gp|avi|asf|flv|mkv|mpeg|mpg|rm|ts|wmv)$/.test(d)){s.CNT=s.VID,s.show("load"),s.VID.naturalWidth=0,s.VID.naturalHeight=0,s.VID.src=d,s.VID.load();return}if(s.CNT!==s.IMG&&(s.CNT=s.IMG,s.VID.removeAttribute("src"),s.VID.load()),n.hz.thumbAsBG&&(s.interlacer&&(s.interlacer.style.display="none"),s.CNT.loaded=s.TRG.IMGS_SVG||s.stack[d]===1),!s.TRG.IMGS_SVG&&!s.stack[d]&&n.hz.preload===1&&(new Image().src=d),s.CNT.removeAttribute("src"),s.TRG.IMGS_SVG&&!s.stack[d]){var T=b.createElement("img");T.style.cssText=["position: fixed","visibility: hidden","max-width: 500px",""].join(" !important;"),T.onerror=s.content_onerror,T.src=d,T.counter=0,s.timers.onReady=setInterval(function(){if(T.width||T.counter++>300){var O=T.width/T.height;clearInterval(s.timers.onReady),b.body.removeChild(T),T=null,O?(s.stack[d]=[w.screen.width,Math.round(w.screen.width/O)],s.IMG.src=d,s.assign_src()):s.show("Rload")}},100),b.body.appendChild(T),s.show("load");return}s.CNT.src=d,s.checkContentRediness(d,!0)}},checkContentRediness:function(d,p){if(s.CNT.naturalWidth||s.TRG.IMGS_SVG&&s.stack[d]){s.assign_src();return}p&&s.show("load"),s.timers.onReady=setInterval(s.content_onready,s.CNT===s.IMG?100:300)},content_onready:function(){if(!s.CNT||!s.fireHide){clearInterval(s.timers.onReady),s.fireHide||s.reset();return}if(s.CNT===s.VID){if(!s.VID.duration){s.VID.readyState>s.VID.HAVE_NOTHING&&s.content_onerror.call(s.VID);return}s.VID.naturalWidth=s.VID.videoWidth||300,s.VID.naturalHeight=s.VID.videoHeight||40,s.VID.audio=!s.VID.videoHeight,s.VID.loop=!s.VID.duration||s.VID.duration<=60,s.VID.audio?(s.VID._controls=s.VID.controls,s.VID.controls=!0):s.VID.controls=s.fullZm?!0:s.VID._controls;var d=s.VID.autoplay;d&&s.VID.paused&&s.VID.play(),d&&t.opera&&setTimeout(function(){s.VID.paused||!s.VID.audio&&s.VID.currentTime>=.5||(s.VID.pause(),s.VID.play())},1500)}else if(!s.IMG.naturalWidth)return;clearInterval(s.timers.onReady),s.assign_src()},content_onerror:function(){if(clearInterval(s.timers.onReady),!(!s.TRG||this!==s.CNT)){var d,p=s.TRG,y=p.IMGS_c_resolved,I=this.src;if(I){this.removeAttribute("src");do d=Array.isArray(y)?y.shift():null;while(d===I);(!y||!y.length)&&(d?p.IMGS_c_resolved=d:delete p.IMGS_c_resolved),d&&!d.URL?s.set(d):p.IMGS_HD_stack?(d=p.IMGS_HD_stack,delete p.IMGS_HD_stack,delete p.IMGS_HD,s.set(d)):p.IMGS_fallback_zoom?(s.set(p.IMGS_fallback_zoom),delete p.IMGS_fallback_zoom):(s.CAP&&(s.CAP.style.display="none"),delete p.IMGS_c_resolved,s.show("R_load")),console.info(a.name+": ["+(this.audio?"AUDIO":this.nodeName)+"] Load error > "+I)}}},content_onload:function(d){n.hz.thumbAsBG&&(this.loaded=!0),s.TRG&&delete s.TRG.IMGS_c_resolved,s.stack[this.src]&&!(s.TRG||d).IMGS_SVG&&(s.stack[this.src]=1),s.interlacer&&(s.interlacer.style.display="none")},HD_cursor:function(d){!s.TRG||!d&&(n.hz.capWH||s.TRG.IMGS_HD===void 0)||(d?(s.DIV&&(s.DIV.style.cursor=""),s.lastTRGStyle.cursor!==null&&(s.TRG.style.cursor=s.lastTRGStyle.cursor,s.lastTRGStyle.cursor=null)):(s.lastTRGStyle.cursor===null&&(s.lastTRGStyle.cursor=s.TRG.style.cursor),s.DIV.style.cursor=s.TRG.style.cursor="crosshair"))},isEnlargeable:function(d,p,y){if(s.CNT&&s.CNT!==s.IMG)return!0;p||(p=d);var I=d.clientWidth,T=d.clientHeight,O=p.naturalWidth,A=p.naturalHeight;if(O<=64&&A<=64&&!y||O<=1||A<=1)return!1;if(y)return I=d.getBoundingClientRect(),O=p.getBoundingClientRect(),O.right-10>I.right||O.bottom-10>I.bottom||O.left+10<I.left||O.top+10<I.top;if(d===p){if(O<600&&A<600&&Math.abs(O/2-(d.width||I))<8&&Math.abs(A/2-(d.height||T))<8)return!1}else if(/^[^?#]+\.(?:gif|apng)(?:$|[?#])/.test(p.src))return!0;return(I>=O||T>=A)&&Math.abs(O/A-I/T)<=.2?!1:I<V*.9&&100-I*100/O>=n.hz.zoomresized||T<J*.9&&100-T*100/A>=n.hz.zoomresized},not_enlargeable:function(){if(s.resetNode(s.TRG),s.TRG.IMGS_c=!0,s.reset(),!!n.hz.markOnHover){if(n.hz.markOnHover==="cr"){s.lastTRGStyle.cursor=s.TRG.style.cursor,s.TRG.style.cursor="not-allowed";return}s.lastTRGStyle.borderImage===null&&(s.lastTRGStyle.borderImage=s.TRG.style.borderImage),s.lastScrollTRG=s.TRG,s.TRG.style.borderImage="linear-gradient(blue, transparent)  27 / 2px / 1rem round space"}},keytab:function(d){if(s.TRG.IMGS_HD_stack){s.CAP&&(s.CAP.style.display="none"),s.TRG.IMGS_HD=!s.TRG.IMGS_HD;var p=s.TRG.IMGS_c||s.TRG.IMGS_c_resolved;delete s.TRG.IMGS_c,s.set(s.TRG.IMGS_HD_stack),s.TRG.IMGS_HD_stack=p}d.shiftKey&&(n.hz.hiRes=!n.hz.hiRes)},assign_src:function(){if(!(!s.TRG||s.switchToHiResInFZ())){if(s.TRG.IMGS_album)delete s.TRG.IMGS_thumb,delete s.TRG.IMGS_thumb_ok,s.interlacer&&(s.interlacer.style.display="none");else if(!s.TRG.IMGS_SVG){if(s.TRG!==s.HLP&&s.TRG.IMGS_thumb&&!s.isEnlargeable(s.TRG,s.IMG)){if(s.TRG.IMGS_HD_stack&&!s.TRG.IMGS_HD){s.show("load"),s.keytab();return}if(!s.TRG.IMGS_fallback_zoom){s.not_enlargeable();return}s.TRG.IMGS_thumb=!1}if(s.CNT===s.IMG&&!s.IMG.loaded&&n.hz.thumbAsBG&&s.TRG.IMGS_thumb!==!1&&!s.TRG.IMGS_album){var d,p,y;typeof s.TRG.IMGS_thumb!="string"&&(s.TRG.IMGS_thumb=null,s.TRG.hasAttribute("src")?s.TRG.IMGS_thumb=s.TRG.src:s.TRG.childElementCount&&(d=s.TRG.querySelector("img[src]"),d&&(s.TRG.IMGS_thumb=d.src))),s.TRG.IMGS_thumb===s.IMG.src?(delete s.TRG.IMGS_thumb,delete s.TRG.IMGS_thumb_ok):s.TRG.IMGS_thumb&&(p=!0,s.TRG.IMGS_thumb_ok||(p=(d||s.TRG).clientWidth,y=(d||s.TRG).clientHeight,s.TRG.IMGS_thumb_ok=Math.abs(s.IMG.naturalWidth/s.IMG.naturalHeight-p/y)<=.2,p=p<1024&&y<1024&&p<s.IMG.naturalWidth&&y<s.IMG.naturalHeight),p&&s.TRG.IMGS_thumb_ok&&(s.interlacer?p=s.interlacer.style:(s.interlacer=b.createElement("div"),y=s.interlacer,n.hz.thumbAsBGOpacity>0&&(p=parseInt(n.hz.thumbAsBGColor.slice(1),16),y.appendChild(b.createElement("div")).style.cssText="width: 100%; height: 100%; background-color: rgba("+(p>>16)+","+(p>>8&255)+","+(p&255)+","+parseFloat(n.hz.thumbAsBGOpacity)+")"),p=y.style,p.cssText="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: 100% 100%; background-repeat: no-repeat",s.DIV.insertBefore(y,s.IMG)),p.backgroundImage="url("+s.TRG.IMGS_thumb+")",p.display="block"),delete s.TRG.IMGS_thumb,delete s.TRG.IMGS_thumb_ok)}}delete s.TRG.IMGS_c_resolved,s.TRG.IMGS_c=s.CNT.src,t.opera&&s.TRG.IMGS_SVG&&s.DIV.replaceChild(s.IMG,s.IMG),s.TRG.IMGS_SVG||(s.stack[s.IMG.src]=!0),s.show(!0),s.HD_cursor(s.TRG.IMGS_HD!==!1),!s.fullZm&&s.anim.maxDelay&&s.TRG.IMGS_album&&(s.timers.no_anim_in_album=setTimeout(function(){s.DIV.style[t.transition]=s.anim.css},100))}},hide:function(d){if(s.HD_cursor(!0),s.fireHide=!1,s.iFrame){w.parent.postMessage({vdfDpshPtdhhd:"from_frame",hide:!0},"*");return}else w.removeEventListener("mousemove",s.m_move,!0);if(s.state<3||s.LDR_msg||s.state===null){s.state>=2&&s.reset();return}var p=s.BOX===s.DIV&&s.anim.maxDelay,y=s.BOX===s.LDR&&n.hz.LDRanimate;if(!p&&!y||s.fullZm){n.hz.waitHide||(s.hideTime=Date.now()),s.reset();return}s.state=2,s.CAP&&(s.HLP.textContent="",s.CAP.style.display="none"),(p&&s.anim.left||y)&&(s.BOX.style.left=(n.hz.follow?d.clientX||s.x:parseInt(s.BOX.style.left,10)+s.BOX.offsetWidth/2)+"px"),(p&&s.anim.top||y)&&(s.BOX.style.top=(n.hz.follow?d.clientY||s.y:parseInt(s.BOX.style.top,10)+s.BOX.offsetHeight/2)+"px"),p&&(s.anim.width&&(s.DIV.style.width="0"),s.anim.height&&(s.DIV.style.height="0")),(p&&s.anim.opacity||y)&&(s.BOX.style.opacity="0"),s.timers.anim_end=setTimeout(s.reset,s.anim.maxDelay)},reset:function(d){s.DIV&&(s.iFrame&&w.parent.postMessage({vdfDpshPtdhhd:"from_frame",reset:!0},"*"),s.state&&w.removeEventListener("mousemove",s.m_move,!0),s.node=null,clearTimeout(s.timers.delayed_loader),w.removeEventListener(t.wheel,s.wheeler,!0),s.DIV.style.display=s.LDR.style.display="none",s.DIV.style.width=s.DIV.style.height="0",s.CNT.removeAttribute("src"),s.CNT===s.VID&&s.VID.load(),(s.anim.left||s.anim.top)&&(s.DIV.style.left=s.DIV.style.top="auto"),s.anim.opacity&&(s.DIV.style.opacity="0"),n.hz.LDRanimate&&(s.LDR.style.left="auto",s.LDR.style.top="auto",s.LDR.style.opacity="0"),s.CAP&&(s.CAP.firstChild.style.display=s.CAP.style.display="none"),s.IMG.scale&&(delete s.IMG.scale,s.IMG.style[t.transform]=""),s.VID.scale&&(delete s.VID.scale,s.VID.style[t.transform]=""),s.DIV.curdeg=0,s.DIV.style[t.transform]="",s.HD_cursor(!0),s.fullZm&&(s.fullZm=!1,s.hideTime=null,s.anim.maxDelay&&(s.DIV.style[t.transition]=s.anim.css),w.removeEventListener("click",s.fzClickAct,!0),w.addEventListener("mouseover",s.m_over,!0),b.addEventListener(t.wheel,s.scroller,{capture:!0,passive:!0}),b.documentElement.addEventListener("mouseleave",s.m_leave)),d&&(s.lastScrollTRG=s.TRG,s.scroller()),s.state=1)},onVisibilityChange:function(d){s.fullZm||(b.hidden?s.fireHide&&s.m_over({relatedTarget:s.TRG}):F(d))},keyup_freeze:function(d){(!d||d.key===n.hz.actTrigger)&&(s.freeze=!n.hz.deactivate,s.keyup_freeze_on=!1,w.removeEventListener("keyup",s.keyup_freeze,!0))},key_action:async function(d){var p,y;if(n.keys){if(!s.keyup_freeze_on&&typeof s.freeze!="number"&&!d.repeat&&d.key===n.hz.actTrigger){s.fireHide&&s.state<3&&(n.hz.deactivate?s.m_over({relatedTarget:s.TRG}):await s.load(s.SRC===null?s.TRG.IMGS_c_resolved:s.SRC),G(d)),s.freeze=!!n.hz.deactivate,s.keyup_freeze_on=!0,w.addEventListener("keyup",s.keyup_freeze,!0);return}d.repeat||(s.keyup_freeze_on?s.keyup_freeze():s.freeze===!1&&!s.fullZm&&s.lastScrollTRG&&s.mover({target:s.lastScrollTRG})),y=v(d,n.hz.numpad);var I=y.replace("Shift+","");if(s.state<3&&s.fireHide&&y===n.keys.hz_reset&&s.m_over({relatedTarget:s.TRG}),p=d.target,!(n.hz.scOffInInput&&p&&(p.isContentEditable||(p=p.nodeName.toUpperCase())&&(p[2]==="X"||p==="INPUT")))){if(p=!0,y===n.keys.hz_preload)w.top.postMessage({vdfDpshPtdhhd:"preload"},"*");else if(I===n.keys.hz_grants){var T=n.grants||[];T=T.filter(D=>D.url!==location.hostname);var O={url:location.hostname};d.shiftKey?O.op="~":O.op="!",T.push(O),c.send({cmd:"savePrefs",prefs:{grants:T}}),setTimeout(()=>{c.send({cmd:"hello"})},1e3)}else if(y===n.keys.hz_toggle)w.sessionStorage.IMGS_suspend?delete w.sessionStorage.IMGS_suspend:w.sessionStorage.IMGS_suspend="1",w.top.postMessage({vdfDpshPtdhhd:"toggle"},"*"),c.send({cmd:"toggle",value:w.sessionStorage.IMGS_suspend});else if(s.state>2||s.LDR_msg){if(s.state===4)if(y===n.keys.hz_copy){if("oncopy"in b){Date.now()-s.timers.copy<500?y=s.TRG.IMGS_caption:y=s.CNT.src;var A=function(D){this.removeEventListener(D.type,A),D.clipboardData.setData("text/plain",y),D.preventDefault()};b.addEventListener("copy",A),b.execCommand("copy"),s.timers.copy=Date.now()}}else if(y===n.keys.hz_save){if(!d.repeat&&s.CNT.src)if(t.xpi||t.crx){var E={cmd:"download",url:s.CNT.src,priorityExt:n.hz.ext,mimetoext:JSON.stringify(JSON.parse(n.hz.ext2.replaceAll(/\w*\/\/.*/g,""))),ext:JSON.parse(n.hz.ext3)[s.CNT.audio?"audio":s.CNT.localName]};s.CNT.filename&&(E.filename=s.CNT.filename),n.hz.save&&(E.path=n.hz.save);const D=function(X){var B;x=(B=X==null?void 0:X.data)==null?void 0:B.payload,c.checkMsg(X)&&(c.listen(s.onMessage),x||console.warn("Doesn't have the permission to download, please turn it on. Ignore this message if you're doing something else with this hotkey."))};c.listen(D),c.send(E)}else s.HLP.download!==void 0&&(s.HLP.href=s.CNT.src,s.HLP.download="",s.HLP.dispatchEvent(new MouseEvent("click")))}else I==="Ctrl+"+n.keys.hz_open?(y={},((s.TRG.IMGS_caption||"").match(/\b((?:www\.[\w-]+(\.\S{2,7}){1,4}|https?:\/\/)\S+)/g)||[]).forEach(function(D){y[D[0]==="w"?"http://"+D:D]=1}),y=Object.keys(y),y.length&&(c.send({cmd:"open",url:y,nf:d.shiftKey}),!d.shiftKey&&!s.fullZm&&s.reset())):p=!1;else p=!1;if(!p&&s.CNT===s.VID&&(p=!0,y===n.keys.pl?s.VID.paused?s.VID.play():s.VID.pause():y===n.keys.controls?s.VID.audio||(s.VID.controls=s.VID._controls=!s.VID._controls):I===n.keys.vfw||I===n.keys.vb?(y=I===n.keys.vb?-5:5,s.VID.currentTime+=y*(d.shiftKey?3:1)):I===n.keys.up||I===n.keys.down?d.shiftKey?s.VID.playbackRate*=I===n.keys.up?4/3:.75:s.VID.volume*=I===n.keys.up?4/3:.75:y===n.keys.stepup||y===n.keys.stepdown?s.VID.audio?s.VID.currentTime+=y===n.keys.stepdown?4:-4:(s.VID.pause(),s.VID.currentTime=(s.VID.currentTime*60+(y===n.keys.stepdown?1:-1))/60+1e-5):p=null),!p&&s.TRG.IMGS_album){switch(y){case n.keys.end:d.shiftKey&&(p=prompt("#",s.stack[s.TRG.IMGS_album].search||"")||null)?s.stack[s.TRG.IMGS_album].search=p:p=!1;break;case n.keys.start:p=!0;break;default:p=((I===n.keys.fw1||I===n.keys.fw2||I===n.keys.fw3?1:0)+(I===n.keys.back1||I===n.keys.back2||I===n.keys.back3?-1:0))*(d.shiftKey?5:1),p===0&&(p=null)}p!==null&&(s.album(p,!0),p=!0)}if(!p)if(p=!0,y===n.keys.hz_zoomout||y===n.keys.hz_zoomin)s.resize(y===n.keys.hz_zoomout?"-":"+");else if(I===n.keys.hz_switchres)s.keytab({shiftKey:d.shiftKey});else if(y===n.keys.hz_reset)s.CNT===s.VID&&(w.fullScreen||b.fullscreenElement||V===w.screen.width&&J===w.screen.height)?p=!1:(p=!0,s.reset(!0));else if(I===n.keys.hz_fullZm||I===n.keys.hz_fullZm2)await s.fullzmtoggle(d.shiftKey),s.addBlinkText("PVIpressESC"),s.CNT===s.IMG&&setTimeout(()=>{s.addBlinkText("PVIpressD")},4e3);else if(y===n.keys.mOrig||y===n.keys.mFit||y===n.keys.mFitW||y===n.keys.mFitH)s.resize(y);else if(y===n.keys.hz_fullSpace)n.hz.fullspace=!n.hz.fullspace,s.show();else if(y===n.keys.flipH)S(s.CNT,0);else if(y===n.keys.flipV)S(s.CNT,1);else if(y===n.keys.rotL||y===n.keys.rotR)s.DIV.curdeg+=y===n.keys.rotR?90:-90,s.CAP&&s.CAP.textContent&&s.CAP.state!==0&&(s.CAP.style.display=s.DIV.curdeg%360?"none":"flex"),s.DIV.style[t.transform]=s.DIV.curdeg?"rotate("+s.DIV.curdeg+"deg)":"",s.fullZm?s.m_move():s.show();else if(I===n.keys.hz_caption)if(d.shiftKey){switch(s.createCAP(),s.CAP.state){case 0:y=n.hz.capWH||n.hz.capText?1:2;break;case 2:y=0;break;default:y=n.hz.capWH&&n.hz.capText?0:2}s.CAP.state=y,s.CAP.style.display="none",s.updateCaption(),s.show()}else s.CAP&&(s.CAP.style.whiteSpace=s.CAP.style.whiteSpace==="nowrap"?"normal":"nowrap");else I===n.keys.send?s.CNT===s.IMG&&j({url:s.CNT.src,nf:d.shiftKey}):I===n.keys.hz_open?s.CNT.src&&(c.send({cmd:"open",url:s.CNT.src.replace(N,""),caption:s.TRG.IMGS_caption,nf:d.shiftKey,openShow:!0}),!d.shiftKey&&!s.fullZm&&s.reset()):y===n.keys.prefs?(c.send({cmd:"open",url:"options.html#settings"}),s.fullZm||s.reset()):p=!1}else p=!1;p&&G(d)}}},switchToHiResInFZ:function(){if(!s.fullZm||!s.TRG||n.hz.hiResOnFZ<1||s.TRG.IMGS_HD!==!1||s.IMG.naturalWidth<800&&s.IMG.naturalHeight<800)return!1;var d=s.IMG.naturalWidth/s.IMG.naturalHeight;return(d<1?1/d:d)<n.hz.hiResOnFZ?!1:(s.show("load"),s.keytab(),!0)},fzDragEnd:function(){s.fullZm=s.fullZm>1?2:1,w.removeEventListener("mouseup",s.fzDragEnd,!0)},fzClickAct:function(d){if(d.button===0){if(P===!1){P=null,G(d);return}d.target===s.CAP||d.target.parentNode&&d.target.parentNode===s.CAP?s.TRG.IMGS_HD_stack&&s.keytab():d.target===s.VID?(d.offsetY||d.layerY||0)<Math.min(s.CNT.clientHeight-40,2*s.CNT.clientHeight/3)?s.reset(!0):(d.offsetY||d.layerY||0)<s.CNT.clientHeight-40&&(d.offsetY||d.layerY||0)>2*s.CNT.clientHeight/3&&(s.VID.paused?s.VID.play():s.VID.pause()):d.target.id==="cap-dl-icon"?s.CNT.src&&(c.send({cmd:"open",url:s.CNT.src.replace(N,""),caption:s.TRG.IMGS_caption,nf:d.shiftKey,openShow:!0}),!d.shiftKey&&!s.fullZm&&s.reset()):(G(d),s.reset(!0)),d.target.IMGS_&&G(d,!1)}},scroller:function(d){if(d){if(s.fullZm)return;d.target.IMGS_||(s.lastScrollTRG&&s.lastScrollTRG!==d.target?s.lastScrollTRG=!1:s.lastScrollTRG!==!1&&(s.lastScrollTRG=d.target))}s.freeze||s.keyup_freeze_on||(d&&(s.fireHide&&s.m_over({relatedTarget:s.TRG}),s.x=d.clientX,s.y=d.clientY),s.freeze=!0,w.addEventListener("mousemove",s.mover,!0))},mover:function(d){if(!(s.x===d.clientX&&s.y===d.clientY)){if(w.removeEventListener("mousemove",s.mover,!0),s.keyup_freeze_on){s.lastScrollTRG=null;return}s.freeze===!0&&(s.freeze=!n.hz.deactivate),s.hideTime&&s.lastScrollTRG!==d.target&&(s.hideTime-=1e3,s.m_over(d)),s.lastScrollTRG=null}},wheeler:function(d){if(!(d.clientX>=L||d.clientY>=C)){var p=n.hz.scrollDelay;if(s.state>2&&p>=20&&(d.timeStamp-(s.lastScrollTime||0)<p?p=null:s.lastScrollTime=d.timeStamp),s.TRG&&s.TRG.IMGS_album&&n.hz.pileWheel&&(!s.fullZm||d.clientX<50&&d.clientY<50||s.CAP&&d.target===s.CAP.firstChild)){if(p!==null){if(n.hz.pileWheel===2){if(!d.deltaX&&!d.wheelDeltaX)return;p=(d.deltaX||-d.wheelDeltaX)>0}else p=(d.deltaY||-d.wheelDelta)>0;s.album(p?1:-1,!0)}G(d);return}if(s.fullZm&&s.fullZm<4){p!==null&&s.resize((d.deltaY||-d.wheelDelta)>0?"-":"+",s.fullZm>1?d.target===s.CNT?[d.offsetX||d.layerX||0,d.offsetY||d.layerY||0]:[]:null),G(d);return}s.lastScrollTRG=s.TRG,s.reset()}},resize:function(d,p){if(!(s.state!==4||!s.fullZm)){var y=s.TRG.IMGS_SVG?s.stack[s.IMG.src].slice():[s.CNT.naturalWidth,s.CNT.naturalHeight],I=n.keys,T=s.DIV.curdeg%180;switch(W(),T&&y.reverse(),d===I.mFit&&(L/C<y[0]/y[1]?d=L>y[0]?0:I.mFitW:d=C>y[1]?0:I.mFitH),d){case I.mFitW:L-=s.DBOX.wpb,y[1]*=L/y[0],y[0]=L,s.fullZm>1&&(s.y=0);break;case I.mFitH:C-=s.DBOX.hpb,y[0]*=C/y[1],y[1]=C,s.fullZm>1&&(s.y=0);break;case"+":case"-":I=[parseInt(s.DIV.style.width,10),0],I[1]=I[0]*y[T?0:1]/y[T?1:0],p&&(p[1]===void 0||T?(p[0]=I[0]/2,p[1]=I[1]/2):s.DIV.curdeg%360&&(s.DIV.curdeg%180||(p[0]=I[0]-p[0],p[1]=I[1]-p[1])),p[0]/=I[T?1:0],p[1]/=I[T?0:1]),d=d==="+"?4/3:.75,y[0]=d*Math.max(16,I[T?1:0]),y[1]=d*Math.max(16,I[T?0:1]),p&&(p[0]*=I[T?1:0]-y[0],p[1]*=I[T?0:1]-y[1])}p||(p=[!0,null]),p.push(y[T?1:0],y[T?0:1]),s.m_move(p)}},m_leave:function(d){!s.fireHide||d.relatedTarget||s.x===d.clientX&&s.y===d.clientY||s.m_over({relatedTarget:s.TRG,clientX:d.clientX,clientY:d.clientY})},m_over:async function(d){if(!w.sessionStorage.IMGS_suspend){var p,y,I;if(!(n.hz.deactivate&&(s.freeze||d[n._freezeTriggerEventKey]))){if(s.fireHide){if(d.target&&(d.target.IMGS_||(d.relatedTarget||d).IMGS_&&d.target===s.TRG)){n.hz.capNoSBar&&d.preventDefault();return}if(s.CAP&&(s.CAP.style.display="none",s.CAP.firstChild.style.display="none"),clearTimeout(s.timers.preview),clearInterval(s.timers.onReady),s.timers.resolver&&(clearTimeout(s.timers.resolver),s.timers.resolver=null),d.relatedTarget&&(y=s.lastTRGStyle,y.borderImage!==null&&(d.relatedTarget.style.borderImage=y.borderImage,y.borderImage=null),y.cursor!==null&&(d.relatedTarget.style.cursor=y.cursor,y.cursor=null)),s.nodeToReset&&(s.resetNode(s.nodeToReset),s.nodeToReset=null),s.TRG&&(s.DIV&&s.timers.no_anim_in_album&&(s.timers.no_anim_in_album=null,s.DIV.style[t.transition]=s.anim.css),s.TRG=null),s.hideTime===0&&s.state<3&&(s.hideTime=Date.now()),!d.target){s.hide(d);return}}if(d.target.IMGS_c===!0){s.fireHide&&s.hide(d);return}if(y=d.target,I=y.IMGS_c,I||(y.IMGS_c_resolved?p=y.IMGS_c_resolved:s.TRG=y),I||p||(p=await s.find(y,d.clientX,d.clientY))||p===null){p===1&&(p=!1),n.hz.capNoSBar&&d.preventDefault(),clearTimeout(s.timers.preview),n.hz.waitHide||clearTimeout(s.timers.anim_end),s.iFrame||w.addEventListener("mousemove",s.m_move,!0),!I&&p&&!y.IMGS_c_resolved&&(n.hz.preload===2&&!s.stack[p]&&s._preload(p),y.IMGS_c_resolved=p),s.TRG=y,s.SRC=I||p,s.x=d.clientX,s.y=d.clientY;var T=s.freeze&&!n.hz.deactivate&&!d[n._freezeTriggerEventKey];if(!T&&(!n.hz.waitHide||n.hz.delay<15)&&(s.fireHide&&s.state>2||s.state===2||s.hideTime&&Date.now()-s.hideTime<200)){s.hideTime&&(s.hideTime=0),s.fireHide=1,await s.load(s.SRC);return}if(s.fireHide&&s.state>2&&(n.hz.waitHide||!n.hz.deactivate)&&(s.hide(d),!s.anim.maxDelay&&!s.iFrame&&w.addEventListener("mousemove",s.m_move,!0),s.hideTime&&(s.hideTime=0)),s.fireHide=!0,n.hz.markOnHover&&(T||n.hz.delay>=25)&&(n.hz.markOnHover==="cr"?(s.lastTRGStyle.cursor=y.style.cursor,y.style.cursor=t["zoom-in"]):(s.lastTRGStyle.borderImage=y.style.borderImage,y.style.borderImage="linear-gradient(#d5d9e0, #4a6d88) 27 / 2px / 1rem round space")),T){clearTimeout(s.timers.resolver);return}var O=(s.state===2||s.hideTime)&&n.hz.waitHide?s.anim.maxDelay:n.hz.delay;O?s.timers.preview=setTimeout(s.load,O):await s.load(s.SRC)}else y.IMGS_c=!0,s.TRG=null,s.fireHide&&s.hide(d)}}},load:async function(d){if((n.hz.waitHide||!n.hz.deactivate)&&s.anim.maxDelay&&!s.iFrame&&w.addEventListener("mousemove",s.m_move,!0),!!s.TRG){if(d===void 0&&(d=n.hz.delayOnIdle&&s.TRG.IMGS_c_resolved||s.SRC),s.SRC!==void 0&&(s.SRC=void 0),s.TBOX=(s.TRG.IMGS_overflowParent||s.TRG).getBoundingClientRect(),s.TBOX.Left=s.TBOX.left+w.pageXOffset,s.TBOX.Right=s.TBOX.Left+s.TBOX.width,s.TBOX.Top=s.TBOX.top+w.pageYOffset,s.TBOX.Bottom=s.TBOX.Top+s.TBOX.height,n.hz.markOnHover!=="cr"?(s.TRG.style.borderImage=s.lastTRGStyle.borderImage,s.lastTRGStyle.borderImage=null):s.lastTRGStyle.cursor!==null&&(s.DIV&&(s.DIV.style.cursor=""),s.TRG.style.cursor=s.lastTRGStyle.cursor,s.lastTRGStyle.cursor=null),d===null||d&&d.params||d===!1){if(d===!1||d&&(d=await s.resolve(d.URL,d.params,s.TRG))===1){s.create(),s.show("R_js");return}if(d===!1){s.reset();return}if(d===null){(s.state<4||!s.TRG.IMGS_c)&&(s.state>3&&s.IMG.removeAttribute("src"),s.create(),s.show("res"));return}}if(s.TRG.IMGS_album){s.createCAP(),s.album(""+s.stack[s.TRG.IMGS_album][0]);return}s.set(d)}},m_move:function(d){if(!(d&&s.x===d.clientX&&s.y===d.clientY)){if(s.fullZm){var p=s.x,y=s.y,I,T;if(d||(d={}),P===!0&&(P=!1),d.target&&(s.x=d.clientX,s.y=d.clientY),s.fullZm>1&&d[0]!==!0)I=s.BOX.style,s.fullZm===3&&d.target?(p=parseInt(I.left,10)-p+d.clientX,y=parseInt(I.top,10)-y+d.clientY):d[1]!==void 0?(p=parseInt(I.left,10)+d[0],y=parseInt(I.top,10)+d[1]):p=null;else{var O=s.state===4&&s.DIV.curdeg%180;s.BOX===s.DIV?(s.TRG.IMGS_SVG&&(T=s.stack[s.IMG.src],T=T[1]/T[0]),I=d[2]||parseInt(s.DIV.style.width,10),T=parseInt(I*(T||s.CNT.naturalHeight/s.CNT.naturalWidth)+s.DBOX.hpb,10),I+=s.DBOX.wpb):(I=s.LDR.wh[0],T=s.LDR.wh[1]),O?(O=I,I=T,T=O,O=(I-T)/2):O=0,p=(I-s.DBOX.wpb>L?-(s.x*(I-L+80)/L)+40:(L-I)/2)+O-s.DBOX.ml,y=(T-s.DBOX.hpb>C?-(s.y*(T-C+80)/C)+40:(C-T)/2)-O-s.DBOX.mt}d[2]!==void 0&&(s.BOX.style.width=d[2]+"px",s.BOX.style.height=d[3]+"px"),p!==null&&(s.BOX.style.left=p+"px",s.BOX.style.top=y+"px");return}s.x=d.clientX,s.y=d.clientY,!(s.freeze&&!n.hz.deactivate&&!d[n._freezeTriggerEventKey])&&(s.state<3?n.hz.delayOnIdle&&s.fireHide!==1&&s.state<2&&(s.timers.resolver&&clearTimeout(s.timers.resolver),clearTimeout(s.timers.preview),s.timers.preview=setTimeout(s.load,n.hz.delay)):d.target.IMGS_&&s.TBOX&&(s.TBOX.Left>d.pageX||s.TBOX.Right<d.pageX||s.TBOX.Top>d.pageY||s.TBOX.Bottom<d.pageY)||!d.target.IMGS_&&s.TRG!==d.target?s.m_over({relatedTarget:s.TRG,clientX:d.clientX,clientY:d.clientY}):n.hz.move&&s.state>2&&!s.timers.m_move&&(s.state===3||n.hz.placement<2||n.hz.placement>3)&&(s.timers.m_move=w.requestAnimationFrame(s.m_move_show)))}},m_move_show:function(){s.state>2&&s.show(),s.timers.m_move=null},_preload:function(d){if(!Array.isArray(d)){if(typeof d!="string")return;d=[d]}for(var p=0,y=d.length-1;p<=y;++p){var I=d[p],T=I[0]==="#";if(!(n.hz.hiRes&&T||!n.hz.hiRes&&!T)){if(p!==y)continue;p!==0&&(I=d[0],T=I[0]==="#")}T&&(I=I.slice(1)),I.indexOf("&amp;")!==-1&&(I=I.replace(/&amp;/g,"&")),new Image().src=I[1]==="/"?s.httpPrepend(I):I;return}},preload:function(d){if(s.preloading){if(!d||d.type!=="DOMNodeInserted"){d===!1&&(delete s.preloading,b.body.removeEventListener("DOMNodeInserted",s.preload,!0));return}}else d=null,s.preloading=[],b.body.addEventListener("DOMNodeInserted",s.preload,!0);var p=d&&d.target||b.body;!p||p.IMGS_||p.nodeType!==1||!(p=p.querySelectorAll('img[src], :not(img)[style*="background-image"], a[href]'))||!p.length||(p=[].slice.call(p),s.preloading=s.preloading?s.preloading.concat(p):s.preloading,p=async function(){var y,I,T=50,O=function(){this.src=this.IMGS_src_arr.shift().replace(/^#/,""),this.IMGS_src_arr.length||(this.onerror=null)};for(s.resolve_delay=200;y=s.preloading.shift();)if(!(y.nodeName.toUpperCase()==="A"&&y.childElementCount||y.IMGS_c_resolved||y.IMGS_c||typeof y.IMGS_caption=="string"||y.IMGS_thumb)){if(I=await s.find(y)){if(y.IMGS_c_resolved=I,Array.isArray(I)){var A,E=new Image;for(E.IMGS_src_arr=[],A=0;A<I.length;++A)n.hz.hiRes&&I[A][0]==="#"?E.IMGS_src_arr.push(I[A].slice(1)):I[A][0]!=="#"&&E.IMGS_src_arr.push(I[A]);if(!E.IMGS_src_arr.length)return;E.onerror=O,E.onerror()}else typeof I=="string"&&!U.test(I)&&(new Image().src=I);break}if(I===null||T--<1)break}s.resolve_delay=0,s.preloading.length?s.timers.preload=setTimeout(p,300):delete s.timers.preload},s.timers.preload?(clearTimeout(s.timers.preload),s.timers.preload=setTimeout(p,300)):p())},toggle:function(d){s.state||d===!0?s.init(null,!0):n?s.init():c.send({cmd:"hello",no_grants:!0})},fullzmtoggle:async function(d){s.fullZm?d?s.fullZm=s.fullZm===1?2:1:(s.reset(!1),await s.load(s.TRG.IMGS_c)):(w.removeEventListener("mouseover",s.m_over,!0),b.removeEventListener(t.wheel,s.scroller,!0),b.documentElement.removeEventListener("mouseleave",s.m_leave,!1),s.fullZm=n.hz.fzMode!==1!=!d?1:2,s.switchToHiResInFZ(),s.anim.maxDelay&&setTimeout(function(){s.fullZm&&(s.DIV.style[t.transition]="all 0s")},s.anim.maxDelay),s.CNT===s.VID&&(s.VID.controls=!0),s.state>2&&s.fullZm!==2&&(s.DIV.style.visibility="hidden",s.resize(0),s.m_move(),s.DIV.style.visibility="visible"),s.iFrame||w.addEventListener("mousemove",s.m_move,!0),w.addEventListener("click",s.fzClickAct,!0))},onWinResize:function(){W(),!(s.state<3)&&(s.fullZm?s.fullZm===1&&s.m_move():s.show())},winOnMessage:function(d){var p=d.data,y=p&&p.vdfDpshPtdhhd;if(y==="toggle"||y==="preload"||y==="isFrame"){var I=w.frames;if(!I)return;for(var T=I.length;T--;)if(!(!I[T]||!I[T].postMessage)){try{if(I[T].location.href.lastIndexOf("about:",0)===0)continue}catch{}I[T].postMessage({vdfDpshPtdhhd:y,parent:b.body.nodeName.toUpperCase()},"*")}y==="isFrame"?(s.iFrame=p.parent==="BODY",s.iFrame||w.addEventListener("resize",s.onWinResize,!0)):s[y](p)}else if(y==="from_frame"){if(s.iFrame){w.parent.postMessage(p,"*");return}if(s.fullZm)return;if(p.reset){s.reset();return}if(s.create(),s.fireHide=!0,s.TRG=s.HLP,s.resetNode(s.TRG),p.hide){s.hide({target:s.TRG,clientX:s.DIV.offsetWidth/2+n.hz.margin,clientY:s.DIV.offsetHeight/2+n.hz.margin});return}if(s.x=s.y=0,typeof p.msg=="string"){s.show(p.msg);return}if(!p.src)return;s.TRG.IMGS_caption=p.caption,p.album&&(s.TRG.IMGS_album=p.album.id,s.stack[p.album.id]||(s.stack[p.album.id]=p.album.list),p.album=""+s.stack[p.album.id][0]),p.thumb&&p.thumb[0]&&(s.TRG.IMGS_thumb=p.thumb[0],s.TRG.IMGS_thumb_ok=p.thumb[1]),p.album?s.album(p.album):s.set(p.src)}},onMessage:async function(d){var T;if(!d.NotTypicalMsg&&!c.checkMsg(d))return;let p=d.NotTypicalMsg?d:(T=d==null?void 0:d.data)==null?void 0:T.payload;if(p){if(p.cmd==="i18nLoadSendBack"&&e(p.i18nMsgs),p==="disable"){w.sessionStorage.IMGS_suspend?delete w.sessionStorage.IMGS_suspend:w.sessionStorage.IMGS_suspend="1",w.top.postMessage({vdfDpshPtdhhd:"toggle"},"*"),c.send({cmd:"toggle",value:w.sessionStorage.IMGS_suspend});return}if(p.cmd==="resolved"){var y=s.resolving[p.id]||s.TRG,I=n.sieve[p.params.rule.id];if(delete s.resolving[p.id],p.return_url||s.create(),!p.cache&&(p.m===!0||p.params.rule.skip_resolve)){try{I.res===1&&typeof p.params.rule.req_res=="string"&&(I.res=RULES[I.ruleName].res),s.node=y,p.m=I.res.call(s,p.params)}catch(O){return console.error(a.name+": [rule "+p.params.rule.id+"] "+O.message),!p.return_url&&y===s.TRG&&s.show("R_js"),1}p.params.url&&(p.params.url=p.params.url.join("")),n.tls.sieveCacheRes&&!p.params.rule.skip_resolve&&p.m&&c.send({cmd:"resolve_cache",url:p.params.url,cache:JSON.stringify(p.m),rule_id:p.params.rule.id})}if(p.m&&!Array.isArray(p.m)&&typeof p.m=="object"&&(p.m[""]?(typeof p.m.idx=="number"&&(p.idx=p.m.idx+1),p.m=p.m[""]):typeof p.m.loop=="string"&&(p.loop=!0,p.m=p.m.loop)),Array.isArray(p.m)?p.m.length?(Array.isArray(p.m[0])&&(p.m.forEach(function(O){Array.isArray(O[0])&&O[0].length===1&&(O[0]=O[0][0])}),p.m.length>1?(y.IMGS_album=p.params.url,s.stack[p.params.url]?(p.m=s.stack[p.params.url],p.m=p.m[p.m[0]]):(s.createCAP(),p.idx=Math.max(1,Math.min(p.idx,p.m.length))||1,p.m.unshift(p.idx),s.stack[p.params.url]=p.m,p.m=p.m[p.idx],p.idx+="")):p.m=p.m[0]),n.hz.capText&&p.m[0]&&(p.m[1]?s.prepareCaption(y,p.m[1]):n.hz.capLinkText&&y.IMGS_caption&&(p.m[1]=y.IMGS_caption)),p.m=p.m[0]):p.m=null:typeof p.m!="object"&&typeof p.m!="string"&&(p.m=!1),p.m){if(!p.noloop&&!y.IMGS_album&&typeof p.m=="string"&&(p.loop||I.loop&&I.loop&(p.params.rule.loop_param==="img"?2:1))){if(p.m=await s.find({href:p.m,IMGS_TRG:y}),p.m===null||p.m===1)return p.m;if(p.m===!1)return p.return_url||s.show("R_res"),p.m}if(p.return_url)return p.m;y===s.TRG?y.IMGS_album?s.album(p.idx||"1"):s.set(p.m):((n.hz.preload>1||s.preloading)&&s._preload(p.m),y.IMGS_c_resolved=p.m)}else{if(p.return_url)return delete s.TRG.IMGS_c_resolved,p.m;if(y===s.TRG){if(y.IMGS_fallback_zoom){s.set(y.IMGS_fallback_zoom),delete y.IMGS_fallback_zoom;return}p.m===!1?(s.m_over({relatedTarget:y}),y.IMGS_c=!0,delete y.IMGS_c_resolved):s.show("R_res")}}}else if(p.cmd==="toggle"||p.cmd==="preload")w.top.postMessage({vdfDpshPtdhhd:p.cmd},"*");else if(p.cmd==="hello"){var d=!!s.DIV;s.init(null,!0),s.init(p),d&&s.create()}}},enable:function(d){if(!d.repeat){var p=v(d,n.numpad).replace("Shift+","");if(p===n.key&&d.shiftKey){var y=n.grants||[];y=y.filter(I=>I.url!==location.hostname),y.push({op:"~",url:location.hostname}),c.send({cmd:"savePrefs",prefs:{grants:y}}),setTimeout(()=>{c.send({cmd:"hello"})},1e3)}}},init:function(d,p){var T;if(!c.checkMsg(d))return;let y=(T=d==null?void 0:d.data)==null?void 0:T.payload;if(p){try{s.reset()}catch{}if(s.state=0,s.iFrame||w.removeEventListener("resize",s.onWinResize,!0),s.DIV){try{b.documentElement.removeChild(s.DIV),b.documentElement.removeChild(s.LDR)}catch{}s.BOX=s.DIV=s.CNT=s.VID=s.IMG=s.CAP=s.TRG=s.interlacer=null}s.lastScrollTRG=null}else{if(y!=null&&y.allow){if(!y){s.initOnMouseMoveEnd();return}if(n=y.prefs,n&&!n.hz.deactivate&&n.hz.actTrigger==="0"&&(n=null),!n){s.init(null,!0);return}s.freeze=!n.hz.deactivate,n._freezeTriggerEventKey=n.hz.actTrigger.toLowerCase()+"Key",s.convertSieveRegexes();var I=function(){b.removeEventListener("DOMContentLoaded",I),b.body&&(b.body.IMGS_c=!0),n.hz.preload===3&&s.preload(),s.askForI18nMsgs()};b.readyState==="loading"?b.addEventListener("DOMContentLoaded",I):I()}W(),c.listen(s.onMessage),t.onkeydown=s.key_action,t.onmessage=s.winOnMessage}y=(p?"remove":"add")+"EventListener",b[y](t.wheel,s.scroller,{capture:!0,passive:!0}),b.documentElement[y]("mouseleave",s.m_leave,!1),b[y]("visibilitychange",s.onVisibilityChange,!0),w[y]("contextmenu",te,!0),w[y]("mouseover",s.m_over,!0),w[y]("mousedown",Z,!0),w[y]("mouseup",F,!0),w[y]("dragend",F,!0);try{!p&&w.sessionStorage.IMGS_suspend==="1"&&s.toggle(!0)}catch{}if(s.initOnMouseMoveEnd(!!s.capturedMoveEvent),!w.MutationObserver){s.attrObserver=null;return}if(s.onAttrChange=null,s.mutObserver&&(s.mutObserver.disconnect(),s.mutObserver=null),p){w.removeEventListener("keydown",s.enable);return}s.mutObserver=new w.MutationObserver(function(O){for(var A=O.length;A--;){var E=O[A],D=E.target,X=E.attributeName;e:if(D!==s.TRG){if(s.TRG&&(D.contains(s.TRG)||s.TRG.contains(D)))break e;s.attrObserver(D,X==="style",E.oldValue);continue}if(X==="title"||X==="alt"){if(D[X]==="")continue}else if(X==="style"){var B=D.style.backgroundImage;if(!B||E.oldValue.indexOf(B)!==-1)continue}s.nodeToReset=D}}),s.mutObserverConf={attributes:!0,attributeOldValue:!0,attributeFilter:["href","src","style","alt","title"]}},_:function(d){var p,y=Math.random().toString(36).slice(2),I=function(O){this.removeEventListener(O.type,I),p=O.detail};w.addEventListener(y,I);var T=b.createElement("script");return T.textContent="dispatchEvent(new CustomEvent('"+y+"', {bubbles: false, detail: window['"+d+"']}))",b.body.appendChild(T).parentNode.removeChild(T),p}};s.capturedMoveEvent=null,s.onInitMouseMove=function(d){if(s.capturedMoveEvent){s.capturedMoveEvent=d;return}s.capturedMoveEvent=d,w.top.postMessage({vdfDpshPtdhhd:"isFrame"},"*"),c.listen(s.init),c.send({cmd:"hello"})},s.initOnMouseMoveEnd=function(d){window.removeEventListener("mousemove",s.onInitMouseMove,!0),n&&d&&(!s.x||s.state!==null)&&s.m_over(s.capturedMoveEvent),delete s.onInitMouseMove,delete s.capturedMoveEvent,s.initOnMouseMoveEnd=function(){}},window.addEventListener("mousemove",s.onInitMouseMove,!0),t.onmessage=s.winOnMessage,w.PVI=s,w.getImagedukeMainConCfg=function(){return n},w.getImagedukeMainconPVI=function(){return s}}}})(window,document)}();export{content_mainworld as default};
