import{b as we,g as Br}from"./browser-polyfill-Bo2e-ahS.js";var Ne={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */(function(a){function i(){if(!(this instanceof i))return new i}(function(o){a.exports=o;var f="listeners",l={on:p,once:g,off:x,emit:m};y(o.prototype),o.mixin=y;function y(d){for(var T in l)d[T]=l[T];return d}function p(d,T){return E(this,d).push(T),this}function g(d,T){var A=this;return F.originalListener=T,E(A,d).push(F),A;function F(){x.call(A,d,F),T.apply(this,arguments)}}function x(d,T){var A=this,F;if(!arguments.length)delete A[f];else if(T){if(F=E(A,d,!0),F){if(F=F.filter(K),!F.length)return x.call(A,d);A[f][d]=F}}else if(F=A[f],F&&(delete F[d],!Object.keys(F).length))return x.call(A);return A;function K(W){return W!==T&&W.originalListener!==T}}function m(d,T){var A=this,F=E(A,d,!0);if(!F)return!1;var K=arguments.length;if(K===1)F.forEach(se);else if(K===2)F.forEach(I);else{var W=Array.prototype.slice.call(arguments,1);F.forEach(B)}return!!F.length;function se(v){v.call(A)}function I(v){v.call(A,T)}function B(v){v.apply(A,W)}}function E(d,T,A){if(!(A&&!d[f])){var F=d[f]||(d[f]={});return F[T]||(F[T]=[])}}})(i)})(Ne);var De=Ne.exports;const br=De;function Ir(a,i="/"){let o,f="global",l=["global"];const y=new br,p={};let g={},x=Object.assign({},a),m;return Object.assign(y,{connect:T,disconnect:A,get:W,getAll:se,set:I,getCurrentScope:B,setCurrentScope:v,addScope:R,deleteScope:k,getScopeList:b,import:E,export:d,has:K});function E(w){const C=w.scopeList||l.slice(),U=new Set(C);if(!U.has("global"))throw new Error("invalid scopeList");const P={scopeList:C};for(const[s,S]of Object.entries(w.scopes))if(U.has(s))for(const[D,M]of Object.entries(S))a[D]!=null&&(P[`${s}${i}${D}`]=M);return o.setMany(P)}function d(){const w=[];for(const C of l)w.push(...Object.keys(a).map(U=>`${C}${i}${U}`));return w.push("scopeList"),o.getMany(w).then(C=>{const U=C.scopeList||l.slice(),P=new Set(U),s={scopeList:U,scopes:{}};for(const[S,D]of Object.entries(C)){const M=S.indexOf(i);if(M<0)continue;const q=S.slice(0,M),te=S.slice(M+i.length);P.has(q)&&a[te]!=null&&(s.scopes[q]||(s.scopes[q]={}),s.scopes[q][te]=D)}return s})}function T(w){return o=w,m=o.getMany(Object.keys(a).map(C=>`global${i}${C}`).concat(["scopeList"])).then(F),o.on("change",F),m}function A(){o.off("change",F),o=null}function F(w,C=!1){if(w.scopeList&&(l=w.scopeList,y.emit("scopeListChange",l),!l.includes(f)))return v("global");const U=new Set;for(const[S,D]of Object.entries(w)){const[M,q]=S.startsWith(`global${i}`)?["global",S.slice(6+i.length)]:S.startsWith(`${f}${i}`)?[f,S.slice(f.length+i.length)]:[null,null];!M||a[q]==null||(M==="global"&&(U.add(q),p[q]=D),M===f&&(U.add(q),g[q]=D))}C&&Object.keys(a).forEach(S=>U.add(S));const P={};let s=!1;for(const S of U){const D=g[S]!=null?g[S]:p[S]!=null?p[S]:a[S];x[S]!==D&&(P[S]=D,x[S]=D,s=!0)}s&&y.emit("change",P)}function K(w){return x.hasOwnProperty(w)}function W(w){return x[w]}function se(){return Object.assign({},x)}function I(w,C){return o.setMany({[`${f}${i}${w}`]:C})}function B(){return f}function v(w){return f===w?Promise.resolve(!0):l.includes(w)?o.getMany(Object.keys(a).map(C=>`${w}${i}${C}`)).then(C=>(f=w,g={},y.emit("scopeChange",f),F(C,!0),!0)):Promise.resolve(!1)}function R(w){return l.includes(w)?Promise.reject(new Error(`${w} already exists`)):w.includes(i)?Promise.reject(new Error(`invalid word: ${i}`)):o.setMany({scopeList:l.concat([w])})}function k(w){return w==="global"?Promise.reject(new Error("cannot delete global")):Promise.all([o.setMany({scopeList:l.filter(C=>C!=w)}),o.deleteMany(Object.keys(a).map(C=>`${w}${i}${C}`))])}function b(){return l}}var vr={createPref:Ir};function Ar(a){return(...i)=>new Promise((o,f)=>{a(...i,(...l)=>{if(chrome.runtime.lastError){f(chrome.runtime.lastError);return}if(l.length<=1){o(l[0]);return}o(l)})})}var Fr=Ar;const je=De,Cr=Fr;function Tr(a="local",i="webext-pref/"){const o=new je,f=["addListener","removeListener"].reduce((E,d)=>(E[d]=typeof browser=="object"?browser.storage.onChanged[d].bind(browser.storage.onChanged):chrome.storage.onChanged[d].bind(chrome.storage.onChanged),E),{}),l=["get","set","remove"].reduce((E,d)=>(E[d]=typeof browser=="object"?browser.storage[a][d].bind(browser.storage[a]):Cr(chrome.storage[a][d].bind(chrome.storage[a])),E),{});return f.addListener(m),Object.assign(o,{getMany:p,setMany:g,deleteMany:x,destroy:y});function y(){f.removeListener(m)}function p(E){return l.get(E.map(d=>i+d)).then(d=>{const T={};for(const[A,F]of Object.entries(d))A.startsWith(i)&&(T[A.slice(i.length)]=F);return T})}function g(E){const d={};for(const[T,A]of Object.entries(E))d[i+T]=A;return l.set(d)}function x(E){return l.remove(E.map(d=>i+d))}function m(E,d){if(d!==a)return;const T={};for(const[A,{newValue:F}]of Object.entries(E))A.startsWith(i)&&(T[A.slice(i.length)]=F);o.emit("change",T)}}function Sr(){const a=new Map,i=new je;return Object.assign(i,{getMany:o,setMany:f,deleteMany:l});function o(y){const p={};for(const g of y)a.has(g)&&(p[g]=a.get(g));return Promise.resolve(p)}function f(y){for(const[p,g]of Object.entries(y))a.set(p,g);return i.emit("change",y),Promise.resolve()}function l(y){const p={};for(const g of y)a.delete(g),p[g]=void 0;return i.emit("change",p),Promise.resolve()}}var Ur={createWebextStorage:Tr,createMemoryStorage:Sr};const{createPref:_r}=vr,{createWebextStorage:kr,createMemoryStorage:Rr}=Ur;var qe={createPref:_r,createWebextStorage:kr,createMemoryStorage:Rr};const Ge={browserAction:"PICK_FROM_CURRENT_TAB",blacklist:"",closeTabsAfterSave:!1,contextMenu:!0,collectFromFrames:!1,customIcon:!1,customIconColor:"#000000",customCSS:"",clearDownloadHistory:"never",enabled:!0,dblClick:!1,dblClickCtrl:!1,dblClickShift:!1,dblClickAlt:!0,detectLink:!1,displayImageSizeUnderThumbnail:!1,dragndrop:!0,dragndropHard:!1,downloadButton:!1,downloadButtonSize:64,downloadButtonDelay:0,downloadButtonDelayHide:500,downloadButtonMinWidth:64,downloadButtonMinHeight:64,downloadButtonPositionHorizontal:"LEFT_INSIDE",downloadButtonPositionVertical:"TOP_OUTSIDE",escapeWithUnicode:!0,escapeZWJ:!1,escapeFF127:$r(),isolateTabs:!1,filenameConflictAction:"uniquify",saveAs:!1,selectByDefault:!0,singleClick:!1,singleClickCtrl:!1,singleClickShift:!1,singleClickAlt:!0,srcAlternative:"data-src, data-gifsrc, gifsrc",previewMaxHeight:200,previewMaxHeightUpperBound:200,retryOnFailure:"",urlMap:"",useCache:!0,useExpression:!1,fetchDelay:"",variableMaxLength:128,filePattern:"Image Duke/${pageTitle}/${name}${ext}",filePatternHistory:[],filePatternBatch:"Image Duke/${pageTitle}/${index} - ${name}${ext}",filePatternBatchHistory:[],filePatternStandalone:"Image Duke/${name}${ext}",filePatternStandaloneEnabled:!1,filePatternStandaloneHistory:[],defaultExt:".jpg",defaultName:"unnamed-image",minFileSize:0,minWidth:10,minHeight:10,matchType:"include",matchUrl:"",matchUrlHistory:[]},me=qe.createPref(Ge),Lr=Pr();me.ready=()=>Lr;async function Pr(){await me.connect(qe.createWebextStorage("sync"));const{prefInSync:a}=await we.storage.local.get("prefInSync");if(a)return;const i=await we.storage.local.get(Object.keys(Ge)),o=[];for(const f in i)f.endsWith("History")&&typeof i[f]=="string"&&(i[f]=JSON.parse(i[f])),o.push(me.set(f,i[f]));await Promise.all(o),await we.storage.local.set({prefInSync:!0})}function $r(){const a=navigator.userAgent;if(!/Firefox/.test(a))return!1;const o=a.match(/Firefox\/(\d+)/)[1];return parseInt(o,10)>=127}var be={exports:{}};function Mr(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var He={exports:{}},j=He.exports={},Y,Z;function xe(){throw new Error("setTimeout has not been defined")}function Ee(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Y=setTimeout:Y=xe}catch{Y=xe}try{typeof clearTimeout=="function"?Z=clearTimeout:Z=Ee}catch{Z=Ee}})();function We(a){if(Y===setTimeout)return setTimeout(a,0);if((Y===xe||!Y)&&setTimeout)return Y=setTimeout,setTimeout(a,0);try{return Y(a,0)}catch{try{return Y.call(null,a,0)}catch{return Y.call(this,a,0)}}}function Or(a){if(Z===clearTimeout)return clearTimeout(a);if((Z===Ee||!Z)&&clearTimeout)return Z=clearTimeout,clearTimeout(a);try{return Z(a)}catch{try{return Z.call(null,a)}catch{return Z.call(this,a)}}}var V=[],oe=!1,re,fe=-1;function Nr(){!oe||!re||(oe=!1,re.length?V=re.concat(V):fe=-1,V.length&&ze())}function ze(){if(!oe){var a=We(Nr);oe=!0;for(var i=V.length;i;){for(re=V,V=[];++fe<i;)re&&re[fe].run();fe=-1,i=V.length}re=null,oe=!1,Or(a)}}j.nextTick=function(a){var i=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)i[o-1]=arguments[o];V.push(new Xe(a,i)),V.length===1&&!oe&&We(ze)};function Xe(a,i){this.fun=a,this.array=i}Xe.prototype.run=function(){this.fun.apply(null,this.array)};j.title="browser";j.browser=!0;j.env={};j.argv=[];j.version="";j.versions={};function J(){}j.on=J;j.addListener=J;j.once=J;j.off=J;j.removeListener=J;j.removeAllListeners=J;j.emit=J;j.prependListener=J;j.prependOnceListener=J;j.listeners=function(a){return[]};j.binding=function(a){throw new Error("process.binding is not supported")};j.cwd=function(){return"/"};j.chdir=function(a){throw new Error("process.chdir is not supported")};j.umask=function(){return 0};var Dr=He.exports;const jr=Mr(Dr);function X(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function $e(a,i){for(var o="",f=0,l=-1,y=0,p,g=0;g<=a.length;++g){if(g<a.length)p=a.charCodeAt(g);else{if(p===47)break;p=47}if(p===47){if(!(l===g-1||y===1))if(l!==g-1&&y===2){if(o.length<2||f!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var x=o.lastIndexOf("/");if(x!==o.length-1){x===-1?(o="",f=0):(o=o.slice(0,x),f=o.length-1-o.lastIndexOf("/")),l=g,y=0;continue}}else if(o.length===2||o.length===1){o="",f=0,l=g,y=0;continue}}i&&(o.length>0?o+="/..":o="..",f=2)}else o.length>0?o+="/"+a.slice(l+1,g):o=a.slice(l+1,g),f=g-l-1;l=g,y=0}else p===46&&y!==-1?++y:y=-1}return o}function qr(a,i){var o=i.dir||i.root,f=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+f:o+a+f:f}var ue={resolve:function(){for(var i="",o=!1,f,l=arguments.length-1;l>=-1&&!o;l--){var y;l>=0?y=arguments[l]:(f===void 0&&(f=jr.cwd()),y=f),X(y),y.length!==0&&(i=y+"/"+i,o=y.charCodeAt(0)===47)}return i=$e(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(X(i),i.length===0)return".";var o=i.charCodeAt(0)===47,f=i.charCodeAt(i.length-1)===47;return i=$e(i,!o),i.length===0&&!o&&(i="."),i.length>0&&f&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return X(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var f=arguments[o];X(f),f.length>0&&(i===void 0?i=f:i+="/"+f)}return i===void 0?".":ue.normalize(i)},relative:function(i,o){if(X(i),X(o),i===o||(i=ue.resolve(i),o=ue.resolve(o),i===o))return"";for(var f=1;f<i.length&&i.charCodeAt(f)===47;++f);for(var l=i.length,y=l-f,p=1;p<o.length&&o.charCodeAt(p)===47;++p);for(var g=o.length,x=g-p,m=y<x?y:x,E=-1,d=0;d<=m;++d){if(d===m){if(x>m){if(o.charCodeAt(p+d)===47)return o.slice(p+d+1);if(d===0)return o.slice(p+d)}else y>m&&(i.charCodeAt(f+d)===47?E=d:d===0&&(E=0));break}var T=i.charCodeAt(f+d),A=o.charCodeAt(p+d);if(T!==A)break;T===47&&(E=d)}var F="";for(d=f+E+1;d<=l;++d)(d===l||i.charCodeAt(d)===47)&&(F.length===0?F+="..":F+="/..");return F.length>0?F+o.slice(p+E):(p+=E,o.charCodeAt(p)===47&&++p,o.slice(p))},_makeLong:function(i){return i},dirname:function(i){if(X(i),i.length===0)return".";for(var o=i.charCodeAt(0),f=o===47,l=-1,y=!0,p=i.length-1;p>=1;--p)if(o=i.charCodeAt(p),o===47){if(!y){l=p;break}}else y=!1;return l===-1?f?"/":".":f&&l===1?"//":i.slice(0,l)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');X(i);var f=0,l=-1,y=!0,p;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var g=o.length-1,x=-1;for(p=i.length-1;p>=0;--p){var m=i.charCodeAt(p);if(m===47){if(!y){f=p+1;break}}else x===-1&&(y=!1,x=p+1),g>=0&&(m===o.charCodeAt(g)?--g===-1&&(l=p):(g=-1,l=x))}return f===l?l=x:l===-1&&(l=i.length),i.slice(f,l)}else{for(p=i.length-1;p>=0;--p)if(i.charCodeAt(p)===47){if(!y){f=p+1;break}}else l===-1&&(y=!1,l=p+1);return l===-1?"":i.slice(f,l)}},extname:function(i){X(i);for(var o=-1,f=0,l=-1,y=!0,p=0,g=i.length-1;g>=0;--g){var x=i.charCodeAt(g);if(x===47){if(!y){f=g+1;break}continue}l===-1&&(y=!1,l=g+1),x===46?o===-1?o=g:p!==1&&(p=1):o!==-1&&(p=-1)}return o===-1||l===-1||p===0||p===1&&o===l-1&&o===f+1?"":i.slice(o,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return qr("/",i)},parse:function(i){X(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var f=i.charCodeAt(0),l=f===47,y;l?(o.root="/",y=1):y=0;for(var p=-1,g=0,x=-1,m=!0,E=i.length-1,d=0;E>=y;--E){if(f=i.charCodeAt(E),f===47){if(!m){g=E+1;break}continue}x===-1&&(m=!1,x=E+1),f===46?p===-1?p=E:d!==1&&(d=1):p!==-1&&(d=-1)}return p===-1||x===-1||d===0||d===1&&p===x-1&&p===g+1?x!==-1&&(g===0&&l?o.base=o.name=i.slice(1,x):o.base=o.name=i.slice(g,x)):(g===0&&l?(o.name=i.slice(1,p),o.base=i.slice(1,x)):(o.name=i.slice(g,p),o.base=i.slice(g,x)),o.ext=i.slice(p,x)),g>0?o.dir=i.slice(0,g-1):l&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};ue.posix=ue;var Gr=ue,Be={exports:{}},Ye={};(function(a){Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var i={},o={};o.byteLength=E,o.toByteArray=T,o.fromByteArray=K;for(var f=[],l=[],y=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,x=p.length;g<x;++g)f[g]=p[g],l[p.charCodeAt(g)]=g;l[45]=62,l[95]=63;function m(I){var B=I.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=I.indexOf("=");v===-1&&(v=B);var R=v===B?0:4-v%4;return[v,R]}function E(I){var B=m(I),v=B[0],R=B[1];return(v+R)*3/4-R}function d(I,B,v){return(B+v)*3/4-v}function T(I){var B,v=m(I),R=v[0],k=v[1],b=new y(d(I,R,k)),w=0,C=k>0?R-4:R,U;for(U=0;U<C;U+=4)B=l[I.charCodeAt(U)]<<18|l[I.charCodeAt(U+1)]<<12|l[I.charCodeAt(U+2)]<<6|l[I.charCodeAt(U+3)],b[w++]=B>>16&255,b[w++]=B>>8&255,b[w++]=B&255;return k===2&&(B=l[I.charCodeAt(U)]<<2|l[I.charCodeAt(U+1)]>>4,b[w++]=B&255),k===1&&(B=l[I.charCodeAt(U)]<<10|l[I.charCodeAt(U+1)]<<4|l[I.charCodeAt(U+2)]>>2,b[w++]=B>>8&255,b[w++]=B&255),b}function A(I){return f[I>>18&63]+f[I>>12&63]+f[I>>6&63]+f[I&63]}function F(I,B,v){for(var R,k=[],b=B;b<v;b+=3)R=(I[b]<<16&16711680)+(I[b+1]<<8&65280)+(I[b+2]&255),k.push(A(R));return k.join("")}function K(I){for(var B,v=I.length,R=v%3,k=[],b=16383,w=0,C=v-R;w<C;w+=b)k.push(F(I,w,w+b>C?C:w+b));return R===1?(B=I[v-1],k.push(f[B>>2]+f[B<<4&63]+"==")):R===2&&(B=(I[v-2]<<8)+I[v-1],k.push(f[B>>10]+f[B>>4&63]+f[B<<2&63]+"=")),k.join("")}var W={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */W.read=function(I,B,v,R,k){var b,w,C=k*8-R-1,U=(1<<C)-1,P=U>>1,s=-7,S=v?k-1:0,D=v?-1:1,M=I[B+S];for(S+=D,b=M&(1<<-s)-1,M>>=-s,s+=C;s>0;b=b*256+I[B+S],S+=D,s-=8);for(w=b&(1<<-s)-1,b>>=-s,s+=R;s>0;w=w*256+I[B+S],S+=D,s-=8);if(b===0)b=1-P;else{if(b===U)return w?NaN:(M?-1:1)*(1/0);w=w+Math.pow(2,R),b=b-P}return(M?-1:1)*w*Math.pow(2,b-R)},W.write=function(I,B,v,R,k,b){var w,C,U,P=b*8-k-1,s=(1<<P)-1,S=s>>1,D=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=R?0:b-1,q=R?1:-1,te=B<0||B===0&&1/B<0?1:0;for(B=Math.abs(B),isNaN(B)||B===1/0?(C=isNaN(B)?1:0,w=s):(w=Math.floor(Math.log(B)/Math.LN2),B*(U=Math.pow(2,-w))<1&&(w--,U*=2),w+S>=1?B+=D/U:B+=D*Math.pow(2,1-S),B*U>=2&&(w++,U/=2),w+S>=s?(C=0,w=s):w+S>=1?(C=(B*U-1)*Math.pow(2,k),w=w+S):(C=B*Math.pow(2,S-1)*Math.pow(2,k),w=0));k>=8;I[v+M]=C&255,M+=q,C/=256,k-=8);for(w=w<<k|C,P+=k;P>0;I[v+M]=w&255,M+=q,w/=256,P-=8);I[v+M-q]|=te*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(I){const B=o,v=W,R=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;I.Buffer=s,I.SlowBuffer=rr,I.INSPECT_MAX_BYTES=50;const k=2147483647;I.kMaxLength=k;const{Uint8Array:b,ArrayBuffer:w,SharedArrayBuffer:C}=globalThis;s.TYPED_ARRAY_SUPPORT=U(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function U(){try{const t=new b(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,b.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function P(t){if(t>k)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new b(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return q(t)}return S(t,e,r)}s.poolSize=8192;function S(t,e,r){if(typeof t=="string")return te(t,e);if(w.isView(t))return Qe(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(z(t,w)||t&&z(t.buffer,w)||typeof C<"u"&&(z(t,C)||t&&z(t.buffer,C)))return he(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return s.from(n,e,r);const u=er(t);if(u)return u;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}s.from=function(t,e,r){return S(t,e,r)},Object.setPrototypeOf(s.prototype,b.prototype),Object.setPrototypeOf(s,b);function D(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function M(t,e,r){return D(t),t<=0?P(t):e!==void 0?typeof r=="string"?P(t).fill(e,r):P(t).fill(e):P(t)}s.alloc=function(t,e,r){return M(t,e,r)};function q(t){return D(t),P(t<0?0:pe(t)|0)}s.allocUnsafe=function(t){return q(t)},s.allocUnsafeSlow=function(t){return q(t)};function te(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=Ie(t,e)|0;let n=P(r);const u=n.write(t,e);return u!==r&&(n=n.slice(0,u)),n}function le(t){const e=t.length<0?0:pe(t.length)|0,r=P(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Qe(t){if(z(t,b)){const e=new b(t);return he(e.buffer,e.byteOffset,e.byteLength)}return le(t)}function he(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new b(t):r===void 0?n=new b(t,e):n=new b(t,e,r),Object.setPrototypeOf(n,s.prototype),n}function er(t){if(s.isBuffer(t)){const e=pe(t.length)|0,r=P(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||ye(t.length)?P(0):le(t);if(t.type==="Buffer"&&Array.isArray(t.data))return le(t.data)}function pe(t){if(t>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return t|0}function rr(t){return+t!=t&&(t=0),s.alloc(+t)}s.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==s.prototype},s.compare=function(e,r){if(z(e,b)&&(e=s.from(e,e.offset,e.byteLength)),z(r,b)&&(r=s.from(r,r.offset,r.byteLength)),!s.isBuffer(e)||!s.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,u=r.length;for(let c=0,h=Math.min(n,u);c<h;++c)if(e[c]!==r[c]){n=e[c],u=r[c];break}return n<u?-1:u<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return s.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;const u=s.allocUnsafe(r);let c=0;for(n=0;n<e.length;++n){let h=e[n];if(z(h,b))c+h.length>u.length?(s.isBuffer(h)||(h=s.from(h)),h.copy(u,c)):b.prototype.set.call(u,h,c);else if(s.isBuffer(h))h.copy(u,c);else throw new TypeError('"list" argument must be an Array of Buffers');c+=h.length}return u};function Ie(t,e){if(s.isBuffer(t))return t.length;if(w.isView(t)||z(t,w))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let u=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return de(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Pe(t).length;default:if(u)return n?-1:de(t).length;e=(""+e).toLowerCase(),u=!0}}s.byteLength=Ie;function tr(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return hr(this,e,r);case"utf8":case"utf-8":return Fe(this,e,r);case"ascii":return fr(this,e,r);case"latin1":case"binary":return lr(this,e,r);case"base64":return ar(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pr(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}s.prototype._isBuffer=!0;function ee(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}s.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)ee(this,r,r+1);return this},s.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)ee(this,r,r+3),ee(this,r+1,r+2);return this},s.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)ee(this,r,r+7),ee(this,r+1,r+6),ee(this,r+2,r+5),ee(this,r+3,r+4);return this},s.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?Fe(this,0,e):tr.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:s.compare(this,e)===0},s.prototype.inspect=function(){let e="";const r=I.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},R&&(s.prototype[R]=s.prototype.inspect),s.prototype.compare=function(e,r,n,u,c){if(z(e,b)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),u===void 0&&(u=0),c===void 0&&(c=this.length),r<0||n>e.length||u<0||c>this.length)throw new RangeError("out of range index");if(u>=c&&r>=n)return 0;if(u>=c)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,u>>>=0,c>>>=0,this===e)return 0;let h=c-u,_=n-r;const O=Math.min(h,_),$=this.slice(u,c),N=e.slice(r,n);for(let L=0;L<O;++L)if($[L]!==N[L]){h=$[L],_=N[L];break}return h<_?-1:_<h?1:0};function ve(t,e,r,n,u){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ye(r)&&(r=u?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(u)return-1;r=t.length-1}else if(r<0)if(u)r=0;else return-1;if(typeof e=="string"&&(e=s.from(e,n)),s.isBuffer(e))return e.length===0?-1:Ae(t,e,r,n,u);if(typeof e=="number")return e=e&255,typeof b.prototype.indexOf=="function"?u?b.prototype.indexOf.call(t,e,r):b.prototype.lastIndexOf.call(t,e,r):Ae(t,[e],r,n,u);throw new TypeError("val must be string, number or Buffer")}function Ae(t,e,r,n,u){let c=1,h=t.length,_=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;c=2,h/=2,_/=2,r/=2}function O(N,L){return c===1?N[L]:N.readUInt16BE(L*c)}let $;if(u){let N=-1;for($=r;$<h;$++)if(O(t,$)===O(e,N===-1?0:$-N)){if(N===-1&&(N=$),$-N+1===_)return N*c}else N!==-1&&($-=$-N),N=-1}else for(r+_>h&&(r=h-_),$=r;$>=0;$--){let N=!0;for(let L=0;L<_;L++)if(O(t,$+L)!==O(e,L)){N=!1;break}if(N)return $}return-1}s.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1},s.prototype.indexOf=function(e,r,n){return ve(this,e,r,n,!0)},s.prototype.lastIndexOf=function(e,r,n){return ve(this,e,r,n,!1)};function nr(t,e,r,n){r=Number(r)||0;const u=t.length-r;n?(n=Number(n),n>u&&(n=u)):n=u;const c=e.length;n>c/2&&(n=c/2);let h;for(h=0;h<n;++h){const _=parseInt(e.substr(h*2,2),16);if(ye(_))return h;t[r+h]=_}return h}function ir(t,e,r,n){return ce(de(e,t.length-r),t,r,n)}function or(t,e,r,n){return ce(wr(e),t,r,n)}function ur(t,e,r,n){return ce(Pe(e),t,r,n)}function sr(t,e,r,n){return ce(mr(e,t.length-r),t,r,n)}s.prototype.write=function(e,r,n,u){if(r===void 0)u="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")u=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,u===void 0&&(u="utf8")):(u=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const c=this.length-r;if((n===void 0||n>c)&&(n=c),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");u||(u="utf8");let h=!1;for(;;)switch(u){case"hex":return nr(this,e,r,n);case"utf8":case"utf-8":return ir(this,e,r,n);case"ascii":case"latin1":case"binary":return or(this,e,r,n);case"base64":return ur(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sr(this,e,r,n);default:if(h)throw new TypeError("Unknown encoding: "+u);u=(""+u).toLowerCase(),h=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ar(t,e,r){return e===0&&r===t.length?B.fromByteArray(t):B.fromByteArray(t.slice(e,r))}function Fe(t,e,r){r=Math.min(t.length,r);const n=[];let u=e;for(;u<r;){const c=t[u];let h=null,_=c>239?4:c>223?3:c>191?2:1;if(u+_<=r){let O,$,N,L;switch(_){case 1:c<128&&(h=c);break;case 2:O=t[u+1],(O&192)===128&&(L=(c&31)<<6|O&63,L>127&&(h=L));break;case 3:O=t[u+1],$=t[u+2],(O&192)===128&&($&192)===128&&(L=(c&15)<<12|(O&63)<<6|$&63,L>2047&&(L<55296||L>57343)&&(h=L));break;case 4:O=t[u+1],$=t[u+2],N=t[u+3],(O&192)===128&&($&192)===128&&(N&192)===128&&(L=(c&15)<<18|(O&63)<<12|($&63)<<6|N&63,L>65535&&L<1114112&&(h=L))}}h===null?(h=65533,_=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|h&1023),n.push(h),u+=_}return cr(n)}const Ce=4096;function cr(t){const e=t.length;if(e<=Ce)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ce));return r}function fr(t,e,r){let n="";r=Math.min(t.length,r);for(let u=e;u<r;++u)n+=String.fromCharCode(t[u]&127);return n}function lr(t,e,r){let n="";r=Math.min(t.length,r);for(let u=e;u<r;++u)n+=String.fromCharCode(t[u]);return n}function hr(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let u="";for(let c=e;c<r;++c)u+=xr[t[c]];return u}function pr(t,e,r){const n=t.slice(e,r);let u="";for(let c=0;c<n.length-1;c+=2)u+=String.fromCharCode(n[c]+n[c+1]*256);return u}s.prototype.slice=function(e,r){const n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);const u=this.subarray(e,r);return Object.setPrototypeOf(u,s.prototype),u};function G(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||G(e,r,this.length);let u=this[e],c=1,h=0;for(;++h<r&&(c*=256);)u+=this[e+h]*c;return u},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||G(e,r,this.length);let u=this[e+--r],c=1;for(;r>0&&(c*=256);)u+=this[e+--r]*c;return u},s.prototype.readUint8=s.prototype.readUInt8=function(e,r){return e=e>>>0,r||G(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||G(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||G(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||G(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||G(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=Q(function(e){e=e>>>0,ie(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ae(e,this.length-8);const u=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,c=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(u)+(BigInt(c)<<BigInt(32))}),s.prototype.readBigUInt64BE=Q(function(e){e=e>>>0,ie(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ae(e,this.length-8);const u=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],c=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(u)<<BigInt(32))+BigInt(c)}),s.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||G(e,r,this.length);let u=this[e],c=1,h=0;for(;++h<r&&(c*=256);)u+=this[e+h]*c;return c*=128,u>=c&&(u-=Math.pow(2,8*r)),u},s.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||G(e,r,this.length);let u=r,c=1,h=this[e+--u];for(;u>0&&(c*=256);)h+=this[e+--u]*c;return c*=128,h>=c&&(h-=Math.pow(2,8*r)),h},s.prototype.readInt8=function(e,r){return e=e>>>0,r||G(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,r){e=e>>>0,r||G(e,2,this.length);const n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},s.prototype.readInt16BE=function(e,r){e=e>>>0,r||G(e,2,this.length);const n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},s.prototype.readInt32LE=function(e,r){return e=e>>>0,r||G(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,r){return e=e>>>0,r||G(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=Q(function(e){e=e>>>0,ie(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ae(e,this.length-8);const u=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(u)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),s.prototype.readBigInt64BE=Q(function(e){e=e>>>0,ie(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ae(e,this.length-8);const u=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(u)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),s.prototype.readFloatLE=function(e,r){return e=e>>>0,r||G(e,4,this.length),v.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,r){return e=e>>>0,r||G(e,4,this.length),v.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||G(e,8,this.length),v.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||G(e,8,this.length),v.read(this,e,!1,52,8)};function H(t,e,r,n,u,c){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>u||e<c)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,r,n,u){if(e=+e,r=r>>>0,n=n>>>0,!u){const _=Math.pow(2,8*n)-1;H(this,e,r,n,_,0)}let c=1,h=0;for(this[r]=e&255;++h<n&&(c*=256);)this[r+h]=e/c&255;return r+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,r,n,u){if(e=+e,r=r>>>0,n=n>>>0,!u){const _=Math.pow(2,8*n)-1;H(this,e,r,n,_,0)}let c=n-1,h=1;for(this[r+c]=e&255;--c>=0&&(h*=256);)this[r+c]=e/h&255;return r+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,1,255,0),this[r]=e&255,r+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Te(t,e,r,n,u){Le(e,n,u,t,r,7);let c=Number(e&BigInt(4294967295));t[r++]=c,c=c>>8,t[r++]=c,c=c>>8,t[r++]=c,c=c>>8,t[r++]=c;let h=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=h,h=h>>8,t[r++]=h,h=h>>8,t[r++]=h,h=h>>8,t[r++]=h,r}function Se(t,e,r,n,u){Le(e,n,u,t,r,7);let c=Number(e&BigInt(4294967295));t[r+7]=c,c=c>>8,t[r+6]=c,c=c>>8,t[r+5]=c,c=c>>8,t[r+4]=c;let h=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=h,h=h>>8,t[r+2]=h,h=h>>8,t[r+1]=h,h=h>>8,t[r]=h,r+8}s.prototype.writeBigUInt64LE=Q(function(e,r=0){return Te(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Q(function(e,r=0){return Se(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,r,n,u){if(e=+e,r=r>>>0,!u){const O=Math.pow(2,8*n-1);H(this,e,r,n,O-1,-O)}let c=0,h=1,_=0;for(this[r]=e&255;++c<n&&(h*=256);)e<0&&_===0&&this[r+c-1]!==0&&(_=1),this[r+c]=(e/h>>0)-_&255;return r+n},s.prototype.writeIntBE=function(e,r,n,u){if(e=+e,r=r>>>0,!u){const O=Math.pow(2,8*n-1);H(this,e,r,n,O-1,-O)}let c=n-1,h=1,_=0;for(this[r+c]=e&255;--c>=0&&(h*=256);)e<0&&_===0&&this[r+c+1]!==0&&(_=1),this[r+c]=(e/h>>0)-_&255;return r+n},s.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1},s.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2},s.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2},s.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},s.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||H(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4},s.prototype.writeBigInt64LE=Q(function(e,r=0){return Te(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Q(function(e,r=0){return Se(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ue(t,e,r,n,u,c){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function _e(t,e,r,n,u){return e=+e,r=r>>>0,u||Ue(t,e,r,4),v.write(t,e,r,n,23,4),r+4}s.prototype.writeFloatLE=function(e,r,n){return _e(this,e,r,!0,n)},s.prototype.writeFloatBE=function(e,r,n){return _e(this,e,r,!1,n)};function ke(t,e,r,n,u){return e=+e,r=r>>>0,u||Ue(t,e,r,8),v.write(t,e,r,n,52,8),r+8}s.prototype.writeDoubleLE=function(e,r,n){return ke(this,e,r,!0,n)},s.prototype.writeDoubleBE=function(e,r,n){return ke(this,e,r,!1,n)},s.prototype.copy=function(e,r,n,u){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!u&&u!==0&&(u=this.length),r>=e.length&&(r=e.length),r||(r=0),u>0&&u<n&&(u=n),u===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("sourceEnd out of bounds");u>this.length&&(u=this.length),e.length-r<u-n&&(u=e.length-r+n);const c=u-n;return this===e&&typeof b.prototype.copyWithin=="function"?this.copyWithin(r,n,u):b.prototype.set.call(e,this.subarray(n,u),r),c},s.prototype.fill=function(e,r,n,u){if(typeof e=="string"){if(typeof r=="string"?(u=r,r=0,n=this.length):typeof n=="string"&&(u=n,n=this.length),u!==void 0&&typeof u!="string")throw new TypeError("encoding must be a string");if(typeof u=="string"&&!s.isEncoding(u))throw new TypeError("Unknown encoding: "+u);if(e.length===1){const h=e.charCodeAt(0);(u==="utf8"&&h<128||u==="latin1")&&(e=h)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let c;if(typeof e=="number")for(c=r;c<n;++c)this[c]=e;else{const h=s.isBuffer(e)?e:s.from(e,u),_=h.length;if(_===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(c=0;c<n-r;++c)this[c+r]=h[c%_]}return this};const ne={};function ge(t,e,r){ne[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(u){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:u,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),ge("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,u=r;return Number.isInteger(r)&&Math.abs(r)>2**32?u=Re(String(r)):typeof r=="bigint"&&(u=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(u=Re(u)),u+="n"),n+=` It must be ${e}. Received ${u}`,n},RangeError);function Re(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function gr(t,e,r){ie(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&ae(e,t.length-(r+1))}function Le(t,e,r,n,u,c){if(t>r||t<e){const h=typeof e=="bigint"?"n":"";let _;throw e===0||e===BigInt(0)?_=`>= 0${h} and < 2${h} ** ${(c+1)*8}${h}`:_=`>= -(2${h} ** ${(c+1)*8-1}${h}) and < 2 ** ${(c+1)*8-1}${h}`,new ne.ERR_OUT_OF_RANGE("value",_,t)}gr(n,u,c)}function ie(t,e){if(typeof t!="number")throw new ne.ERR_INVALID_ARG_TYPE(e,"number",t)}function ae(t,e,r){throw Math.floor(t)!==t?(ie(t,r),new ne.ERR_OUT_OF_RANGE("offset","an integer",t)):e<0?new ne.ERR_BUFFER_OUT_OF_BOUNDS:new ne.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,t)}const dr=/[^+/0-9A-Za-z-_]/g;function yr(t){if(t=t.split("=")[0],t=t.trim().replace(dr,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function de(t,e){e=e||1/0;let r;const n=t.length;let u=null;const c=[];for(let h=0;h<n;++h){if(r=t.charCodeAt(h),r>55295&&r<57344){if(!u){if(r>56319){(e-=3)>-1&&c.push(239,191,189);continue}else if(h+1===n){(e-=3)>-1&&c.push(239,191,189);continue}u=r;continue}if(r<56320){(e-=3)>-1&&c.push(239,191,189),u=r;continue}r=(u-55296<<10|r-56320)+65536}else u&&(e-=3)>-1&&c.push(239,191,189);if(u=null,r<128){if((e-=1)<0)break;c.push(r)}else if(r<2048){if((e-=2)<0)break;c.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;c.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;c.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return c}function wr(t){const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function mr(t,e){let r,n,u;const c=[];for(let h=0;h<t.length&&!((e-=2)<0);++h)r=t.charCodeAt(h),n=r>>8,u=r%256,c.push(u),c.push(n);return c}function Pe(t){return B.toByteArray(yr(t))}function ce(t,e,r,n){let u;for(u=0;u<n&&!(u+r>=e.length||u>=t.length);++u)e[u+r]=t[u];return u}function z(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function ye(t){return t!==t}const xr=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=r*16;for(let u=0;u<16;++u)e[n+u]=t[r]+t[u]}return e}();function Q(t){return typeof BigInt>"u"?Er:t}function Er(){throw new Error("BigInt not supported")}})(i);const se=i.Buffer;a.Blob=i.Blob,a.BlobOptions=i.BlobOptions,a.Buffer=i.Buffer,a.File=i.File,a.FileOptions=i.FileOptions,a.INSPECT_MAX_BYTES=i.INSPECT_MAX_BYTES,a.SlowBuffer=i.SlowBuffer,a.TranscodeEncoding=i.TranscodeEncoding,a.atob=i.atob,a.btoa=i.btoa,a.constants=i.constants,a.default=se,a.isAscii=i.isAscii,a.isUtf8=i.isUtf8,a.kMaxLength=i.kMaxLength,a.kStringMaxLength=i.kStringMaxLength,a.resolveObjectURL=i.resolveObjectURL,a.transcode=i.transcode})(Ye);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(a,i){var o=Ye,f=o.Buffer;function l(p,g){for(var x in p)g[x]=p[x]}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?a.exports=o:(l(o,i),i.Buffer=y);function y(p,g,x){return f(p,g,x)}y.prototype=Object.create(f.prototype),l(f,y),y.from=function(p,g,x){if(typeof p=="number")throw new TypeError("Argument must not be a number");return f(p,g,x)},y.alloc=function(p,g,x){if(typeof p!="number")throw new TypeError("Argument must be a number");var m=f(p);return g!==void 0?typeof x=="string"?m.fill(g,x):m.fill(g):m.fill(0),m},y.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return f(p)},y.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(p)}})(Be,Be.exports);var Hr=Be.exports;/*!
 * content-disposition
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */be.exports=rt;be.exports.parse=ot;var Me=Gr.basename,Wr=Hr.Buffer,zr=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g,Xr=/%[0-9A-Fa-f]{2}/,Yr=/%([0-9A-Fa-f]{2})/g,Ze=/[^\x20-\x7e\xa0-\xff]/g,Zr=/\\([\u0000-\u007f])/g,Vr=/([\\"])/g,Oe=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,Jr=/^[\x20-\x7e\x80-\xff]+$/,Kr=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,Qr=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,et=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function rt(a,i){var o=i||{},f=o.type||"attachment",l=tt(a,o.fallback);return nt(new Je(f,l))}function tt(a,i){if(a!==void 0){var o={};if(typeof a!="string")throw new TypeError("filename must be a string");if(i===void 0&&(i=!0),typeof i!="string"&&typeof i!="boolean")throw new TypeError("fallback must be a string or boolean");if(typeof i=="string"&&Ze.test(i))throw new TypeError("fallback must be ISO-8859-1 string");var f=Me(a),l=Jr.test(f),y=typeof i!="string"?i&&Ve(f):Me(i),p=typeof y=="string"&&y!==f;return(p||!l||Xr.test(f))&&(o["filename*"]=f),(l||p)&&(o.filename=p?y:f),o}}function nt(a){var i=a.parameters,o=a.type;if(!o||typeof o!="string"||!Kr.test(o))throw new TypeError("invalid type");var f=String(o).toLowerCase();if(i&&typeof i=="object")for(var l,y=Object.keys(i).sort(),p=0;p<y.length;p++){l=y[p];var g=l.substr(-1)==="*"?ct(i[l]):at(i[l]);f+="; "+l+"="+g}return f}function it(a){var i=Qr.exec(a);if(!i)throw new TypeError("invalid extended field value");var o=i[1].toLowerCase(),f=i[2],l,y=f.replace(Yr,ut);switch(o){case"iso-8859-1":l=Ve(y);break;case"utf-8":l=Wr.from(y,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return l}function Ve(a){return String(a).replace(Ze,"?")}function ot(a){if(!a||typeof a!="string")throw new TypeError("argument string is required");var i=et.exec(a);if(!i)throw new TypeError("invalid type format");var o=i[0].length,f=i[1].toLowerCase(),l,y=[],p={},g;for(o=Oe.lastIndex=i[0].substr(-1)===";"?o-1:o;i=Oe.exec(a);){if(i.index!==o)throw new TypeError("invalid parameter format");if(o+=i[0].length,l=i[1].toLowerCase(),g=i[2],y.indexOf(l)!==-1)throw new TypeError("invalid duplicate parameter");if(y.push(l),l.indexOf("*")+1===l.length){l=l.slice(0,-1),g=it(g),p[l]=g;continue}typeof p[l]!="string"&&(g[0]==='"'&&(g=g.substr(1,g.length-2).replace(Zr,"$1")),p[l]=g)}if(o!==-1&&o!==a.length)throw new TypeError("invalid parameter format");return new Je(f,p)}function ut(a,i){return String.fromCharCode(parseInt(i,16))}function st(a){return"%"+String(a).charCodeAt(0).toString(16).toUpperCase()}function at(a){var i=String(a);return'"'+i.replace(Vr,"\\$1")+'"'}function ct(a){var i=String(a),o=encodeURIComponent(i).replace(zr,st);return"UTF-8''"+o}function Je(a,i){this.type=a,this.parameters=i}var ft=be.exports;const lt=Br(ft);function Ke({maxActiveReader:a=1/0}={}){let i,o,f=0;const l={read:m=>y(m,!1),write:m=>y(m,!0),length:0};return l;function y(m,E){const d=g({fn:m,block:E});return o?(o.next=d,d.prev=o,o=d,i||(i=o)):i=o=d,l.length++,x(),d.q.promise}function p(){const m={};return m.promise=new Promise((E,d)=>{m.resolve=E,m.reject=d}),m}function g({fn:m,block:E=!1,prev:d,next:T,q:A=p(),q2:F=m.length?p():null}){return{fn:m,block:E,prev:d,next:T,q:A,q2:F}}function x(){const m=i;if(!m||m.block&&m.prev||m.prev&&m.prev.block||f>=a)return;m.block||f++,i=m.next;let E;try{E=m.fn(m.q2&&m.q2.resolve)}catch(A){m.q.reject(A),d();return}if(m.q2&&m.q2.promise.then(T),E&&E.then){const A=E.then(m.q.resolve,m.q.reject);m.q2||A.then(d)}else if(m.q.resolve(E),!m.q2){d();return}x();function d(){T()}function T(A){m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),o===m&&(o=m.prev),m.block||f--,l.length--,A&&A(),x()}}}function ht(a){const i=new Map;return{read:(f,l)=>o(f,l,"read"),write:(f,l)=>o(f,l,"write"),locks:i};async function o(f,l,y){const p=[],g=[];for(const E of f){let d=i.get(E);d||(d=Ke(a),i.set(E,d));const T={lock:d,scope:E,relase:null};g.push(d[y](A=>{T.release=A})),p.push(T)}await Promise.all(g);let x;try{x=l(l.length&&m)}catch(E){throw m(),E}if(x&&x.then)return l.length||x.then(m,m),await x;return l.length||m(),x;function m(){for(const E of p)E.release(()=>{E.lock.length||i.delete(E.scope)});p.length=0}}}var pt={createLock:Ke,createLockPool:ht};const gt=pt.createLock({maxActiveReader:5});function dt(a){if(!a)return;const i=a.match(/^\s*([^\s;]+)/);return i&&i[1].toLowerCase()}function yt(a){try{return lt.parse(a).parameters.filename}catch{}}function xt(a,i){return gt.read(async()=>{const o=await fetch(a,{referrer:i});if(!o.ok)throw new Error(`failed to fetch: ${o.status}`);const f=await o.blob();return{url:a,mime:dt(o.headers.get("Content-Type")),filename:yt(o.headers.get("Content-Disposition")),blob:f,size:f.size}})}function*Et(a,i=1){const o=a.split(/\r?\n/g).filter(f=>f&&/\S/.test(f)&&!f.startsWith("#"));for(let f=0;f<o.length;f+=i)yield o.slice(f,f+i)}const Bt=typeof chrome<"u";function bt(){return typeof browser<"u"&&browser.runtime.getBrowserInfo?browser.runtime.getBrowserInfo():new Promise(a=>{const i=navigator.userAgent.match(/(firefox|chrome)\/([\d.]+)/i);a(i?{name:i[1],version:i[2]}:null)})}export{Bt as I,Et as a,xt as f,bt as g,me as p,pt as r};
