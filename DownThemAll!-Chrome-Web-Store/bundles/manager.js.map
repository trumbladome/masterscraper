{"version":3,"file":"manager.js","mappings":"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","sources":["webpack://dtalite/./lib/formatters.ts","webpack://dtalite/./lib/iconcache.ts","webpack://dtalite/./lib/imex.ts","webpack://dtalite/./lib/textlinks.ts","webpack://dtalite/./windows/broadcaster.ts","webpack://dtalite/./windows/manager.ts","webpack://dtalite/./windows/manager/buttons.ts","webpack://dtalite/./windows/manager/itemfilters.ts","webpack://dtalite/./windows/manager/port.ts","webpack://dtalite/./windows/manager/removaldlg.ts","webpack://dtalite/./windows/manager/state.ts","webpack://dtalite/./windows/manager/stats.ts","webpack://dtalite/./windows/manager/table.ts","webpack://dtalite/./windows/manager/tooltip.ts","webpack://dtalite/external var \"crypto\"","webpack://dtalite/webpack/bootstrap","webpack://dtalite/webpack/runtime/chunk loaded","webpack://dtalite/webpack/runtime/define property getters","webpack://dtalite/webpack/runtime/hasOwnProperty shorthand","webpack://dtalite/webpack/runtime/make namespace object","webpack://dtalite/webpack/runtime/jsonp chunk loading","webpack://dtalite/webpack/before-startup","webpack://dtalite/webpack/startup","webpack://dtalite/webpack/after-startup"],"sourcesContent":["\"use strict\";\n// License: MIT\n\nimport {_} from \"./i18n\";\nimport {memoize} from \"./memoize\";\n\nexport function formatInteger(num: number, digits?: number) {\n  const neg = num < 0;\n  const snum = Math.abs(num).toFixed(0);\n  if (typeof digits === \"undefined\" || !isFinite(digits)) {\n    digits = 3;\n  }\n  if (digits <= 0) {\n    throw new Error(\"Invalid digit count\");\n  }\n  if (snum.length >= digits) {\n    return num.toFixed(0);\n  }\n  if (neg) {\n    return `-${snum.padStart(digits, \"0\")}`;\n  }\n  return snum.padStart(digits, \"0\");\n}\n\nconst HOURS_PER_DAY = 24;\nconst SEC_PER_MIN = 60;\nconst MIN_PER_HOUR = 60;\nconst SECS_PER_HOUR = SEC_PER_MIN * MIN_PER_HOUR;\n\nexport function formatTimeDelta(delta: number) {\n  let rv = delta < 0 ? \"-\" : \"\";\n  delta = Math.abs(delta);\n\n  let h = Math.floor(delta / SECS_PER_HOUR);\n  const m = Math.floor((delta % SECS_PER_HOUR) / SEC_PER_MIN);\n  const s = Math.floor(delta % SEC_PER_MIN);\n\n  if (h) {\n    if (h >= HOURS_PER_DAY) {\n      const days = Math.floor(h / HOURS_PER_DAY);\n      if (days > 9) {\n        return \"∞\";\n      }\n      rv += `${days}d::`;\n      h %= HOURS_PER_DAY;\n    }\n    rv += `${formatInteger(h, 2)}:`;\n  }\n  return `${rv + formatInteger(m, 2)}:${formatInteger(s, 2)}`;\n}\n\nexport function makeNumberFormatter(fracDigits: number) {\n  const rv = new Intl.NumberFormat(undefined, {\n    style: \"decimal\",\n    useGrouping: false,\n    minimumFractionDigits: fracDigits,\n    maximumFractionDigits: fracDigits\n  });\n  return rv.format.bind(rv);\n}\n\n\nconst fmt0 = makeNumberFormatter(0);\nconst fmt1 = makeNumberFormatter(1);\nconst fmt2 = makeNumberFormatter(2);\nconst fmt3 = makeNumberFormatter(3);\n\nconst SIZE_UNITS = [\n  [\"sizeB\", fmt0],\n  [\"sizeKB\", fmt1],\n  [\"sizeMB\", fmt2],\n  [\"sizeGB\", fmt2],\n  [\"sizeTB\", fmt3],\n  [\"sizePB\", fmt3],\n];\nconst SIZE_NUINITS = SIZE_UNITS.length;\nconst SIZE_SCALE = 875;\nconst SIZE_KILO = 1024;\n\nexport const formatSize = memoize(function formatSize(\n    size: number, fractions = true) {\n  const neg = size < 0;\n  size = Math.abs(size);\n  let i = 0;\n  while (size > SIZE_SCALE && ++i < SIZE_NUINITS) {\n    size /= SIZE_KILO;\n  }\n  if (neg) {\n    size = -size;\n  }\n  const [unit, fmt] = SIZE_UNITS[i];\n  return _(unit, fractions ? fmt(size) : fmt0(size));\n}, 1000, 2);\n\nconst SPEED_UNITS = [\n  [\"speedB\", fmt0],\n  [\"speedKB\", fmt2],\n  [\"speedMB\", fmt2],\n];\nconst SPEED_NUNITS = SIZE_UNITS.length;\n\nexport const formatSpeed = memoize(function formatSpeed(size: number) {\n  const neg = size < 0;\n  size = Math.abs(size);\n  let i = 0;\n  while (size > SIZE_KILO && ++i < SPEED_NUNITS) {\n    size /= SIZE_KILO;\n  }\n  if (neg) {\n    size = -size;\n  }\n  const [unit, fmt] = SPEED_UNITS[i];\n  return _(unit, fmt(size));\n});\n","\"use strict\";\n// License: MIT\n\nimport { downloads, CHROME } from \"./browser\";\nimport { EventEmitter } from \"../uikit/lib/events\";\nimport { PromiseSerializer } from \"./pserializer\";\nimport lf from \"localforage\";\n\n\nconst STORE = \"iconcache\";\n\n// eslint-disable-next-line no-magic-numbers\nconst CACHE_SIZES = CHROME ? [16, 32] : [16, 32, 64, 127];\n\nconst BLACKLISTED = Object.freeze(new Set([\n  \"\",\n  \"ext\",\n  \"ico\",\n  \"pif\",\n  \"scr\",\n  \"ani\",\n  \"cur\",\n  \"ttf\",\n  \"otf\",\n  \"woff\",\n  \"woff2\",\n  \"cpl\",\n  \"desktop\",\n  \"app\",\n]));\n\nasync function getIcon(size: number, manId: number) {\n  const raw = await downloads.getFileIcon(manId, {size});\n  const icon = new URL(raw);\n  if (icon.protocol === \"data:\") {\n    const res = await fetch(icon.toString());\n    const blob = await res.blob();\n    return {size, icon: blob};\n  }\n  return {size, icon};\n}\n\nconst SYNONYMS = Object.freeze(new Map<string, string>([\n  [\"jpe\", \"jpg\"],\n  [\"jpeg\", \"jpg\"],\n  [\"jfif\", \"jpg\"],\n  [\"mpe\", \"mpg\"],\n  [\"mpeg\", \"mpg\"],\n  [\"m4v\", \"mp4\"],\n]));\n\nexport const IconCache = new class IconCache extends EventEmitter {\n  private db = lf.createInstance({name: STORE});\n\n  private cache: Map<string, string>;\n\n  constructor() {\n    super();\n    this.cache = new Map();\n    this.get = PromiseSerializer.wrapNew(8, this, this.get);\n    this.set = PromiseSerializer.wrapNew(1, this, this.set);\n  }\n\n  private normalize(ext: string) {\n    ext = ext.toLocaleLowerCase(\"en-US\");\n    return SYNONYMS.get(ext) || ext;\n  }\n\n  // eslint-disable-next-line no-magic-numbers\n  async get(ext: string, size = 16) {\n    ext = this.normalize(ext);\n    if (BLACKLISTED.has(ext)) {\n      return undefined;\n    }\n    const sext = `${ext}-${size}`;\n    let rv = this.cache.get(sext);\n    if (rv) {\n      return rv;\n    }\n    rv = this.cache.get(sext);\n    if (rv) {\n      return rv;\n    }\n    let result = await this.db.getItem<any>(sext);\n    if (!result) {\n      return this.cache.get(sext);\n    }\n    rv = this.cache.get(sext);\n    if (rv) {\n      return rv;\n    }\n    if (typeof result !== \"string\") {\n      result = URL.createObjectURL(result).toString();\n    }\n\n    this.cache.set(sext, result);\n    this.cache.set(ext, \"\");\n    return result;\n  }\n\n  async set(ext: string, manId: number) {\n    ext = this.normalize(ext);\n    if (BLACKLISTED.has(ext)) {\n      return;\n    }\n    if (this.cache.has(ext)) {\n      // already processed in this session\n      return;\n    }\n    // eslint-disable-next-line no-magic-numbers\n    const urls = await Promise.all(CACHE_SIZES.map(\n      size => getIcon(size, manId)));\n    if (this.cache.has(ext)) {\n      // already processed in this session\n      return;\n    }\n    for (const {size, icon} of urls) {\n      this.cache.set(`${ext}-${size}`, URL.createObjectURL(icon));\n      await this.db.setItem(`${ext}-${size}`, icon);\n    }\n    this.cache.set(ext, \"\");\n    this.emit(\"cached\", ext);\n  }\n}();\n","\"use strict\";\n// License: MIT\n\nimport { getTextLinks } from \"./textlinks\";\n// eslint-disable-next-line no-unused-vars\nimport { BaseItem } from \"./item\";\nimport { ALLOWED_SCHEMES } from \"./constants\";\n\nexport const NS_METALINK_RFC5854 = \"urn:ietf:params:xml:ns:metalink\";\nexport const NS_DTA = \"http://www.downthemall.net/properties#\";\n\nfunction parseNum(\n    file: Element,\n    attr: string,\n    defaultValue: number,\n    ns = NS_METALINK_RFC5854) {\n  const val = file.getAttributeNS(ns, attr);\n  if (!val) {\n    return defaultValue + 1;\n  }\n  const num = parseInt(val, 10);\n  if (isFinite(num)) {\n    return num;\n  }\n  return defaultValue + 1;\n}\n\nfunction urlToUsable(u: string) {\n  try {\n    return decodeURIComponent(u);\n  }\n  catch (ex) {\n    return u || \"\";\n  }\n}\n\nfunction importMeta4(data: string) {\n  const parser = new DOMParser();\n  const document = parser.parseFromString(data, \"text/xml\");\n  const {documentElement} = document;\n  const items: BaseItem[] = [];\n  let batch = 0;\n  for (const file of documentElement.querySelectorAll(\"file\")) {\n    try {\n      const url = Array.from(file.querySelectorAll(\"url\")).map(u => {\n        try {\n          const {textContent} = u;\n          if (!textContent) {\n            return null;\n          }\n          const url = new URL(textContent);\n          if (!ALLOWED_SCHEMES.has(url.protocol)) {\n            return null;\n          }\n          const prio = parseNum(u, \"priority\", 0);\n          return {\n            url,\n            prio\n          };\n        }\n        catch {\n          return null;\n        }\n      }).filter(u => !!u).reduce((p, c) => {\n        if (!c) {\n          return null;\n        }\n        if (!p || p.prio < c.prio) {\n          return c;\n        }\n        return p;\n      });\n      if (!url) {\n        continue;\n      }\n      batch = parseNum(file, \"num\", batch, NS_DTA);\n      const idx = parseNum(file, \"idx\", 0, NS_DTA);\n      const item: BaseItem = {\n        url: url.url.toString(),\n        usable: urlToUsable(url.url.toString()),\n        batch,\n        idx\n      };\n      const ref = file.getAttributeNS(NS_DTA, \"referrer\");\n      if (ref) {\n        item.referrer = ref;\n        item.usableReferrer = urlToUsable(ref);\n      }\n      const mask = file.getAttributeNS(NS_DTA, \"mask\");\n      if (mask) {\n        item.mask = mask;\n      }\n      const subfolder = file.getAttributeNS(NS_DTA, \"subfolder\");\n      if (subfolder && subfolder !== \"\") {\n        item.subfolder = subfolder;\n      }\n\n      const description = file.querySelector(\"description\");\n      if (description && description.textContent) {\n        item.description = description.textContent.trim();\n      }\n      const title = file.getElementsByTagNameNS(NS_DTA, \"title\");\n      if (title && title[0] && title[0].textContent) {\n        item.title = title[0].textContent;\n      }\n      items.push(item);\n    }\n    catch (ex) {\n      console.error(\"Failed to import file\", ex);\n    }\n  }\n  return items;\n}\n\nfunction parseKV(current: BaseItem, line: string) {\n  const [k, v] = line.split(\"=\", 2);\n  switch (k.toLocaleLowerCase(\"en-US\").trim()) {\n  case \"referer\": {\n    const refererUrls = getTextLinks(v);\n    if (refererUrls && refererUrls.length) {\n      current.referrer = refererUrls.pop();\n      current.usableReferrer = urlToUsable(current.referrer || \"\");\n    }\n    break;\n  }\n  }\n}\n\nfunction importJSON(data: string) {\n  const items = JSON.parse(data);\n  if (!Array.isArray(items) || !items[0] || !items[0].url) {\n    throw new Error(\"Invalid JSON provided\");\n  }\n  const rv = [];\n  for (const i of items) {\n    try {\n      const url = new URL(i.url);\n      const item: BaseItem = {\n        url: url.toString(),\n        usable: urlToUsable(url.toString()),\n      };\n\n      if (i.referer && i.referer !== \"\") {\n        const referrer = new URL(i.referer).toString();\n        item.referrer = referrer;\n        item.referrer = urlToUsable(referrer);\n      }\n\n      if (i.subfolder && i.subfolder !== \"\") {\n        item.subfolder = i.subfolder;\n      }\n\n      if (i.mask && i.mask !== \"\") {\n        item.mask = i.mask;\n      }\n\n      if (i.batch && Number.isFinite(i.batch) && i.batch > 0) {\n        item.batch = i.batch;\n      }\n      if (i.idx && Number.isFinite(i.idx) && i.idx > 0) {\n        item.idx = i.idx;\n      }\n\n      if (i.title && i.title !== \"\") {\n        item.title = i.title;\n      }\n      if (i.description && i.description !== \"\") {\n        item.description = i.description;\n      }\n      if (i.pageTitle && i.pageTitle !== \"\") {\n        item.pageTitle = i.pageTitle;\n      }\n      if (i.startDate && Number.isFinite(i.startDate) && i.startDate > 0) {\n        item.startDate = i.startDate;\n      }\n\n      rv.push(item);\n    }\n    catch (ex) {\n      console.error(\"Failed to parse JSON import item\", i);\n    }\n  }\n  return rv;\n}\n\nexport function importText(data: string) {\n  if (data.includes(NS_METALINK_RFC5854)) {\n    return importMeta4(data);\n  }\n  try {\n    return importJSON(data);\n  }\n  catch (ex) {\n    console.log(\"probably not json\");\n  }\n\n  const splitter = /((?:.|\\r)+)\\n|(.+)$/g;\n  const spacer = /^\\s+/;\n  let match;\n  let current: BaseItem | undefined = undefined;\n  let idx = 0;\n  const items = [];\n  while ((match = splitter.exec(data)) !== null) {\n    try {\n      const line = match[0].trimRight();\n      if (!line) {\n        continue;\n      }\n      if (spacer.test(line)) {\n        if (!current) {\n          continue;\n        }\n        parseKV(current, line);\n        continue;\n      }\n      const urls = getTextLinks(line);\n      if (!urls || !urls.length) {\n        continue;\n      }\n      current = {\n        url: urls[0],\n        usable: urlToUsable(urls[0]),\n        idx: ++idx\n      };\n      items.push(current);\n    }\n    catch (ex) {\n      current = undefined;\n      console.error(\"Failed to import\", ex);\n    }\n  }\n  return items;\n}\n\nexport interface Exporter {\n  fileName: string;\n  getText(items: BaseItem[]): string;\n}\n\nclass TextExporter implements Exporter {\n  readonly fileName: string;\n\n  constructor() {\n    this.fileName = \"links.txt\";\n  }\n\n  getText(items: BaseItem[]) {\n    const lines = [];\n    for (const item of items) {\n      lines.push(item.url);\n    }\n    return lines.join(\"\\n\");\n  }\n}\n\nclass Aria2Exporter implements Exporter {\n  readonly fileName: string;\n\n  constructor() {\n    this.fileName = \"links.aria2.txt\";\n  }\n\n  getText(items: BaseItem[]) {\n    const lines = [];\n    for (const item of items) {\n      lines.push(item.url);\n      if (item.referrer) {\n        lines.push(`  referer=${item.referrer}`);\n      }\n    }\n    return lines.join(\"\\n\");\n  }\n}\n\nclass MetalinkExporter implements Exporter {\n  readonly fileName: string;\n\n  constructor() {\n    this.fileName = \"links.meta4\";\n  }\n\n  getText(items: BaseItem[]) {\n    const document = window.document.implementation.\n      createDocument(NS_METALINK_RFC5854, \"metalink\", null);\n    const root = document.documentElement;\n    root.setAttributeNS(NS_DTA, \"generator\", \"DownThemAll!\");\n    root.appendChild(document.createComment(\n      \"metalink as exported by DownThemAll!\",\n    ));\n\n    for (const item of items) {\n      const anyItem = item as any;\n      const f = document.createElementNS(NS_METALINK_RFC5854, \"file\");\n      f.setAttribute(\"name\", anyItem.currentName);\n      if (item.batch) {\n        f.setAttributeNS(NS_DTA, \"num\", item.batch.toString());\n      }\n      if (item.idx) {\n        f.setAttributeNS(NS_DTA, \"idx\", item.idx.toString());\n      }\n      if (item.referrer) {\n        f.setAttributeNS(NS_DTA, \"referrer\", item.referrer);\n      }\n      if (item.mask) {\n        f.setAttributeNS(NS_DTA, \"mask\", item.mask);\n      }\n      if (item.subfolder && item.subfolder !== \"\") {\n        f.setAttributeNS(NS_DTA, \"subfolder\", item.subfolder);\n      }\n\n      if (item.description) {\n        const n = document.createElementNS(NS_METALINK_RFC5854, \"description\");\n        n.textContent = item.description;\n        f.appendChild(n);\n      }\n\n      if (item.title) {\n        const n = document.createElementNS(NS_DTA, \"title\");\n        n.textContent = item.title;\n        f.appendChild(n);\n      }\n\n      const u = document.createElementNS(NS_METALINK_RFC5854, \"url\");\n      u.textContent = item.url;\n      f.appendChild(u);\n\n      if (anyItem.totalSize > 0) {\n        const s = document.createElementNS(NS_METALINK_RFC5854, \"size\");\n        s.textContent = anyItem.totalSize.toString();\n        f.appendChild(s);\n      }\n      root.appendChild(f);\n    }\n    let xml = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\";\n    xml += root.outerHTML;\n    return xml;\n  }\n}\n\nclass JSONExporter implements Exporter {\n  readonly fileName: string;\n\n  constructor() {\n    this.fileName = \"links.json\";\n  }\n\n  getText(items: BaseItem[]): string {\n    const rv = items.map(_item => {\n      const item = _item as any;\n      const serialized = {\n        url: item.url,\n        name: item.currentName,\n        subfolder: item.subfolder || \"\",\n        batch: item.batch || 0,\n        idx: item.idx || 0,\n        referrer: item.referer || \"\",\n        mask: item.mask || \"*name*.*ext\",\n        title: item.title || \"\",\n        pageTitle: item.pageTitle || \"\",\n        description: item.description || \"\",\n        startDate: item.startDate,\n      };\n      return serialized;\n    });\n    return JSON.stringify(rv, undefined, 2);\n  }\n}\n\nexport const textExporter = new TextExporter();\nexport const aria2Exporter = new Aria2Exporter();\nexport const metalinkExporter = new MetalinkExporter();\nexport const jsonExporter = new JSONExporter();\n","\"use strict\";\n// License: MIT\n\nimport { textlinks as rtextlinks } from \"../data/xregexps.json\";\n\nconst SCHEME_DEFAULT = \"https\";\n\n// Link matcher\nconst regLinks = new RegExp(rtextlinks.source, rtextlinks.flags);\n// Match more exactly or more than 3 dots.\n// Links are then assumed \"cropped\" and will be ignored.\nconst regShortened = /\\.{3,}/;\n// http cleanup\nconst regHttp = /^h(?:x+|tt)?p(s?)/i;\n// ftp cleanup\nconst regFtp = /^f(?:x+|t)p/i;\n// www (sans protocol) match\nconst regWWW = /^www/i;\n// Right-trim (sanitize) link\nconst regDTrim = /[<>._-]+$|#.*?$/g;\n\nfunction mapper(e: string) {\n  try {\n    if (regShortened.test(e)) {\n      return null;\n    }\n    if (regWWW.test(e)) {\n      if (e.indexOf(\"/\") < 0) {\n        e = `${SCHEME_DEFAULT}://${e}/`;\n      }\n      else {\n        e = `${SCHEME_DEFAULT}://${e}`;\n      }\n    }\n    return e.replace(regHttp, \"http$1\").\n      replace(regFtp, \"ftp\").\n      replace(regDTrim, \"\");\n  }\n  catch (ex) {\n    return null;\n  }\n}\n\n/**\n * Minimal Link representation (partially) implementing DOMElement\n *\n * @param {string} url URL (href) of the Links\n * @param {string} title Optional. Title/description\n * @see DOMElement\n */\nexport class FakeLink {\n  public readonly src: string;\n\n  public readonly href: string;\n\n  public readonly title: string;\n\n  public readonly fake: boolean;\n\n  public childNodes: readonly Node[];\n\n  constructor (url: string, title?: string) {\n    this.src = this.href = url;\n    if (title) {\n      this.title = title;\n    }\n    this.fake = true;\n    Object.freeze(this);\n  }\n\n  hasAttribute(attr: string) {\n    return (attr in this);\n  }\n\n  getAttribute(attr: string) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self: any = this;\n    return (attr in self) ? self[attr] : null;\n  }\n\n  toString() {\n    return this.href;\n  }\n}\n\nFakeLink.prototype.childNodes = Object.freeze([]);\n\n/**\n * Parses a text looking for any URLs with supported protocols\n *\n * @param {string} text Text to parse\n * @param {boolean} [fakeLinks]\n *   Whether an array of plain text links will be returned or\n *   an array of FakeLinks.\n * @returns {string[]} results\n */\nexport function getTextLinks(text: string, fakeLinks = false) {\n  const rv: any = text.match(regLinks);\n  if (!rv) {\n    return [];\n  }\n  let i; let k; let e;\n  for (i = 0, k = 0, e = rv.length; i < e; i++) {\n    const a = mapper(rv[i]);\n    if (a) {\n      rv[k] = fakeLinks ? new FakeLink(a) : a;\n      k += 1;\n    }\n  }\n  rv.length = k; // truncate\n  return rv;\n}\n","\"use strict\";\n// License: MIT\n\nimport { Keys } from \"./keys\";\nimport { $ } from \"./winutil\";\n\nexport class Broadcaster {\n  private readonly els: HTMLElement[];\n\n  public onaction: Function;\n\n  constructor(...els: string[]) {\n    this.els = els.map(e => $(`#${e}`));\n    this.onkey = this.onkey.bind(this);\n    const keys = new Set(this.els.map(el => el.dataset.key));\n    if (keys.size) {\n      keys.forEach(key => {\n        Keys.on(key, this.onkey);\n      });\n    }\n  }\n\n  get disabled() {\n    return this.els[0].classList.contains(\"disabled\");\n  }\n\n  set disabled(val) {\n    if (val) {\n      for (const el of this.els) {\n        el.classList.add(\"disabled\");\n      }\n      return;\n    }\n    for (const el of this.els) {\n      el.classList.remove(\"disabled\");\n    }\n  }\n\n  onkey(evt: KeyboardEvent) {\n    const { localName } = evt.target as HTMLElement;\n    if (localName === \"input\" || localName === \"textarea\") {\n      return undefined;\n    }\n    if (this.onaction) {\n      this.onaction();\n    }\n    return true;\n  }\n}\n","\"use strict\";\n// License: MIT\n\nimport {DownloadTable} from \"./manager/table\";\nimport {_, localize} from \"../lib/i18n\";\nimport {Prefs} from \"../lib/prefs\";\nimport PORT from \"./manager/port\";\nimport { runtime } from \"../lib/browser\";\nimport { Promised } from \"../lib/util\";\nimport { PromiseSerializer } from \"../lib/pserializer\";\nimport { Keys } from \"./keys\";\nimport \"./theme\";\n\nconst $ = document.querySelector.bind(document);\n\nlet Table: DownloadTable;\n\nconst LOADED = new Promise(resolve => {\n  addEventListener(\"load\", function dom() {\n    removeEventListener(\"load\", dom);\n    resolve(true);\n  });\n});\n\naddEventListener(\"DOMContentLoaded\", function dom() {\n  removeEventListener(\"DOMContentLoaded\", dom);\n\n  const platformed = (async () => {\n    try {\n      const platform = (await runtime.getPlatformInfo()).os;\n      document.documentElement.dataset.platform = platform;\n      if (platform === \"mac\") {\n        const ctx = $(\"#table-context\").content;\n        ctx.querySelector(\"#ctx-open-file\").dataset.key = \"ACCEL-KeyO\";\n        ctx.querySelector(\"#ctx-open-directory\").dataset.key = \"ALT-ACCEL-KeyO\";\n      }\n    }\n    catch (ex) {\n      console.error(\"failed to setup platform\", ex.toString(), ex.stack, ex);\n    }\n  })();\n\n  const tabled = new Promised();\n  const localized = localize(document.documentElement);\n  const loaded = Promise.all([LOADED, platformed, localized]);\n  const fullyloaded = Promise.all([LOADED, platformed, tabled, localized]);\n  fullyloaded.then(async () => {\n    const nag = await Prefs.get(\"nagging\", 0);\n    const nagnext = await Prefs.get(\"nagging-next\", 7);\n    const next = Math.ceil(Math.log2(Math.max(1, nag)));\n    const el = $(\"#nagging\");\n    const remove = () => {\n      el.parentElement.removeChild(el);\n    };\n    if (next <= nagnext) {\n      return;\n    }\n    setTimeout(() => {\n      $(\"#nagging-donate\").addEventListener(\"click\", () => {\n        PORT.post(\"donate\");\n        Prefs.set(\"nagging-next\", next);\n        remove();\n      });\n      $(\"#nagging-later\").addEventListener(\"click\", () => {\n        Prefs.set(\"nagging-next\", next);\n        remove();\n      });\n      $(\"#nagging-never\").addEventListener(\"click\", () => {\n        Prefs.set(\"nagging-next\", Number.MAX_SAFE_INTEGER);\n        remove();\n      });\n      $(\"#nagging-message\").textContent = _(\n        \"nagging-message\", nag.toLocaleString());\n      $(\"#nagging\").classList.remove(\"hidden\");\n    }, 2 * 1000);\n  });\n\n  $(\"#donate\").addEventListener(\"click\", () => {\n    PORT.post(\"donate\");\n  });\n  $(\"#statusPrefs\").addEventListener(\"click\", () => {\n    PORT.post(\"prefs\");\n  });\n  PORT.on(\"all\", async items => {\n    await loaded;\n    const treeConfig = JSON.parse(await Prefs.get(\"tree-config-manager\", \"{}\"));\n    requestAnimationFrame(() => {\n      if (!Table) {\n        Table = new DownloadTable(treeConfig);\n        Table.init();\n        const loading = $(\"#loading\");\n        loading.parentElement.removeChild(loading);\n        tabled.resolve();\n      }\n      Table.setItems(items);\n    });\n  });\n\n  // Updates\n  const serializer = new PromiseSerializer(1);\n  PORT.on(\"dirty\", serializer.wrap(this, async (items: any[]) => {\n    await fullyloaded;\n    Table.updateItems(items);\n  }));\n  PORT.on(\"removed\", serializer.wrap(this, async (sids: number[]) => {\n    await fullyloaded;\n    Table.removedItems(sids);\n  }));\n\n  const statusNetwork = $(\"#statusNetwork\");\n  statusNetwork.addEventListener(\"click\", () => {\n    PORT.post(\"toggle-active\");\n  });\n  PORT.on(\"active\", async (active: boolean) => {\n    await loaded;\n    if (active) {\n      statusNetwork.className = \"icon-network-on\";\n      statusNetwork.setAttribute(\"title\", _(\"statusNetwork-active.title\"));\n    }\n    else {\n      statusNetwork.className = \"icon-network-off\";\n      statusNetwork.setAttribute(\"title\", _(\"statusNetwork-inactive.title\"));\n    }\n  });\n\n  Keys.on(\"ACCEL-KeyF\", () => {\n    $(\"#filter\").focus();\n    return true;\n  });\n});\n\naddEventListener(\"contextmenu\", event => {\n  event.preventDefault();\n  return false;\n});\n\n\naddEventListener(\"beforeunload\", function() {\n  PORT.disconnect();\n});\n","\"use strict\";\n// License: MIT\n\nimport { EventEmitter } from \"../../lib/events\";\nimport { $ } from \"../winutil\";\n\nexport class Buttons extends EventEmitter {\n  private readonly parent: HTMLElement;\n\n  constructor(selector: string) {\n    super();\n    this.parent = $(selector);\n    this.parent.addEventListener(\"click\", this.clicked.bind(this));\n  }\n\n  clicked(evt: MouseEvent) {\n    let target = evt.target as HTMLElement | null;\n    while (target && target !== this.parent) {\n      if (target.classList.contains(\"button\")) {\n        const {id} = target;\n        if (id) {\n          this.emit(id);\n          return;\n        }\n      }\n      target = target.parentElement;\n    }\n  }\n}\n","/* eslint-disable no-magic-numbers */\n\"use strict\";\n// License: MIT\n\nimport {\n  ContextMenu,\n  MenuItem,\n  MenuSeparatorItem,\n  // eslint-disable-next-line no-unused-vars\n  MenuItemBase,\n  // eslint-disable-next-line no-unused-vars\n  MenuPosition,\n} from \"../contextmenu\";\nimport {EventEmitter} from \"../../lib/events\";\n// eslint-disable-next-line no-unused-vars\nimport {filters, Matcher, Filter} from \"../../lib/filters\";\nimport {sort, defaultCompare, naturalCaseCompare} from \"../../lib/sorting\";\n// eslint-disable-next-line no-unused-vars\nimport {DownloadItem, DownloadTable} from \"./table\";\nimport {formatSize} from \"../../lib/formatters\";\nimport {_} from \"../../lib/i18n\";\nimport {$} from \"../winutil\";\n\nconst TIMEOUT_SEARCH = 750;\n\nclass ItemFilter {\n  public readonly id: string;\n\n  constructor(id: string) {\n    this.id = id;\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  allow(_: DownloadItem) {\n    return true;\n  }\n}\n\nexport class TextFilter extends ItemFilter {\n  private owner: FilteredCollection;\n\n  private box: HTMLInputElement;\n\n  private timer: number | null;\n\n  private current: string;\n\n  private expr: RegExp;\n\n  constructor(owner: FilteredCollection) {\n    super(\"text\"); // There can be only one anyway\n    this.owner = owner;\n    this.box = $(\"#filter\");\n    this.timer = null;\n    this.current = this.box.value = \"\";\n\n    this.box.addEventListener(\"input\", () => {\n      if (this.timer) {\n        return;\n      }\n      this.timer = window.setTimeout(() => this.update(), TIMEOUT_SEARCH);\n    });\n    this.box.addEventListener(\"keydown\", e => {\n      if (e.key !== \"Escape\") {\n        return true;\n      }\n      this.current = this.box.value = \"\";\n      this.box.blur();\n      this.owner.removeFilter(this);\n      e.stopPropagation();\n      e.preventDefault();\n      return false;\n    });\n  }\n\n  update() {\n    this.timer = null;\n    const {value} = this.box;\n    if (this.current === value) {\n      return;\n    }\n    this.current = value;\n    if (!value) {\n      this.owner.removeFilter(this);\n      return;\n    }\n    this.expr = new RegExp(value.\n      replace(/^\\s+|\\s+$/g, \"\").\n      replace(/([/{}()[\\]\\\\^$.])/g, \"\\\\$1\").\n      replace(/\\*/g, \".*\").\n      replace(/\\?/g, \".\"),\n    \"i\");\n    this.owner.addFilter(this);\n  }\n\n  allow(item: DownloadItem) {\n    const {expr} = this;\n    return expr.test(item.currentName) ||\n      expr.test(item.usable) ||\n      expr.test(item.description);\n  }\n}\n\ninterface MenuFilterItem {\n  item: MenuItemBase;\n  callback?: Function;\n}\n\nexport class MenuFilter extends ItemFilter {\n  items: Map<string, MenuFilterItem>;\n\n  menu: ContextMenu;\n\n  // eslint-disable-next-line no-unused-vars\n  sort(_: boolean) {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  constructor(id: string) {\n    super(id);\n    this.items = new Map();\n    const tmpl = $<HTMLTemplateElement>(\"#menufilter-template\").\n      content.cloneNode(true);\n    this.menu = new ContextMenu(\n      (tmpl as HTMLElement).firstElementChild);\n    this.menu.on(\"clicked\", this.onclicked.bind(this));\n    this.menu.on(\"ctx-menufilter-invert\", () => this.invert());\n    this.menu.on(\"ctx-menufilter-clear\", () => this.clear());\n    this.menu.on(\"ctx-menufilter-sort-ascending\", () => this.sort(false));\n    this.menu.on(\"ctx-menufilter-sort-descending\", () => this.sort(true));\n  }\n\n  async show(evt: MenuPosition) {\n    Array.from(this.menu).\n      filter(e => e.startsWith(\"ctx-menufilter-item-\")).\n      forEach(e => this.menu.remove(e));\n    this.items.clear();\n    await this.populate();\n    for (const {item} of Array.from(this.items.values()).reverse()) {\n      this.menu.prepend(item);\n    }\n    this.menu.show(evt);\n  }\n\n  populate() {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  addItem(text: string, callback?: Function, checked?: boolean) {\n    const id = `ctx-menufilter-item-${this.items.size.toString()}`;\n    if (text === \"-\") {\n      const item = new MenuSeparatorItem(this.menu, id);\n      this.items.set(id, {item, callback});\n      return;\n    }\n    const item = new MenuItem(this.menu, id, text, {\n      autoHide: \"false\",\n    });\n    item.iconElem.textContent = checked ? \"✓\" : \"\";\n    this.items.set(id, {item, callback});\n  }\n\n  invert() {\n    for (const {item, callback} of this.items.values()) {\n      if (!callback) {\n        continue;\n      }\n      if (!(item instanceof MenuItem)) {\n        continue;\n      }\n      this.toggleItem(item);\n      callback.apply(this);\n    }\n  }\n\n  clear() {\n    for (const {item} of this.items.values()) {\n      if (!item.iconElem) {\n        continue;\n      }\n      item.iconElem.textContent = \"\";\n    }\n  }\n\n  toggleItem(item: MenuItem) {\n    if (!item.iconElem) {\n      return;\n    }\n    item.iconElem.textContent = !item.iconElem.textContent ? \"✓\" : \"\";\n  }\n\n  onclicked(evt: string) {\n    const {item = null, callback = null} = this.items.get(evt) || {};\n    if (!item) {\n      return;\n    }\n    if (!(item instanceof MenuItem)) {\n      return;\n    }\n    this.toggleItem(item);\n    if (callback) {\n      callback.call(this);\n    }\n  }\n}\n\ntype ChainedFunction = (item: DownloadItem) => boolean;\n\ninterface ChainedItem {\n  text: string;\n  fn: ChainedFunction;\n}\n\nclass FixedMenuFilter extends MenuFilter {\n  collection: FilteredCollection;\n\n  selected: Set<ChainedItem>;\n\n  fixed: Set<ChainedItem>;\n\n  chain: ChainedFunction | null;\n\n  constructor(\n      id: string, collection: FilteredCollection, items: ChainedItem[]) {\n    super(id);\n    this.collection = collection;\n    this.selected = new Set();\n    this.fixed = new Set(items);\n    this.chain = null;\n  }\n\n  populate() {\n    Array.from(this.fixed).forEach(item => {\n      this.addItem(\n        item.text, this.toggle.bind(this, item), this.selected.has(item));\n    });\n  }\n\n  toggle(item: ChainedItem) {\n    if (this.selected.has(item)) {\n      this.selected.delete(item);\n    }\n    else {\n      this.selected.add(item);\n    }\n    this.regenerate();\n  }\n\n  regenerate() {\n    if (!this.selected.size) {\n      this.collection.removeFilter(this);\n      return;\n    }\n    this.chain = null;\n    this.chain = Array.from(this.selected).reduce(\n      (prev: ChainedFunction | null, curr) => {\n        return (item: DownloadItem) => {\n          return curr.fn(item) || (prev !== null && prev(item));\n        };\n      }, this.chain);\n    this.collection.addFilter(this);\n  }\n\n  allow(item: DownloadItem) {\n    return this.chain !== null && this.chain(item);\n  }\n\n  clear() {\n    this.selected.clear();\n    this.regenerate();\n    super.clear();\n  }\n}\n\nexport class StateMenuFilter extends FixedMenuFilter {\n  constructor(\n      collection: FilteredCollection,\n      StateTexts: Readonly<Map<number, string>>) {\n    const items = Array.from(StateTexts.entries()).map(([state, text]) => {\n      return {\n        state,\n        text,\n        fn: (item: DownloadItem) => item.state === state,\n      };\n    });\n    super(\"menufilter-state\", collection, items);\n  }\n\n  sort(descending: boolean) {\n    this.collection.sort(i => i.state, descending);\n  }\n}\n\nexport class SizeMenuFilter extends FixedMenuFilter {\n  constructor(collection: FilteredCollection) {\n    const items = [\n      {text: \"size-unknown\", start: -1, stop: 1},\n      {text: \"sizes-small\", start: 1, stop: 1 << 20},\n      {text: \"sizes-medium\", start: 1 << 20, stop: 250 << 20},\n      {text: \"sizes-large\", start: 250 << 20, stop: 1024 << 20},\n      {text: \"sizes-huge\", start: 1024 << 20},\n    ].map(i => {\n      const {text, start, stop} = i;\n      const astop = stop || 0;\n      const fn = typeof stop !== undefined ?\n        ((item: DownloadItem) =>\n          item.totalSize >= start && item.totalSize < astop) :\n        ((item: DownloadItem) => item.totalSize >= start);\n\n      return Object.assign(i, {\n        fn,\n        text: _(text, formatSize(start, false), stop && formatSize(stop, false))\n      });\n    });\n    super(\"mneufilter-size\", collection, items);\n  }\n\n  sort(descending: boolean) {\n    this.collection.sort(i => i.totalSize, descending);\n  }\n}\n\nexport class UrlMenuFilter extends MenuFilter {\n  collection: FilteredCollection;\n\n  filters: Set<Filter>;\n\n  domains: Set<string>;\n\n  cmatcher: Matcher | null;\n\n  matcher: Matcher | null;\n\n  constructor(collection: FilteredCollection) {\n    super(\"menufilter-url\");\n    this.collection = collection;\n    this.filters = new Set();\n    this.domains = new Set();\n    this.cmatcher = null;\n  }\n\n  async populate() {\n    const filts = await filters();\n    for (const i of filts.all.filter(e => e.id !== \"deffilter-all\")) {\n      this.addItem(\n        i.label, this.toggleRegularFilter.bind(this, i), this.filters.has(i));\n    }\n    const domains = sort(\n      Array.from(new Set(this.collection.items.map(e => e.domain))),\n      undefined,\n      naturalCaseCompare\n    );\n    if (!domains.length) {\n      return;\n    }\n    this.addItem(\"-\");\n    domains.forEach(e => {\n      this.addItem(\n        e, this.toggleDomainFilter.bind(this, e), this.domains.has(e));\n    });\n  }\n\n  toggleRegularFilter(filter: Filter) {\n    if (this.filters.has(filter)) {\n      this.filters.delete(filter);\n    }\n    else {\n      this.filters.add(filter);\n    }\n    this.regenerate();\n  }\n\n  toggleDomainFilter(domain: string) {\n    if (this.domains.has(domain)) {\n      this.domains.delete(domain);\n    }\n    else {\n      this.domains.add(domain);\n    }\n    this.regenerate();\n  }\n\n  regenerate() {\n    if (!this.domains.size && !this.filters.size) {\n      this.matcher = null;\n      this.collection.removeFilter(this);\n      return;\n    }\n\n    if (!this.filters.size) {\n      this.matcher = null;\n    }\n    else {\n      const exprs = Array.from(this.filters).map(f => Array.from(f)).flat();\n      this.matcher = new Matcher(exprs);\n    }\n\n    this.collection.addFilter(this);\n  }\n\n  allow(item: DownloadItem) {\n    if (this.domains.has(item.domain)) {\n      return true;\n    }\n    return !!(this.matcher && this.matcher.match(item.usable));\n  }\n\n  clear() {\n    this.domains.clear();\n    this.filters.clear();\n    this.regenerate();\n    super.clear();\n  }\n\n  sort(descending: boolean) {\n    this.collection.sort(i => i.usable, descending, true);\n  }\n}\n\nexport class FilteredCollection extends EventEmitter {\n  private readonly table: DownloadTable;\n\n  items: DownloadItem[];\n\n  filtered: DownloadItem[];\n\n  private filters: ItemFilter[];\n\n  constructor(table: DownloadTable) {\n    super();\n    this.table = table;\n    this.items = [];\n    this.filtered = [];\n    this.filters = [];\n  }\n\n  addFilter(filter: ItemFilter) {\n    // Remove any old filters\n    this.filters = this.filters.filter(f => f.id !== filter.id);\n    this.filters.push(filter);\n    this.recalculate();\n    this.emit(\"filter-active\", filter.id);\n  }\n\n  removeFilter(filter: ItemFilter) {\n    this.filters = this.filters.filter(f => f.id !== filter.id);\n    this.recalculate();\n    this.emit(\"filter-inactive\", filter.id);\n  }\n\n  clearFilters() {\n    this.filters.forEach(filter => {\n      this.emit(\"filter-inactive\", filter.id);\n    });\n    this.filters = [];\n    this.recalculate();\n  }\n\n  _reassignPositions() {\n    this.filtered = this.filtered.map((item, index) => {\n      item.filteredPosition = index;\n      return item;\n    });\n  }\n\n  recalculate() {\n    const selection = new Set(this.table.selection);\n    const {focusRow} = this.table;\n    const {filters} = this;\n    let idx = 0;\n\n    const selected = new Set<DownloadItem>();\n    let focused: DownloadItem | undefined;\n\n    if (selection.size) {\n      this.filtered.forEach(item => {\n        const {filteredPosition} = item;\n\n        if (selection.has(filteredPosition)) {\n          selected.add(item);\n        }\n        if (focusRow === filteredPosition) {\n          focused = item;\n        }\n      });\n    }\n\n    function allow(item: DownloadItem) {\n      if (!filters.every(f => f.allow(item))) {\n        delete item.filteredPosition;\n        return false;\n      }\n      item.filteredPosition = idx++;\n      return true;\n    }\n\n    if (this.filters.length) {\n      this.filtered = this.items.filter(allow);\n    }\n    else {\n      this.filtered = this.items.slice();\n      this._reassignPositions();\n    }\n    this.table.invalidate();\n    if (!selection.size) {\n      this.emit(\"changed\");\n      return;\n    }\n    for (const i of this.filtered) {\n      if (selected.has(i)) {\n        this.table.selection.add(i.filteredPosition);\n      }\n    }\n    if (focused && focused.isFiltered) {\n      this.table.focusRow = focused.filteredPosition;\n      this.table.once(\"updated\", () => {\n        if (focused && focused.isFiltered) {\n          this.table.scrollIntoView(focused.filteredPosition);\n        }\n      });\n    }\n    this.emit(\"changed\");\n  }\n\n  add(items: DownloadItem[]) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n    const cur = this.filtered.length;\n    items = items.filter(item => {\n      item.position = this.items.push(item) - 1;\n      this.emit(\"added\", item);\n      if (this.filters.length && !this.filters.every(f => f.allow(item))) {\n        delete item.filteredPosition;\n        return false;\n      }\n\n      item.filteredPosition = this.filtered.push(item) - 1;\n      return true;\n    });\n    if (items.length) {\n      this.table.rowCountChanged(cur, items.length);\n      this.emit(\"changed\");\n    }\n  }\n\n  set(items: DownloadItem[]) {\n    this.items = items.map((item, pos) => {\n      item.position = pos;\n      return item;\n    });\n    this.recalculate();\n  }\n\n  _reinsert(item: DownloadItem) {\n    if (item.isFiltered) {\n      return;\n    }\n    // Find insertion point\n    const idx = this.filtered.findIndex(i => i.position > item.position);\n    if (idx <= 0) {\n      // last item\n      item.filteredPosition = this.filtered.push(item) - 1;\n      this.table.rowCountChanged(item.filteredPosition, 1);\n      return;\n    }\n    this.filtered.splice(idx - 1, 0, item);\n    this._reassignPositions();\n    this.table.rowCountChanged(item.filteredPosition, 1);\n    this.emit(\"changed\");\n  }\n\n  _remove(item: DownloadItem) {\n    if (!item.isFiltered) {\n      return;\n    }\n    this.filtered.splice(item.filteredPosition, 1);\n    this._reassignPositions();\n    delete item.filteredPosition;\n    this.table.rowCountChanged(item.filteredPosition, -1);\n    this.emit(\"changed\");\n  }\n\n  recalculateItem(item: DownloadItem) {\n    if (this.filters.length && !this.filters.every(f => f.allow(item))) {\n      this._remove(item);\n    }\n    else {\n      this._reinsert(item);\n    }\n  }\n\n  /**\n   * Sort all items\n   *\n   * @param {Function} keyfn How to derivce sort keys\n   * @param {boolean} [descending] Sort descending\n   * @param {boolean} [natural] Sort naturally\n   */\n  sort(keyfn: (i: DownloadItem) => any, descending = false, natural = false) {\n    const cmp = natural ? naturalCaseCompare : defaultCompare;\n    let cmpfn = cmp;\n    if (descending) {\n      cmpfn = (a, b) => -cmp(a, b);\n    }\n    this.set(sort(this.items, keyfn, cmpfn));\n    this.emit(\"sorted\");\n  }\n\n  mapFilteredToAbsolute(indexes: number[]) {\n    return indexes.map(i => this.filtered[i].position);\n  }\n\n  moveTop(indexes: number[]) {\n    let swapped = false;\n    this.mapFilteredToAbsolute(indexes).reverse().forEach((id, idx) => {\n      id += idx;\n      if (id === 0) {\n        return;\n      }\n      const [item] = this.items.splice(id, 1);\n      this.items.unshift(item);\n      swapped = true;\n    });\n    if (swapped) {\n      this.set(this.items);\n      this.emit(\"sorted\");\n    }\n  }\n\n  moveBottom(indexes: number[]) {\n    let swapped = false;\n    const {length} = this.items;\n    this.mapFilteredToAbsolute(indexes).forEach((id, idx) => {\n      id -= idx;\n      if (id >= length - 1) {\n        return;\n      }\n      const [item] = this.items.splice(id, 1);\n      this.items.push(item);\n      swapped = true;\n    });\n    if (swapped) {\n      this.set(this.items);\n      this.emit(\"sorted\");\n    }\n  }\n\n  moveUp(indexes: number[]) {\n    let swapped = false;\n    this.mapFilteredToAbsolute(indexes).forEach((id, idx) => {\n      if (id - idx === 0) {\n        return;\n      }\n      const tmp = this.items[id - 1];\n      this.items[id - 1] = this.items[id];\n      this.items[id] = tmp;\n      swapped = true;\n    });\n    if (swapped) {\n      this.set(this.items);\n      this.emit(\"sorted\");\n    }\n  }\n\n  moveDown(indexes: number[]) {\n    const {length} = this.items;\n    let swapped = false;\n    this.mapFilteredToAbsolute(indexes).reverse().forEach((id, idx) => {\n      if (id + idx === length - 1) {\n        return;\n      }\n      const tmp = this.items[id + 1];\n      this.items[id + 1] = this.items[id];\n      this.items[id] = tmp;\n      swapped = true;\n    });\n    if (swapped) {\n      this.set(this.items);\n      this.emit(\"sorted\");\n    }\n  }\n\n  invalidateIcons() {\n    this.items.forEach(item => item.clearFontIcons());\n    this.recalculate();\n  }\n}\n\nmodule.exports = {\n  TextFilter,\n  UrlMenuFilter,\n  StateMenuFilter,\n  SizeMenuFilter,\n  FilteredCollection\n};\n","\"use strict\";\n// License: MIT\n\nimport { EventEmitter } from \"../../lib/events\";\n// eslint-disable-next-line no-unused-vars\nimport { runtime, RawPort } from \"../../lib/browser\";\nimport { WindowState } from \"../windowstate\";\n\nconst PORT = new class Port extends EventEmitter {\n  port: RawPort | null;\n\n  constructor() {\n    super();\n    this.port = runtime.connect(null, { name: \"manager\" });\n    if (!this.port) {\n      throw new Error(\"Could not connect\");\n    }\n    new WindowState(this.port);\n    addEventListener(\"beforeunload\", () => {\n      if (this.port) {\n        this.port.postMessage({\n          msg: \"unload\",\n          left: window.screenX,\n          top: window.screenY\n        });\n      }\n    });\n\n    this.port.onMessage.addListener((msg: any) => {\n      if (typeof msg === \"string\") {\n        this.emit(msg);\n        return;\n      }\n      const {msg: message = null} = msg;\n      if (message) {\n        this.emit(message, msg.data);\n      }\n    });\n  }\n\n  post(msg: string, data?: any) {\n    if (!this.port) {\n      return;\n    }\n    this.port.postMessage(Object.assign({msg}, data));\n  }\n\n  disconnect() {\n    if (!this.port) {\n      return;\n    }\n    this.port.disconnect();\n    this.port = null;\n  }\n}();\n\nexport default PORT;\n","\"use strict\";\n// License: MIT\n\nimport ModalDialog from \"../../uikit/lib/modal\";\nimport { _, localize } from \"../../lib/i18n\";\nimport { Prefs } from \"../../lib/prefs\";\nimport { Keys } from \"../keys\";\nimport { $ } from \"../winutil\";\n\nexport class RemovalModalDialog extends ModalDialog {\n  private readonly text: string;\n\n  private readonly pref: string;\n\n  private check: HTMLInputElement | null;\n\n  constructor(text: string, pref: string) {\n    super();\n    this.text = text;\n    this.pref = `confirmations.${pref}`;\n    this.check = null;\n  }\n\n  async getContent() {\n    const content = $<HTMLTemplateElement>(\"#removal-template\").\n      content.cloneNode(true) as DocumentFragment;\n    await localize(content);\n    this.check = content.querySelector(\".removal-remember\");\n    $(\".removal-text\", content).textContent = this.text;\n    return content;\n  }\n\n  get buttons() {\n    return [\n      {\n        title: _(\"remove-downloads\"),\n        value: \"ok\",\n        default: true,\n        dismiss: false,\n      },\n      {\n        title: _(\"cancel\"),\n        value: \"cancel\",\n        default: false,\n        dismiss: true,\n      }\n    ];\n  }\n\n  async show() {\n    if (await Prefs.get(this.pref)) {\n      return \"ok\";\n    }\n    Keys.suppressed = true;\n    try {\n      const res = await super.show();\n      if (this.check && this.check.checked) {\n        await Prefs.set(this.pref, true);\n      }\n      return res;\n    }\n    finally {\n      Keys.suppressed = false;\n    }\n  }\n\n  shown() {\n    this.focusDefault();\n  }\n}\n\nexport class DeleteFilesDialog extends ModalDialog {\n  private readonly paths: string[];\n\n  constructor(paths: string[]) {\n    super();\n    this.paths = paths;\n  }\n\n  async getContent() {\n    const content = $<HTMLTemplateElement>(\"#deletefiles-template\").\n      content.cloneNode(true) as DocumentFragment;\n    await localize(content);\n    const list = $(\".deletefiles-list\", content);\n    for (const path of this.paths) {\n      const li = document.createElement(\"li\");\n      li.textContent = path;\n      list.appendChild(li);\n    }\n    return content;\n  }\n\n  get buttons() {\n    return [\n      {\n        title: _(\"deletefiles_button\"),\n        value: \"ok\",\n        default: true,\n        dismiss: false,\n      },\n      {\n        title: _(\"cancel\"),\n        value: \"cancel\",\n        default: false,\n        dismiss: true,\n      }\n    ];\n  }\n\n  async show() {\n    Keys.suppressed = true;\n    try {\n      return await super.show();\n    }\n    finally {\n      Keys.suppressed = false;\n    }\n  }\n\n  shown() {\n    this.focusDefault();\n  }\n}\n\n","\"use strict\";\n// License: MIT\n\nimport * as _DownloadState from \"../../lib/manager/state\";\nimport { _, locale } from \"../../lib/i18n\";\n\nexport const DownloadState = _DownloadState;\n\nexport const StateTexts = locale.then(() => Object.freeze(new Map([\n  [DownloadState.QUEUED, _(\"queued\")],\n  [DownloadState.RUNNING, _(\"running\")],\n  [DownloadState.FINISHING, _(\"finishing\")],\n  [DownloadState.RETRYING, _(\"paused\")],\n  [DownloadState.PAUSED, _(\"paused\")],\n  [DownloadState.DONE, _(\"done\")],\n  [DownloadState.CANCELED, _(\"canceled\")],\n  [DownloadState.MISSING, _(\"missing\")],\n])));\n\nexport const StateClasses = Object.freeze(new Map([\n  [DownloadState.QUEUED, \"queued\"],\n  [DownloadState.RUNNING, \"running\"],\n  [DownloadState.FINISHING, \"finishing\"],\n  [DownloadState.PAUSED, \"paused\"],\n  [DownloadState.RETRYING, \"retrying\"],\n  [DownloadState.DONE, \"done\"],\n  [DownloadState.CANCELED, \"canceled\"],\n  [DownloadState.MISSING, \"missing\"],\n]));\n\nexport const StateIcons = Object.freeze(new Map([\n  [DownloadState.QUEUED, \"icon-pause\"],\n  [DownloadState.RUNNING, \"icon-go\"],\n  [DownloadState.FINISHING, \"icon-go\"],\n  [DownloadState.PAUSED, \"icon-pause\"],\n  [DownloadState.RETRYING, \"icon-pause\"],\n  [DownloadState.DONE, \"icon-done\"],\n  [DownloadState.CANCELED, \"icon-error\"],\n  [DownloadState.MISSING, \"icon-failed\"],\n]));\n","\"use strict\";\n// License: MIT\n\nconst NUM_VALUES = 20;\n\nclass Sequence {\n  protected readonly values: Uint32Array;\n\n  protected fill: number;\n\n  protected full: boolean;\n\n  constructor() {\n    this.values = new Uint32Array(NUM_VALUES);\n  }\n\n  get validValues() {\n    return this.full ? this.values : this.values.slice(0, this.fill);\n  }\n\n  get current() {\n    return this.fill ? this.values[this.fill - 1] : 0;\n  }\n\n\n  clear() {\n    this.fill = 0;\n    this.full = false;\n  }\n\n  add(value: number) {\n    if (!this.full) {\n      this.values[this.fill++] = value;\n      this.full = this.fill === NUM_VALUES;\n    }\n    else {\n      this.values.copyWithin(0, 1);\n      this.values[NUM_VALUES - 1] = value;\n    }\n  }\n}\n\nexport class Stats extends Sequence {\n  public readonly avgs: Sequence;\n\n  public avg: number;\n\n  private lastTime: number;\n\n  constructor() {\n    super();\n    this.avgs = new Sequence();\n    this.clear();\n    Object.seal(this);\n  }\n\n  clear() {\n    super.clear();\n    this.avgs.clear();\n    this.avg = 0;\n    this.lastTime = 0;\n  }\n\n  add(value: number) {\n    const now = Date.now();\n    if (this.lastTime) {\n      const diff = now - this.lastTime;\n      value = (value / diff * 1000) | 0;\n    }\n    this.lastTime = now;\n\n    super.add(value);\n\n    const valid = this.validValues;\n    const cavg = valid.reduce((p, c) => p + c, 0) / valid.length;\n    if (this.avg < 1000) {\n      this.avg = cavg;\n    }\n    else {\n      // eslint-disable-next-line no-magic-numbers\n      this.avg = this.avg * 0.85 + cavg * 0.15;\n    }\n    this.avgs.add(this.avg);\n  }\n}\n","\"use strict\";\n// License: MIT\n\nimport { VirtualTable } from \"../../uikit/lib/table\";\nimport {\n  ContextMenu,\n  MenuItem,\n  // eslint-disable-next-line no-unused-vars\n  SubMenuItem\n} from \"../contextmenu\";\nimport { iconForPath, openUrls } from \"../../lib/windowutils\";\nimport { formatSpeed, formatSize, formatTimeDelta } from \"../../lib/formatters\";\nimport { filters } from \"../../lib/filters\";\nimport { _ } from \"../../lib/i18n\";\nimport { EventEmitter } from \"../../lib/events\";\nimport { Prefs, PrefWatcher } from \"../../lib/prefs\";\n// eslint-disable-next-line no-unused-vars\nimport { debounce, URLd } from \"../../lib/util\";\nimport { Keys } from \"../keys\";\nimport { Broadcaster } from \"../broadcaster\";\nimport { Icons } from \"../icons\";\nimport { Buttons } from \"./buttons\";\nimport {\n  TextFilter, UrlMenuFilter, StateMenuFilter, SizeMenuFilter,\n  // eslint-disable-next-line no-unused-vars\n  MenuFilter\n} from \"./itemfilters\";\nimport { FilteredCollection } from \"./itemfilters\";\nimport { RemovalModalDialog, DeleteFilesDialog } from \"./removaldlg\";\nimport { Stats } from \"./stats\";\nimport PORT from \"./port\";\nimport { DownloadState, StateTexts, StateClasses, StateIcons } from \"./state\";\nimport { Tooltip } from \"./tooltip\";\nimport \"../../lib/util\";\nimport { CellTypes } from \"../../uikit/lib/constants\";\nimport { downloads, CHROME } from \"../../lib/browser\";\nimport { $ } from \"../winutil\";\n// eslint-disable-next-line no-unused-vars\nimport { TableConfig } from \"../../uikit/lib/config\";\nimport { IconCache } from \"../../lib/iconcache\";\nimport * as imex from \"../../lib/imex\";\n// eslint-disable-next-line no-unused-vars\nimport { BaseItem } from \"../../lib/item\";\n\nconst TREE_CONFIG_VERSION = 2;\nconst RUNNING_TIMEOUT = 1000;\nconst SIZES_TIMEOUT = 150;\n\nconst COL_URL = 0;\nconst COL_DOMAIN = 1;\nconst COL_PROGRESS = 2;\nconst COL_PER = 3;\nconst COL_SIZE = 4;\nconst COL_ETA = 5;\nconst COL_SPEED = 6;\nconst COL_MASK = 7;\nconst COL_SEGS = 8;\n\nconst HIDPI = window.matchMedia &&\n  window.matchMedia(\"(min-resolution: 2dppx)\").matches;\n\nconst ICON_BASE_SIZE = 16;\nconst ICON_REAL_SIZE = !CHROME && HIDPI ? ICON_BASE_SIZE * 2 : ICON_BASE_SIZE;\n// eslint-disable-next-line no-magic-numbers\nconst LARGE_ICON_BASE_SIZE = CHROME ? 32 : 64;\n// eslint-disable-next-line no-magic-numbers\nconst MAX_ICON_BASE_SIZE = CHROME ? 32 : 127;\nconst LARGE_ICON_REAL_SIZE = HIDPI ? MAX_ICON_BASE_SIZE : LARGE_ICON_BASE_SIZE;\n\nlet TEXT_SIZE_UNKNOWM = \"unknown\";\nlet REAL_STATE_TEXTS = Object.freeze(new Map<number, string>());\nStateTexts.then(v => {\n  REAL_STATE_TEXTS = v;\n});\n\nconst prettyNumber = (function() {\nconst rv = new Intl.NumberFormat(undefined, {\n  style: \"decimal\",\n  useGrouping: true,\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0\n});\nreturn rv.format.bind(rv);\n})();\n\nclass ShowUrlsWatcher extends PrefWatcher {\n  private readonly table: DownloadTable;\n\n  constructor(table: DownloadTable) {\n    super(\"show-urls\", false);\n    this.table = table;\n  }\n\n  changed(prefs: any, name: string, value: any) {\n    const rv = super.changed(prefs, name, value);\n    this.table.invalidate();\n    return rv;\n  }\n}\n\nexport class DownloadItem extends EventEmitter {\n  public readonly stats: Stats;\n\n  public readonly owner: DownloadTable;\n\n  private lastWritten: number;\n\n  public state: number;\n\n  public totalSize: number;\n\n  public written: number;\n\n  public domain: string;\n\n  public usable: string;\n\n  public description: string;\n\n  public error: string;\n\n  public currentName: string;\n\n  public currentFull: string;\n\n  public ext?: string;\n\n  public position: number;\n\n  public filteredPosition: number;\n\n  public manId: number;\n\n  public url: string;\n\n  public uURL: URLd;\n\n  public destFull: string;\n\n  public startDate: number;\n\n  public sessionId: number;\n\n  public batch: number;\n\n  public mask: string;\n\n  private iconField?: string;\n\n  private largeIconField?: string;\n\n  public opening: boolean;\n\n  public retries: number;\n\n  constructor(owner: DownloadTable, raw: any, stats?: Stats) {\n    super();\n    Object.assign(this, raw);\n    this.updateURL();\n    this.stats = stats || new Stats();\n    this.owner = owner;\n    this.owner.updatedState(this, undefined, this.state);\n    this.lastWritten = 0;\n  }\n\n  get icon() {\n    if (this.iconField) {\n      return this.iconField;\n    }\n    this.iconField = this.owner.icons.get(\n      iconForPath(this.currentName, ICON_BASE_SIZE));\n    if (this.ext) {\n      IconCache.get(this.ext, ICON_REAL_SIZE).then(icon => {\n        if (icon) {\n          this.iconField = this.owner.icons.get(icon);\n          if (typeof this.filteredPosition !== undefined) {\n            this.owner.invalidateCell(this.filteredPosition, COL_URL);\n          }\n        }\n      });\n    }\n    return this.iconField || \"\";\n  }\n\n  get largeIcon() {\n    if (this.largeIconField) {\n      return this.largeIconField;\n    }\n    this.largeIconField = this.owner.icons.get(\n      iconForPath(this.currentName, LARGE_ICON_BASE_SIZE));\n    if (this.ext) {\n      IconCache.get(this.ext, LARGE_ICON_REAL_SIZE).then(icon => {\n        if (icon) {\n          this.largeIconField = this.owner.icons.get(icon);\n        }\n        this.emit(\"largeIcon\");\n      });\n    }\n    return this.largeIconField || \"\";\n  }\n\n  get eta() {\n    const {avg} = this.stats;\n    if (!this.totalSize || !avg) {\n      return TEXT_SIZE_UNKNOWM;\n    }\n    const remain = this.totalSize - this.written;\n    return formatTimeDelta(remain / avg);\n  }\n\n  get isFiltered() {\n    return typeof this.filteredPosition !== \"undefined\";\n  }\n\n  get percent() {\n    if (this.state === DownloadState.DONE) {\n      return 1;\n    }\n    if (!this.totalSize) {\n      return 0;\n    }\n    return this.written / this.totalSize;\n  }\n\n  get fmtName() {\n    if (this.owner.showUrls.value) {\n      return this.usable;\n    }\n    return this.currentName;\n  }\n\n  get fmtSize() {\n    if (this.state & (DownloadState.RUNNING | DownloadState.PAUSED)) {\n      if (!this.written) {\n        return TEXT_SIZE_UNKNOWM;\n      }\n      if (!this.totalSize) {\n        return formatSize(this.written);\n      }\n      return _(\"size-progress\",\n        formatSize(this.written), formatSize(this.totalSize));\n    }\n    if (!this.totalSize) {\n      return TEXT_SIZE_UNKNOWM;\n    }\n    return formatSize(this.totalSize);\n  }\n\n  get fmtPercent() {\n    return `${(this.percent * 100).toFixed(0)}%`;\n  }\n\n  get fmtETA() {\n    if (this.state === DownloadState.RUNNING) {\n      return this.eta;\n    }\n    if (this.state === DownloadState.RETRYING) {\n      if (this.error) {\n        return _(\"retrying_error\", _(this.error) || this.error);\n      }\n      return _(\"retrying\");\n    }\n    if (this.error) {\n      return _(this.error) || this.error;\n    }\n    return REAL_STATE_TEXTS.get(this.state) || \"\";\n  }\n\n  get fmtSpeed() {\n    return this.state === DownloadState.RUNNING ?\n      formatSpeed(this.stats.avg) :\n      \"\";\n  }\n\n  get fmtDomain() {\n    return this.domain;\n  }\n\n  updateDownload(raw: any) {\n    if ((\"position\" in raw) && raw.position !== this.position) {\n      console.warn(\"position mismatch\", raw.position, this.position);\n      PORT.post(\"all\");\n      return;\n    }\n    if ((\"ext\" in raw) && raw.ext !== this.ext) {\n      this.clearIcons();\n    }\n    delete raw.position;\n    delete raw.owner;\n    const oldState = this.state;\n    Object.assign(this, raw);\n    if (raw.url) {\n      this.updateURL();\n    }\n    if (this.state !== oldState) {\n      this.stats.clear();\n      this.owner.updatedState(this, oldState, this.state);\n    }\n    this.owner.updatedDownload(this);\n    this.emit(\"update\");\n  }\n\n  async queryState() {\n    const [state] = await downloads.search({id: this.manId});\n    return state;\n  }\n\n  adoptSize(state: any) {\n    const {\n      bytesReceived,\n      totalBytes,\n      fileSize\n    } = state;\n    this.written = Math.max(0, bytesReceived);\n    this.totalSize = Math.max(0, fileSize >= 0 ? fileSize : totalBytes);\n  }\n\n  async updateSizes() {\n    if (!this.manId) {\n      return;\n    }\n    const state = await this.queryState();\n    if (!this.manId) {\n      return;\n    }\n    this.adoptSize(state);\n    if (this.isFiltered) {\n      this.owner.invalidateCell(this.filteredPosition, COL_PROGRESS);\n      this.owner.invalidateCell(this.filteredPosition, COL_PER);\n      this.owner.invalidateCell(this.filteredPosition, COL_SIZE);\n    }\n  }\n\n  async updateStats() {\n    if (this.state !== DownloadState.RUNNING) {\n      return -1;\n    }\n    let v = 0;\n    try {\n      if (this.manId) {\n        const state = await this.queryState();\n        if (!this.manId) {\n          return -1;\n        }\n        this.adoptSize(state);\n        if (!this.lastWritten) {\n          this.lastWritten = Math.max(0, this.written);\n          return -1;\n        }\n        v = Math.max(0, this.written - this.lastWritten);\n        this.lastWritten = Math.max(0, this.written);\n      }\n    }\n    catch (ex) {\n      console.error(\"failed to stat\", ex);\n    }\n    this.stats.add(v);\n    if (this.isFiltered) {\n      this.owner.invalidateRow(this.filteredPosition);\n    }\n    this.emit(\"stats\");\n    return this.stats.avg;\n  }\n\n  updateURL() {\n    this.uURL = new URL(this.url) as URLd;\n    this.domain = this.uURL.domain;\n    this.emit(\"url\");\n  }\n\n  clearIcons() {\n    this.iconField = undefined;\n    this.largeIconField = undefined;\n  }\n\n  clearFontIcons() {\n    if (this.iconField && this.iconField.startsWith(\"icon-\")) {\n      this.iconField = undefined;\n    }\n    if (this.largeIconField && this.largeIconField.startsWith(\"icon-\")) {\n      this.largeIconField = undefined;\n    }\n  }\n}\n\n\nexport class DownloadTable extends VirtualTable {\n  private finished: number;\n\n  private readonly resumeAction: Broadcaster;\n\n  private readonly pauseAction: Broadcaster;\n\n  private readonly cancelAction: Broadcaster;\n\n  private readonly running: Set<DownloadItem>;\n\n  public readonly showUrls: ShowUrlsWatcher;\n\n  private runningTimer: number | null;\n\n  private sizesTimer: number | null;\n\n  private readonly globalStats: Stats;\n\n  private readonly downloads: FilteredCollection;\n\n  private readonly sids: Map<number, DownloadItem>;\n\n  public readonly icons: Icons;\n\n  private readonly contextMenu: ContextMenu;\n\n  private readonly forceAction: Broadcaster;\n\n  private readonly openFileAction: Broadcaster;\n\n  private readonly openDirectoryAction: Broadcaster;\n\n  private readonly deleteFilesAction: Broadcaster;\n\n  private readonly copyURLAction: Broadcaster;\n\n  private readonly openURLAction: Broadcaster;\n\n  private readonly moveTopAction: Broadcaster;\n\n  private readonly moveUpAction: Broadcaster;\n\n  private readonly moveDownAction: Broadcaster;\n\n  private readonly moveBottomAction: Broadcaster;\n\n  private readonly disableSet: Set<Broadcaster>;\n\n  private tooltip: Tooltip | null;\n\n  constructor(treeConfig: TableConfig | null) {\n    super(\"#items\", treeConfig, TREE_CONFIG_VERSION);\n\n    TEXT_SIZE_UNKNOWM = _(\"size-unknown\");\n\n    this.finished = 0;\n    this.running = new Set();\n    this.runningTimer = null;\n    this.globalStats = new Stats();\n    this.showUrls = new ShowUrlsWatcher(this);\n\n    this.updateCounts = debounce(this.updateCounts.bind(this), 100);\n    this.onIconCached = debounce(this.onIconCached.bind(this), 1000);\n\n    this.downloads = new FilteredCollection(this);\n    this.downloads.on(\"changed\", () => this.updateCounts());\n    this.downloads.on(\"added\", () => this.updateCounts());\n    this.downloads.on(\"sorted\", () => {\n      PORT.post(\"sorted\", {sids: this.downloads.items.map(i => i.sessionId)});\n    });\n\n    this.updateCounts();\n\n    new TextFilter(this.downloads);\n    const menufilters = new Map<string, MenuFilter>([\n      [\"colURL\", new UrlMenuFilter(this.downloads)],\n      [\"colETA\", new StateMenuFilter(this.downloads, REAL_STATE_TEXTS)],\n      [\"colSize\", new SizeMenuFilter(this.downloads)],\n    ]);\n    this.on(\"column-clicked\", (id, evt, col) => {\n      const mf = menufilters.get(id);\n      const {left, bottom} = col.elem.getBoundingClientRect();\n      if (!mf) {\n        return undefined;\n      }\n      mf.show({clientX: left, clientY: bottom});\n      return true;\n    });\n    const filterforColumn = new Map(Array.from(\n      menufilters.entries()).map(([col, f]) => [f.id, col]));\n    this.downloads.on(\"filter-active\", filter => {\n      const name = filterforColumn.get(filter);\n      if (!name) {\n        return;\n      }\n      const col = this.getColumnByName(name);\n      if (!col) {\n        return;\n      }\n      col.iconElem.classList.add(\"icon-filter\");\n    });\n    this.downloads.on(\"filter-inactive\", filter => {\n      const name = filterforColumn.get(filter);\n      if (!name) {\n        return;\n      }\n      const col = this.getColumnByName(name);\n      if (!col) {\n        return;\n      }\n      col.iconElem.classList.remove(\"icon-filter\");\n    });\n\n    IconCache.on(\"cached\", this.onIconCached.bind(this));\n\n    this.sids = new Map<number, DownloadItem>();\n    this.icons = new Icons($(\"#icons\"));\n\n    const ctx = this.contextMenu = new ContextMenu(\"#table-context\");\n    Keys.adoptContext(ctx);\n    Keys.adoptButtons($(\"#toolbar\"));\n\n    this.on(\"config-changed\", () => {\n      Prefs.set(\"tree-config-manager\", JSON.stringify(this));\n    });\n\n    Keys.on(\"ACCEL-KeyA\", (event: Event) => {\n      const target = event.target as HTMLElement;\n      if (target.localName === \"input\") {\n        return false;\n      }\n      this.selectAll();\n      return true;\n    });\n\n    Keys.on(\"ACCEL-KeyI\", () => {\n      this.selectToggle();\n      return true;\n    });\n\n    Keys.on(\"Delete\", (event: Event) => {\n      const target = event.target as HTMLElement;\n      if (target.localName === \"input\") {\n        return false;\n      }\n      this.removeDownloads();\n      return true;\n    });\n\n    Keys.on(\"ALT-Delete\", (event: Event) => {\n      const target = event.target as HTMLElement;\n      if (target.localName === \"input\") {\n        return false;\n      }\n      this.removeMissingDownloads();\n      return true;\n    });\n\n    Keys.on(\"SHIFT-Delete\", (event: Event) => {\n      const target = event.target as HTMLElement;\n      if (target.localName === \"input\") {\n        return false;\n      }\n      this.removeCompleteDownloads(false);\n      return true;\n    });\n\n    ctx.on(\"ctx-remove-all\", () => this.removeAllDownloads());\n    ctx.on(\"ctx-remove-complete-all\",\n      () => this.removeCompleteDownloads(false));\n    ctx.on(\"ctx-remove-complete-selected\",\n      () => this.removeCompleteDownloads(true));\n    ctx.on(\"ctx-remove-domain\",\n      () => this.removeDomainDownloads(false));\n    ctx.on(\"ctx-remove-complete-domain\",\n      () => this.removeDomainDownloads(true));\n    ctx.on(\"ctx-remove-failed\", () => this.removeFailedDownloads());\n    ctx.on(\"ctx-remove-paused\", () => this.removePausedDownloads());\n    ctx.on(\"ctx-remove-batch\", () => this.removeBatchDownloads());\n\n    ctx.on(\"ctx-import\", () => this.importDownloads());\n    ctx.on(\"ctx-export-text\", () => this.exportDownloads(imex.textExporter));\n    ctx.on(\"ctx-export-aria2\", () => this.exportDownloads(imex.aria2Exporter));\n    ctx.on(\"ctx-export-metalink\",\n      () => this.exportDownloads(imex.metalinkExporter));\n    ctx.on(\"ctx-export-json\", () => this.exportDownloads(imex.jsonExporter));\n\n    ctx.on(\"dismissed\", () => this.table.focus());\n\n    this.on(\"contextmenu\", (tree, event) => {\n      this.showContextMenu(event);\n      return true;\n    });\n\n    ctx.on(\"clicked\", e => this.handleFilterRemove(e));\n\n    const toolbar = new Buttons(\"#toolbar\");\n    toolbar.on(\"btn-add\", () => PORT.post(\"showSingle\"));\n\n    this.resumeAction = new Broadcaster(\"btn-resume\", \"ctx-resume\");\n    this.resumeAction.onaction = this.resumeDownloads.bind(this, false);\n\n    this.forceAction = new Broadcaster(\"ctx-force-download\");\n    this.forceAction.onaction = this.resumeDownloads.bind(this, true);\n\n    this.pauseAction = new Broadcaster(\"btn-pause\", \"ctx-pause\");\n    this.pauseAction.onaction = this.pauseDownloads.bind(this);\n\n    this.cancelAction = new Broadcaster(\"btn-cancel\", \"ctx-cancel\");\n    this.cancelAction.onaction = this.cancelDownloads.bind(this);\n\n    this.openFileAction = new Broadcaster(\"ctx-open-file\");\n    this.openFileAction.onaction = this.openFile.bind(this);\n    this.on(\"dblclick\", () => this.openFile());\n\n    this.openDirectoryAction = new Broadcaster(\"ctx-open-directory\");\n    this.openDirectoryAction.onaction = this.openDirectory.bind(this);\n\n    this.deleteFilesAction = new Broadcaster(\"ctx-delete-files\");\n    this.deleteFilesAction.onaction = this.deleteFiles.bind(this);\n\n    this.copyURLAction = new Broadcaster(\"ctx-copy-url\");\n    this.copyURLAction.onaction = this.copyURL.bind(this);\n\n    this.openURLAction = new Broadcaster(\"ctx-open-url\");\n    this.openURLAction.onaction = this.openURL.bind(this);\n\n    const moveAction = (method: string) => {\n      if (this.selection.empty) {\n        return;\n      }\n      const d: any = this.downloads;\n      d[method](Array.from(this.selection));\n    };\n\n    this.moveTopAction = new Broadcaster(\"btn-top\", \"ctx-move-top\");\n    this.moveTopAction.onaction = moveAction.bind(this, \"moveTop\");\n\n    this.moveUpAction = new Broadcaster(\"btn-up\", \"ctx-move-up\");\n    this.moveUpAction.onaction = moveAction.bind(this, \"moveUp\");\n\n    this.moveDownAction = new Broadcaster(\"btn-down\", \"ctx-move-down\");\n    this.moveDownAction.onaction = moveAction.bind(this, \"moveDown\");\n\n    this.moveBottomAction = new Broadcaster(\"btn-bottom\", \"ctx-move-bottom\");\n    this.moveBottomAction.onaction = moveAction.bind(this, \"moveBottom\");\n\n    this.disableSet = new Set([\n      this.resumeAction,\n      this.forceAction,\n      this.pauseAction,\n      this.cancelAction,\n      this.moveTopAction,\n      this.moveUpAction,\n      this.moveDownAction,\n      this.moveBottomAction,\n      this.openFileAction,\n      this.openDirectoryAction,\n      this.deleteFilesAction,\n      this.copyURLAction,\n      this.openURLAction,\n    ]);\n\n    this.on(\n      \"selection-changed\", debounce(this.selectionChanged.bind(this), 10));\n    this.selection.clear();\n\n    this.tooltip = null;\n    const tooltipWatcher = new PrefWatcher(\"tooltip\", true);\n    this.on(\"hover\", info => {\n      if (!document.hasFocus()) {\n        return;\n      }\n      if (!tooltipWatcher.value) {\n        return;\n      }\n      const item = this.downloads.filtered[info.rowid];\n      if (!item) {\n        return;\n      }\n      if (this.tooltip) {\n        this.tooltip.dismiss();\n      }\n      this.tooltip = new Tooltip(item, info);\n    });\n    this.on(\"hover-change\", info => {\n      if (!this.tooltip) {\n        return;\n      }\n      this.tooltip.adjust(info);\n    });\n    this.on(\"hover-done\", () => this.dismissTooltip());\n    this.downloads.on(\"changed\", () => this.dismissTooltip());\n    this.contextMenu.on(\"showing\", () => this.dismissTooltip());\n    addEventListener(\"scroll\", () => this.dismissTooltip(), {passive: true});\n    addEventListener(\"wheel\", () => this.dismissTooltip(), {passive: true});\n    addEventListener(\"keydown\", () => this.dismissTooltip(), {passive: true});\n  }\n\n  get rowCount() {\n    return this.downloads.filtered.length;\n  }\n\n  updateCounts() {\n    const {length: total} = this.downloads.items;\n    const fTotal = prettyNumber(total);\n    const fFin = prettyNumber(this.finished);\n    const fDisp = prettyNumber(this.rowCount);\n    const fRunning = prettyNumber(this.running.size);\n    $(\"#statusItems\").textContent = _(\n      \"manager-status-items\",\n      fFin,\n      fTotal,\n      fDisp,\n      fRunning);\n    if (total) {\n      document.title = `[${fFin}/${fTotal}] - ${_(\"manager.title\")}`;\n    }\n    else {\n      document.title = _(\"manager.title\");\n    }\n  }\n\n  async updateSizes() {\n    for (const r of this.running) {\n      await r.updateSizes();\n    }\n  }\n\n  async updateRunning() {\n    let sum = 0;\n    for (const r of this.running) {\n      const v = await r.updateStats();\n      if (v >= 0) {\n        sum += v;\n      }\n    }\n    this.globalStats.add(sum);\n    $(\"#statusSpeed\").textContent = formatSpeed(this.globalStats.avg);\n  }\n\n  dismissTooltip() {\n    if (!this.tooltip) {\n      return;\n    }\n    this.tooltip.dismiss();\n    this.tooltip = null;\n  }\n\n  async showContextMenu(event: MouseEvent) {\n    const {contextMenu: ctx} = this;\n    const filts = await filters();\n\n    const prepareMenu = (prefix: string) => {\n      const rem = (ctx.get(prefix) as SubMenuItem).menu;\n      prefix += \"-filter-\";\n      Array.from(rem).\n        filter(e => e.startsWith(prefix)).\n        forEach(e => rem.remove(e));\n      for (const filt of filts.all) {\n        if (typeof filt.id !== \"string\" || filt.id === \"deffilter-all\") {\n          continue;\n        }\n        const mi = new MenuItem(rem, `${prefix}-${filt.id}`, filt.label, {\n          icon: this.icons.get(iconForPath(`file.${filt.icon || \"bin\"}`, ICON_BASE_SIZE))\n        });\n        rem.add(mi);\n      }\n    };\n\n    prepareMenu(\"ctx-remove-complete\");\n    prepareMenu(\"ctx-remove\");\n\n    ctx.show(event);\n  }\n\n  setItems(items: any[]) {\n    const savedStats = new Map(\n      Array.from(this.running).map(item => [item.sessionId, item.stats]));\n    this.running.clear();\n    this.sids.clear();\n    this.downloads.set(items.map(item => {\n      const rv = new DownloadItem(this, item, savedStats.get(item.sessionId));\n      this.sids.set(rv.sessionId, rv);\n      return rv;\n    }));\n  }\n\n  getSelectedItems() {\n    const {filtered} = this.downloads;\n    return Array.from(this.selection).map(e => filtered[e]);\n  }\n\n  getSelectedSids(allowedStates: number) {\n    const {filtered} = this.downloads;\n    const selected = Array.from(this.selection);\n    const allowedItems = selected.filter(\n      i => allowedStates & filtered[i].state);\n    return allowedItems.map(i => filtered[i].sessionId);\n  }\n\n  selectionChanged() {\n    this.dismissTooltip();\n    const {empty} = this.selection;\n    if (empty) {\n      for (const d of this.disableSet) {\n        d.disabled = true;\n      }\n      return;\n    }\n\n    for (const d of this.disableSet) {\n      d.disabled = false;\n    }\n\n    const items = this.getSelectedItems();\n    const states = items.reduce((p, c) => p |= c.state, 0);\n\n    if (!(states & DownloadState.PAUSEABLE)) {\n      this.pauseAction.disabled = true;\n    }\n\n    if (!(states & DownloadState.RESUMABLE)) {\n      this.resumeAction.disabled = true;\n    }\n    if (!(states & DownloadState.FORCABLE)) {\n      this.forceAction.disabled = true;\n    }\n\n    if (!(states & DownloadState.CANCELABLE)) {\n      this.cancelAction.disabled = true;\n    }\n\n    if (!(states & DownloadState.DONE)) {\n      this.deleteFilesAction.disabled = true;\n    }\n\n    const item = this.focusRow >= 0 ?\n      this.downloads.filtered[this.focusRow] :\n      null;\n    const canOpen = item && item.manId && item.state === DownloadState.DONE;\n    const canOpenDirectory = item && item.manId;\n    this.openFileAction.disabled = !canOpen;\n    this.openDirectoryAction.disabled = !canOpenDirectory;\n  }\n\n  resumeDownloads(forced = false) {\n    const sids = this.getSelectedSids(\n      forced ? DownloadState.FORCABLE : DownloadState.RESUMABLE);\n    if (!sids.length) {\n      return;\n    }\n    PORT.post(\"resume\", {sids, forced});\n  }\n\n  pauseDownloads() {\n    const sids = this.getSelectedSids(DownloadState.PAUSEABLE);\n    if (!sids.length) {\n      return;\n    }\n    PORT.post(\"pause\", {sids});\n  }\n\n  cancelDownloads() {\n    const sids = this.getSelectedSids(DownloadState.CANCELABLE);\n    if (!sids.length) {\n      return;\n    }\n    PORT.post(\"cancel\", {sids});\n  }\n\n  async openFile() {\n    this.dismissTooltip();\n    const {focusRow} = this;\n    if (focusRow < 0) {\n      return;\n    }\n    const item = this.downloads.filtered[focusRow];\n    if (!item || !item.manId || item.state !== DownloadState.DONE) {\n      return;\n    }\n    item.opening = true;\n    try {\n      this.invalidateRow(focusRow);\n      await downloads.open(item.manId);\n    }\n    catch (ex) {\n      console.error(ex, ex.toString(), ex);\n      PORT.post(\"missing\", {sid: item.sessionId});\n    }\n    finally {\n      setTimeout(() => {\n        item.opening = false;\n        this.invalidateRow(focusRow);\n      }, 500);\n    }\n  }\n\n  async openDirectory() {\n    if (this.focusRow < 0) {\n      return;\n    }\n    const item = this.downloads.filtered[this.focusRow];\n    if (!item || !item.manId) {\n      return;\n    }\n    try {\n      await downloads.show(item.manId);\n    }\n    catch (ex) {\n      console.error(ex, ex.toString(), ex);\n      PORT.post(\"missing\", {sid: item.sessionId});\n    }\n  }\n\n  async deleteFiles() {\n    const items = [];\n    for (const rowid of this.selection) {\n      const item = this.downloads.filtered[rowid];\n      if (item.state === DownloadState.DONE && item.manId) {\n        items.push(item);\n      }\n    }\n    if (!items.length) {\n      return;\n    }\n    const sids = items.map(i => i.sessionId);\n    const paths = items.map(i => i.destFull);\n    await new DeleteFilesDialog(paths).show();\n    await Promise.all(items.map(async item => {\n      try {\n        if (item.manId && item.state === DownloadState.DONE) {\n          await downloads.removeFile(item.manId);\n        }\n      }\n      catch {\n        // ignored\n      }\n    }));\n    this.removeDownloadsInternal(sids);\n  }\n\n  copyURL() {\n    if (this.focusRow < 0 || !navigator.clipboard ||\n      !navigator.clipboard.writeText) {\n      return;\n    }\n    const item = this.downloads.filtered[this.focusRow];\n    if (!item || !item.url) {\n      return;\n    }\n\n    navigator.clipboard.writeText(item.url);\n  }\n\n  openURL() {\n    if (this.focusRow < 0) {\n      return;\n    }\n    const item = this.downloads.filtered[this.focusRow];\n    if (!item || !item.url) {\n      return;\n    }\n\n    openUrls([item.url], false);\n  }\n\n  removeDownloadsInternal(sids?: number[]) {\n    if (!sids) {\n      sids = [];\n      for (const rowid of this.selection) {\n        sids.push(this.downloads.filtered[rowid].sessionId);\n      }\n    }\n    if (!sids.length) {\n      return;\n    }\n    PORT.post(\"removeSids\", {sids});\n  }\n\n  removeDownloadsByState(state: number, selectionOnly = false) {\n    const branch = selectionOnly ? \"filtered\" : \"items\";\n    const items = this.downloads[branch].filter(item => {\n      if (selectionOnly && !this.selection.contains(item.filteredPosition)) {\n        return false;\n      }\n      return item.state === state;\n    }).map(i => i.sessionId);\n    if (!items.length) {\n      return;\n    }\n    this.removeDownloadsInternal(items);\n  }\n\n  async removeDownloads() {\n    await new RemovalModalDialog(\n      _(\"remove-download.question\"), \"remove-selected\").show();\n    this.removeDownloadsInternal();\n  }\n\n  async removeAllDownloads() {\n    await new RemovalModalDialog(\n      _(\"remove-all-downloads.question\"), \"remove-selected-all\").show();\n    this.removeDownloadsInternal(this.downloads.items.map(e => e.sessionId));\n  }\n\n  async removeCompleteDownloads(selected = false) {\n    await new RemovalModalDialog(\n      selected ?\n        _(\"remove-selected-complete-downloads.question\") :\n        _(\"remove-complete-downloads.question\"),\n      selected ?\n        \"remove-selected-complete\" :\n        \"remove-complete\"\n    ).show();\n    this.removeDownloadsByState(DownloadState.DONE, selected);\n  }\n\n  async removeFailedDownloads() {\n    await new RemovalModalDialog(\n      _(\"remove-failed-downloads.question\"),\n      \"remove-failed\"\n    ).show();\n    this.removeDownloadsByState(DownloadState.CANCELED, false);\n  }\n\n  async removePausedDownloads() {\n    await new RemovalModalDialog(\n      _(\"remove-paused-downloads.question\"),\n      \"remove-paused\"\n    ).show();\n    this.removeDownloadsByState(DownloadState.PAUSED, false);\n  }\n\n  async removeMissingDownloads() {\n    await new RemovalModalDialog(\n      _(\"remove-missing-downloads.question\"),\n      \"remove-missing\"\n    ).show();\n    this.removeDownloadsByState(DownloadState.MISSING, false);\n  }\n\n  async removeDomainDownloads(complete = false) {\n    if (this.focusRow < 0) {\n      return;\n    }\n    const item = this.downloads.filtered[this.focusRow];\n    if (!item) {\n      return;\n    }\n    const {domain} = item;\n    await new RemovalModalDialog(\n      complete ?\n        _(\"remove-domain-complete-downloads.question\", domain) :\n        _(\"remove-domain-downloads.question\", domain),\n      complete ?\n        \"remove-domain-complete\" :\n        \"remove-domain\"\n    ).show();\n\n    const items = this.downloads.items.filter(item => {\n      if (complete && item.state !== DownloadState.DONE) {\n        return false;\n      }\n      return item.domain === domain;\n    }).map(i => i.sessionId);\n    if (!items.length) {\n      return;\n    }\n    this.removeDownloadsInternal(items);\n  }\n\n  async removeBatchDownloads(complete = false) {\n    if (this.focusRow < 0) {\n      return;\n    }\n    const item = this.downloads.filtered[this.focusRow];\n    if (!item) {\n      return;\n    }\n    const {batch} = item;\n    await new RemovalModalDialog(\n      complete ?\n        _(\"remove-batch-complete-downloads.question\", batch) :\n        _(\"remove-batch-downloads.question\", batch),\n      complete ?\n        \"remove-batch-complete\" :\n        \"remove-batch\"\n    ).show();\n\n    const items = this.downloads.items.filter(item => {\n      if (complete && item.state !== DownloadState.DONE) {\n        return false;\n      }\n      return item.batch === batch;\n    }).map(i => i.sessionId);\n    if (!items.length) {\n      return;\n    }\n    this.removeDownloadsInternal(items);\n  }\n\n  async handleFilterRemove(event: string) {\n    const [prefix, id] = event.split(\"--\", 2);\n    if (!prefix || !id) {\n      return;\n    }\n    let all = false;\n    let branch;\n    switch (prefix) {\n    case \"ctx-remove-filter\":\n      all = true;\n      branch = \"remove-filter-downloads\";\n      break;\n\n    case \"ctx-remove-complete-filter\":\n      all = false;\n      branch = \"remove-complete-filter-downloads\";\n      break;\n\n    default:\n      return;\n    }\n\n    const filter = (await filters()).get(id);\n    if (!filter || typeof filter.id !== \"string\") {\n      return;\n    }\n    await new RemovalModalDialog(\n      _(`${branch}.question`, filter.label), `${branch}-${filter.id}`).show();\n\n    const items = this.downloads.items.filter(item => {\n      if (!all && item.state !== DownloadState.DONE) {\n        return false;\n      }\n      return filter.match(item.usable);\n    }).map(i => i.sessionId);\n    if (!items.length) {\n      return;\n    }\n\n    this.removeDownloadsInternal(items);\n  }\n\n  updateItems(items: any[]) {\n    const newDownloads = [];\n    for (const i of items) {\n      const item = this.sids.get(i.sessionId);\n      if (!item) {\n        const rv = new DownloadItem(this, i);\n        this.sids.set(rv.sessionId, rv);\n        newDownloads.push(rv);\n        continue;\n      }\n      item.updateDownload(i);\n    }\n    if (newDownloads) {\n      this.downloads.add(newDownloads);\n    }\n  }\n\n  updatedDownload(item: DownloadItem) {\n    this.downloads.recalculateItem(item);\n    if (item.isFiltered) {\n      this.invalidateRow(item.filteredPosition);\n    }\n  }\n\n  updatedState(\n      item: DownloadItem, oldState: number | undefined, newState: number) {\n    switch (oldState) {\n    case DownloadState.RUNNING:\n      this.running.delete(item);\n      if (!this.running.size && this.runningTimer && this.sizesTimer) {\n        clearInterval(this.runningTimer);\n        this.runningTimer = null;\n        clearInterval(this.sizesTimer);\n        this.sizesTimer = null;\n        $(\"#statusSpeedContainer\").classList.add(\"hidden\");\n      }\n      break;\n\n    case DownloadState.DONE:\n      this.finished--;\n      break;\n    }\n    switch (newState) {\n    case DownloadState.RUNNING:\n      this.running.add(item);\n      if (!this.runningTimer) {\n        this.runningTimer = window.setInterval(\n          this.updateRunning.bind(this), RUNNING_TIMEOUT);\n        this.sizesTimer = window.setInterval(\n          this.updateSizes.bind(this), SIZES_TIMEOUT);\n        this.updateRunning();\n        this.updateSizes();\n        $(\"#statusSpeedContainer\").classList.remove(\"hidden\");\n      }\n      if (item.manId && item.ext) {\n        IconCache.set(item.ext, item.manId).catch(console.error);\n      }\n      break;\n\n    case DownloadState.DONE:\n      this.finished++;\n      if (item.manId && item.ext) {\n        IconCache.set(item.ext, item.manId).catch(console.error);\n      }\n      break;\n    }\n    this.selectionChanged();\n    this.updateCounts();\n  }\n\n\n  removedItems(sids: number[]) {\n    const ssids = new Set(sids);\n    const items = this.downloads.items.filter(i => {\n      if (!ssids.has(i.sessionId)) {\n        return true;\n      }\n      this.running.delete(i);\n      this.sids.delete(i.sessionId);\n      if (i.state === DownloadState.DONE) {\n        this.finished--;\n      }\n      return false;\n    });\n    this.downloads.set(items);\n  }\n\n  selectAll() {\n    this.selection.add(0, this.rowCount - 1);\n  }\n\n  selectToggle() {\n    this.selection.toggle(0, this.rowCount - 1);\n  }\n\n  importDownloads() {\n    const picker = document.createElement(\"input\");\n    picker.setAttribute(\"type\", \"file\");\n    picker.setAttribute(\"accept\", \"text/*,.txt,.lst,.metalink,.meta4,.json\");\n    picker.onchange = () => {\n      if (!picker.files || !picker.files.length) {\n        return;\n      }\n      const reader = new FileReader();\n      reader.onload = () => {\n        if (!reader.result) {\n          return;\n        }\n        const items = imex.importText(reader.result as string);\n        if (!items || !items.length) {\n          return;\n        }\n        PORT.post(\"import\", {items});\n      };\n      reader.readAsText(picker.files[0], \"utf-8\");\n    };\n    picker.click();\n  }\n\n  exportDownloads(exporter: imex.Exporter) {\n    const items = this.getSelectedItems();\n    if (!items.length) {\n      return;\n    }\n    const text = exporter.getText(items as unknown as BaseItem[]);\n    const enc = new TextEncoder();\n    const data = enc.encode(text);\n    const url = URL.createObjectURL(new Blob([data], {type: \"text/plain\"}));\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", exporter.fileName);\n    link.style.display = \"none\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }\n\n  getRowClasses(rowid: number) {\n    const item = this.downloads.filtered[rowid];\n    if (!item) {\n      return null;\n    }\n    if (item.opening) {\n      return [\"opening\"];\n    }\n    const cls = StateClasses.get(item.state);\n    if (cls && item.opening) {\n      return [cls, \"opening\"];\n    }\n    if (item.opening) {\n      return [\"opening\"];\n    }\n    return cls && [cls] || null;\n  }\n\n  getCellIcon(rowid: number, colid: number) {\n    if (!this.downloads.filtered.length) {\n      return null;\n    }\n    const item = this.downloads.filtered[rowid];\n    if (colid === COL_URL) {\n      return item.icon;\n    }\n    if (colid === COL_PROGRESS) {\n      return StateIcons.get(item.state) || null;\n    }\n    return null;\n  }\n\n  getCellType(rowid: number, colid: number) {\n    if (colid === COL_PROGRESS) {\n      return CellTypes.TYPE_PROGRESS;\n    }\n    return CellTypes.TYPE_TEXT;\n  }\n\n  getCellText(rowid: number, colid: number) {\n    const item = this.downloads.filtered[rowid];\n    if (!item) {\n      return \"\";\n    }\n    switch (colid) {\n    case COL_URL:\n      return item.fmtName;\n\n    case COL_DOMAIN:\n      return item.fmtDomain;\n\n    case COL_PER:\n      return item.fmtPercent;\n\n    case COL_SIZE:\n      return item.fmtSize;\n\n    case COL_ETA:\n      return item.fmtETA;\n\n    case COL_SPEED:\n      return item.fmtSpeed;\n\n    case COL_SEGS:\n      return \"\"; // item.fmtSegments;\n\n    case COL_MASK:\n      return item.mask;\n    }\n    return \"\";\n  }\n\n  getCellProgress(rowid: number) {\n    const item = this.downloads.filtered[rowid];\n    if (!item) {\n      return -1;\n    }\n    switch (item.state) {\n    case DownloadState.QUEUED:\n      return item.percent;\n\n    case DownloadState.RUNNING:\n      return item.percent || -1;\n\n    case DownloadState.PAUSED:\n      return item.percent || -1;\n\n    case DownloadState.FINISHING:\n      return 1;\n\n    case DownloadState.DONE:\n      return 1;\n\n    case DownloadState.CANCELED:\n      return 1;\n\n    default:\n      return -1;\n    }\n  }\n\n  onIconCached() {\n    this.downloads.invalidateIcons();\n  }\n}\n","/* eslint-disable no-magic-numbers */\n\"use strict\";\n// License: MIT\n\nimport { _ } from \"../../lib/i18n\";\nimport { formatSpeed } from \"../../lib/formatters\";\nimport { DownloadState } from \"./state\";\nimport { Rect } from \"../../uikit/lib/rect\";\n// eslint-disable-next-line no-unused-vars\nimport { DownloadItem } from \"./table\";\n\nfunction createInnerShadowGradient(\n    ctx: CanvasRenderingContext2D, w: number, colors: string[]) {\n  const g = ctx.createLinearGradient(0, 0, 0, w);\n  g.addColorStop(0, colors[0]);\n  g.addColorStop(3.0 / w, colors[1]);\n  g.addColorStop(4.0 / w, colors[2]);\n  g.addColorStop(1, colors[3]);\n  return g;\n}\n\nfunction makeRoundedRectPath(\n    ctx: CanvasRenderingContext2D,\n    x: number, y: number,\n    width: number, height: number,\n    radius: number) {\n  ctx.beginPath();\n  ctx.moveTo(x, y + radius);\n  ctx.lineTo(x, y + height - radius);\n  ctx.quadraticCurveTo(x, y + height, x + radius, y + height);\n  ctx.lineTo(x + width - radius, y + height);\n  ctx.quadraticCurveTo(x + width, y + height, x + width, y + height - radius);\n  ctx.lineTo(x + width, y + radius);\n  ctx.quadraticCurveTo(x + width, y, x + width - radius, y);\n  ctx.lineTo(x + radius, y);\n  ctx.quadraticCurveTo(x, y, x, y + radius);\n}\n\nfunction createVerticalGradient(\n    ctx: CanvasRenderingContext2D, height: number, c1: string, c2: string) {\n  const g = ctx.createLinearGradient(0, 0, 0, height);\n  g.addColorStop(0, c1);\n  g.addColorStop(1, c2);\n  return g;\n}\n\nfunction drawSpeedPass(\n    ctx: CanvasRenderingContext2D, h: number, step: number,\n    pass: any, speeds: number[]) {\n  let y = h + pass.y;\n  let x = pass.x + 0.5;\n\n  ctx.beginPath();\n  ctx.moveTo(x, y);\n\n  y -= speeds[0];\n  if (pass.f) {\n    ctx.lineTo(x, y);\n  }\n  else {\n    ctx.moveTo(x, y);\n  }\n\n  let slope = (speeds[1] - speeds[0]);\n  x += step * 0.7;\n  y -= slope * 0.7;\n  ctx.lineTo(x, y);\n\n  for (let j = 1, e = speeds.length - 1; j < e; ++j) {\n    y -= slope * 0.3;\n    slope = (speeds[j + 1] - speeds[j]);\n    y -= slope * 0.3;\n\n    ctx.quadraticCurveTo(step * j, h + pass.y - speeds[j], (x + step * 0.6), y);\n\n    x += step;\n    y -= slope * 0.4;\n\n    ctx.lineTo(x, y);\n  }\n  x += step * 0.3;\n  y -= slope * 0.3;\n  ctx.lineTo(x, y);\n\n  if (pass.f) {\n    ctx.lineTo(x, h);\n    ctx.fillStyle = createVerticalGradient(ctx, h - 7, pass.f[0], pass.f[1]);\n    ctx.fill();\n  }\n\n  if (pass.s) {\n    ctx.lineWidth = pass.sw || 1;\n    ctx.strokeStyle = pass.s;\n    ctx.stroke();\n  }\n}\n\nconst speedPasses = Object.freeze([\n  { x: 4, y: 0, f: [\"#EADF91\", \"#F4EFB1\"] },\n  { x: 2, y: 0, f: [\"#DFD58A\", \"#D3CB8B\"] },\n  { x: 1, y: 0, f: [\"#D0BA70\", \"#DFCF6F\"] },\n  { x: 0, y: 0, f: [\"#FF8B00\", \"#FFDF38\"], s: \"#F98F00\" }\n]);\nconst avgPass = Object.freeze({x: 0, y: 0, s: \"rgba(0,0,200,0.3\", sw: 2});\n\nconst ELEMS = [\n  \"icon\",\n  \"infos\", \"name\", \"from\", \"size\", \"date\", \"eta\", \"etalabel\",\n  \"speedbox\", \"speedbar\", \"current\", \"average\",\n  \"progressbar\", \"progress\"\n];\n\nexport class Tooltip {\n  private readonly item: DownloadItem;\n\n  private readonly elem: HTMLElement;\n\n  private readonly speedbar: HTMLCanvasElement;\n\n  private readonly icon: HTMLElement;\n\n  private readonly name: HTMLElement;\n\n  private readonly from: HTMLElement;\n\n  private readonly size: HTMLElement;\n\n  private readonly date: HTMLElement;\n\n  private readonly eta: HTMLElement;\n\n  private readonly etalabel: HTMLElement;\n\n  private readonly speedbox: HTMLElement;\n\n  private readonly progressbar: HTMLElement;\n\n  private readonly progress: HTMLElement;\n\n  private readonly current: HTMLElement;\n\n  private readonly average: HTMLElement;\n\n  private lastPos: any;\n\n  constructor(item: DownloadItem, pos: number) {\n    this.update = this.update.bind(this);\n    this.item = item;\n    this.item.on(\"largeIcon\", this.update);\n\n    const tmpl = (\n      document.querySelector<HTMLTemplateElement>(\"#tooltip-template\"));\n    if (!tmpl) {\n      throw new Error(\"template failed\");\n    }\n    const el = tmpl.content.firstElementChild;\n    if (!el) {\n      throw new Error(\"invalid template\");\n    }\n    this.elem = el.cloneNode(true) as HTMLElement;\n    this.adjust(pos);\n\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self: any = this;\n    ELEMS.forEach(e => {\n      self[e] = this.elem.querySelector(`#tooltip-${e}`);\n    });\n    document.body.appendChild(this.elem);\n    this.item.on(\"stats\", this.update);\n    this.item.on(\"update\", this.update);\n    this.speedbar.width = this.speedbar.clientWidth;\n    this.speedbar.height = this.speedbar.clientHeight;\n    this.update();\n    this.adjust(pos);\n  }\n\n  update() {\n    const {item} = this;\n    if (!item.isFiltered) {\n      this.dismiss();\n      return;\n    }\n    const icon = item.largeIcon;\n    this.icon.className = icon;\n    this.name.textContent = item.currentFull;\n    this.from.textContent = item.usable;\n    this.size.textContent = item.fmtSize;\n    this.date.textContent = new Date(item.startDate).toLocaleString();\n    this.eta.textContent = item.fmtETA;\n\n    const running = item.state === DownloadState.RUNNING;\n    const hidden = this.speedbox.classList.contains(\"hidden\");\n\n    if (!running && !hidden) {\n      this.eta.classList.add(\"single\");\n      this.etalabel.classList.add(\"hidden\");\n      this.speedbox.classList.add(\"hidden\");\n      this.progressbar.classList.add(\"hidden\");\n      this.adjust(null);\n    }\n    if (!running) {\n      return;\n    }\n    if (hidden) {\n      this.eta.classList.remove(\"single\");\n      this.etalabel.classList.remove(\"hidden\");\n      this.speedbox.classList.remove(\"hidden\");\n      this.progressbar.classList.remove(\"hidden\");\n      this.adjust(null);\n    }\n    this.progress.style.width = `${item.percent * 100}%`;\n    this.current.textContent = formatSpeed(item.stats.current);\n    this.average.textContent = formatSpeed(item.stats.avg);\n    this.drawSpeeds();\n  }\n\n  drawSpeeds() {\n    const {stats} = this.item;\n    const {speedbar: canvas} = this;\n\n    let w = canvas.width;\n    let h = canvas.height;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) {\n      throw new Error(\"Cannot acquire 2d context\");\n    }\n    --w; --h;\n\n    const boxFillStyle = createInnerShadowGradient(\n      ctx, h, [\"#B1A45A\", \"#F1DF7A\", \"#FEEC84\", \"#FFFDC4\"]);\n    const boxStrokeStyle = createInnerShadowGradient(\n      ctx, 8, [\"#816A1D\", \"#E7BE34\", \"#F8CC38\", \"#D8B231\"]);\n\n    ctx.clearRect(0, 0, w, h);\n    ctx.save();\n    ctx.translate(0.5, 0.5);\n\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = boxStrokeStyle;\n    ctx.fillStyle = boxFillStyle;\n\n    // draw container chunks back\n    ctx.fillStyle = boxFillStyle;\n    makeRoundedRectPath(ctx, 0, 0, w, h, 5);\n    ctx.fill();\n\n    let speeds = Array.from(stats.validValues);\n    let avgs = Array.from(stats.avgs.validValues);\n    if (speeds.length > 1) {\n      let [maxH] = speeds; let [minH] = speeds;\n      speeds.forEach(s => {\n        maxH = Math.max(maxH, s);\n        minH = Math.min(minH, s);\n      });\n      if (minH === maxH) {\n        speeds = speeds.map(() => 12);\n      }\n      else {\n        const r = (maxH - minH);\n        speeds = speeds.map(function(speed) {\n          return 3 + Math.round((h - 6) * (speed - minH) / r);\n        });\n        avgs = avgs.map(function(speed) {\n          return 3 + Math.round((h - 6) * (speed - minH) / r);\n        });\n      }\n      ctx.save();\n      ctx.clip();\n\n      const step = w / (speeds.length - 1);\n      for (const pass of speedPasses) {\n        drawSpeedPass(ctx, h, step, pass, speeds);\n      }\n      drawSpeedPass(ctx, h, step, avgPass, avgs);\n\n      ctx.restore();\n    }\n\n    makeRoundedRectPath(ctx, 0, 0, w, h, 3);\n    ctx.stroke();\n\n    ctx.restore();\n  }\n\n  adjust(pos: any) {\n    if (pos) {\n      this.lastPos = pos;\n    }\n    else {\n      pos = this.lastPos;\n    }\n    const {clientWidth, clientHeight} = this.elem;\n    if (!clientWidth) {\n      this.elem.style.left = `${pos.x + 10}px`;\n      this.elem.style.top = `${pos.y + 10}px`;\n      return;\n    }\n\n    const w = Math.max(\n      document.documentElement.clientWidth, window.innerWidth || 0);\n    const h = Math.max(\n      document.documentElement.clientHeight, window.innerHeight || 0);\n    const r = new Rect(pos.x + 10, pos.y + 10, 0, 0, clientWidth, clientHeight);\n    if (r.right > w) {\n      r.offset(-clientWidth - 20, 0);\n    }\n    if (r.left < 0) {\n      r.offset(-r.left, 0);\n    }\n    if (r.bottom > h) {\n      r.offset(0, -clientHeight - 20);\n    }\n    this.elem.style.left = `${r.left}px`;\n    this.elem.style.top = `${r.top}px`;\n  }\n\n  dismiss() {\n    if (this.elem.parentElement) {\n      this.elem.parentElement.removeChild(this.elem);\n    }\n    this.item.off(\"stats\", this.update);\n    this.item.off(\"update\", this.update);\n    this.item.off(\"largeIcon\", this.update);\n  }\n}\n","module.exports = crypto;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"manager\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdtalite\"] = self[\"webpackChunkdtalite\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"common\"], () => (__webpack_require__(\"./windows/manager.ts\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}