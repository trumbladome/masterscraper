{"version":3,"file":"select.js","mappings":"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","sources":["webpack://dtalite/./windows/select.ts","webpack://dtalite/external var \"crypto\"","webpack://dtalite/webpack/bootstrap","webpack://dtalite/webpack/runtime/chunk loaded","webpack://dtalite/webpack/runtime/define property getters","webpack://dtalite/webpack/runtime/hasOwnProperty shorthand","webpack://dtalite/webpack/runtime/make namespace object","webpack://dtalite/webpack/runtime/jsonp chunk loading","webpack://dtalite/webpack/before-startup","webpack://dtalite/webpack/startup","webpack://dtalite/webpack/after-startup"],"sourcesContent":["\"use strict\";\n// License: MIT\n\nimport { VirtualTable } from \"../uikit/lib/table\";\nimport ModalDialog from \"../uikit/lib/modal\";\nimport { ContextMenu } from \"./contextmenu\";\nimport { iconForPath } from \"../lib/windowutils\";\nimport { _, localize, locale } from \"../lib/i18n\";\nimport { Prefs } from \"../lib/prefs\";\nimport { MASK, FASTFILTER, SUBFOLDER } from \"../lib/recentlist\";\nimport { WindowState } from \"./windowstate\";\nimport { Dropdown } from \"./dropdown\";\nimport { Keys } from \"./keys\";\nimport { Icons } from \"./icons\";\nimport { sort, naturalCaseCompare } from \"../lib/sorting\";\nimport { hookButton } from \"../lib/manager/renamer\";\nimport { CellTypes } from \"../uikit/lib/constants\";\n// eslint-disable-next-line no-unused-vars\nimport { runtime, RawPort } from \"../lib/browser\";\nimport { $ } from \"./winutil\";\n// eslint-disable-next-line no-unused-vars\nimport { BaseItem } from \"../lib/item\";\n// eslint-disable-next-line no-unused-vars\nimport { ItemDelta } from \"../lib/select\";\n// eslint-disable-next-line no-unused-vars\nimport { TableConfig } from \"../uikit/lib/config\";\nimport { validateSubFolder as validateSubfolder } from \"../lib/util\";\nimport \"./theme\";\n\nconst PORT: RawPort = runtime.connect(null, { name: \"select\" });\n\nconst TREE_CONFIG_VERSION = 1;\n\nconst COL_CHECK = 0;\nconst COL_DOWNLOAD = 1;\nconst COL_TITLE = 2;\nconst COL_DESC = 3;\nconst COL_MASK = 4;\nconst COL_REFERRER = 5;\n\nconst ICON_BASE_SIZE = 16;\nconst NUM_FILTER_CLASSES = 8;\n\nlet Table: SelectionTable;\nlet Mask: Dropdown;\nlet FastFilter: Dropdown;\nlet Subfolder: Dropdown;\n\n\ntype DELTAS = {deltaLinks: ItemDelta[]; deltaMedia: ItemDelta[]};\n\ninterface BaseMatchedItem extends BaseItem {\n  backIdx: number;\n  matched?: string | null;\n  rowid: number;\n}\n\nfunction clearErrors() {\n  const not = $(\"#notification\");\n  not.textContent = \"\";\n  not.style.display = \"none\";\n}\n\n\nfunction matched(item: BaseMatchedItem) {\n  return item && item.matched && item.matched !== \"unmanual\";\n}\n\nclass PausedModalDialog extends ModalDialog {\n  getContent() {\n    const tmpl = $<HTMLTemplateElement>(\"#paused-template\");\n    const content = tmpl.content.cloneNode(true) as DocumentFragment;\n    return content;\n  }\n\n  shown() {\n    this.focusDefault();\n  }\n\n  get buttons() {\n    return [\n      {\n        title: _(\"remember\"),\n        value: \"ok\",\n        default: true,\n        dismiss: false\n      },\n      {\n        title: _(\"add-paused-once\"),\n        value: \"once\",\n        default: false,\n        dismiss: false\n      },\n      {\n        title: _(\"cancel\"),\n        value: \"cancel\",\n        default: false,\n        dismiss: true\n      }\n    ];\n  }\n}\n\nclass CheckClasser extends Map<string, string> {\n  gen: IterableIterator<string>;\n\n  constructor(numClasses: number) {\n    super();\n    this.gen = (function *() {\n      for (;;) {\n        for (let c = 0; c < numClasses; ++c) {\n          yield `filter-${c + 1}`;\n        }\n      }\n    })();\n    this.set(\"manual\", \"filter-manual\");\n    this.set(\"fast\", \"filter-fast\");\n  }\n\n  \"get\"(key: string) {\n    let result = super.get(key);\n    if (typeof result !== \"string\") {\n      result = this.gen.next().value;\n      if (result) {\n        super.set(key, result);\n      }\n    }\n    return result;\n  }\n}\n\ntype KeyFn = (item: BaseMatchedItem) => any;\n\nclass ItemCollection {\n  private items: BaseMatchedItem[];\n\n  private indexes: Map<number, BaseMatchedItem>;\n\n  constructor(items: BaseMatchedItem[]) {\n    this.items = items;\n    this.assignRows();\n    this.items.forEach((item, idx) => item.backIdx = idx);\n    this.indexes = new Map(items.map((i, idx) => [idx, i]));\n  }\n\n  assignRows() {\n    this.items.forEach((item, idx) => item.rowid = idx);\n  }\n\n  get length() {\n    return this.items.length;\n  }\n\n  get checked() {\n    const rv: number[] = [];\n    this.items.forEach(function (item, idx) {\n      if (item.matched && item.matched !== \"unmanual\") {\n        rv.push(idx);\n      }\n    });\n    return rv;\n  }\n\n  get checkedBackIndexes() {\n    const rv: number[] = [];\n    this.items.forEach(function(item) {\n      if (item.matched && item.matched !== \"unmanual\") {\n        rv.push(item.backIdx);\n      }\n    });\n    return rv;\n  }\n\n\n  at(idx: number) {\n    return this.items[idx];\n  }\n\n  byIndex(idx: number) {\n    return this.indexes.get(idx);\n  }\n\n  sort(keyFn: KeyFn) {\n    sort(this.items, keyFn, naturalCaseCompare);\n    this.assignRows();\n  }\n\n  reverse() {\n    this.items.reverse();\n    this.assignRows();\n  }\n\n  filter(fn: (item: BaseMatchedItem, idx: number) => boolean) {\n    return this.items.filter(fn);\n  }\n}\n\nclass SelectionTable extends VirtualTable {\n  checkClasser: CheckClasser;\n\n  icons: Icons;\n\n  links: ItemCollection;\n\n  media: ItemCollection;\n\n  items: ItemCollection;\n\n  type: string;\n\n  status: HTMLElement;\n\n  linksTab: HTMLElement;\n\n  mediaTab: HTMLElement;\n\n  linksFilters: HTMLElement;\n\n  mediaFilters: HTMLElement;\n\n  contextMenu: ContextMenu;\n\n  sortcol: number | null;\n\n  sortasc: boolean;\n\n  keyfns: Map<string, KeyFn>;\n\n  constructor(\n      treeConfig: TableConfig | null, type: string,\n      links: BaseMatchedItem[], media: BaseMatchedItem[]) {\n    if (type === \"links\" && !links.length) {\n      type = \"media\";\n    }\n    else if (type === \"media\" && !media.length) {\n      type = \"links\";\n    }\n    super(\"#items\", treeConfig, TREE_CONFIG_VERSION);\n\n    this.checkClasser = new CheckClasser(NUM_FILTER_CLASSES);\n    this.icons = new Icons($(\"#icons\") as HTMLStyleElement);\n    this.links = new ItemCollection(links);\n    this.media = new ItemCollection(media);\n    this.type = type;\n    this.items = type === \"links\" ? this.links : this.media;\n\n    this.status = $(\"#statusItems\");\n    this.linksTab = $(\"#linksTab\");\n    if (!links.length) {\n      this.linksTab.classList.add(\"disabled\");\n    }\n    else {\n      this.linksTab.addEventListener(\n        \"click\", this.switchTab.bind(this, \"links\"));\n    }\n\n    this.mediaTab = $(\"#mediaTab\");\n    if (!media.length) {\n      this.mediaTab.classList.add(\"disabled\");\n    }\n    else {\n      this.mediaTab.addEventListener(\n        \"click\", this.switchTab.bind(this, \"media\"));\n    }\n    this.linksFilters = $(\"#linksFilters\");\n    this.mediaFilters = $(\"#mediaFilters\");\n\n    localize(($(\"#table-context\") as HTMLTemplateElement).content);\n    this.contextMenu = new ContextMenu(\"#table-context\");\n    Keys.adoptContext(this.contextMenu);\n\n    this.sortcol = null;\n    this.sortasc = true;\n    this.keyfns = new Map<string, KeyFn>([\n      [\"colDownload\", item => item.usable],\n      [\"colTitle\", item => [item.title, item.usable]],\n      [\"colDescription\", item => [item.description, item.usable]],\n      [\"colMask\", item => [item.mask, item.usable]],\n    ]);\n\n    this.on(\"config-changed\", () => {\n      Prefs.set(\"tree-config-select\", JSON.stringify(this));\n    });\n    this.on(\"column-clicked\", colid => {\n      const keyfn = this.keyfns.get(colid);\n      if (!keyfn) {\n        return false;\n      }\n      this.links.sort(keyfn);\n      this.media.sort(keyfn);\n      const elem = document.querySelector<HTMLElement>(`#${colid}`);\n      const oldelem = (this.sortcol && document.querySelector<HTMLElement>(`#${this.sortcol}`));\n      if (this.sortcol === colid && this.sortasc) {\n        this.links.reverse();\n        this.media.reverse();\n        this.sortasc = false;\n      }\n      else {\n        this.sortcol = colid;\n        this.sortasc = true;\n      }\n      if (oldelem) {\n        oldelem.dataset.sortdir = \"\";\n      }\n      if (elem) {\n        elem.dataset.sortdir = this.sortasc ? \"asc\" : \"desc\";\n      }\n      this.invalidate();\n      return true;\n    });\n    this.on(\" -keypress\", () => this.checkSelection());\n    this.contextMenu.on(\"ctx-check-selected\", () => {\n      this.checkSelection(\"manual\");\n    });\n    this.contextMenu.on(\"ctx-uncheck-selected\", () => {\n      this.checkSelection(\"unmanual\");\n    });\n    this.contextMenu.on(\"ctx-toggle-selected\", () => {\n      this.checkSelection(\"toggle\");\n    });\n\n    Keys.on(\"ACCEL-KeyA\", (event: KeyboardEvent) => {\n      const target = event.target as HTMLElement;\n      if (target.localName === \"input\") {\n        return false;\n      }\n      this.selectAll();\n      return true;\n    });\n\n    Keys.on(\"ACCEL-KeyF\", () => {\n      this.selectChecked();\n      return true;\n    });\n\n    Keys.on(\"ACCEL-KeyI\", () => {\n      this.selectToggle();\n      return true;\n    });\n\n    Keys.on(\"ACCEL-KeyO\", () => {\n      this.openSelection();\n      return true;\n    });\n\n    this.contextMenu.on(\"ctx-mask\", async() => {\n      if (this.selection.empty) {\n        return;\n      }\n      let oldmask = \"\";\n      for (const r of this.selection) {\n        const m = this.items.at(r).mask;\n        if (oldmask && m !== oldmask) {\n          oldmask = \"\";\n          break;\n        }\n        oldmask = m || oldmask;\n      }\n      try {\n        Keys.suppressed = true;\n        const newmask = await ModalDialog.prompt(\n          _(\"set_mask\"), _(\"set_mask_text\"), oldmask);\n        for (const r of this.selection) {\n          this.items.at(r).mask = newmask;\n          this.invalidateRow(r);\n        }\n      }\n      catch (ex) {\n        console.warn(\"mask dismissed\", ex);\n      }\n      finally {\n        Keys.suppressed = false;\n      }\n    });\n\n    this.contextMenu.on(\"ctx-referrer\", async() => {\n      if (this.selection.empty) {\n        return;\n      }\n      let oldref = \"\";\n      for (const r of this.selection) {\n        const m = this.items.at(r).usableReferrer;\n        if (oldref && m !== oldref) {\n          oldref = \"\";\n          break;\n        }\n        oldref = m || oldref;\n      }\n      try {\n        Keys.suppressed = true;\n        const newref = await ModalDialog.prompt(\n          _(\"set_referrer\"), _(\"set_referrer_text\"), oldref);\n        try {\n          let ref;\n          if (!newref) {\n            ref = {\n              referrer: undefined,\n              usableReferrer: undefined,\n            };\n          }\n          else {\n            const u = new URL(newref);\n            u.hash = \"\";\n            ref = {\n              referrer: u.toString(),\n              usableReferrer: decodeURIComponent(u.toString()),\n            };\n          }\n          for (const r of this.selection) {\n            Object.assign(this.items.at(r), ref);\n            this.invalidateRow(r);\n          }\n        }\n        catch {\n          // ignored\n        }\n      }\n      catch (ex) {\n        console.warn(\"mask dismissed\", ex);\n      }\n      finally {\n        Keys.suppressed = false;\n      }\n    });\n\n\n    this.contextMenu.on(\"dismissed\", () => this.table.focus());\n\n    this.on(\"contextmenu\", (tree, event) => {\n      if (!this.selection.empty) {\n        this.contextMenu.show(event);\n      }\n      return true;\n    });\n\n    this.init();\n    this.switchTab(type);\n  }\n\n  get rowCount() {\n    return this.items.length;\n  }\n\n  checkSelection(state?: string) {\n    if (this.selection.empty) {\n      return false;\n    }\n    for (const rowid of this.selection) {\n      const item = this.items.at(rowid);\n      if (!state) {\n        state = matched(item) ? \"unmanual\" : \"manual\";\n      }\n      let ns;\n      switch (state) {\n      case \"toggle\":\n        ns = matched(item) ? \"unmanual\" : \"manual\";\n        break;\n      default:\n        ns = state;\n      }\n      item.matched = ns;\n      this.invalidateRow(rowid);\n    }\n    this.updateStatus();\n    return true;\n  }\n\n  selectAll() {\n    this.selection.add(0, this.rowCount - 1);\n  }\n\n  selectChecked() {\n    this.selection.clear();\n    let min = null;\n    for (const ci of this.items.checked) {\n      this.selection.add(ci);\n      min = min === null ? ci : Math.min(min, ci);\n    }\n    if (min !== null) {\n      this.scrollIntoView(min);\n    }\n  }\n\n  selectToggle() {\n    this.selection.toggle(0, this.rowCount - 1);\n  }\n\n  openSelection() {\n    const privates: BaseMatchedItem[] = [];\n    const items = this.items.filter((i, idx) => this.selection.contains(idx)).\n      filter(i => {\n        if (i.private) {\n          privates.push(i);\n          return false;\n        }\n        return true;\n      });\n    if (!items.length && !privates.length) {\n      if (this.focusRow < 0) {\n        return;\n      }\n      const item = this.items.at(this.focusRow);\n      if (item.private) {\n        privates.push(item);\n      }\n      else {\n        items.push(item);\n      }\n    }\n\n    if (items.length) {\n      PORT.postMessage({\n        msg: \"openUrls\",\n        urls: items.map(e => e.url),\n        incognito: false,\n      });\n    }\n    if (privates.length) {\n      PORT.postMessage({\n        msg: \"openUrls\",\n        urls: privates.map(e => e.url),\n        incognito: true,\n      });\n    }\n  }\n\n  applyDeltaTo(delta: ItemDelta[], items: ItemCollection) {\n    const active = items === this.items;\n    for (const d of delta) {\n      const {idx = -1, matched = null} = d;\n      if (idx < 0) {\n        continue;\n      }\n      const item = items.byIndex(idx);\n      if (!item) {\n        continue;\n      }\n      if (item.matched === matched) {\n        continue;\n      }\n      if (matched !== \"fast\" &&\n        (item.matched === \"manual\" || item.matched === \"unmanual\")) {\n        // Skip manually selected items\n        continue;\n      }\n      item.matched = matched;\n      if (active) {\n        this.invalidateRow(item.rowid);\n      }\n    }\n  }\n\n  applyDeltas({deltaLinks = [], deltaMedia = []}: DELTAS) {\n    this.applyDeltaTo(deltaLinks, this.links);\n    this.applyDeltaTo(deltaMedia, this.media);\n    this.updateStatus();\n  }\n\n  switchTab(type: string) {\n    this.type = type;\n    const isLinks = type === \"links\";\n    this.linksTab.classList[isLinks ? \"add\" : \"remove\"](\"active\");\n    this.mediaTab.classList[!isLinks ? \"add\" : \"remove\"](\"active\");\n    this.linksFilters.classList[isLinks ? \"add\" : \"remove\"](\"active\");\n    this.mediaFilters.classList[!isLinks ? \"add\" : \"remove\"](\"active\");\n    this.items = (this as any)[type];\n    this.selection.clear();\n    this.invalidate();\n    this.updateStatus();\n  }\n\n  updateStatus() {\n    const selected = this.items.checked.length;\n    if (!selected) {\n      this.status.textContent = _(\"noitems.label\");\n    }\n    else {\n      this.status.textContent = _(\"numitems.label\", [selected]);\n    }\n    clearErrors();\n  }\n\n  getRowClasses(rowid: number) {\n    const item = this.items.at(rowid);\n    if (!item || !matched(item) || !item.matched) {\n      return null;\n    }\n    const m = this.checkClasser.get(item.matched);\n    if (!m) {\n      return null;\n    }\n    return [\"filtered\", m];\n  }\n\n  getCellIcon(rowid: number, colid: number) {\n    const item = this.items.at(rowid);\n    if (item && colid === COL_DOWNLOAD) {\n      return this.icons.get(iconForPath(item.url, ICON_BASE_SIZE));\n    }\n    return null;\n  }\n\n  getCellType(rowid: number, colid: number) {\n    switch (colid) {\n    case COL_CHECK:\n      return CellTypes.TYPE_CHECK;\n    default:\n      return CellTypes.TYPE_TEXT;\n    }\n  }\n\n  getDownloadText(idx: number) {\n    const item = this.items.at(idx);\n    if (!item) {\n      return \"\";\n    }\n    if (item.fileName) {\n      return `${item.usable} (${item.fileName})`;\n    }\n    return item.usable;\n  }\n\n  getText(prop: string, idx: number) {\n    const item: any = this.items.at(idx);\n    if (!item || !(prop in item) || !item[prop]) {\n      return \"\";\n    }\n    return item[prop];\n  }\n\n  getMaskText(idx: number) {\n    const item = this.items.at(idx);\n    if (item) {\n      return item.mask;\n    }\n    return _(\"mask.default\");\n  }\n\n  getCellText(rowid: number, colid: number) {\n    switch (colid) {\n    case COL_DOWNLOAD:\n      return this.getDownloadText(rowid);\n\n    case COL_TITLE:\n      return this.getText(\"title\", rowid);\n\n    case COL_DESC:\n      return this.getText(\"description\", rowid);\n\n    case COL_REFERRER:\n      return this.getText(\"usableReferrer\", rowid);\n\n    case COL_MASK:\n      return this.getMaskText(rowid);\n\n    default:\n      return \"\";\n    }\n  }\n\n  getCellCheck(rowid: number, colid: number) {\n    if (colid === COL_CHECK) {\n      return !!matched(this.items.at(rowid));\n    }\n    return false;\n  }\n\n  setCellCheck(rowid: number, colid: number, value: boolean) {\n    this.items.at(rowid).matched = value ? \"manual\" : \"unmanual\";\n    this.invalidateRow(rowid);\n    this.updateStatus();\n  }\n}\n\nasync function download(paused = false) {\n  try {\n    const mask = Mask.value;\n    if (!mask) {\n      throw new Error(\"error.invalidMask\");\n    }\n    const subfolder = Subfolder.value;\n    validateSubfolder(subfolder);\n\n    const items = Table.items.checkedBackIndexes;\n    if (!items.length) {\n      throw new Error(\"error.noItemsSelected\");\n    }\n    if (paused && !(await Prefs.get(\"add-paused\"))) {\n      try {\n        Keys.suppressed = true;\n        const remember = await new PausedModalDialog().show();\n        if (remember === \"ok\") {\n          await Prefs.set(\"add-paused\", true);\n          await Prefs.save();\n        }\n      }\n      catch (ex) {\n        return;\n      }\n      finally {\n        Keys.suppressed = false;\n      }\n    }\n    if (!paused) {\n      await Prefs.set(\"add-paused\", false);\n    }\n    PORT.postMessage({\n      msg: \"queue\",\n      items,\n      options: {\n        type: Table.type,\n        paused,\n        mask,\n        maskOnce: $<HTMLInputElement>(\"#maskOnceCheck\").checked,\n        fast: FastFilter.value,\n        fastOnce: $<HTMLInputElement>(\"#fastOnceCheck\").checked,\n        subfolder,\n        subfolderOnce: $<HTMLInputElement>(\"#subfolderOnceCheck\").checked,\n      }\n    });\n  }\n  catch (ex) {\n    const not = $(\"#notification\");\n    const msg = _(ex.message || ex);\n    not.textContent = msg || ex.message || ex;\n    not.style.display = \"block\";\n  }\n}\n\nclass Filter {\n  active: boolean;\n\n  checkElem: HTMLInputElement;\n\n  container: HTMLElement;\n\n  elem: HTMLLabelElement;\n\n  id: string;\n\n  label: string;\n\n  constructor(container: HTMLElement, raw: any, active = false) {\n    Object.assign(this, raw);\n    this.active = active;\n    this.container = container;\n\n    this.elem = document.createElement(\"label\");\n    this.elem.classList.add(\"filter\");\n    this.elem.setAttribute(\"title\", this.elem.textContent = this.label);\n    this.checkElem = document.createElement(\"input\");\n    this.checkElem.setAttribute(\"type\", \"checkbox\");\n    this.checkElem.checked = active;\n    this.elem.insertBefore(this.checkElem, this.elem.firstChild);\n    this.container.appendChild(this.elem);\n    this.checkElem.addEventListener(\"change\", this.changed.bind(this));\n  }\n\n  changed() {\n    PORT.postMessage({\n      msg: \"filter-changed\",\n      id: this.id,\n      value: this.checkElem.checked\n    });\n  }\n}\n\nfunction setFiltersInternal(\n    desc: string, filters: any[], active: Set<string>) {\n  const container = $(desc);\n  container.textContent = \"\";\n  for (let filter of filters) {\n    filter = new Filter(container, filter, active.has(filter.id));\n  }\n}\n\nfunction setFilters(filters: any) {\n  const {\n    linkFilterDescs = [],\n    mediaFilterDescs = [],\n    activeFilters = []\n  } = filters;\n  const active: Set<string> = new Set(activeFilters);\n  setFiltersInternal(\"#linksFilters\", linkFilterDescs, active);\n  setFiltersInternal(\"#mediaFilters\", mediaFilterDescs, active);\n}\n\nfunction cancel() {\n  PORT.postMessage(\"cancel\");\n  return true;\n}\n\nasync function init() {\n  await Promise.all([MASK.init(), FASTFILTER.init(), SUBFOLDER.init()]);\n  Mask = new Dropdown(\"#mask\", MASK.values);\n  Mask.on(\"changed\", clearErrors);\n  FastFilter = new Dropdown(\"#fast\", FASTFILTER.values);\n  FastFilter.on(\"changed\", () => {\n    PORT.postMessage({\n      msg: \"fast-filter\",\n      fastFilter: FastFilter.value\n    });\n  });\n  Subfolder = new Dropdown(\"#subfolder\", SUBFOLDER.values);\n  Subfolder.on(\"changed\", clearErrors);\n}\n\nconst LOADED = new Promise(resolve => {\n  addEventListener(\"load\", function dom() {\n    removeEventListener(\"load\", dom);\n    locale.then(() => resolve(true));\n  });\n});\n\n\naddEventListener(\"DOMContentLoaded\", function dom() {\n  removeEventListener(\"DOMContentLoaded\", dom);\n\n  init().catch(console.error);\n\n  localize(document.documentElement);\n\n  $(\"#donate\").addEventListener(\"click\", () => {\n    PORT.postMessage({\n      msg: \"donate\",\n    });\n  });\n  $(\"#statusPrefs\").addEventListener(\"click\", () => {\n    PORT.postMessage({\n      msg: \"prefs\",\n    });\n  });\n  $(\"#btnDownload\").addEventListener(\"click\", () => download(false));\n  $(\"#btnPaused\").addEventListener(\"click\", () => download(true));\n  $(\"#btnCancel\").addEventListener(\n    \"click\", cancel);\n  $(\"#fastDisableOthers\").addEventListener(\"change\", () => {\n    PORT.postMessage({\n      msg: \"onlyfast\",\n      fast: $<HTMLInputElement>(\"#fastDisableOthers\").checked\n    });\n  });\n\n  Keys.on(\"Enter\", \"Return\", () => {\n    download(false);\n    return true;\n  });\n  Keys.on(\"ACCEL-Enter\", \"ACCEL-Return\", () => {\n    download(true);\n    return true;\n  });\n\n  PORT.onMessage.addListener(async (msg: any) => {\n    try {\n      await LOADED;\n      switch (msg.msg) {\n      case \"items\": {\n        const {type = \"links\", links = [], media = []} = msg.data;\n        const treeConfig = JSON.parse(\n          await Prefs.get(\"tree-config-select\", \"{}\"));\n        requestAnimationFrame(() => {\n          Table = new SelectionTable(treeConfig, type, links, media);\n        });\n        return;\n      }\n\n      case \"filters\":\n        setFilters(msg.data);\n        return;\n\n      case \"item-delta\":\n        requestAnimationFrame(() => {\n          Table.applyDeltas(msg.data);\n        });\n        return;\n\n      default:\n        throw Error(\"Unhandled message\");\n      }\n    }\n    catch (ex) {\n      console.error(\"Failed to process message\", msg, ex);\n    }\n  });\n\n  Keys.on(\"Escape\", cancel);\n\n  hookButton($(\"#maskButton\"));\n});\n\naddEventListener(\"contextmenu\", event => {\n  event.preventDefault();\n  return false;\n});\n\n\naddEventListener(\"beforeunload\", function() {\n  PORT.disconnect();\n});\n\nnew WindowState(PORT);\n","module.exports = crypto;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"select\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdtalite\"] = self[\"webpackChunkdtalite\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"common\"], () => (__webpack_require__(\"./windows/select.ts\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}