<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>STEPTWO Recipes</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <style>
    body{font-family:sans-serif;margin:0;padding:20px;background:#fff;color:#111;}
    body.dark{background:#1e1e1e;color:#ddd;}
    input, textarea{width:100%;margin:5px 0;padding:6px;}
    button{margin-top:10px;padding:8px 12px;}
    .recipes{margin-top:20px;}
  </style>
</head>
<body>
  <div id="app">
    <h2>Create Recipe</h2>
    <label>Recipe Name</label>
    <input v-model="name" placeholder="My Recipe" />
    <label>CSS Selector</label>
    <input v-model="selector" placeholder="img.gallery-item" />
    <label>Description</label>
    <textarea v-model="description" rows="3"></textarea>
    <label>Concurrency (1-10)</label>
    <input type="number" v-model.number="concurrency" min="1" max="10" />
    <label>Retry Limit (0-5)</label>
    <input type="number" v-model.number="retryLimit" min="0" max="5" />
    <label>Filename Mask</label>
    <input v-model="mask" placeholder="*name* -*num*.*ext*" />
    <small>Tokens: *name*, *num*, *ext*, *date*, *host*, *subdirs*</small>
    <div style="margin-top:5px;font-size:12px;color:#555;">Preview: {{maskPreview}}</div>
    <button @click="save">Save Recipe</button>

    <div class="recipes" v-if="recipes.length">
      <h3>Saved Recipes</h3>
      <ul>
        <li v-for="r in recipes">
          <strong>{{r.name}}</strong> â€” {{r.selector}}
          <button @click="remove(r)">Delete</button>
        </li>
      </ul>
    </div>
    <label><input type="checkbox" v-model="autoDetect"/> Use Site Profiles (auto)</label>
    <details style="margin-top:10px;">
      <summary>Bundled Site Profiles</summary>
      <ul>
        <li v-for="(p, host) in profiles"><strong>{{host}}</strong>: {{p.selector}}</li>
      </ul>
    </details>
    <label>Host Parallel Limit (1-5)</label>
    <input type="number" v-model.number="hostLimit" min="1" max="5" />
    <label><input type="checkbox" v-model="darkMode"/> Dark Mode</label>
    <label>Download Subfolder (optional)</label>
    <input v-model="downloadFolder" placeholder="photos/holiday" />
    <label>Min Image Width (px)</label>
    <input type="number" v-model.number="minWidth" min="0" />
    <label>Min Image Height (px)</label>
    <input type="number" v-model.number="minHeight" min="0" />
    <label>Allowed Formats</label>
    <div>
      <label><input type="checkbox" v-model="formats.jpeg"/> JPEG</label>
      <label><input type="checkbox" v-model="formats.png"/> PNG</label>
      <label><input type="checkbox" v-model="formats.webp"/> WEBP</label>
      <label><input type="checkbox" v-model="formats.gif"/> GIF</label>
    </div>
    <h3>Macro Recorder</h3>
    <button id="recordBtn">Start Recording</button>
    <div id="macroStatus" style="font-size:12px;color:#888;margin-top:4px;"></div>
  </div>
  <script src="options.js"></script>
</body>
</html>